<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>eVelo - Portfolio Strategy Simulator</title>
    <script type="module" crossorigin>(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const n of i)if(n.type==="childList")for(const s of n.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function e(i){const n={};return i.integrity&&(n.integrity=i.integrity),i.referrerPolicy&&(n.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?n.credentials="include":i.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(i){if(i.ep)return;i.ep=!0;const n=e(i);fetch(i.href,n)}})();const Tu="modulepreload",Lu=function(a,t){return new URL(a,t).href},Vo={},Rc=function(t,e,r){let i=Promise.resolve();if(e&&e.length>0){let s=function(h){return Promise.all(h.map(p=>Promise.resolve(p).then(m=>({status:"fulfilled",value:m}),m=>({status:"rejected",reason:m}))))};const o=document.getElementsByTagName("link"),l=document.querySelector("meta[property=csp-nonce]"),d=l?.nonce||l?.getAttribute("nonce");i=s(e.map(h=>{if(h=Lu(h,r),h in Vo)return;Vo[h]=!0;const p=h.endsWith(".css"),m=p?'[rel="stylesheet"]':"";if(!!r)for(let k=o.length-1;k>=0;k--){const S=o[k];if(S.href===h&&(!p||S.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${h}"]${m}`))return;const g=document.createElement("link");if(g.rel=p?"stylesheet":Tu,p||(g.as="script"),g.crossOrigin="",g.href=h,d&&g.setAttribute("nonce",d),document.head.appendChild(g),p)return new Promise((k,S)=>{g.addEventListener("load",k),g.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${h}`)))})}))}function n(s){const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=s,window.dispatchEvent(o),!o.defaultPrevented)throw s}return i.then(s=>{for(const o of s||[])o.status==="rejected"&&n(o.reason);return t().catch(n)})};var Ou=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zc(a){return a&&a.__esModule&&Object.prototype.hasOwnProperty.call(a,"default")?a.default:a}var Ui={exports:{}},Bu=Ui.exports,jo;function Iu(){return jo||(jo=1,(function(a,t){(function(e,r){a.exports=r()})(Bu,function(){var e=function(c,u){return(e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,b){f.__proto__=b}||function(f,b){for(var x in b)Object.prototype.hasOwnProperty.call(b,x)&&(f[x]=b[x])})(c,u)},r=function(){return(r=Object.assign||function(c){for(var u,f=1,b=arguments.length;f<b;f++)for(var x in u=arguments[f])Object.prototype.hasOwnProperty.call(u,x)&&(c[x]=u[x]);return c}).apply(this,arguments)};function i(c,u,f){for(var b,x=0,y=u.length;x<y;x++)!b&&x in u||((b=b||Array.prototype.slice.call(u,0,x))[x]=u[x]);return c.concat(b||Array.prototype.slice.call(u))}var n=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:Ou,s=Object.keys,o=Array.isArray;function l(c,u){return typeof u!="object"||s(u).forEach(function(f){c[f]=u[f]}),c}typeof Promise>"u"||n.Promise||(n.Promise=Promise);var d=Object.getPrototypeOf,h={}.hasOwnProperty;function p(c,u){return h.call(c,u)}function m(c,u){typeof u=="function"&&(u=u(d(c))),(typeof Reflect>"u"?s:Reflect.ownKeys)(u).forEach(function(f){g(c,f,u[f])})}var v=Object.defineProperty;function g(c,u,f,b){v(c,u,l(f&&p(f,"get")&&typeof f.get=="function"?{get:f.get,set:f.set,configurable:!0}:{value:f,configurable:!0,writable:!0},b))}function k(c){return{from:function(u){return c.prototype=Object.create(u.prototype),g(c.prototype,"constructor",c),{extend:m.bind(null,c.prototype)}}}}var S=Object.getOwnPropertyDescriptor,D=[].slice;function M(c,u,f){return D.call(c,u,f)}function I(c,u){return u(c)}function W(c){if(!c)throw new Error("Assertion Failed")}function H(c){n.setImmediate?setImmediate(c):setTimeout(c,0)}function X(c,u){if(typeof u=="string"&&p(c,u))return c[u];if(!u)return c;if(typeof u!="string"){for(var f=[],b=0,x=u.length;b<x;++b){var y=X(c,u[b]);f.push(y)}return f}var A=u.indexOf(".");if(A!==-1){var E=c[u.substr(0,A)];return E==null?void 0:X(E,u.substr(A+1))}}function q(c,u,f){if(c&&u!==void 0&&!("isFrozen"in Object&&Object.isFrozen(c)))if(typeof u!="string"&&"length"in u){W(typeof f!="string"&&"length"in f);for(var b=0,x=u.length;b<x;++b)q(c,u[b],f[b])}else{var y,A,E=u.indexOf(".");E!==-1?(y=u.substr(0,E),(A=u.substr(E+1))===""?f===void 0?o(c)&&!isNaN(parseInt(y))?c.splice(y,1):delete c[y]:c[y]=f:q(E=!(E=c[y])||!p(c,y)?c[y]={}:E,A,f)):f===void 0?o(c)&&!isNaN(parseInt(u))?c.splice(u,1):delete c[u]:c[u]=f}}function w(c){var u,f={};for(u in c)p(c,u)&&(f[u]=c[u]);return f}var C=[].concat;function L(c){return C.apply([],c)}var Nt="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(L([8,16,32,64].map(function(c){return["Int","Uint","Float"].map(function(u){return u+c+"Array"})}))).filter(function(c){return n[c]}),Y=new Set(Nt.map(function(c){return n[c]})),K=null;function tt(c){return K=new WeakMap,c=(function u(f){if(!f||typeof f!="object")return f;var b=K.get(f);if(b)return b;if(o(f)){b=[],K.set(f,b);for(var x=0,y=f.length;x<y;++x)b.push(u(f[x]))}else if(Y.has(f.constructor))b=f;else{var A,E=d(f);for(A in b=E===Object.prototype?{}:Object.create(E),K.set(f,b),f)p(f,A)&&(b[A]=u(f[A]))}return b})(c),K=null,c}var ht={}.toString;function pt(c){return ht.call(c).slice(8,-1)}var lt=typeof Symbol<"u"?Symbol.iterator:"@@iterator",G=typeof lt=="symbol"?function(c){var u;return c!=null&&(u=c[lt])&&u.apply(c)}:function(){return null};function Z(c,u){return u=c.indexOf(u),0<=u&&c.splice(u,1),0<=u}var J={};function bt(c){var u,f,b,x;if(arguments.length===1){if(o(c))return c.slice();if(this===J&&typeof c=="string")return[c];if(x=G(c)){for(f=[];!(b=x.next()).done;)f.push(b.value);return f}if(c==null)return[c];if(typeof(u=c.length)!="number")return[c];for(f=new Array(u);u--;)f[u]=c[u];return f}for(u=arguments.length,f=new Array(u);u--;)f[u]=arguments[u];return f}var dt=typeof Symbol<"u"?function(c){return c[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},he=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],Le=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(he),gt={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function at(c,u){this.name=c,this.message=u}function ft(c,u){return c+". Errors: "+Object.keys(u).map(function(f){return u[f].toString()}).filter(function(f,b,x){return x.indexOf(f)===b}).join(`
`)}function wt(c,u,f,b){this.failures=u,this.failedKeys=b,this.successCount=f,this.message=ft(c,u)}function kt(c,u){this.name="BulkError",this.failures=Object.keys(u).map(function(f){return u[f]}),this.failuresByPos=u,this.message=ft(c,this.failures)}k(at).from(Error).extend({toString:function(){return this.name+": "+this.message}}),k(wt).from(at),k(kt).from(at);var se=Le.reduce(function(c,u){return c[u]=u+"Error",c},{}),Rt=at,rt=Le.reduce(function(c,u){var f=u+"Error";function b(x,y){this.name=f,x?typeof x=="string"?(this.message="".concat(x).concat(y?`
 `+y:""),this.inner=y||null):typeof x=="object"&&(this.message="".concat(x.name," ").concat(x.message),this.inner=x):(this.message=gt[u]||f,this.inner=null)}return k(b).from(Rt),c[u]=b,c},{});rt.Syntax=SyntaxError,rt.Type=TypeError,rt.Range=RangeError;var Yt=he.reduce(function(c,u){return c[u+"Error"]=rt[u],c},{}),xt=Le.reduce(function(c,u){return["Syntax","Type","Range"].indexOf(u)===-1&&(c[u+"Error"]=rt[u]),c},{});function vt(){}function Ut(c){return c}function Vt(c,u){return c==null||c===Ut?u:function(f){return u(c(f))}}function Bt(c,u){return function(){c.apply(this,arguments),u.apply(this,arguments)}}function zt(c,u){return c===vt?u:function(){var f=c.apply(this,arguments);f!==void 0&&(arguments[0]=f);var b=this.onsuccess,x=this.onerror;this.onsuccess=null,this.onerror=null;var y=u.apply(this,arguments);return b&&(this.onsuccess=this.onsuccess?Bt(b,this.onsuccess):b),x&&(this.onerror=this.onerror?Bt(x,this.onerror):x),y!==void 0?y:f}}function Me(c,u){return c===vt?u:function(){c.apply(this,arguments);var f=this.onsuccess,b=this.onerror;this.onsuccess=this.onerror=null,u.apply(this,arguments),f&&(this.onsuccess=this.onsuccess?Bt(f,this.onsuccess):f),b&&(this.onerror=this.onerror?Bt(b,this.onerror):b)}}function Mt(c,u){return c===vt?u:function(f){var b=c.apply(this,arguments);l(f,b);var x=this.onsuccess,y=this.onerror;return this.onsuccess=null,this.onerror=null,f=u.apply(this,arguments),x&&(this.onsuccess=this.onsuccess?Bt(x,this.onsuccess):x),y&&(this.onerror=this.onerror?Bt(y,this.onerror):y),b===void 0?f===void 0?void 0:f:l(b,f)}}function Gt(c,u){return c===vt?u:function(){return u.apply(this,arguments)!==!1&&c.apply(this,arguments)}}function Te(c,u){return c===vt?u:function(){var f=c.apply(this,arguments);if(f&&typeof f.then=="function"){for(var b=this,x=arguments.length,y=new Array(x);x--;)y[x]=arguments[x];return f.then(function(){return u.apply(b,y)})}return u.apply(this,arguments)}}xt.ModifyError=wt,xt.DexieError=at,xt.BulkError=kt;var ue=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function De(c){ue=c}var Be={},ae=100,Nt=typeof Promise>"u"?[]:(function(){var c=Promise.resolve();if(typeof crypto>"u"||!crypto.subtle)return[c,d(c),c];var u=crypto.subtle.digest("SHA-512",new Uint8Array([0]));return[u,d(u),c]})(),he=Nt[0],Le=Nt[1],Nt=Nt[2],Le=Le&&Le.then,Jt=he&&he.constructor,Ee=!!Nt,Ke=function(c,u){ga.push([c,u]),Ie&&(queueMicrotask(lu),Ie=!1)},Xr=!0,Ie=!0,oe=[],He=[],Kr=Ut,or={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:vt,pgp:!1,env:{},finalize:vt},mt=or,ga=[],Mr=0,ti=[];function ct(c){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var u=this._PSD=mt;if(typeof c!="function"){if(c!==Be)throw new TypeError("Not a function");return this._state=arguments[1],this._value=arguments[2],void(this._state===!1&&An(this,this._value))}this._state=null,this._value=null,++u.ref,(function f(b,x){try{x(function(y){if(b._state===null){if(y===b)throw new TypeError("A promise cannot be resolved with itself.");var A=b._lib&&_r();y&&typeof y.then=="function"?f(b,function(E,R){y instanceof ct?y._then(E,R):y.then(E,R)}):(b._state=!0,b._value=y,no(b)),A&&Qr()}},An.bind(null,b))}catch(y){An(b,y)}})(this,c)}var Sn={get:function(){var c=mt,u=ii;function f(b,x){var y=this,A=!c.global&&(c!==mt||u!==ii),E=A&&!cr(),R=new ct(function(z,F){Mn(y,new io(oo(b,c,A,E),oo(x,c,A,E),z,F,c))});return this._consoleTask&&(R._consoleTask=this._consoleTask),R}return f.prototype=Be,f},set:function(c){g(this,"then",c&&c.prototype===Be?Sn:{get:function(){return c},set:Sn.set})}};function io(c,u,f,b,x){this.onFulfilled=typeof c=="function"?c:null,this.onRejected=typeof u=="function"?u:null,this.resolve=f,this.reject=b,this.psd=x}function An(c,u){var f,b;He.push(u),c._state===null&&(f=c._lib&&_r(),u=Kr(u),c._state=!1,c._value=u,b=c,oe.some(function(x){return x._value===b._value})||oe.push(b),no(c),f&&Qr())}function no(c){var u=c._listeners;c._listeners=[];for(var f=0,b=u.length;f<b;++f)Mn(c,u[f]);var x=c._PSD;--x.ref||x.finalize(),Mr===0&&(++Mr,Ke(function(){--Mr==0&&Dn()},[]))}function Mn(c,u){if(c._state!==null){var f=c._state?u.onFulfilled:u.onRejected;if(f===null)return(c._state?u.resolve:u.reject)(c._value);++u.psd.ref,++Mr,Ke(ou,[f,c,u])}else c._listeners.push(u)}function ou(c,u,f){try{var b,x=u._value;!u._state&&He.length&&(He=[]),b=ue&&u._consoleTask?u._consoleTask.run(function(){return c(x)}):c(x),u._state||He.indexOf(x)!==-1||(function(y){for(var A=oe.length;A;)if(oe[--A]._value===y._value)return oe.splice(A,1)})(u),f.resolve(b)}catch(y){f.reject(y)}finally{--Mr==0&&Dn(),--f.psd.ref||f.psd.finalize()}}function lu(){Dr(or,function(){_r()&&Qr()})}function _r(){var c=Xr;return Ie=Xr=!1,c}function Qr(){var c,u,f;do for(;0<ga.length;)for(c=ga,ga=[],f=c.length,u=0;u<f;++u){var b=c[u];b[0].apply(null,b[1])}while(0<ga.length);Ie=Xr=!0}function Dn(){var c=oe;oe=[],c.forEach(function(b){b._PSD.onunhandled.call(null,b._value,b)});for(var u=ti.slice(0),f=u.length;f;)u[--f]()}function ei(c){return new ct(Be,!1,c)}function Kt(c,u){var f=mt;return function(){var b=_r(),x=mt;try{return dr(f,!0),c.apply(this,arguments)}catch(y){u&&u(y)}finally{dr(x,!1),b&&Qr()}}}m(ct.prototype,{then:Sn,_then:function(c,u){Mn(this,new io(null,null,c,u,mt))},catch:function(c){if(arguments.length===1)return this.then(null,c);var u=c,f=arguments[1];return typeof u=="function"?this.then(null,function(b){return(b instanceof u?f:ei)(b)}):this.then(null,function(b){return(b&&b.name===u?f:ei)(b)})},finally:function(c){return this.then(function(u){return ct.resolve(c()).then(function(){return u})},function(u){return ct.resolve(c()).then(function(){return ei(u)})})},timeout:function(c,u){var f=this;return c<1/0?new ct(function(b,x){var y=setTimeout(function(){return x(new rt.Timeout(u))},c);f.then(b,x).finally(clearTimeout.bind(null,y))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&g(ct.prototype,Symbol.toStringTag,"Dexie.Promise"),or.env=so(),m(ct,{all:function(){var c=bt.apply(null,arguments).map(ni);return new ct(function(u,f){c.length===0&&u([]);var b=c.length;c.forEach(function(x,y){return ct.resolve(x).then(function(A){c[y]=A,--b||u(c)},f)})})},resolve:function(c){return c instanceof ct?c:c&&typeof c.then=="function"?new ct(function(u,f){c.then(u,f)}):new ct(Be,!0,c)},reject:ei,race:function(){var c=bt.apply(null,arguments).map(ni);return new ct(function(u,f){c.map(function(b){return ct.resolve(b).then(u,f)})})},PSD:{get:function(){return mt},set:function(c){return mt=c}},totalEchoes:{get:function(){return ii}},newPSD:lr,usePSD:Dr,scheduler:{get:function(){return Ke},set:function(c){Ke=c}},rejectionMapper:{get:function(){return Kr},set:function(c){Kr=c}},follow:function(c,u){return new ct(function(f,b){return lr(function(x,y){var A=mt;A.unhandleds=[],A.onunhandled=y,A.finalize=Bt(function(){var E,R=this;E=function(){R.unhandleds.length===0?x():y(R.unhandleds[0])},ti.push(function z(){E(),ti.splice(ti.indexOf(z),1)}),++Mr,Ke(function(){--Mr==0&&Dn()},[])},A.finalize),c()},u,f,b)})}}),Jt&&(Jt.allSettled&&g(ct,"allSettled",function(){var c=bt.apply(null,arguments).map(ni);return new ct(function(u){c.length===0&&u([]);var f=c.length,b=new Array(f);c.forEach(function(x,y){return ct.resolve(x).then(function(A){return b[y]={status:"fulfilled",value:A}},function(A){return b[y]={status:"rejected",reason:A}}).then(function(){return--f||u(b)})})})}),Jt.any&&typeof AggregateError<"u"&&g(ct,"any",function(){var c=bt.apply(null,arguments).map(ni);return new ct(function(u,f){c.length===0&&f(new AggregateError([]));var b=c.length,x=new Array(b);c.forEach(function(y,A){return ct.resolve(y).then(function(E){return u(E)},function(E){x[A]=E,--b||f(new AggregateError(x))})})})}),Jt.withResolvers&&(ct.withResolvers=Jt.withResolvers));var le={awaits:0,echoes:0,id:0},cu=0,ri=[],ai=0,ii=0,du=0;function lr(c,u,f,b){var x=mt,y=Object.create(x);return y.parent=x,y.ref=0,y.global=!1,y.id=++du,or.env,y.env=Ee?{Promise:ct,PromiseProp:{value:ct,configurable:!0,writable:!0},all:ct.all,race:ct.race,allSettled:ct.allSettled,any:ct.any,resolve:ct.resolve,reject:ct.reject}:{},u&&l(y,u),++x.ref,y.finalize=function(){--this.parent.ref||this.parent.finalize()},b=Dr(y,c,f,b),y.ref===0&&y.finalize(),b}function Jr(){return le.id||(le.id=++cu),++le.awaits,le.echoes+=ae,le.id}function cr(){return!!le.awaits&&(--le.awaits==0&&(le.id=0),le.echoes=le.awaits*ae,!0)}function ni(c){return le.echoes&&c&&c.constructor===Jt?(Jr(),c.then(function(u){return cr(),u},function(u){return cr(),$t(u)})):c}function uu(){var c=ri[ri.length-1];ri.pop(),dr(c,!1)}function dr(c,u){var f,b=mt;(u?!le.echoes||ai++&&c===mt:!ai||--ai&&c===mt)||queueMicrotask(u?function(x){++ii,le.echoes&&--le.echoes!=0||(le.echoes=le.awaits=le.id=0),ri.push(mt),dr(x,!0)}.bind(null,c):uu),c!==mt&&(mt=c,b===or&&(or.env=so()),Ee&&(f=or.env.Promise,u=c.env,(b.global||c.global)&&(Object.defineProperty(n,"Promise",u.PromiseProp),f.all=u.all,f.race=u.race,f.resolve=u.resolve,f.reject=u.reject,u.allSettled&&(f.allSettled=u.allSettled),u.any&&(f.any=u.any))))}function so(){var c=n.Promise;return Ee?{Promise:c,PromiseProp:Object.getOwnPropertyDescriptor(n,"Promise"),all:c.all,race:c.race,allSettled:c.allSettled,any:c.any,resolve:c.resolve,reject:c.reject}:{}}function Dr(c,u,f,b,x){var y=mt;try{return dr(c,!0),u(f,b,x)}finally{dr(y,!1)}}function oo(c,u,f,b){return typeof c!="function"?c:function(){var x=mt;f&&Jr(),dr(u,!0);try{return c.apply(this,arguments)}finally{dr(x,!1),b&&queueMicrotask(cr)}}}function En(c){Promise===Jt&&le.echoes===0?ai===0?c():enqueueNativeMicroTask(c):setTimeout(c,0)}(""+Le).indexOf("[native code]")===-1&&(Jr=cr=vt);var $t=ct.reject,Er="ï¿¿",_e="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",lo="String expected.",Zr=[],si="__dbnames",Pn="readonly",Rn="readwrite";function Pr(c,u){return c?u?function(){return c.apply(this,arguments)&&u.apply(this,arguments)}:c:u}var co={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function oi(c){return typeof c!="string"||/\./.test(c)?function(u){return u}:function(u){return u[c]===void 0&&c in u&&delete(u=tt(u))[c],u}}function uo(){throw rt.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Ot(c,u){try{var f=ho(c),b=ho(u);if(f!==b)return f==="Array"?1:b==="Array"?-1:f==="binary"?1:b==="binary"?-1:f==="string"?1:b==="string"?-1:f==="Date"?1:b!=="Date"?NaN:-1;switch(f){case"number":case"Date":case"string":return u<c?1:c<u?-1:0;case"binary":return(function(x,y){for(var A=x.length,E=y.length,R=A<E?A:E,z=0;z<R;++z)if(x[z]!==y[z])return x[z]<y[z]?-1:1;return A===E?0:A<E?-1:1})(po(c),po(u));case"Array":return(function(x,y){for(var A=x.length,E=y.length,R=A<E?A:E,z=0;z<R;++z){var F=Ot(x[z],y[z]);if(F!==0)return F}return A===E?0:A<E?-1:1})(c,u)}}catch{}return NaN}function ho(c){var u=typeof c;return u!="object"?u:ArrayBuffer.isView(c)?"binary":(c=pt(c),c==="ArrayBuffer"?"binary":c)}function po(c){return c instanceof Uint8Array?c:ArrayBuffer.isView(c)?new Uint8Array(c.buffer,c.byteOffset,c.byteLength):new Uint8Array(c)}function li(c,u,f){var b=c.schema.yProps;return b?(u&&0<f.numFailures&&(u=u.filter(function(x,y){return!f.failures[y]})),Promise.all(b.map(function(x){return x=x.updatesTable,u?c.db.table(x).where("k").anyOf(u).delete():c.db.table(x).clear()})).then(function(){return f})):f}var ma=(fo.prototype.execute=function(c){var u=this["@@propmod"];if(u.add!==void 0){var f=u.add;if(o(f))return i(i([],o(c)?c:[],!0),f).sort();if(typeof f=="number")return(Number(c)||0)+f;if(typeof f=="bigint")try{return BigInt(c)+f}catch{return BigInt(0)+f}throw new TypeError("Invalid term ".concat(f))}if(u.remove!==void 0){var b=u.remove;if(o(b))return o(c)?c.filter(function(x){return!b.includes(x)}).sort():[];if(typeof b=="number")return Number(c)-b;if(typeof b=="bigint")try{return BigInt(c)-b}catch{return BigInt(0)-b}throw new TypeError("Invalid subtrahend ".concat(b))}return f=(f=u.replacePrefix)===null||f===void 0?void 0:f[0],f&&typeof c=="string"&&c.startsWith(f)?u.replacePrefix[1]+c.substring(f.length):c},fo);function fo(c){this["@@propmod"]=c}function go(c,u){for(var f=s(u),b=f.length,x=!1,y=0;y<b;++y){var A=f[y],E=u[A],R=X(c,A);E instanceof ma?(q(c,A,E.execute(R)),x=!0):R!==E&&(q(c,A,E),x=!0)}return x}var mo=(qt.prototype._trans=function(c,u,f){var b=this._tx||mt.trans,x=this.name,y=ue&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(c==="readonly"?"read":"write"," ").concat(this.name));function A(z,F,P){if(!P.schema[x])throw new rt.NotFound("Table "+x+" not part of transaction");return u(P.idbtrans,P)}var E=_r();try{var R=b&&b.db._novip===this.db._novip?b===mt.trans?b._promise(c,A,f):lr(function(){return b._promise(c,A,f)},{trans:b,transless:mt.transless||mt}):(function z(F,P,j,T){if(F.idbdb&&(F._state.openComplete||mt.letThrough||F._vip)){var O=F._createTransaction(P,j,F._dbSchema);try{O.create(),F._state.PR1398_maxLoop=3}catch(B){return B.name===se.InvalidState&&F.isOpen()&&0<--F._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),F.close({disableAutoOpen:!1}),F.open().then(function(){return z(F,P,j,T)})):$t(B)}return O._promise(P,function(B,V){return lr(function(){return mt.trans=O,T(B,V,O)})}).then(function(B){if(P==="readwrite")try{O.idbtrans.commit()}catch{}return P==="readonly"?B:O._completion.then(function(){return B})})}if(F._state.openComplete)return $t(new rt.DatabaseClosed(F._state.dbOpenError));if(!F._state.isBeingOpened){if(!F._state.autoOpen)return $t(new rt.DatabaseClosed);F.open().catch(vt)}return F._state.dbReadyPromise.then(function(){return z(F,P,j,T)})})(this.db,c,[this.name],A);return y&&(R._consoleTask=y,R=R.catch(function(z){return console.trace(z),$t(z)})),R}finally{E&&Qr()}},qt.prototype.get=function(c,u){var f=this;return c&&c.constructor===Object?this.where(c).first(u):c==null?$t(new rt.Type("Invalid argument to Table.get()")):this._trans("readonly",function(b){return f.core.get({trans:b,key:c}).then(function(x){return f.hook.reading.fire(x)})}).then(u)},qt.prototype.where=function(c){if(typeof c=="string")return new this.db.WhereClause(this,c);if(o(c))return new this.db.WhereClause(this,"[".concat(c.join("+"),"]"));var u=s(c);if(u.length===1)return this.where(u[0]).equals(c[u[0]]);var f=this.schema.indexes.concat(this.schema.primKey).filter(function(E){if(E.compound&&u.every(function(z){return 0<=E.keyPath.indexOf(z)})){for(var R=0;R<u.length;++R)if(u.indexOf(E.keyPath[R])===-1)return!1;return!0}return!1}).sort(function(E,R){return E.keyPath.length-R.keyPath.length})[0];if(f&&this.db._maxKey!==Er){var y=f.keyPath.slice(0,u.length);return this.where(y).equals(y.map(function(R){return c[R]}))}!f&&ue&&console.warn("The query ".concat(JSON.stringify(c)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(u.join("+"),"]"));var b=this.schema.idxByName;function x(E,R){return Ot(E,R)===0}var A=u.reduce(function(P,R){var z=P[0],F=P[1],P=b[R],j=c[R];return[z||P,z||!P?Pr(F,P&&P.multi?function(T){return T=X(T,R),o(T)&&T.some(function(O){return x(j,O)})}:function(T){return x(j,X(T,R))}):F]},[null,null]),y=A[0],A=A[1];return y?this.where(y.name).equals(c[y.keyPath]).filter(A):f?this.filter(A):this.where(u).equals("")},qt.prototype.filter=function(c){return this.toCollection().and(c)},qt.prototype.count=function(c){return this.toCollection().count(c)},qt.prototype.offset=function(c){return this.toCollection().offset(c)},qt.prototype.limit=function(c){return this.toCollection().limit(c)},qt.prototype.each=function(c){return this.toCollection().each(c)},qt.prototype.toArray=function(c){return this.toCollection().toArray(c)},qt.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},qt.prototype.orderBy=function(c){return new this.db.Collection(new this.db.WhereClause(this,o(c)?"[".concat(c.join("+"),"]"):c))},qt.prototype.reverse=function(){return this.toCollection().reverse()},qt.prototype.mapToClass=function(c){var u,f=this.db,b=this.name;function x(){return u!==null&&u.apply(this,arguments)||this}(this.schema.mappedClass=c).prototype instanceof uo&&((function(R,z){if(typeof z!="function"&&z!==null)throw new TypeError("Class extends value "+String(z)+" is not a constructor or null");function F(){this.constructor=R}e(R,z),R.prototype=z===null?Object.create(z):(F.prototype=z.prototype,new F)})(x,u=c),Object.defineProperty(x.prototype,"db",{get:function(){return f},enumerable:!1,configurable:!0}),x.prototype.table=function(){return b},c=x);for(var y=new Set,A=c.prototype;A;A=d(A))Object.getOwnPropertyNames(A).forEach(function(R){return y.add(R)});function E(R){if(!R)return R;var z,F=Object.create(c.prototype);for(z in R)if(!y.has(z))try{F[z]=R[z]}catch{}return F}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=E,this.hook("reading",E),c},qt.prototype.defineClass=function(){return this.mapToClass(function(c){l(this,c)})},qt.prototype.add=function(c,u){var f=this,b=this.schema.primKey,x=b.auto,y=b.keyPath,A=c;return y&&x&&(A=oi(y)(c)),this._trans("readwrite",function(E){return f.core.mutate({trans:E,type:"add",keys:u!=null?[u]:null,values:[A]})}).then(function(E){return E.numFailures?ct.reject(E.failures[0]):E.lastResult}).then(function(E){if(y)try{q(c,y,E)}catch{}return E})},qt.prototype.upsert=function(c,u){var f=this,b=this.schema.primKey.keyPath;return this._trans("readwrite",function(x){return f.core.get({trans:x,key:c}).then(function(y){var A=y??{};return go(A,u),b&&q(A,b,c),f.core.mutate({trans:x,type:"put",values:[A],keys:[c],upsert:!0,updates:{keys:[c],changeSpecs:[u]}}).then(function(E){return E.numFailures?ct.reject(E.failures[0]):!!y})})})},qt.prototype.update=function(c,u){return typeof c!="object"||o(c)?this.where(":id").equals(c).modify(u):(c=X(c,this.schema.primKey.keyPath),c===void 0?$t(new rt.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(c).modify(u))},qt.prototype.put=function(c,u){var f=this,b=this.schema.primKey,x=b.auto,y=b.keyPath,A=c;return y&&x&&(A=oi(y)(c)),this._trans("readwrite",function(E){return f.core.mutate({trans:E,type:"put",values:[A],keys:u!=null?[u]:null})}).then(function(E){return E.numFailures?ct.reject(E.failures[0]):E.lastResult}).then(function(E){if(y)try{q(c,y,E)}catch{}return E})},qt.prototype.delete=function(c){var u=this;return this._trans("readwrite",function(f){return u.core.mutate({trans:f,type:"delete",keys:[c]}).then(function(b){return li(u,[c],b)}).then(function(b){return b.numFailures?ct.reject(b.failures[0]):void 0})})},qt.prototype.clear=function(){var c=this;return this._trans("readwrite",function(u){return c.core.mutate({trans:u,type:"deleteRange",range:co}).then(function(f){return li(c,null,f)})}).then(function(u){return u.numFailures?ct.reject(u.failures[0]):void 0})},qt.prototype.bulkGet=function(c){var u=this;return this._trans("readonly",function(f){return u.core.getMany({keys:c,trans:f}).then(function(b){return b.map(function(x){return u.hook.reading.fire(x)})})})},qt.prototype.bulkAdd=function(c,u,f){var b=this,x=Array.isArray(u)?u:void 0,y=(f=f||(x?void 0:u))?f.allKeys:void 0;return this._trans("readwrite",function(A){var z=b.schema.primKey,E=z.auto,z=z.keyPath;if(z&&x)throw new rt.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(x&&x.length!==c.length)throw new rt.InvalidArgument("Arguments objects and keys must have the same length");var R=c.length,z=z&&E?c.map(oi(z)):c;return b.core.mutate({trans:A,type:"add",keys:x,values:z,wantResults:y}).then(function(O){var P=O.numFailures,j=O.results,T=O.lastResult,O=O.failures;if(P===0)return y?j:T;throw new kt("".concat(b.name,".bulkAdd(): ").concat(P," of ").concat(R," operations failed"),O)})})},qt.prototype.bulkPut=function(c,u,f){var b=this,x=Array.isArray(u)?u:void 0,y=(f=f||(x?void 0:u))?f.allKeys:void 0;return this._trans("readwrite",function(A){var z=b.schema.primKey,E=z.auto,z=z.keyPath;if(z&&x)throw new rt.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(x&&x.length!==c.length)throw new rt.InvalidArgument("Arguments objects and keys must have the same length");var R=c.length,z=z&&E?c.map(oi(z)):c;return b.core.mutate({trans:A,type:"put",keys:x,values:z,wantResults:y}).then(function(O){var P=O.numFailures,j=O.results,T=O.lastResult,O=O.failures;if(P===0)return y?j:T;throw new kt("".concat(b.name,".bulkPut(): ").concat(P," of ").concat(R," operations failed"),O)})})},qt.prototype.bulkUpdate=function(c){var u=this,f=this.core,b=c.map(function(A){return A.key}),x=c.map(function(A){return A.changes}),y=[];return this._trans("readwrite",function(A){return f.getMany({trans:A,keys:b,cache:"clone"}).then(function(E){var R=[],z=[];c.forEach(function(P,j){var T=P.key,O=P.changes,B=E[j];if(B){for(var V=0,N=Object.keys(O);V<N.length;V++){var U=N[V],_=O[U];if(U===u.schema.primKey.keyPath){if(Ot(_,T)!==0)throw new rt.Constraint("Cannot update primary key in bulkUpdate()")}else q(B,U,_)}y.push(j),R.push(T),z.push(B)}});var F=R.length;return f.mutate({trans:A,type:"put",keys:R,values:z,updates:{keys:b,changeSpecs:x}}).then(function(P){var j=P.numFailures,T=P.failures;if(j===0)return F;for(var O=0,B=Object.keys(T);O<B.length;O++){var V,N=B[O],U=y[Number(N)];U!=null&&(V=T[N],delete T[N],T[U]=V)}throw new kt("".concat(u.name,".bulkUpdate(): ").concat(j," of ").concat(F," operations failed"),T)})})})},qt.prototype.bulkDelete=function(c){var u=this,f=c.length;return this._trans("readwrite",function(b){return u.core.mutate({trans:b,type:"delete",keys:c}).then(function(x){return li(u,c,x)})}).then(function(A){var x=A.numFailures,y=A.lastResult,A=A.failures;if(x===0)return y;throw new kt("".concat(u.name,".bulkDelete(): ").concat(x," of ").concat(f," operations failed"),A)})},qt);function qt(){}function ba(c){function u(A,E){if(E){for(var R=arguments.length,z=new Array(R-1);--R;)z[R-1]=arguments[R];return f[A].subscribe.apply(null,z),c}if(typeof A=="string")return f[A]}var f={};u.addEventType=y;for(var b=1,x=arguments.length;b<x;++b)y(arguments[b]);return u;function y(A,E,R){if(typeof A!="object"){var z;E=E||Gt;var F={subscribers:[],fire:R=R||vt,subscribe:function(P){F.subscribers.indexOf(P)===-1&&(F.subscribers.push(P),F.fire=E(F.fire,P))},unsubscribe:function(P){F.subscribers=F.subscribers.filter(function(j){return j!==P}),F.fire=F.subscribers.reduce(E,R)}};return f[A]=u[A]=F}s(z=A).forEach(function(P){var j=z[P];if(o(j))y(P,z[P][0],z[P][1]);else{if(j!=="asap")throw new rt.InvalidArgument("Invalid event config");var T=y(P,Ut,function(){for(var O=arguments.length,B=new Array(O);O--;)B[O]=arguments[O];T.subscribers.forEach(function(V){H(function(){V.apply(null,B)})})})}})}}function va(c,u){return k(u).from({prototype:c}),u}function $r(c,u){return!(c.filter||c.algorithm||c.or)&&(u?c.justLimit:!c.replayFilter)}function zn(c,u){c.filter=Pr(c.filter,u)}function Tn(c,u,f){var b=c.replayFilter;c.replayFilter=b?function(){return Pr(b(),u())}:u,c.justLimit=f&&!b}function ci(c,u){if(c.isPrimKey)return u.primaryKey;var f=u.getIndexByKeyPath(c.index);if(!f)throw new rt.Schema("KeyPath "+c.index+" on object store "+u.name+" is not indexed");return f}function bo(c,u,f){var b=ci(c,u.schema);return u.openCursor({trans:f,values:!c.keysOnly,reverse:c.dir==="prev",unique:!!c.unique,query:{index:b,range:c.range}})}function di(c,u,f,b){var x=c.replayFilter?Pr(c.filter,c.replayFilter()):c.filter;if(c.or){var y={},A=function(E,R,z){var F,P;x&&!x(R,z,function(j){return R.stop(j)},function(j){return R.fail(j)})||((P=""+(F=R.primaryKey))=="[object ArrayBuffer]"&&(P=""+new Uint8Array(F)),p(y,P)||(y[P]=!0,u(E,R,z)))};return Promise.all([c.or._iterate(A,f),vo(bo(c,b,f),c.algorithm,A,!c.keysOnly&&c.valueMapper)])}return vo(bo(c,b,f),Pr(c.algorithm,x),u,!c.keysOnly&&c.valueMapper)}function vo(c,u,f,b){var x=Kt(b?function(y,A,E){return f(b(y),A,E)}:f);return c.then(function(y){if(y)return y.start(function(){var A=function(){return y.continue()};u&&!u(y,function(E){return A=E},function(E){y.stop(E),A=vt},function(E){y.fail(E),A=vt})||x(y.value,y,function(E){return A=E}),A()})})}var hu=(It.prototype._read=function(c,u){var f=this._ctx;return f.error?f.table._trans(null,$t.bind(null,f.error)):f.table._trans("readonly",c).then(u)},It.prototype._write=function(c){var u=this._ctx;return u.error?u.table._trans(null,$t.bind(null,u.error)):u.table._trans("readwrite",c,"locked")},It.prototype._addAlgorithm=function(c){var u=this._ctx;u.algorithm=Pr(u.algorithm,c)},It.prototype._iterate=function(c,u){return di(this._ctx,c,u,this._ctx.table.core)},It.prototype.clone=function(c){var u=Object.create(this.constructor.prototype),f=Object.create(this._ctx);return c&&l(f,c),u._ctx=f,u},It.prototype.raw=function(){return this._ctx.valueMapper=null,this},It.prototype.each=function(c){var u=this._ctx;return this._read(function(f){return di(u,c,f,u.table.core)})},It.prototype.count=function(c){var u=this;return this._read(function(f){var b=u._ctx,x=b.table.core;if($r(b,!0))return x.count({trans:f,query:{index:ci(b,x.schema),range:b.range}}).then(function(A){return Math.min(A,b.limit)});var y=0;return di(b,function(){return++y,!1},f,x).then(function(){return y})}).then(c)},It.prototype.sortBy=function(c,u){var f=c.split(".").reverse(),b=f[0],x=f.length-1;function y(R,z){return z?y(R[f[z]],z-1):R[b]}var A=this._ctx.dir==="next"?1:-1;function E(R,z){return Ot(y(R,x),y(z,x))*A}return this.toArray(function(R){return R.sort(E)}).then(u)},It.prototype.toArray=function(c){var u=this;return this._read(function(f){var b=u._ctx;if(b.dir==="next"&&$r(b,!0)&&0<b.limit){var x=b.valueMapper,y=ci(b,b.table.core.schema);return b.table.core.query({trans:f,limit:b.limit,values:!0,query:{index:y,range:b.range}}).then(function(E){return E=E.result,x?E.map(x):E})}var A=[];return di(b,function(E){return A.push(E)},f,b.table.core).then(function(){return A})},c)},It.prototype.offset=function(c){var u=this._ctx;return c<=0||(u.offset+=c,$r(u)?Tn(u,function(){var f=c;return function(b,x){return f===0||(f===1?--f:x(function(){b.advance(f),f=0}),!1)}}):Tn(u,function(){var f=c;return function(){return--f<0}})),this},It.prototype.limit=function(c){return this._ctx.limit=Math.min(this._ctx.limit,c),Tn(this._ctx,function(){var u=c;return function(f,b,x){return--u<=0&&b(x),0<=u}},!0),this},It.prototype.until=function(c,u){return zn(this._ctx,function(f,b,x){return!c(f.value)||(b(x),u)}),this},It.prototype.first=function(c){return this.limit(1).toArray(function(u){return u[0]}).then(c)},It.prototype.last=function(c){return this.reverse().first(c)},It.prototype.filter=function(c){var u;return zn(this._ctx,function(f){return c(f.value)}),(u=this._ctx).isMatch=Pr(u.isMatch,c),this},It.prototype.and=function(c){return this.filter(c)},It.prototype.or=function(c){return new this.db.WhereClause(this._ctx.table,c,this)},It.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},It.prototype.desc=function(){return this.reverse()},It.prototype.eachKey=function(c){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(f,b){c(b.key,b)})},It.prototype.eachUniqueKey=function(c){return this._ctx.unique="unique",this.eachKey(c)},It.prototype.eachPrimaryKey=function(c){var u=this._ctx;return u.keysOnly=!u.isMatch,this.each(function(f,b){c(b.primaryKey,b)})},It.prototype.keys=function(c){var u=this._ctx;u.keysOnly=!u.isMatch;var f=[];return this.each(function(b,x){f.push(x.key)}).then(function(){return f}).then(c)},It.prototype.primaryKeys=function(c){var u=this._ctx;if(u.dir==="next"&&$r(u,!0)&&0<u.limit)return this._read(function(b){var x=ci(u,u.table.core.schema);return u.table.core.query({trans:b,values:!1,limit:u.limit,query:{index:x,range:u.range}})}).then(function(b){return b.result}).then(c);u.keysOnly=!u.isMatch;var f=[];return this.each(function(b,x){f.push(x.primaryKey)}).then(function(){return f}).then(c)},It.prototype.uniqueKeys=function(c){return this._ctx.unique="unique",this.keys(c)},It.prototype.firstKey=function(c){return this.limit(1).keys(function(u){return u[0]}).then(c)},It.prototype.lastKey=function(c){return this.reverse().firstKey(c)},It.prototype.distinct=function(){var c=this._ctx,c=c.index&&c.table.schema.idxByName[c.index];if(!c||!c.multi)return this;var u={};return zn(this._ctx,function(x){var b=x.primaryKey.toString(),x=p(u,b);return u[b]=!0,!x}),this},It.prototype.modify=function(c){var u=this,f=this._ctx;return this._write(function(b){var x=typeof c=="function"?c:function(B){return go(B,c)},y=f.table.core,z=y.schema.primaryKey,A=z.outbound,E=z.extractKey,R=200,z=u.db._options.modifyChunkSize;z&&(R=typeof z=="object"?z[y.name]||z["*"]||200:z);function F(B,U){var N=U.failures,U=U.numFailures;j+=B-U;for(var _=0,Q=s(N);_<Q.length;_++){var et=Q[_];P.push(N[et])}}var P=[],j=0,T=[],O=c===xo;return u.clone().primaryKeys().then(function(B){function V(U){var _=Math.min(R,B.length-U),Q=B.slice(U,U+_);return(O?Promise.resolve([]):y.getMany({trans:b,keys:Q,cache:"immutable"})).then(function(et){var st=[],$=[],it=A?[]:null,ot=O?Q:[];if(!O)for(var nt=0;nt<_;++nt){var ut=et[nt],Dt={value:tt(ut),primKey:B[U+nt]};x.call(Dt,Dt.value,Dt)!==!1&&(Dt.value==null?ot.push(B[U+nt]):A||Ot(E(ut),E(Dt.value))===0?($.push(Dt.value),A&&it.push(B[U+nt])):(ot.push(B[U+nt]),st.push(Dt.value)))}return Promise.resolve(0<st.length&&y.mutate({trans:b,type:"add",values:st}).then(function(Et){for(var Pt in Et.failures)ot.splice(parseInt(Pt),1);F(st.length,Et)})).then(function(){return(0<$.length||N&&typeof c=="object")&&y.mutate({trans:b,type:"put",keys:it,values:$,criteria:N,changeSpec:typeof c!="function"&&c,isAdditionalChunk:0<U}).then(function(Et){return F($.length,Et)})}).then(function(){return(0<ot.length||N&&O)&&y.mutate({trans:b,type:"delete",keys:ot,criteria:N,isAdditionalChunk:0<U}).then(function(Et){return li(f.table,ot,Et)}).then(function(Et){return F(ot.length,Et)})}).then(function(){return B.length>U+_&&V(U+R)})})}var N=$r(f)&&f.limit===1/0&&(typeof c!="function"||O)&&{index:f.index,range:f.range};return V(0).then(function(){if(0<P.length)throw new wt("Error modifying one or more objects",P,j,T);return B.length})})})},It.prototype.delete=function(){var c=this._ctx,u=c.range;return!$r(c)||c.table.schema.yProps||!c.isPrimKey&&u.type!==3?this.modify(xo):this._write(function(f){var b=c.table.core.schema.primaryKey,x=u;return c.table.core.count({trans:f,query:{index:b,range:x}}).then(function(y){return c.table.core.mutate({trans:f,type:"deleteRange",range:x}).then(function(R){var E=R.failures,R=R.numFailures;if(R)throw new wt("Could not delete some values",Object.keys(E).map(function(z){return E[z]}),y-R);return y-R})})})},It);function It(){}var xo=function(c,u){return u.value=null};function pu(c,u){return c<u?-1:c===u?0:1}function fu(c,u){return u<c?-1:c===u?0:1}function Pe(c,u,f){return c=c instanceof wo?new c.Collection(c):c,c._ctx.error=new(f||TypeError)(u),c}function ta(c){return new c.Collection(c,function(){return yo("")}).limit(0)}function ui(c,u,f,b){var x,y,A,E,R,z,F,P=f.length;if(!f.every(function(O){return typeof O=="string"}))return Pe(c,lo);function j(O){x=O==="next"?function(V){return V.toUpperCase()}:function(V){return V.toLowerCase()},y=O==="next"?function(V){return V.toLowerCase()}:function(V){return V.toUpperCase()},A=O==="next"?pu:fu;var B=f.map(function(V){return{lower:y(V),upper:x(V)}}).sort(function(V,N){return A(V.lower,N.lower)});E=B.map(function(V){return V.upper}),R=B.map(function(V){return V.lower}),F=(z=O)==="next"?"":b}j("next"),c=new c.Collection(c,function(){return ur(E[0],R[P-1]+b)}),c._ondirectionchange=function(O){j(O)};var T=0;return c._addAlgorithm(function(O,B,V){var N=O.key;if(typeof N!="string")return!1;var U=y(N);if(u(U,R,T))return!0;for(var _=null,Q=T;Q<P;++Q){var et=(function(st,$,it,ot,nt,ut){for(var Dt=Math.min(st.length,ot.length),Et=-1,Pt=0;Pt<Dt;++Pt){var Re=$[Pt];if(Re!==ot[Pt])return nt(st[Pt],it[Pt])<0?st.substr(0,Pt)+it[Pt]+it.substr(Pt+1):nt(st[Pt],ot[Pt])<0?st.substr(0,Pt)+ot[Pt]+it.substr(Pt+1):0<=Et?st.substr(0,Et)+$[Et]+it.substr(Et+1):null;nt(st[Pt],Re)<0&&(Et=Pt)}return Dt<ot.length&&ut==="next"?st+it.substr(st.length):Dt<st.length&&ut==="prev"?st.substr(0,it.length):Et<0?null:st.substr(0,Et)+ot[Et]+it.substr(Et+1)})(N,U,E[Q],R[Q],A,z);et===null&&_===null?T=Q+1:(_===null||0<A(_,et))&&(_=et)}return B(_!==null?function(){O.continue(_+F)}:V),!1}),c}function ur(c,u,f,b){return{type:2,lower:c,upper:u,lowerOpen:f,upperOpen:b}}function yo(c){return{type:1,lower:c,upper:c}}var wo=(Object.defineProperty(ce.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),ce.prototype.between=function(c,u,f,b){f=f!==!1,b=b===!0;try{return 0<this._cmp(c,u)||this._cmp(c,u)===0&&(f||b)&&(!f||!b)?ta(this):new this.Collection(this,function(){return ur(c,u,!f,!b)})}catch{return Pe(this,_e)}},ce.prototype.equals=function(c){return c==null?Pe(this,_e):new this.Collection(this,function(){return yo(c)})},ce.prototype.above=function(c){return c==null?Pe(this,_e):new this.Collection(this,function(){return ur(c,void 0,!0)})},ce.prototype.aboveOrEqual=function(c){return c==null?Pe(this,_e):new this.Collection(this,function(){return ur(c,void 0,!1)})},ce.prototype.below=function(c){return c==null?Pe(this,_e):new this.Collection(this,function(){return ur(void 0,c,!1,!0)})},ce.prototype.belowOrEqual=function(c){return c==null?Pe(this,_e):new this.Collection(this,function(){return ur(void 0,c)})},ce.prototype.startsWith=function(c){return typeof c!="string"?Pe(this,lo):this.between(c,c+Er,!0,!0)},ce.prototype.startsWithIgnoreCase=function(c){return c===""?this.startsWith(c):ui(this,function(u,f){return u.indexOf(f[0])===0},[c],Er)},ce.prototype.equalsIgnoreCase=function(c){return ui(this,function(u,f){return u===f[0]},[c],"")},ce.prototype.anyOfIgnoreCase=function(){var c=bt.apply(J,arguments);return c.length===0?ta(this):ui(this,function(u,f){return f.indexOf(u)!==-1},c,"")},ce.prototype.startsWithAnyOfIgnoreCase=function(){var c=bt.apply(J,arguments);return c.length===0?ta(this):ui(this,function(u,f){return f.some(function(b){return u.indexOf(b)===0})},c,Er)},ce.prototype.anyOf=function(){var c=this,u=bt.apply(J,arguments),f=this._cmp;try{u.sort(f)}catch{return Pe(this,_e)}if(u.length===0)return ta(this);var b=new this.Collection(this,function(){return ur(u[0],u[u.length-1])});b._ondirectionchange=function(y){f=y==="next"?c._ascending:c._descending,u.sort(f)};var x=0;return b._addAlgorithm(function(y,A,E){for(var R=y.key;0<f(R,u[x]);)if(++x===u.length)return A(E),!1;return f(R,u[x])===0||(A(function(){y.continue(u[x])}),!1)}),b},ce.prototype.notEqual=function(c){return this.inAnyRange([[-1/0,c],[c,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},ce.prototype.noneOf=function(){var c=bt.apply(J,arguments);if(c.length===0)return new this.Collection(this);try{c.sort(this._ascending)}catch{return Pe(this,_e)}var u=c.reduce(function(f,b){return f?f.concat([[f[f.length-1][1],b]]):[[-1/0,b]]},null);return u.push([c[c.length-1],this.db._maxKey]),this.inAnyRange(u,{includeLowers:!1,includeUppers:!1})},ce.prototype.inAnyRange=function(N,u){var f=this,b=this._cmp,x=this._ascending,y=this._descending,A=this._min,E=this._max;if(N.length===0)return ta(this);if(!N.every(function(U){return U[0]!==void 0&&U[1]!==void 0&&x(U[0],U[1])<=0}))return Pe(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",rt.InvalidArgument);var R=!u||u.includeLowers!==!1,z=u&&u.includeUppers===!0,F,P=x;function j(U,_){return P(U[0],_[0])}try{(F=N.reduce(function(U,_){for(var Q=0,et=U.length;Q<et;++Q){var st=U[Q];if(b(_[0],st[1])<0&&0<b(_[1],st[0])){st[0]=A(st[0],_[0]),st[1]=E(st[1],_[1]);break}}return Q===et&&U.push(_),U},[])).sort(j)}catch{return Pe(this,_e)}var T=0,O=z?function(U){return 0<x(U,F[T][1])}:function(U){return 0<=x(U,F[T][1])},B=R?function(U){return 0<y(U,F[T][0])}:function(U){return 0<=y(U,F[T][0])},V=O,N=new this.Collection(this,function(){return ur(F[0][0],F[F.length-1][1],!R,!z)});return N._ondirectionchange=function(U){P=U==="next"?(V=O,x):(V=B,y),F.sort(j)},N._addAlgorithm(function(U,_,Q){for(var et,st=U.key;V(st);)if(++T===F.length)return _(Q),!1;return!O(et=st)&&!B(et)||(f._cmp(st,F[T][1])===0||f._cmp(st,F[T][0])===0||_(function(){P===x?U.continue(F[T][0]):U.continue(F[T][1])}),!1)}),N},ce.prototype.startsWithAnyOf=function(){var c=bt.apply(J,arguments);return c.every(function(u){return typeof u=="string"})?c.length===0?ta(this):this.inAnyRange(c.map(function(u){return[u,u+Er]})):Pe(this,"startsWithAnyOf() only works with strings")},ce);function ce(){}function Ne(c){return Kt(function(u){return xa(u),c(u.target.error),!1})}function xa(c){c.stopPropagation&&c.stopPropagation(),c.preventDefault&&c.preventDefault()}var ya="storagemutated",Ln="x-storagemutated-1",hr=ba(null,ya),gu=(qe.prototype._lock=function(){return W(!mt.global),++this._reculock,this._reculock!==1||mt.global||(mt.lockOwnerFor=this),this},qe.prototype._unlock=function(){if(W(!mt.global),--this._reculock==0)for(mt.global||(mt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var c=this._blockedFuncs.shift();try{Dr(c[1],c[0])}catch{}}return this},qe.prototype._locked=function(){return this._reculock&&mt.lockOwnerFor!==this},qe.prototype.create=function(c){var u=this;if(!this.mode)return this;var f=this.db.idbdb,b=this.db._state.dbOpenError;if(W(!this.idbtrans),!c&&!f)switch(b&&b.name){case"DatabaseClosedError":throw new rt.DatabaseClosed(b);case"MissingAPIError":throw new rt.MissingAPI(b.message,b);default:throw new rt.OpenFailed(b)}if(!this.active)throw new rt.TransactionInactive;return W(this._completion._state===null),(c=this.idbtrans=c||(this.db.core||f).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=Kt(function(x){xa(x),u._reject(c.error)}),c.onabort=Kt(function(x){xa(x),u.active&&u._reject(new rt.Abort(c.error)),u.active=!1,u.on("abort").fire(x)}),c.oncomplete=Kt(function(){u.active=!1,u._resolve(),"mutatedParts"in c&&hr.storagemutated.fire(c.mutatedParts)}),this},qe.prototype._promise=function(c,u,f){var b=this;if(c==="readwrite"&&this.mode!=="readwrite")return $t(new rt.ReadOnly("Transaction is readonly"));if(!this.active)return $t(new rt.TransactionInactive);if(this._locked())return new ct(function(y,A){b._blockedFuncs.push([function(){b._promise(c,u,f).then(y,A)},mt])});if(f)return lr(function(){var y=new ct(function(A,E){b._lock();var R=u(A,E,b);R&&R.then&&R.then(A,E)});return y.finally(function(){return b._unlock()}),y._lib=!0,y});var x=new ct(function(y,A){var E=u(y,A,b);E&&E.then&&E.then(y,A)});return x._lib=!0,x},qe.prototype._root=function(){return this.parent?this.parent._root():this},qe.prototype.waitFor=function(c){var u,f=this._root(),b=ct.resolve(c);f._waitingFor?f._waitingFor=f._waitingFor.then(function(){return b}):(f._waitingFor=b,f._waitingQueue=[],u=f.idbtrans.objectStore(f.storeNames[0]),(function y(){for(++f._spinCount;f._waitingQueue.length;)f._waitingQueue.shift()();f._waitingFor&&(u.get(-1/0).onsuccess=y)})());var x=f._waitingFor;return new ct(function(y,A){b.then(function(E){return f._waitingQueue.push(Kt(y.bind(null,E)))},function(E){return f._waitingQueue.push(Kt(A.bind(null,E)))}).finally(function(){f._waitingFor===x&&(f._waitingFor=null)})})},qe.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new rt.Abort))},qe.prototype.table=function(c){var u=this._memoizedTables||(this._memoizedTables={});if(p(u,c))return u[c];var f=this.schema[c];if(!f)throw new rt.NotFound("Table "+c+" not part of transaction");return f=new this.db.Table(c,f,this),f.core=this.db.core.table(c),u[c]=f},qe);function qe(){}function On(c,u,f,b,x,y,A,E){return{name:c,keyPath:u,unique:f,multi:b,auto:x,compound:y,src:(f&&!A?"&":"")+(b?"*":"")+(x?"++":"")+ko(u),type:E}}function ko(c){return typeof c=="string"?c:c?"["+[].join.call(c,"+")+"]":""}function Bn(c,u,f){return{name:c,primKey:u,indexes:f,mappedClass:null,idxByName:(b=function(x){return[x.name,x]},f.reduce(function(x,y,A){return A=b(y,A),A&&(x[A[0]]=A[1]),x},{}))};var b}var wa=function(c){try{return c.only([[]]),wa=function(){return[[]]},[[]]}catch{return wa=function(){return Er},Er}};function In(c){return c==null?function(){}:typeof c=="string"?(u=c).split(".").length===1?function(f){return f[u]}:function(f){return X(f,u)}:function(f){return X(f,c)};var u}function Co(c){return[].slice.call(c)}var mu=0;function ka(c){return c==null?":id":typeof c=="string"?c:"[".concat(c.join("+"),"]")}function bu(c,u,R){function b(V){if(V.type===3)return null;if(V.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var T=V.lower,O=V.upper,B=V.lowerOpen,V=V.upperOpen;return T===void 0?O===void 0?null:u.upperBound(O,!!V):O===void 0?u.lowerBound(T,!!B):u.bound(T,O,!!B,!!V)}function x(j){var T,O=j.name;return{name:O,schema:j,mutate:function(B){var V=B.trans,N=B.type,U=B.keys,_=B.values,Q=B.range;return new Promise(function(et,st){et=Kt(et);var $=V.objectStore(O),it=$.keyPath==null,ot=N==="put"||N==="add";if(!ot&&N!=="delete"&&N!=="deleteRange")throw new Error("Invalid operation type: "+N);var nt,ut=(U||_||{length:1}).length;if(U&&_&&U.length!==_.length)throw new Error("Given keys array must have same length as given values array.");if(ut===0)return et({numFailures:0,failures:{},results:[],lastResult:void 0});function Dt(we){++Re,xa(we)}var Et=[],Pt=[],Re=0;if(N==="deleteRange"){if(Q.type===4)return et({numFailures:Re,failures:Pt,results:[],lastResult:void 0});Q.type===3?Et.push(nt=$.clear()):Et.push(nt=$.delete(b(Q)))}else{var it=ot?it?[_,U]:[_,null]:[U,null],At=it[0],fe=it[1];if(ot)for(var ge=0;ge<ut;++ge)Et.push(nt=fe&&fe[ge]!==void 0?$[N](At[ge],fe[ge]):$[N](At[ge])),nt.onerror=Dt;else for(ge=0;ge<ut;++ge)Et.push(nt=$[N](At[ge])),nt.onerror=Dt}function Ci(we){we=we.target.result,Et.forEach(function(Tr,ts){return Tr.error!=null&&(Pt[ts]=Tr.error)}),et({numFailures:Re,failures:Pt,results:N==="delete"?U:Et.map(function(Tr){return Tr.result}),lastResult:we})}nt.onerror=function(we){Dt(we),Ci(we)},nt.onsuccess=Ci})},getMany:function(B){var V=B.trans,N=B.keys;return new Promise(function(U,_){U=Kt(U);for(var Q,et=V.objectStore(O),st=N.length,$=new Array(st),it=0,ot=0,nt=function(Et){Et=Et.target,$[Et._pos]=Et.result,++ot===it&&U($)},ut=Ne(_),Dt=0;Dt<st;++Dt)N[Dt]!=null&&((Q=et.get(N[Dt]))._pos=Dt,Q.onsuccess=nt,Q.onerror=ut,++it);it===0&&U($)})},get:function(B){var V=B.trans,N=B.key;return new Promise(function(U,_){U=Kt(U);var Q=V.objectStore(O).get(N);Q.onsuccess=function(et){return U(et.target.result)},Q.onerror=Ne(_)})},query:(T=z,function(B){return new Promise(function(V,N){V=Kt(V);var U,_,Q,it=B.trans,et=B.values,st=B.limit,nt=B.query,$=st===1/0?void 0:st,ot=nt.index,nt=nt.range,it=it.objectStore(O),ot=ot.isPrimaryKey?it:it.index(ot.name),nt=b(nt);if(st===0)return V({result:[]});T?(($=et?ot.getAll(nt,$):ot.getAllKeys(nt,$)).onsuccess=function(ut){return V({result:ut.target.result})},$.onerror=Ne(N)):(U=0,_=!et&&"openKeyCursor"in ot?ot.openKeyCursor(nt):ot.openCursor(nt),Q=[],_.onsuccess=function(ut){var Dt=_.result;return Dt?(Q.push(et?Dt.value:Dt.primaryKey),++U===st?V({result:Q}):void Dt.continue()):V({result:Q})},_.onerror=Ne(N))})}),openCursor:function(B){var V=B.trans,N=B.values,U=B.query,_=B.reverse,Q=B.unique;return new Promise(function(et,st){et=Kt(et);var ot=U.index,$=U.range,it=V.objectStore(O),it=ot.isPrimaryKey?it:it.index(ot.name),ot=_?Q?"prevunique":"prev":Q?"nextunique":"next",nt=!N&&"openKeyCursor"in it?it.openKeyCursor(b($),ot):it.openCursor(b($),ot);nt.onerror=Ne(st),nt.onsuccess=Kt(function(ut){var Dt,Et,Pt,Re,At=nt.result;At?(At.___id=++mu,At.done=!1,Dt=At.continue.bind(At),Et=(Et=At.continuePrimaryKey)&&Et.bind(At),Pt=At.advance.bind(At),Re=function(){throw new Error("Cursor not stopped")},At.trans=V,At.stop=At.continue=At.continuePrimaryKey=At.advance=function(){throw new Error("Cursor not started")},At.fail=Kt(st),At.next=function(){var fe=this,ge=1;return this.start(function(){return ge--?fe.continue():fe.stop()}).then(function(){return fe})},At.start=function(fe){function ge(){if(nt.result)try{fe()}catch(we){At.fail(we)}else At.done=!0,At.start=function(){throw new Error("Cursor behind last entry")},At.stop()}var Ci=new Promise(function(we,Tr){we=Kt(we),nt.onerror=Ne(Tr),At.fail=Tr,At.stop=function(ts){At.stop=At.continue=At.continuePrimaryKey=At.advance=Re,we(ts)}});return nt.onsuccess=Kt(function(we){nt.onsuccess=ge,ge()}),At.continue=Dt,At.continuePrimaryKey=Et,At.advance=Pt,ge(),Ci},et(At)):et(null)},st)})},count:function(B){var V=B.query,N=B.trans,U=V.index,_=V.range;return new Promise(function(Q,et){var st=N.objectStore(O),$=U.isPrimaryKey?st:st.index(U.name),st=b(_),$=st?$.count(st):$.count();$.onsuccess=Kt(function(it){return Q(it.target.result)}),$.onerror=Ne(et)})}}}var y,A,E,F=(A=R,E=Co((y=c).objectStoreNames),{schema:{name:y.name,tables:E.map(function(j){return A.objectStore(j)}).map(function(j){var T=j.keyPath,V=j.autoIncrement,O=o(T),B={},V={name:j.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:T==null,compound:O,keyPath:T,autoIncrement:V,unique:!0,extractKey:In(T)},indexes:Co(j.indexNames).map(function(N){return j.index(N)}).map(function(Q){var U=Q.name,_=Q.unique,et=Q.multiEntry,Q=Q.keyPath,et={name:U,compound:o(Q),keyPath:Q,unique:_,multiEntry:et,extractKey:In(Q)};return B[ka(Q)]=et}),getIndexByKeyPath:function(N){return B[ka(N)]}};return B[":id"]=V.primaryKey,T!=null&&(B[ka(T)]=V.primaryKey),V})},hasGetAll:0<E.length&&"getAll"in A.objectStore(E[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)}),R=F.schema,z=F.hasGetAll,F=R.tables.map(x),P={};return F.forEach(function(j){return P[j.name]=j}),{stack:"dbcore",transaction:c.transaction.bind(c),table:function(j){if(!P[j])throw new Error("Table '".concat(j,"' not found"));return P[j]},MIN_KEY:-1/0,MAX_KEY:wa(u),schema:R}}function vu(c,u,f,b){var x=f.IDBKeyRange;return f.indexedDB,{dbcore:(b=bu(u,x,b),c.dbcore.reduce(function(y,A){return A=A.create,r(r({},y),A(y))},b))}}function hi(c,b){var f=b.db,b=vu(c._middlewares,f,c._deps,b);c.core=b.dbcore,c.tables.forEach(function(x){var y=x.name;c.core.schema.tables.some(function(A){return A.name===y})&&(x.core=c.core.table(y),c[y]instanceof c.Table&&(c[y].core=x.core))})}function pi(c,u,f,b){f.forEach(function(x){var y=b[x];u.forEach(function(A){var E=(function R(z,F){return S(z,F)||(z=d(z))&&R(z,F)})(A,x);(!E||"value"in E&&E.value===void 0)&&(A===c.Transaction.prototype||A instanceof c.Transaction?g(A,x,{get:function(){return this.table(x)},set:function(R){v(this,x,{value:R,writable:!0,configurable:!0,enumerable:!0})}}):A[x]=new c.Table(x,y))})})}function Fn(c,u){u.forEach(function(f){for(var b in f)f[b]instanceof c.Table&&delete f[b]})}function xu(c,u){return c._cfg.version-u._cfg.version}function yu(c,u,f,b){var x=c._dbSchema;f.objectStoreNames.contains("$meta")&&!x.$meta&&(x.$meta=Bn("$meta",Ao("")[0],[]),c._storeNames.push("$meta"));var y=c._createTransaction("readwrite",c._storeNames,x);y.create(f),y._completion.catch(b);var A=y._reject.bind(y),E=mt.transless||mt;lr(function(){return mt.trans=y,mt.transless=E,u!==0?(hi(c,f),z=u,((R=y).storeNames.includes("$meta")?R.table("$meta").get("version").then(function(F){return F??z}):ct.resolve(z)).then(function(F){return j=F,T=y,O=f,B=[],F=(P=c)._versions,V=P._dbSchema=gi(0,P.idbdb,O),(F=F.filter(function(N){return N._cfg.version>=j})).length!==0?(F.forEach(function(N){B.push(function(){var U=V,_=N._cfg.dbschema;mi(P,U,O),mi(P,_,O),V=P._dbSchema=_;var Q=Vn(U,_);Q.add.forEach(function(ot){jn(O,ot[0],ot[1].primKey,ot[1].indexes)}),Q.change.forEach(function(ot){if(ot.recreate)throw new rt.Upgrade("Not yet support for changing primary key");var nt=O.objectStore(ot.name);ot.add.forEach(function(ut){return fi(nt,ut)}),ot.change.forEach(function(ut){nt.deleteIndex(ut.name),fi(nt,ut)}),ot.del.forEach(function(ut){return nt.deleteIndex(ut)})});var et=N._cfg.contentUpgrade;if(et&&N._cfg.version>j){hi(P,O),T._memoizedTables={};var st=w(_);Q.del.forEach(function(ot){st[ot]=U[ot]}),Fn(P,[P.Transaction.prototype]),pi(P,[P.Transaction.prototype],s(st),st),T.schema=st;var $,it=dt(et);return it&&Jr(),Q=ct.follow(function(){var ot;($=et(T))&&it&&(ot=cr.bind(null,null),$.then(ot,ot))}),$&&typeof $.then=="function"?ct.resolve($):Q.then(function(){return $})}}),B.push(function(U){var _,Q,et=N._cfg.dbschema;_=et,Q=U,[].slice.call(Q.db.objectStoreNames).forEach(function(st){return _[st]==null&&Q.db.deleteObjectStore(st)}),Fn(P,[P.Transaction.prototype]),pi(P,[P.Transaction.prototype],P._storeNames,P._dbSchema),T.schema=P._dbSchema}),B.push(function(U){P.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(P.idbdb.version/10)===N._cfg.version?(P.idbdb.deleteObjectStore("$meta"),delete P._dbSchema.$meta,P._storeNames=P._storeNames.filter(function(_){return _!=="$meta"})):U.objectStore("$meta").put(N._cfg.version,"version"))})}),(function N(){return B.length?ct.resolve(B.shift()(T.idbtrans)).then(N):ct.resolve()})().then(function(){So(V,O)})):ct.resolve();var P,j,T,O,B,V}).catch(A)):(s(x).forEach(function(F){jn(f,F,x[F].primKey,x[F].indexes)}),hi(c,f),void ct.follow(function(){return c.on.populate.fire(y)}).catch(A));var R,z})}function wu(c,u){So(c._dbSchema,u),u.db.version%10!=0||u.objectStoreNames.contains("$meta")||u.db.createObjectStore("$meta").add(Math.ceil(u.db.version/10-1),"version");var f=gi(0,c.idbdb,u);mi(c,c._dbSchema,u);for(var b=0,x=Vn(f,c._dbSchema).change;b<x.length;b++){var y=(function(A){if(A.change.length||A.recreate)return console.warn("Unable to patch indexes of table ".concat(A.name," because it has changes on the type of index or primary key.")),{value:void 0};var E=u.objectStore(A.name);A.add.forEach(function(R){ue&&console.debug("Dexie upgrade patch: Creating missing index ".concat(A.name,".").concat(R.src)),fi(E,R)})})(x[b]);if(typeof y=="object")return y.value}}function Vn(c,u){var f,b={del:[],add:[],change:[]};for(f in c)u[f]||b.del.push(f);for(f in u){var x=c[f],y=u[f];if(x){var A={name:f,def:y,recreate:!1,del:[],add:[],change:[]};if(""+(x.primKey.keyPath||"")!=""+(y.primKey.keyPath||"")||x.primKey.auto!==y.primKey.auto)A.recreate=!0,b.change.push(A);else{var E=x.idxByName,R=y.idxByName,z=void 0;for(z in E)R[z]||A.del.push(z);for(z in R){var F=E[z],P=R[z];F?F.src!==P.src&&A.change.push(P):A.add.push(P)}(0<A.del.length||0<A.add.length||0<A.change.length)&&b.change.push(A)}}else b.add.push([f,y])}return b}function jn(c,u,f,b){var x=c.db.createObjectStore(u,f.keyPath?{keyPath:f.keyPath,autoIncrement:f.auto}:{autoIncrement:f.auto});return b.forEach(function(y){return fi(x,y)}),x}function So(c,u){s(c).forEach(function(f){u.db.objectStoreNames.contains(f)||(ue&&console.debug("Dexie: Creating missing table",f),jn(u,f,c[f].primKey,c[f].indexes))})}function fi(c,u){c.createIndex(u.name,u.keyPath,{unique:u.unique,multiEntry:u.multi})}function gi(c,u,f){var b={};return M(u.objectStoreNames,0).forEach(function(x){for(var y=f.objectStore(x),A=On(ko(z=y.keyPath),z||"",!0,!1,!!y.autoIncrement,z&&typeof z!="string",!0),E=[],R=0;R<y.indexNames.length;++R){var F=y.index(y.indexNames[R]),z=F.keyPath,F=On(F.name,z,!!F.unique,!!F.multiEntry,!1,z&&typeof z!="string",!1);E.push(F)}b[x]=Bn(x,A,E)}),b}function mi(c,u,f){for(var b=f.db.objectStoreNames,x=0;x<b.length;++x){var y=b[x],A=f.objectStore(y);c._hasGetAll="getAll"in A;for(var E=0;E<A.indexNames.length;++E){var R=A.indexNames[E],z=A.index(R).keyPath,F=typeof z=="string"?z:"["+M(z).join("+")+"]";!u[y]||(z=u[y].idxByName[F])&&(z.name=R,delete u[y].idxByName[F],u[y].idxByName[R]=z)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&n.WorkerGlobalScope&&n instanceof n.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(c._hasGetAll=!1)}function Ao(c){return c.split(",").map(function(u,f){var y=u.split(":"),b=(x=y[1])===null||x===void 0?void 0:x.trim(),x=(u=y[0].trim()).replace(/([&*]|\+\+)/g,""),y=/^\[/.test(x)?x.match(/^\[(.*)\]$/)[1].split("+"):x;return On(x,y||null,/\&/.test(u),/\*/.test(u),/\+\+/.test(u),o(y),f===0,b)})}var ku=(ea.prototype._createTableSchema=Bn,ea.prototype._parseIndexSyntax=Ao,ea.prototype._parseStoresSpec=function(c,u){var f=this;s(c).forEach(function(b){if(c[b]!==null){var x=f._parseIndexSyntax(c[b]),y=x.shift();if(!y)throw new rt.Schema("Invalid schema for table "+b+": "+c[b]);if(y.unique=!0,y.multi)throw new rt.Schema("Primary key cannot be multiEntry*");x.forEach(function(A){if(A.auto)throw new rt.Schema("Only primary key can be marked as autoIncrement (++)");if(!A.keyPath)throw new rt.Schema("Index must have a name and cannot be an empty string")}),x=f._createTableSchema(b,y,x),u[b]=x}})},ea.prototype.stores=function(f){var u=this.db;this._cfg.storesSource=this._cfg.storesSource?l(this._cfg.storesSource,f):f;var f=u._versions,b={},x={};return f.forEach(function(y){l(b,y._cfg.storesSource),x=y._cfg.dbschema={},y._parseStoresSpec(b,x)}),u._dbSchema=x,Fn(u,[u._allTables,u,u.Transaction.prototype]),pi(u,[u._allTables,u,u.Transaction.prototype,this._cfg.tables],s(x),x),u._storeNames=s(x),this},ea.prototype.upgrade=function(c){return this._cfg.contentUpgrade=Te(this._cfg.contentUpgrade||vt,c),this},ea);function ea(){}function Hn(c,u){var f=c._dbNamesDB;return f||(f=c._dbNamesDB=new Qe(si,{addons:[],indexedDB:c,IDBKeyRange:u})).version(1).stores({dbnames:"name"}),f.table("dbnames")}function Nn(c){return c&&typeof c.databases=="function"}function qn(c){return lr(function(){return mt.letThrough=!0,c()})}function Wn(c){return!("from"in c)}var pe=function(c,u){if(!this){var f=new pe;return c&&"d"in c&&l(f,c),f}l(this,arguments.length?{d:1,from:c,to:1<arguments.length?u:c}:{d:0})};function Ca(c,u,f){var b=Ot(u,f);if(!isNaN(b)){if(0<b)throw RangeError();if(Wn(c))return l(c,{from:u,to:f,d:1});var x=c.l,b=c.r;if(Ot(f,c.from)<0)return x?Ca(x,u,f):c.l={from:u,to:f,d:1,l:null,r:null},Do(c);if(0<Ot(u,c.to))return b?Ca(b,u,f):c.r={from:u,to:f,d:1,l:null,r:null},Do(c);Ot(u,c.from)<0&&(c.from=u,c.l=null,c.d=b?b.d+1:1),0<Ot(f,c.to)&&(c.to=f,c.r=null,c.d=c.l?c.l.d+1:1),f=!c.r,x&&!c.l&&Sa(c,x),b&&f&&Sa(c,b)}}function Sa(c,u){Wn(u)||(function f(b,R){var y=R.from,A=R.to,E=R.l,R=R.r;Ca(b,y,A),E&&f(b,E),R&&f(b,R)})(c,u)}function Mo(c,u){var f=bi(u),b=f.next();if(b.done)return!1;for(var x=b.value,y=bi(c),A=y.next(x.from),E=A.value;!b.done&&!A.done;){if(Ot(E.from,x.to)<=0&&0<=Ot(E.to,x.from))return!0;Ot(x.from,E.from)<0?x=(b=f.next(E.from)).value:E=(A=y.next(x.from)).value}return!1}function bi(c){var u=Wn(c)?null:{s:0,n:c};return{next:function(f){for(var b=0<arguments.length;u;)switch(u.s){case 0:if(u.s=1,b)for(;u.n.l&&Ot(f,u.n.from)<0;)u={up:u,n:u.n.l,s:1};else for(;u.n.l;)u={up:u,n:u.n.l,s:1};case 1:if(u.s=2,!b||Ot(f,u.n.to)<=0)return{value:u.n,done:!1};case 2:if(u.n.r){u.s=3,u={up:u,n:u.n.r,s:0};continue}case 3:u=u.up}return{done:!0}}}}function Do(c){var u,f,b=(((u=c.r)===null||u===void 0?void 0:u.d)||0)-(((f=c.l)===null||f===void 0?void 0:f.d)||0),x=1<b?"r":b<-1?"l":"";x&&(u=x=="r"?"l":"r",f=r({},c),b=c[x],c.from=b.from,c.to=b.to,c[x]=b[x],f[x]=b[u],(c[u]=f).d=Eo(f)),c.d=Eo(c)}function Eo(f){var u=f.r,f=f.l;return(u?f?Math.max(u.d,f.d):u.d:f?f.d:0)+1}function vi(c,u){return s(u).forEach(function(f){c[f]?Sa(c[f],u[f]):c[f]=(function b(x){var y,A,E={};for(y in x)p(x,y)&&(A=x[y],E[y]=!A||typeof A!="object"||Y.has(A.constructor)?A:b(A));return E})(u[f])}),c}function Yn(c,u){return c.all||u.all||Object.keys(c).some(function(f){return u[f]&&Mo(u[f],c[f])})}m(pe.prototype,((Le={add:function(c){return Sa(this,c),this},addKey:function(c){return Ca(this,c,c),this},addKeys:function(c){var u=this;return c.forEach(function(f){return Ca(u,f,f)}),this},hasKey:function(c){var u=bi(this).next(c).value;return u&&Ot(u.from,c)<=0&&0<=Ot(u.to,c)}})[lt]=function(){return bi(this)},Le));var Rr={},Un={},Gn=!1;function xi(c){vi(Un,c),Gn||(Gn=!0,setTimeout(function(){Gn=!1,Xn(Un,!(Un={}))},0))}function Xn(c,u){u===void 0&&(u=!1);var f=new Set;if(c.all)for(var b=0,x=Object.values(Rr);b<x.length;b++)Po(A=x[b],c,f,u);else for(var y in c){var A,E=/^idb\:\/\/(.*)\/(.*)\//.exec(y);E&&(y=E[1],E=E[2],(A=Rr["idb://".concat(y,"/").concat(E)])&&Po(A,c,f,u))}f.forEach(function(R){return R()})}function Po(c,u,f,b){for(var x=[],y=0,A=Object.entries(c.queries.query);y<A.length;y++){for(var E=A[y],R=E[0],z=[],F=0,P=E[1];F<P.length;F++){var j=P[F];Yn(u,j.obsSet)?j.subscribers.forEach(function(V){return f.add(V)}):b&&z.push(j)}b&&x.push([R,z])}if(b)for(var T=0,O=x;T<O.length;T++){var B=O[T],R=B[0],z=B[1];c.queries.query[R]=z}}function Cu(c){var u=c._state,f=c._deps.indexedDB;if(u.isBeingOpened||c.idbdb)return u.dbReadyPromise.then(function(){return u.dbOpenError?$t(u.dbOpenError):c});u.isBeingOpened=!0,u.dbOpenError=null,u.openComplete=!1;var b=u.openCanceller,x=Math.round(10*c.verno),y=!1;function A(){if(u.openCanceller!==b)throw new rt.DatabaseClosed("db.open() was cancelled")}function E(){return new ct(function(j,T){if(A(),!f)throw new rt.MissingAPI;var O=c.name,B=u.autoSchema||!x?f.open(O):f.open(O,x);if(!B)throw new rt.MissingAPI;B.onerror=Ne(T),B.onblocked=Kt(c._fireOnBlocked),B.onupgradeneeded=Kt(function(V){var N;F=B.transaction,u.autoSchema&&!c._options.allowEmptyDB?(B.onerror=xa,F.abort(),B.result.close(),(N=f.deleteDatabase(O)).onsuccess=N.onerror=Kt(function(){T(new rt.NoSuchDatabase("Database ".concat(O," doesnt exist")))})):(F.onerror=Ne(T),V=V.oldVersion>Math.pow(2,62)?0:V.oldVersion,P=V<1,c.idbdb=B.result,y&&wu(c,F),yu(c,V/10,F,T))},T),B.onsuccess=Kt(function(){F=null;var V,N,U,_,Q,et=c.idbdb=B.result,st=M(et.objectStoreNames);if(0<st.length)try{var $=et.transaction((_=st).length===1?_[0]:_,"readonly");if(u.autoSchema)N=et,U=$,(V=c).verno=N.version/10,U=V._dbSchema=gi(0,N,U),V._storeNames=M(N.objectStoreNames,0),pi(V,[V._allTables],s(U),U);else if(mi(c,c._dbSchema,$),((Q=Vn(gi(0,(Q=c).idbdb,$),Q._dbSchema)).add.length||Q.change.some(function(it){return it.add.length||it.change.length}))&&!y)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),et.close(),x=et.version+1,y=!0,j(E());hi(c,$)}catch{}Zr.push(c),et.onversionchange=Kt(function(it){u.vcFired=!0,c.on("versionchange").fire(it)}),et.onclose=Kt(function(){c.close({disableAutoOpen:!1})}),P&&(Q=c._deps,$=O,et=Q.indexedDB,Q=Q.IDBKeyRange,Nn(et)||$===si||Hn(et,Q).put({name:$}).catch(vt)),j()},T)}).catch(function(j){switch(j?.name){case"UnknownError":if(0<u.PR1398_maxLoop)return u.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),E();break;case"VersionError":if(0<x)return x=0,E()}return ct.reject(j)})}var R,z=u.dbReadyResolve,F=null,P=!1;return ct.race([b,(typeof navigator>"u"?ct.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(j){function T(){return indexedDB.databases().finally(j)}R=setInterval(T,100),T()}).finally(function(){return clearInterval(R)}):Promise.resolve()).then(E)]).then(function(){return A(),u.onReadyBeingFired=[],ct.resolve(qn(function(){return c.on.ready.fire(c.vip)})).then(function j(){if(0<u.onReadyBeingFired.length){var T=u.onReadyBeingFired.reduce(Te,vt);return u.onReadyBeingFired=[],ct.resolve(qn(function(){return T(c.vip)})).then(j)}})}).finally(function(){u.openCanceller===b&&(u.onReadyBeingFired=null,u.isBeingOpened=!1)}).catch(function(j){u.dbOpenError=j;try{F&&F.abort()}catch{}return b===u.openCanceller&&c._close(),$t(j)}).finally(function(){u.openComplete=!0,z()}).then(function(){var j;return P&&(j={},c.tables.forEach(function(T){T.schema.indexes.forEach(function(O){O.name&&(j["idb://".concat(c.name,"/").concat(T.name,"/").concat(O.name)]=new pe(-1/0,[[[]]]))}),j["idb://".concat(c.name,"/").concat(T.name,"/")]=j["idb://".concat(c.name,"/").concat(T.name,"/:dels")]=new pe(-1/0,[[[]]])}),hr(ya).fire(j),Xn(j,!0)),c})}function Kn(c){function u(y){return c.next(y)}var f=x(u),b=x(function(y){return c.throw(y)});function x(y){return function(R){var E=y(R),R=E.value;return E.done?R:R&&typeof R.then=="function"?R.then(f,b):o(R)?Promise.all(R).then(f,b):f(R)}}return x(u)()}function yi(c,u,f){for(var b=o(c)?c.slice():[c],x=0;x<f;++x)b.push(u);return b}var Su={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(c){return r(r({},c),{table:function(u){var f=c.table(u),b=f.schema,x={},y=[];function A(P,j,T){var O=ka(P),B=x[O]=x[O]||[],V=P==null?0:typeof P=="string"?1:P.length,N=0<j,N=r(r({},T),{name:N?"".concat(O,"(virtual-from:").concat(T.name,")"):T.name,lowLevelIndex:T,isVirtual:N,keyTail:j,keyLength:V,extractKey:In(P),unique:!N&&T.unique});return B.push(N),N.isPrimaryKey||y.push(N),1<V&&A(V===2?P[0]:P.slice(0,V-1),j+1,T),B.sort(function(U,_){return U.keyTail-_.keyTail}),N}u=A(b.primaryKey.keyPath,0,b.primaryKey),x[":id"]=[u];for(var E=0,R=b.indexes;E<R.length;E++){var z=R[E];A(z.keyPath,0,z)}function F(P){var j,T=P.query.index;return T.isVirtual?r(r({},P),{query:{index:T.lowLevelIndex,range:(j=P.query.range,T=T.keyTail,{type:j.type===1?2:j.type,lower:yi(j.lower,j.lowerOpen?c.MAX_KEY:c.MIN_KEY,T),lowerOpen:!0,upper:yi(j.upper,j.upperOpen?c.MIN_KEY:c.MAX_KEY,T),upperOpen:!0})}}):P}return r(r({},f),{schema:r(r({},b),{primaryKey:u,indexes:y,getIndexByKeyPath:function(P){return(P=x[ka(P)])&&P[0]}}),count:function(P){return f.count(F(P))},query:function(P){return f.query(F(P))},openCursor:function(P){var j=P.query.index,T=j.keyTail,O=j.isVirtual,B=j.keyLength;return O?f.openCursor(F(P)).then(function(N){return N&&V(N)}):f.openCursor(P);function V(N){return Object.create(N,{continue:{value:function(U){U!=null?N.continue(yi(U,P.reverse?c.MAX_KEY:c.MIN_KEY,T)):P.unique?N.continue(N.key.slice(0,B).concat(P.reverse?c.MIN_KEY:c.MAX_KEY,T)):N.continue()}},continuePrimaryKey:{value:function(U,_){N.continuePrimaryKey(yi(U,c.MAX_KEY,T),_)}},primaryKey:{get:function(){return N.primaryKey}},key:{get:function(){var U=N.key;return B===1?U[0]:U.slice(0,B)}},value:{get:function(){return N.value}}})}}})}})}};function _n(c,u,f,b){return f=f||{},b=b||"",s(c).forEach(function(x){var y,A,E;p(u,x)?(y=c[x],A=u[x],typeof y=="object"&&typeof A=="object"&&y&&A?(E=pt(y))!==pt(A)?f[b+x]=u[x]:E==="Object"?_n(y,A,f,b+x+"."):y!==A&&(f[b+x]=u[x]):y!==A&&(f[b+x]=u[x])):f[b+x]=void 0}),s(u).forEach(function(x){p(c,x)||(f[b+x]=u[x])}),f}function Qn(c,u){return u.type==="delete"?u.keys:u.keys||u.values.map(c.extractKey)}var Au={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(c){return r(r({},c),{table:function(u){var f=c.table(u),b=f.schema.primaryKey;return r(r({},f),{mutate:function(x){var y=mt.trans,A=y.table(u).hook,E=A.deleting,R=A.creating,z=A.updating;switch(x.type){case"add":if(R.fire===vt)break;return y._promise("readwrite",function(){return F(x)},!0);case"put":if(R.fire===vt&&z.fire===vt)break;return y._promise("readwrite",function(){return F(x)},!0);case"delete":if(E.fire===vt)break;return y._promise("readwrite",function(){return F(x)},!0);case"deleteRange":if(E.fire===vt)break;return y._promise("readwrite",function(){return(function P(j,T,O){return f.query({trans:j,values:!1,query:{index:b,range:T},limit:O}).then(function(B){var V=B.result;return F({type:"delete",keys:V,trans:j}).then(function(N){return 0<N.numFailures?Promise.reject(N.failures[0]):V.length<O?{failures:[],numFailures:0,lastResult:void 0}:P(j,r(r({},T),{lower:V[V.length-1],lowerOpen:!0}),O)})})})(x.trans,x.range,1e4)},!0)}return f.mutate(x);function F(P){var j,T,O,B=mt.trans,V=P.keys||Qn(b,P);if(!V)throw new Error("Keys missing");return(P=P.type==="add"||P.type==="put"?r(r({},P),{keys:V}):r({},P)).type!=="delete"&&(P.values=i([],P.values)),P.keys&&(P.keys=i([],P.keys)),j=f,O=V,((T=P).type==="add"?Promise.resolve([]):j.getMany({trans:T.trans,keys:O,cache:"immutable"})).then(function(N){var U=V.map(function(_,Q){var et,st,$,it=N[Q],ot={onerror:null,onsuccess:null};return P.type==="delete"?E.fire.call(ot,_,it,B):P.type==="add"||it===void 0?(et=R.fire.call(ot,_,P.values[Q],B),_==null&&et!=null&&(P.keys[Q]=_=et,b.outbound||q(P.values[Q],b.keyPath,_))):(et=_n(it,P.values[Q]),(st=z.fire.call(ot,et,_,it,B))&&($=P.values[Q],Object.keys(st).forEach(function(nt){p($,nt)?$[nt]=st[nt]:q($,nt,st[nt])}))),ot});return f.mutate(P).then(function(_){for(var Q=_.failures,et=_.results,st=_.numFailures,_=_.lastResult,$=0;$<V.length;++$){var it=(et||V)[$],ot=U[$];it==null?ot.onerror&&ot.onerror(Q[$]):ot.onsuccess&&ot.onsuccess(P.type==="put"&&N[$]?P.values[$]:it)}return{failures:Q,results:et,numFailures:st,lastResult:_}}).catch(function(_){return U.forEach(function(Q){return Q.onerror&&Q.onerror(_)}),Promise.reject(_)})})}}})}})}};function Ro(c,u,f){try{if(!u||u.keys.length<c.length)return null;for(var b=[],x=0,y=0;x<u.keys.length&&y<c.length;++x)Ot(u.keys[x],c[y])===0&&(b.push(f?tt(u.values[x]):u.values[x]),++y);return b.length===c.length?b:null}catch{return null}}var Mu={stack:"dbcore",level:-1,create:function(c){return{table:function(u){var f=c.table(u);return r(r({},f),{getMany:function(b){if(!b.cache)return f.getMany(b);var x=Ro(b.keys,b.trans._cache,b.cache==="clone");return x?ct.resolve(x):f.getMany(b).then(function(y){return b.trans._cache={keys:b.keys,values:b.cache==="clone"?tt(y):y},y})},mutate:function(b){return b.type!=="add"&&(b.trans._cache=null),f.mutate(b)}})}}}};function zo(c,u){return c.trans.mode==="readonly"&&!!c.subscr&&!c.trans.explicit&&c.trans.db._options.cache!=="disabled"&&!u.schema.primaryKey.outbound}function To(c,u){switch(c){case"query":return u.values&&!u.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Du={stack:"dbcore",level:0,name:"Observability",create:function(c){var u=c.schema.name,f=new pe(c.MIN_KEY,c.MAX_KEY);return r(r({},c),{transaction:function(b,x,y){if(mt.subscr&&x!=="readonly")throw new rt.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(mt.querier));return c.transaction(b,x,y)},table:function(b){var x=c.table(b),y=x.schema,A=y.primaryKey,P=y.indexes,E=A.extractKey,R=A.outbound,z=A.autoIncrement&&P.filter(function(T){return T.compound&&T.keyPath.includes(A.keyPath)}),F=r(r({},x),{mutate:function(T){function O(nt){return nt="idb://".concat(u,"/").concat(b,"/").concat(nt),_[nt]||(_[nt]=new pe)}var B,V,N,U=T.trans,_=T.mutatedParts||(T.mutatedParts={}),Q=O(""),et=O(":dels"),st=T.type,ot=T.type==="deleteRange"?[T.range]:T.type==="delete"?[T.keys]:T.values.length<50?[Qn(A,T).filter(function(nt){return nt}),T.values]:[],$=ot[0],it=ot[1],ot=T.trans._cache;return o($)?(Q.addKeys($),(ot=st==="delete"||$.length===it.length?Ro($,ot):null)||et.addKeys($),(ot||it)&&(B=O,V=ot,N=it,y.indexes.forEach(function(nt){var ut=B(nt.name||"");function Dt(Pt){return Pt!=null?nt.extractKey(Pt):null}function Et(Pt){return nt.multiEntry&&o(Pt)?Pt.forEach(function(Re){return ut.addKey(Re)}):ut.addKey(Pt)}(V||N).forEach(function(Pt,fe){var At=V&&Dt(V[fe]),fe=N&&Dt(N[fe]);Ot(At,fe)!==0&&(At!=null&&Et(At),fe!=null&&Et(fe))})}))):$?(it={from:(it=$.lower)!==null&&it!==void 0?it:c.MIN_KEY,to:(it=$.upper)!==null&&it!==void 0?it:c.MAX_KEY},et.add(it),Q.add(it)):(Q.add(f),et.add(f),y.indexes.forEach(function(nt){return O(nt.name).add(f)})),x.mutate(T).then(function(nt){return!$||T.type!=="add"&&T.type!=="put"||(Q.addKeys(nt.results),z&&z.forEach(function(ut){for(var Dt=T.values.map(function(At){return ut.extractKey(At)}),Et=ut.keyPath.findIndex(function(At){return At===A.keyPath}),Pt=0,Re=nt.results.length;Pt<Re;++Pt)Dt[Pt][Et]=nt.results[Pt];O(ut.name).addKeys(Dt)})),U.mutatedParts=vi(U.mutatedParts||{},_),nt})}}),P=function(O){var B=O.query,O=B.index,B=B.range;return[O,new pe((O=B.lower)!==null&&O!==void 0?O:c.MIN_KEY,(B=B.upper)!==null&&B!==void 0?B:c.MAX_KEY)]},j={get:function(T){return[A,new pe(T.key)]},getMany:function(T){return[A,new pe().addKeys(T.keys)]},count:P,query:P,openCursor:P};return s(j).forEach(function(T){F[T]=function(O){var B=mt.subscr,V=!!B,N=zo(mt,x)&&To(T,O)?O.obsSet={}:B;if(V){var U=function(it){return it="idb://".concat(u,"/").concat(b,"/").concat(it),N[it]||(N[it]=new pe)},_=U(""),Q=U(":dels"),B=j[T](O),V=B[0],B=B[1];if((T==="query"&&V.isPrimaryKey&&!O.values?Q:U(V.name||"")).add(B),!V.isPrimaryKey){if(T!=="count"){var et=T==="query"&&R&&O.values&&x.query(r(r({},O),{values:!1}));return x[T].apply(this,arguments).then(function(it){if(T==="query"){if(R&&O.values)return et.then(function(Dt){return Dt=Dt.result,_.addKeys(Dt),it});var ot=O.values?it.result.map(E):it.result;(O.values?_:Q).addKeys(ot)}else if(T==="openCursor"){var nt=it,ut=O.values;return nt&&Object.create(nt,{key:{get:function(){return Q.addKey(nt.primaryKey),nt.key}},primaryKey:{get:function(){var Dt=nt.primaryKey;return Q.addKey(Dt),Dt}},value:{get:function(){return ut&&_.addKey(nt.primaryKey),nt.value}}})}return it})}Q.add(f)}}return x[T].apply(this,arguments)}}),F}})}};function Lo(c,u,f){if(f.numFailures===0)return u;if(u.type==="deleteRange")return null;var b=u.keys?u.keys.length:"values"in u&&u.values?u.values.length:1;return f.numFailures===b?null:(u=r({},u),o(u.keys)&&(u.keys=u.keys.filter(function(x,y){return!(y in f.failures)})),"values"in u&&o(u.values)&&(u.values=u.values.filter(function(x,y){return!(y in f.failures)})),u)}function Jn(c,u){return f=c,((b=u).lower===void 0||(b.lowerOpen?0<Ot(f,b.lower):0<=Ot(f,b.lower)))&&(c=c,(u=u).upper===void 0||(u.upperOpen?Ot(c,u.upper)<0:Ot(c,u.upper)<=0));var f,b}function Oo(c,u,j,b,x,y){if(!j||j.length===0)return c;var A=u.query.index,E=A.multiEntry,R=u.query.range,z=b.schema.primaryKey.extractKey,F=A.extractKey,P=(A.lowLevelIndex||A).extractKey,j=j.reduce(function(T,O){var B=T,V=[];if(O.type==="add"||O.type==="put")for(var N=new pe,U=O.values.length-1;0<=U;--U){var _,Q=O.values[U],et=z(Q);N.hasKey(et)||(_=F(Q),(E&&o(_)?_.some(function(nt){return Jn(nt,R)}):Jn(_,R))&&(N.addKey(et),V.push(Q)))}switch(O.type){case"add":var st=new pe().addKeys(u.values?T.map(function(ut){return z(ut)}):T),B=T.concat(u.values?V.filter(function(ut){return ut=z(ut),!st.hasKey(ut)&&(st.addKey(ut),!0)}):V.map(function(ut){return z(ut)}).filter(function(ut){return!st.hasKey(ut)&&(st.addKey(ut),!0)}));break;case"put":var $=new pe().addKeys(O.values.map(function(ut){return z(ut)}));B=T.filter(function(ut){return!$.hasKey(u.values?z(ut):ut)}).concat(u.values?V:V.map(function(ut){return z(ut)}));break;case"delete":var it=new pe().addKeys(O.keys);B=T.filter(function(ut){return!it.hasKey(u.values?z(ut):ut)});break;case"deleteRange":var ot=O.range;B=T.filter(function(ut){return!Jn(z(ut),ot)})}return B},c);return j===c?c:(j.sort(function(T,O){return Ot(P(T),P(O))||Ot(z(T),z(O))}),u.limit&&u.limit<1/0&&(j.length>u.limit?j.length=u.limit:c.length===u.limit&&j.length<u.limit&&(x.dirty=!0)),y?Object.freeze(j):j)}function Bo(c,u){return Ot(c.lower,u.lower)===0&&Ot(c.upper,u.upper)===0&&!!c.lowerOpen==!!u.lowerOpen&&!!c.upperOpen==!!u.upperOpen}function Eu(c,u){return(function(f,b,x,y){if(f===void 0)return b!==void 0?-1:0;if(b===void 0)return 1;if((b=Ot(f,b))===0){if(x&&y)return 0;if(x)return 1;if(y)return-1}return b})(c.lower,u.lower,c.lowerOpen,u.lowerOpen)<=0&&0<=(function(f,b,x,y){if(f===void 0)return b!==void 0?1:0;if(b===void 0)return-1;if((b=Ot(f,b))===0){if(x&&y)return 0;if(x)return-1;if(y)return 1}return b})(c.upper,u.upper,c.upperOpen,u.upperOpen)}function Pu(c,u,f,b){c.subscribers.add(f),b.addEventListener("abort",function(){var x,y;c.subscribers.delete(f),c.subscribers.size===0&&(x=c,y=u,setTimeout(function(){x.subscribers.size===0&&Z(y,x)},3e3))})}var Ru={stack:"dbcore",level:0,name:"Cache",create:function(c){var u=c.schema.name;return r(r({},c),{transaction:function(f,b,x){var y,A,E=c.transaction(f,b,x);return b==="readwrite"&&(A=(y=new AbortController).signal,x=function(R){return function(){if(y.abort(),b==="readwrite"){for(var z=new Set,F=0,P=f;F<P.length;F++){var j=P[F],T=Rr["idb://".concat(u,"/").concat(j)];if(T){var O=c.table(j),B=T.optimisticOps.filter(function(ut){return ut.trans===E});if(E._explicit&&R&&E.mutatedParts)for(var V=0,N=Object.values(T.queries.query);V<N.length;V++)for(var U=0,_=(st=N[V]).slice();U<_.length;U++)Yn(($=_[U]).obsSet,E.mutatedParts)&&(Z(st,$),$.subscribers.forEach(function(ut){return z.add(ut)}));else if(0<B.length){T.optimisticOps=T.optimisticOps.filter(function(ut){return ut.trans!==E});for(var Q=0,et=Object.values(T.queries.query);Q<et.length;Q++)for(var st,$,it,ot=0,nt=(st=et[Q]).slice();ot<nt.length;ot++)($=nt[ot]).res!=null&&E.mutatedParts&&(R&&!$.dirty?(it=Object.isFrozen($.res),it=Oo($.res,$.req,B,O,$,it),$.dirty?(Z(st,$),$.subscribers.forEach(function(ut){return z.add(ut)})):it!==$.res&&($.res=it,$.promise=ct.resolve({result:it}))):($.dirty&&Z(st,$),$.subscribers.forEach(function(ut){return z.add(ut)})))}}}z.forEach(function(ut){return ut()})}}},E.addEventListener("abort",x(!1),{signal:A}),E.addEventListener("error",x(!1),{signal:A}),E.addEventListener("complete",x(!0),{signal:A})),E},table:function(f){var b=c.table(f),x=b.schema.primaryKey;return r(r({},b),{mutate:function(y){var A=mt.trans;if(x.outbound||A.db._options.cache==="disabled"||A.explicit||A.idbtrans.mode!=="readwrite")return b.mutate(y);var E=Rr["idb://".concat(u,"/").concat(f)];return E?(A=b.mutate(y),y.type!=="add"&&y.type!=="put"||!(50<=y.values.length||Qn(x,y).some(function(R){return R==null}))?(E.optimisticOps.push(y),y.mutatedParts&&xi(y.mutatedParts),A.then(function(R){0<R.numFailures&&(Z(E.optimisticOps,y),(R=Lo(0,y,R))&&E.optimisticOps.push(R),y.mutatedParts&&xi(y.mutatedParts))}),A.catch(function(){Z(E.optimisticOps,y),y.mutatedParts&&xi(y.mutatedParts)})):A.then(function(R){var z=Lo(0,r(r({},y),{values:y.values.map(function(F,P){var j;return R.failures[P]?F:(F=(j=x.keyPath)!==null&&j!==void 0&&j.includes(".")?tt(F):r({},F),q(F,x.keyPath,R.results[P]),F)})}),R);E.optimisticOps.push(z),queueMicrotask(function(){return y.mutatedParts&&xi(y.mutatedParts)})}),A):b.mutate(y)},query:function(y){if(!zo(mt,b)||!To("query",y))return b.query(y);var A=((z=mt.trans)===null||z===void 0?void 0:z.db._options.cache)==="immutable",P=mt,E=P.requery,R=P.signal,z=(function(O,B,V,N){var U=Rr["idb://".concat(O,"/").concat(B)];if(!U)return[];if(!(B=U.queries[V]))return[null,!1,U,null];var _=B[(N.query?N.query.index.name:null)||""];if(!_)return[null,!1,U,null];switch(V){case"query":var Q=_.find(function(et){return et.req.limit===N.limit&&et.req.values===N.values&&Bo(et.req.query.range,N.query.range)});return Q?[Q,!0,U,_]:[_.find(function(et){return("limit"in et.req?et.req.limit:1/0)>=N.limit&&(!N.values||et.req.values)&&Eu(et.req.query.range,N.query.range)}),!1,U,_];case"count":return Q=_.find(function(et){return Bo(et.req.query.range,N.query.range)}),[Q,!!Q,U,_]}})(u,f,"query",y),F=z[0],P=z[1],j=z[2],T=z[3];return F&&P?F.obsSet=y.obsSet:(P=b.query(y).then(function(O){var B=O.result;if(F&&(F.res=B),A){for(var V=0,N=B.length;V<N;++V)Object.freeze(B[V]);Object.freeze(B)}else O.result=tt(B);return O}).catch(function(O){return T&&F&&Z(T,F),Promise.reject(O)}),F={obsSet:y.obsSet,promise:P,subscribers:new Set,type:"query",req:y,dirty:!1},T?T.push(F):(T=[F],(j=j||(Rr["idb://".concat(u,"/").concat(f)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[y.query.index.name||""]=T)),Pu(F,T,E,R),F.promise.then(function(O){return{result:Oo(O.result,y,j?.optimisticOps,b,F,A)}})}})}})}};function wi(c,u){return new Proxy(c,{get:function(f,b,x){return b==="db"?u:Reflect.get(f,b,x)}})}var Qe=(te.prototype.version=function(c){if(isNaN(c)||c<.1)throw new rt.Type("Given version is not a positive number");if(c=Math.round(10*c)/10,this.idbdb||this._state.isBeingOpened)throw new rt.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,c);var u=this._versions,f=u.filter(function(b){return b._cfg.version===c})[0];return f||(f=new this.Version(c),u.push(f),u.sort(xu),f.stores({}),this._state.autoSchema=!1,f)},te.prototype._whenReady=function(c){var u=this;return this.idbdb&&(this._state.openComplete||mt.letThrough||this._vip)?c():new ct(function(f,b){if(u._state.openComplete)return b(new rt.DatabaseClosed(u._state.dbOpenError));if(!u._state.isBeingOpened){if(!u._state.autoOpen)return void b(new rt.DatabaseClosed);u.open().catch(vt)}u._state.dbReadyPromise.then(f,b)}).then(c)},te.prototype.use=function(c){var u=c.stack,f=c.create,b=c.level,x=c.name;return x&&this.unuse({stack:u,name:x}),c=this._middlewares[u]||(this._middlewares[u]=[]),c.push({stack:u,create:f,level:b??10,name:x}),c.sort(function(y,A){return y.level-A.level}),this},te.prototype.unuse=function(c){var u=c.stack,f=c.name,b=c.create;return u&&this._middlewares[u]&&(this._middlewares[u]=this._middlewares[u].filter(function(x){return b?x.create!==b:!!f&&x.name!==f})),this},te.prototype.open=function(){var c=this;return Dr(or,function(){return Cu(c)})},te.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var c=this._state,u=Zr.indexOf(this);if(0<=u&&Zr.splice(u,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}c.isBeingOpened||(c.dbReadyPromise=new ct(function(f){c.dbReadyResolve=f}),c.openCanceller=new ct(function(f,b){c.cancelOpen=b}))},te.prototype.close=function(f){var u=(f===void 0?{disableAutoOpen:!0}:f).disableAutoOpen,f=this._state;u?(f.isBeingOpened&&f.cancelOpen(new rt.DatabaseClosed),this._close(),f.autoOpen=!1,f.dbOpenError=new rt.DatabaseClosed):(this._close(),f.autoOpen=this._options.autoOpen||f.isBeingOpened,f.openComplete=!1,f.dbOpenError=null)},te.prototype.delete=function(c){var u=this;c===void 0&&(c={disableAutoOpen:!0});var f=0<arguments.length&&typeof arguments[0]!="object",b=this._state;return new ct(function(x,y){function A(){u.close(c);var E=u._deps.indexedDB.deleteDatabase(u.name);E.onsuccess=Kt(function(){var R,z,F;R=u._deps,z=u.name,F=R.indexedDB,R=R.IDBKeyRange,Nn(F)||z===si||Hn(F,R).delete(z).catch(vt),x()}),E.onerror=Ne(y),E.onblocked=u._fireOnBlocked}if(f)throw new rt.InvalidArgument("Invalid closeOptions argument to db.delete()");b.isBeingOpened?b.dbReadyPromise.then(A):A()})},te.prototype.backendDB=function(){return this.idbdb},te.prototype.isOpen=function(){return this.idbdb!==null},te.prototype.hasBeenClosed=function(){var c=this._state.dbOpenError;return c&&c.name==="DatabaseClosed"},te.prototype.hasFailed=function(){return this._state.dbOpenError!==null},te.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(te.prototype,"tables",{get:function(){var c=this;return s(this._allTables).map(function(u){return c._allTables[u]})},enumerable:!1,configurable:!0}),te.prototype.transaction=function(){var c=function(u,f,b){var x=arguments.length;if(x<2)throw new rt.InvalidArgument("Too few arguments");for(var y=new Array(x-1);--x;)y[x-1]=arguments[x];return b=y.pop(),[u,L(y),b]}.apply(this,arguments);return this._transaction.apply(this,c)},te.prototype._transaction=function(c,u,f){var b=this,x=mt.trans;x&&x.db===this&&c.indexOf("!")===-1||(x=null);var y,A,E=c.indexOf("?")!==-1;c=c.replace("!","").replace("?","");try{if(A=u.map(function(z){if(z=z instanceof b.Table?z.name:z,typeof z!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return z}),c=="r"||c===Pn)y=Pn;else{if(c!="rw"&&c!=Rn)throw new rt.InvalidArgument("Invalid transaction mode: "+c);y=Rn}if(x){if(x.mode===Pn&&y===Rn){if(!E)throw new rt.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");x=null}x&&A.forEach(function(z){if(x&&x.storeNames.indexOf(z)===-1){if(!E)throw new rt.SubTransaction("Table "+z+" not included in parent transaction.");x=null}}),E&&x&&!x.active&&(x=null)}}catch(z){return x?x._promise(null,function(F,P){P(z)}):$t(z)}var R=function z(F,P,j,T,O){return ct.resolve().then(function(){var B=mt.transless||mt,V=F._createTransaction(P,j,F._dbSchema,T);if(V.explicit=!0,B={trans:V,transless:B},T)V.idbtrans=T.idbtrans;else try{V.create(),V.idbtrans._explicit=!0,F._state.PR1398_maxLoop=3}catch(_){return _.name===se.InvalidState&&F.isOpen()&&0<--F._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),F.close({disableAutoOpen:!1}),F.open().then(function(){return z(F,P,j,null,O)})):$t(_)}var N,U=dt(O);return U&&Jr(),B=ct.follow(function(){var _;(N=O.call(V,V))&&(U?(_=cr.bind(null,null),N.then(_,_)):typeof N.next=="function"&&typeof N.throw=="function"&&(N=Kn(N)))},B),(N&&typeof N.then=="function"?ct.resolve(N).then(function(_){return V.active?_:$t(new rt.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):B.then(function(){return N})).then(function(_){return T&&V._resolve(),V._completion.then(function(){return _})}).catch(function(_){return V._reject(_),$t(_)})})}.bind(null,this,y,A,x,f);return x?x._promise(y,R,"lock"):mt.trans?Dr(mt.transless,function(){return b._whenReady(R)}):this._whenReady(R)},te.prototype.table=function(c){if(!p(this._allTables,c))throw new rt.InvalidTable("Table ".concat(c," does not exist"));return this._allTables[c]},te);function te(c,u){var f=this;this._middlewares={},this.verno=0;var b=te.dependencies;this._options=u=r({addons:te.addons,autoOpen:!0,indexedDB:b.indexedDB,IDBKeyRange:b.IDBKeyRange,cache:"cloned"},u),this._deps={indexedDB:u.indexedDB,IDBKeyRange:u.IDBKeyRange},b=u.addons,this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this;var x,y,A,E,R,z={dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:vt,dbReadyPromise:null,cancelOpen:vt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:u.autoOpen};z.dbReadyPromise=new ct(function(P){z.dbReadyResolve=P}),z.openCanceller=new ct(function(P,j){z.cancelOpen=j}),this._state=z,this.name=c,this.on=ba(this,"populate","blocked","versionchange","close",{ready:[Te,vt]}),this.once=function(P,j){var T=function(){for(var O=[],B=0;B<arguments.length;B++)O[B]=arguments[B];f.on(P).unsubscribe(T),j.apply(f,O)};return f.on(P,T)},this.on.ready.subscribe=I(this.on.ready.subscribe,function(P){return function(j,T){te.vip(function(){var O,B=f._state;B.openComplete?(B.dbOpenError||ct.resolve().then(j),T&&P(j)):B.onReadyBeingFired?(B.onReadyBeingFired.push(j),T&&P(j)):(P(j),O=f,T||P(function V(){O.on.ready.unsubscribe(j),O.on.ready.unsubscribe(V)}))})}}),this.Collection=(x=this,va(hu.prototype,function(N,V){this.db=x;var T=co,O=null;if(V)try{T=V()}catch(U){O=U}var B=N._ctx,V=B.table,N=V.hook.reading.fire;this._ctx={table:V,index:B.index,isPrimKey:!B.index||V.schema.primKey.keyPath&&B.index===V.schema.primKey.name,range:T,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:O,or:B.or,valueMapper:N!==Ut?N:null}})),this.Table=(y=this,va(mo.prototype,function(P,j,T){this.db=y,this._tx=T,this.name=P,this.schema=j,this.hook=y._allTables[P]?y._allTables[P].hook:ba(null,{creating:[zt,vt],reading:[Vt,Ut],updating:[Mt,vt],deleting:[Me,vt]})})),this.Transaction=(A=this,va(gu.prototype,function(P,j,T,O,B){var V=this;P!=="readonly"&&j.forEach(function(N){N=(N=T[N])===null||N===void 0?void 0:N.yProps,N&&(j=j.concat(N.map(function(U){return U.updatesTable})))}),this.db=A,this.mode=P,this.storeNames=j,this.schema=T,this.chromeTransactionDurability=O,this.idbtrans=null,this.on=ba(this,"complete","error","abort"),this.parent=B||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new ct(function(N,U){V._resolve=N,V._reject=U}),this._completion.then(function(){V.active=!1,V.on.complete.fire()},function(N){var U=V.active;return V.active=!1,V.on.error.fire(N),V.parent?V.parent._reject(N):U&&V.idbtrans&&V.idbtrans.abort(),$t(N)})})),this.Version=(E=this,va(ku.prototype,function(P){this.db=E,this._cfg={version:P,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(R=this,va(wo.prototype,function(P,j,T){if(this.db=R,this._ctx={table:P,index:j===":id"?null:j,or:T},this._cmp=this._ascending=Ot,this._descending=function(O,B){return Ot(B,O)},this._max=function(O,B){return 0<Ot(O,B)?O:B},this._min=function(O,B){return Ot(O,B)<0?O:B},this._IDBKeyRange=R._deps.IDBKeyRange,!this._IDBKeyRange)throw new rt.MissingAPI})),this.on("versionchange",function(P){0<P.newVersion?console.warn("Another connection wants to upgrade database '".concat(f.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(f.name,"'. Closing db now to resume the delete request.")),f.close({disableAutoOpen:!1})}),this.on("blocked",function(P){!P.newVersion||P.newVersion<P.oldVersion?console.warn("Dexie.delete('".concat(f.name,"') was blocked")):console.warn("Upgrade '".concat(f.name,"' blocked by other connection holding version ").concat(P.oldVersion/10))}),this._maxKey=wa(u.IDBKeyRange),this._createTransaction=function(P,j,T,O){return new f.Transaction(P,j,T,f._options.chromeTransactionDurability,O)},this._fireOnBlocked=function(P){f.on("blocked").fire(P),Zr.filter(function(j){return j.name===f.name&&j!==f&&!j._state.vcFired}).map(function(j){return j.on("versionchange").fire(P)})},this.use(Mu),this.use(Ru),this.use(Du),this.use(Su),this.use(Au);var F=new Proxy(this,{get:function(P,j,T){if(j==="_vip")return!0;if(j==="table")return function(B){return wi(f.table(B),F)};var O=Reflect.get(P,j,T);return O instanceof mo?wi(O,F):j==="tables"?O.map(function(B){return wi(B,F)}):j==="_createTransaction"?function(){return wi(O.apply(this,arguments),F)}:O}});this.vip=F,b.forEach(function(P){return P(f)})}var ki,Le=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",zu=(Zn.prototype.subscribe=function(c,u,f){return this._subscribe(c&&typeof c!="function"?c:{next:c,error:u,complete:f})},Zn.prototype[Le]=function(){return this},Zn);function Zn(c){this._subscribe=c}try{ki={indexedDB:n.indexedDB||n.mozIndexedDB||n.webkitIndexedDB||n.msIndexedDB,IDBKeyRange:n.IDBKeyRange||n.webkitIDBKeyRange}}catch{ki={indexedDB:null,IDBKeyRange:null}}function Io(c){var u,f=!1,b=new zu(function(x){var y=dt(c),A,E=!1,R={},z={},F={get closed(){return E},unsubscribe:function(){E||(E=!0,A&&A.abort(),P&&hr.storagemutated.unsubscribe(T))}};x.start&&x.start(F);var P=!1,j=function(){return En(O)},T=function(B){vi(R,B),Yn(z,R)&&j()},O=function(){var B,V,N;!E&&ki.indexedDB&&(R={},B={},A&&A.abort(),A=new AbortController,N=(function(U){var _=_r();try{y&&Jr();var Q=lr(c,U);return Q=y?Q.finally(cr):Q}finally{_&&Qr()}})(V={subscr:B,signal:A.signal,requery:j,querier:c,trans:null}),Promise.resolve(N).then(function(U){f=!0,u=U,E||V.signal.aborted||(R={},(function(_){for(var Q in _)if(p(_,Q))return;return 1})(z=B)||P||(hr(ya,T),P=!0),En(function(){return!E&&x.next&&x.next(U)}))},function(U){f=!1,["DatabaseClosedError","AbortError"].includes(U?.name)||E||En(function(){E||x.error&&x.error(U)})}))};return setTimeout(j,0),F});return b.hasValue=function(){return f},b.getValue=function(){return u},b}var zr=Qe;function $n(c){var u=pr;try{pr=!0,hr.storagemutated.fire(c),Xn(c,!0)}finally{pr=u}}m(zr,r(r({},xt),{delete:function(c){return new zr(c,{addons:[]}).delete()},exists:function(c){return new zr(c,{addons:[]}).open().then(function(u){return u.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(c){try{return u=zr.dependencies,f=u.indexedDB,u=u.IDBKeyRange,(Nn(f)?Promise.resolve(f.databases()).then(function(b){return b.map(function(x){return x.name}).filter(function(x){return x!==si})}):Hn(f,u).toCollection().primaryKeys()).then(c)}catch{return $t(new rt.MissingAPI)}var u,f},defineClass:function(){return function(c){l(this,c)}},ignoreTransaction:function(c){return mt.trans?Dr(mt.transless,c):c()},vip:qn,async:function(c){return function(){try{var u=Kn(c.apply(this,arguments));return u&&typeof u.then=="function"?u:ct.resolve(u)}catch(f){return $t(f)}}},spawn:function(c,u,f){try{var b=Kn(c.apply(f,u||[]));return b&&typeof b.then=="function"?b:ct.resolve(b)}catch(x){return $t(x)}},currentTransaction:{get:function(){return mt.trans||null}},waitFor:function(c,u){return u=ct.resolve(typeof c=="function"?zr.ignoreTransaction(c):c).timeout(u||6e4),mt.trans?mt.trans.waitFor(u):u},Promise:ct,debug:{get:function(){return ue},set:function(c){De(c)}},derive:k,extend:l,props:m,override:I,Events:ba,on:hr,liveQuery:Io,extendObservabilitySet:vi,getByKeyPath:X,setByKeyPath:q,delByKeyPath:function(c,u){typeof u=="string"?q(c,u,void 0):"length"in u&&[].map.call(u,function(f){q(c,f,void 0)})},shallowClone:w,deepClone:tt,getObjectDiff:_n,cmp:Ot,asap:H,minKey:-1/0,addons:[],connections:Zr,errnames:se,dependencies:ki,cache:Rr,semVer:"4.2.1",version:"4.2.1".split(".").map(function(c){return parseInt(c)}).reduce(function(c,u,f){return c+u/Math.pow(10,2*f)})})),zr.maxKey=wa(zr.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(hr(ya,function(c){pr||(c=new CustomEvent(Ln,{detail:c}),pr=!0,dispatchEvent(c),pr=!1)}),addEventListener(Ln,function(c){c=c.detail,pr||$n(c)}));var ra,pr=!1,Fo=function(){};return typeof BroadcastChannel<"u"&&((Fo=function(){(ra=new BroadcastChannel(Ln)).onmessage=function(c){return c.data&&$n(c.data)}})(),typeof ra.unref=="function"&&ra.unref(),hr(ya,function(c){pr||ra.postMessage(c)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(c){if(!Qe.disableBfCache&&c.persisted){ue&&console.debug("Dexie: handling persisted pagehide"),ra?.close();for(var u=0,f=Zr;u<f.length;u++)f[u].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(c){!Qe.disableBfCache&&c.persisted&&(ue&&console.debug("Dexie: handling persisted pageshow"),Fo(),$n({all:new pe(-1/0,[[]])}))})),ct.rejectionMapper=function(c,u){return!c||c instanceof at||c instanceof TypeError||c instanceof SyntaxError||!c.name||!Yt[c.name]?c:(u=new Yt[c.name](u||c.message,c),"stack"in c&&g(u,"stack",{get:function(){return this.inner.stack}}),u)},De(ue),r(Qe,Object.freeze({__proto__:null,Dexie:Qe,liveQuery:Io,Entity:uo,cmp:Ot,PropModification:ma,replacePrefix:function(c,u){return new ma({replacePrefix:[c,u]})},add:function(c){return new ma({add:c})},remove:function(c){return new ma({remove:c})},default:Qe,RangeSet:pe,mergeRanges:Sa,rangesOverlap:Mo}),{default:Qe}),Qe})})(Ui)),Ui.exports}var Fu=Iu();const xs=zc(Fu),Ho=Symbol.for("Dexie"),Qi=globalThis[Ho]||(globalThis[Ho]=xs);if(xs.semVer!==Qi.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${xs.semVer} and ${Qi.semVer}`);const{liveQuery:$x,mergeRanges:t1,rangesOverlap:e1,RangeSet:r1,cmp:a1,Entity:i1,PropModification:n1,replacePrefix:s1,add:o1,remove:l1,DexieYProvider:c1}=Qi;typeof window<"u"&&"indexedDB"in window&&window.indexedDB.open("__safari_workaround");class Vu extends Qi{portfolios;marketData;settings;customMarketData;constructor(){super("evelo"),this.version(1).stores({portfolios:"++id, name, modified",marketData:"++id, [symbol+source], fetchedAt",settings:"id"}),this.version(2).stores({portfolios:"++id, name, modified",marketData:"++id, [symbol+source], fetchedAt",settings:"id",customMarketData:"++id, symbol, importedAt"})}}const Ht=new Vu;function Tc(){return{id:"settings",corsProxyType:"none",apiKeys:{},preferredSource:"fmp",theme:"system"}}let Hr="system";const Lc=window.matchMedia("(prefers-color-scheme: dark)");function Bs(a){return a==="system"?Lc.matches?"dark":"light":a}function ys(a){document.documentElement.setAttribute("data-theme",a),window.dispatchEvent(new CustomEvent("theme-change",{detail:{theme:a}}))}async function ju(){try{Hr=(await Ht.settings.get("settings"))?.theme??"system"}catch(t){console.warn("Failed to load theme from IndexedDB, using system default:",t),Hr="system"}const a=Bs(Hr);ys(a),Lc.addEventListener("change",t=>{if(Hr==="system"){const e=t.matches?"dark":"light";ys(e)}})}async function Oc(a){Hr=a;try{const e=await Ht.settings.get("settings")??Tc();e.theme=a,await Ht.settings.put(e)}catch(e){console.error("Failed to persist theme to IndexedDB:",e)}const t=Bs(a);ys(t)}function Hu(){return Hr}function No(){return Bs(Hr)}function Bc(a){const t=e=>{a(e.detail.theme)};return window.addEventListener("theme-change",t),()=>{window.removeEventListener("theme-change",t)}}ju().then(()=>{Rc(()=>Promise.resolve().then(()=>Qx),void 0,import.meta.url)});console.log("eVelo starting...");class Ct extends HTMLElement{shadow;constructor(){super(),this.shadow=this.attachShadow({mode:"open"})}connectedCallback(){this.render()}disconnectedCallback(){}attributeChangedCallback(t,e,r){e!==r&&this.render()}static get observedAttributes(){return[]}render(){this.shadow.innerHTML=`
      <style>${this.styles()}</style>
      ${this.template()}
    `,this.afterRender()}afterRender(){}$(t){return this.shadow.querySelector(t)}$$(t){return this.shadow.querySelectorAll(t)}}const ca="data:image/png;base64,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";class Nu extends Ct{template(){return`
      <header class="app-header">
        <img src="${ca}" alt="" class="header-watermark" aria-hidden="true" />
        <div class="header-brand">
          <div class="brand-wordmark">
            <img src="${ca}" alt="eVelo logo" class="brand-logo" />
            <h1 class="brand-title">eVelo</h1>
          </div>
          <p class="brand-tagline">Escape Financial Gravity.</p>
        </div>
        <div class="header-actions">
          <slot name="actions"></slot>
        </div>
      </header>
    `}styles(){return`
      :host {
        display: block;
        width: 100%;
        max-width: 100%;
      }

      /* Shadow DOM reset - global box-sizing doesn't penetrate */
      *, *::before, *::after {
        box-sizing: border-box;
      }

      .app-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: var(--spacing-md, 16px) var(--spacing-lg, 24px);
        background: var(--color-primary, #0d9488);
        color: var(--text-inverse, #ffffff);
        width: 100%;
        box-sizing: border-box;
        position: relative;
        overflow: hidden;
      }

      .header-watermark {
        position: absolute;
        right: -20px;
        top: 50%;
        transform: translateY(-50%);
        height: 120%;
        width: auto;
        opacity: 0.08;
        filter: brightness(0) invert(1);
        pointer-events: none;
        z-index: 0;
      }

      .header-brand {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-xs, 4px);
        position: relative;
        z-index: 1;
      }

      .brand-wordmark {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
      }

      .brand-logo {
        height: clamp(1.5rem, 3vw + 0.5rem, 2rem);
        width: auto;
        object-fit: contain;
        filter: brightness(0) invert(1);
        transition: transform 0.2s ease, filter 0.2s ease;
        cursor: pointer;
        animation: logoEntrance 0.8s ease-out;
      }

      @keyframes logoEntrance {
        0% {
          opacity: 0;
          transform: scale(0.5) rotate(-180deg);
        }
        60% {
          opacity: 1;
          transform: scale(1.1) rotate(10deg);
        }
        100% {
          opacity: 1;
          transform: scale(1) rotate(0deg);
        }
      }

      .brand-logo:hover {
        transform: scale(1.1) rotate(-5deg);
        filter: brightness(0) invert(1) drop-shadow(0 0 8px rgba(255, 255, 255, 0.5));
      }

      .brand-title {
        margin: 0;
        font-size: clamp(1.25rem, 2.5vw + 0.5rem, 1.75rem);
        font-weight: 700;
        font-family: var(--font-family, system-ui, -apple-system, sans-serif);
        letter-spacing: -0.02em;
        line-height: 1;
      }

      .brand-tagline {
        margin: 0;
        font-size: clamp(0.75rem, 1.5vw + 0.25rem, 0.875rem);
        opacity: 0.9;
        font-weight: 400;
        letter-spacing: 0.01em;
      }

      .header-actions {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
        position: relative;
        z-index: 1;
        padding-right: 40px;
      }

      /* Slotted action buttons styling */
      ::slotted(button),
      ::slotted([role="button"]) {
        background: rgba(255, 255, 255, 0.15);
        border: 1px solid rgba(255, 255, 255, 0.25);
        color: var(--text-inverse, #ffffff);
        border-radius: var(--border-radius-md, 8px);
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        cursor: pointer;
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 500;
        transition: background-color 0.15s ease, border-color 0.15s ease;
      }

      ::slotted(button:hover),
      ::slotted([role="button"]:hover) {
        background: rgba(255, 255, 255, 0.25);
        border-color: rgba(255, 255, 255, 0.4);
      }

      ::slotted(button:focus-visible),
      ::slotted([role="button"]:focus-visible) {
        outline: 2px solid var(--text-inverse, #ffffff);
        outline-offset: 2px;
      }

      /* Mobile responsive: hide tagline, scale watermark */
      @media (max-width: 768px) {
        .app-header {
          padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        }

        .brand-tagline {
          font-size: 0.7rem;
        }

        .header-watermark {
          height: 100%;
          right: -10px;
          opacity: 0.06;
        }

        .header-actions {
          gap: var(--spacing-xs, 4px);
          padding-right: 20px;
        }

        ::slotted(button),
        ::slotted([role="button"]) {
          padding: var(--spacing-xs, 4px) var(--spacing-sm, 8px);
        }
      }

      /* Dark theme adjustments - Teal Accent with White Watermark */
      :host-context([data-theme="dark"]) .app-header {
        background: linear-gradient(135deg, #1a2d3d 0%, #0f1922 100%);
        color: #14b8a6;
      }

      :host-context([data-theme="dark"]) .brand-logo {
        filter: brightness(0) saturate(100%) invert(58%) sepia(71%) saturate(457%) hue-rotate(127deg) brightness(95%) contrast(91%);
      }

      :host-context([data-theme="dark"]) .brand-logo:hover {
        filter: brightness(0) saturate(100%) invert(58%) sepia(71%) saturate(457%) hue-rotate(127deg) brightness(95%) contrast(91%) drop-shadow(0 0 8px rgba(20, 184, 166, 0.5));
      }

      :host-context([data-theme="dark"]) .brand-title {
        color: #14b8a6;
      }

      :host-context([data-theme="dark"]) .brand-tagline {
        color: rgba(255, 255, 255, 0.6);
        opacity: 1;
      }

      :host-context([data-theme="dark"]) .header-watermark {
        filter: brightness(0) invert(1);
        opacity: 0.04;
      }

      :host-context([data-theme="dark"]) ::slotted(button),
      :host-context([data-theme="dark"]) ::slotted([role="button"]) {
        background: rgba(20, 184, 166, 0.1);
        border-color: rgba(20, 184, 166, 0.3);
        color: #14b8a6;
      }

      :host-context([data-theme="dark"]) ::slotted(button:hover),
      :host-context([data-theme="dark"]) ::slotted([role="button"]:hover) {
        background: rgba(20, 184, 166, 0.2);
        border-color: rgba(20, 184, 166, 0.4);
      }
    `}}customElements.define("app-header",Nu);class qu extends Ct{static get observedAttributes(){return["collapsed"]}attributeChangedCallback(t,e,r){if(e!==r&&t==="collapsed"){const i=r!==null,n=this.$(".toggle-btn");n&&(n.setAttribute("aria-expanded",String(!i)),n.setAttribute("aria-label",`${i?"Expand":"Collapse"} parameters sidebar`))}}template(){const t=this.hasAttribute("collapsed");return`
      <aside class="sidebar">
        <button class="toggle-btn"
                aria-label="${t?"Expand":"Collapse"} parameters sidebar"
                aria-expanded="${!t}">
          <span class="toggle-label">eVelo Parameters</span>
          <span class="toggle-icon" aria-hidden="true"></span>
        </button>
        <div class="sidebar-content">
          <slot></slot>
        </div>
        <div class="sidebar-footer">
          <slot name="footer"></slot>
        </div>
      </aside>
    `}styles(){return`
      :host {
        display: block;
        height: 100%;
        min-height: 0; /* Allow shrinking in flex/grid parent */
      }

      .sidebar {
        display: grid;
        grid-template-rows: auto 1fr auto;
        height: 100%;
        min-height: 0; /* Allow grid to constrain content height */
        width: var(--sidebar-width, 320px);
        background: var(--surface-secondary, #f8fafc);
        border-right: 1px solid var(--border-color, #e2e8f0);
        transition: width 0.3s ease;
        overflow: hidden;
      }

      :host([collapsed]) .sidebar {
        width: var(--sidebar-collapsed-width, 48px);
      }

      :host([collapsed]) .sidebar-content {
        display: none;
      }

      :host([collapsed]) .sidebar-footer {
        display: none;
      }

      .toggle-btn {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: var(--spacing-sm, 8px);
        width: 100%;
        padding: var(--spacing-md, 16px);
        background: linear-gradient(135deg, #f0fdfa 0%, #ccfbf1 100%);
        border: none;
        border-bottom: 2px solid #0d9488;
        cursor: pointer;
        font-size: 1rem;
        font-weight: 700;
        color: #065f56;
        box-shadow: 0 2px 8px rgba(13, 148, 136, 0.2), 0 1px 3px rgba(0,0,0,0.1);
        transition: all 0.2s ease;
      }

      .toggle-btn:hover {
        background: linear-gradient(135deg, #ccfbf1 0%, #99f6e4 100%);
        box-shadow: 0 4px 12px rgba(13, 148, 136, 0.25), 0 2px 4px rgba(0,0,0,0.12);
      }

      .toggle-btn:focus-visible {
        outline: 2px solid #0d9488;
        outline-offset: 2px;
      }

      .toggle-label {
        font-weight: 700;
        font-size: var(--font-size-sm, 0.875rem);
        white-space: nowrap;
        transition: writing-mode 0.3s ease, opacity 0.3s ease;
      }

      .toggle-icon {
        display: inline-block;
        width: 10px;
        height: 10px;
        border-right: 2.5px solid #0d9488;
        border-bottom: 2.5px solid #0d9488;
        transform: rotate(135deg);
        transition: transform 0.3s ease;
        flex-shrink: 0;
        margin-right: 2px;
      }

      /* Desktop collapsed: vertical text using writing-mode */
      :host([collapsed]) .toggle-btn {
        justify-content: center;
        padding: var(--spacing-lg, 24px) var(--spacing-sm, 8px);
        height: 100%;
        flex-direction: column;
        border-bottom: none;
        border-right: 2px solid #5eead4;
      }

      :host([collapsed]) .toggle-label {
        writing-mode: vertical-rl;
        text-orientation: mixed;
      }

      :host([collapsed]) .toggle-icon {
        transform: rotate(-45deg);
        margin-top: var(--spacing-sm, 8px);
        margin-right: 0;
      }

      /* Dark theme support */
      :host-context([data-theme="dark"]) .toggle-btn {
        background: linear-gradient(135deg, #134e4a 0%, #115e59 100%);
        color: #ccfbf1;
        border-bottom-color: #0d9488;
      }

      :host-context([data-theme="dark"]) .toggle-btn:hover {
        background: linear-gradient(135deg, #115e59 0%, #0f766e 100%);
      }

      :host-context([data-theme="dark"]) .toggle-icon {
        border-color: #5eead4;
      }

      :host-context([data-theme="dark"]) .sidebar-footer {
        background: var(--surface-secondary, #1e293b);
        border-top-color: var(--border-color, #334155);
        box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.3);  /* Darker shadow for dark theme */
      }

      /* Mobile: Always horizontal label, hide icon */
      @media (max-width: 768px) {
        .toggle-btn {
          display: none; /* Hide on mobile - main-layout handles mobile toggle */
        }

        .sidebar {
          width: 100%;
        }
      }

      .sidebar-content {
        overflow-y: auto;
        padding: var(--spacing-sm, 8px);
        padding-bottom: calc(68px + 24px); /* Footer height + spacing buffer */
        min-height: 0;
        -webkit-overflow-scrolling: touch; /* iOS momentum scrolling */
      }

      /* Custom scrollbar styling - subtle by default, prominent on hover */
      .sidebar-content {
        scrollbar-width: thin;
        scrollbar-color: transparent transparent;
      }

      .sidebar-content:hover {
        scrollbar-color: #b4bcc5 transparent;
      }

      .sidebar-content::-webkit-scrollbar {
        width: 8px;
      }

      .sidebar-content::-webkit-scrollbar-track {
        background: transparent;
      }

      .sidebar-content::-webkit-scrollbar-thumb {
        background: transparent;
        border-radius: 4px;
      }

      /* Show scrollbar on hover */
      .sidebar-content:hover::-webkit-scrollbar-thumb {
        background: #b4bcc5;
      }

      .sidebar-content:hover::-webkit-scrollbar-thumb:hover {
        background: #8b96a6;
      }

      .sidebar-footer {
        position: sticky;
        bottom: 0;
        z-index: 10;
        padding: var(--spacing-md, 16px);
        border-top: 1px solid var(--border-color, #e2e8f0);
        background: var(--surface-secondary, #f8fafc);
        box-shadow: 0 -2px 8px rgba(0, 0, 0, 0.1);
      }

      /* Mobile: enhanced sticky footer with safe-area-insets */
      @media (max-width: 768px) {
        .sidebar-content {
          padding-bottom: calc(68px + 32px + env(safe-area-inset-bottom, 0px)); /* Footer + larger mobile spacing + safe area */
        }

        .sidebar-footer {
          padding-bottom: max(16px, env(safe-area-inset-bottom, 0px));
        }
      }
    `}afterRender(){this.$(".toggle-btn")?.addEventListener("click",this.handleToggle.bind(this))}handleToggle(){const t=this.hasAttribute("collapsed");t?this.removeAttribute("collapsed"):this.setAttribute("collapsed",""),this.dispatchEvent(new CustomEvent("toggle",{bubbles:!0,composed:!0,detail:{collapsed:!t}}))}}customElements.define("sidebar-panel",qu);class Wu extends Ct{static get observedAttributes(){return["title","open","icon"]}template(){const t=this.getAttribute("title")||"Section",e=this.getAttribute("icon")||"";return`
      <details ${this.hasAttribute("open")?"open":""}>
        <summary>
          ${e?`<span class="section-icon">${e}</span>`:""}
          <span class="section-title">${t}</span>
          <span class="chevron" aria-hidden="true"></span>
        </summary>
        <div class="section-content">
          <slot></slot>
        </div>
      </details>
    `}styles(){return`
      :host {
        display: block;
        margin-bottom: var(--spacing-md, 16px);
        max-width: 100%;
      }

      /* Shadow DOM reset - global box-sizing doesn't penetrate */
      *, *::before, *::after {
        box-sizing: border-box;
      }

      details {
        background: var(--surface-secondary, #f8fafc);
        border-radius: var(--border-radius-lg, 12px);
        border-left: 4px solid var(--color-primary, #0d9488);
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.04);
        overflow: hidden;
      }

      summary {
        display: flex;
        align-items: center;
        padding: var(--spacing-md, 16px) var(--spacing-lg, 24px);
        cursor: pointer;
        user-select: none;
        list-style: none;
        font-weight: 600;
        color: var(--text-primary, #1e293b);
        transition: background 0.2s ease;
        gap: var(--spacing-sm, 8px);
      }

      summary::-webkit-details-marker {
        display: none;
      }

      summary::marker {
        display: none;
      }

      summary:hover {
        background: var(--surface-hover, rgba(0, 0, 0, 0.02));
      }

      summary:focus-visible {
        outline: 2px solid var(--color-primary, #0d9488);
        outline-offset: -2px;
      }

      .section-icon {
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
        width: 24px;
        height: 24px;
        color: var(--section-icon-color, var(--color-primary, #0d9488));
      }

      .section-icon svg {
        width: 20px;
        height: 20px;
      }

      .section-title {
        flex: 1;
        font-size: var(--font-size-sm, 0.875rem);
        text-transform: uppercase;
        letter-spacing: 0.05em;
        color: var(--text-primary, #1e293b);
      }

      .chevron {
        width: 0;
        height: 0;
        border-left: 5px solid transparent;
        border-right: 5px solid transparent;
        border-top: 6px solid var(--text-secondary, #64748b);
        transition: transform 0.2s ease;
        flex-shrink: 0;
      }

      details[open] .chevron {
        transform: rotate(180deg);
      }

      .section-content {
        padding: 0 var(--spacing-lg, 24px) var(--spacing-lg, 24px);
      }
    `}}customElements.define("param-section",Wu);class Yu extends Ct{static get observedAttributes(){return["sidebar-collapsed"]}attributeChangedCallback(t,e,r){}template(){return`
      <div class="layout">
        <header class="main-header">
          <slot name="header"></slot>
        </header>
        <div class="mobile-toggle-row">
          <button class="mobile-menu-btn" aria-label="Toggle parameters sidebar">
            <span class="menu-label">eVelo Parameters</span>
            <span class="menu-icon" aria-hidden="true"></span>
          </button>
        </div>
        <div class="sidebar-area">
          <slot name="sidebar"></slot>
        </div>
        <div class="main-area">
          <main class="main-content">
            <slot></slot>
          </main>
        </div>
        <div class="sidebar-backdrop" aria-hidden="true"></div>
      </div>
    `}styles(){return`
      :host {
        display: block;
        height: 100vh;      /* Fallback for older browsers */
        height: 100dvh;     /* Dynamic viewport height (Chrome 108+, Safari 15.4+) */
      }

      .layout {
        display: grid;
        grid-template-areas:
          "header header"
          "sidebar main";
        grid-template-rows: auto 1fr;
        grid-template-columns: var(--sidebar-width, 320px) 1fr;
        height: 100%;
      }

      /* Desktop only: collapsed sidebar width */
      @media (min-width: 769px) {
        :host([sidebar-collapsed]) .layout {
          grid-template-columns: var(--sidebar-collapsed-width, 48px) 1fr;
        }
      }

      .main-header {
        grid-area: header;
        display: flex;
        align-items: center;
      }

      /* Make slotted header element fill full width */
      .main-header ::slotted(*) {
        flex: 1;
      }

      .sidebar-area {
        grid-area: sidebar;
        overflow: hidden;
        background: var(--surface-secondary, #f8fafc);
        border-right: 1px solid var(--border-color, #e2e8f0);
        min-height: 0; /* Allow grid item to shrink below content size */
      }

      /* Ensure slotted sidebar-panel fills the area and respects height constraints */
      .sidebar-area ::slotted(*) {
        height: 100%;
      }

      /* Custom scrollbar styling - hidden by default, show on hover */
      .main-content {
        scrollbar-width: thin;
        scrollbar-color: transparent transparent;
      }

      .main-content:hover {
        scrollbar-color: #b4bcc5 transparent;
      }

      .main-content::-webkit-scrollbar {
        width: 8px;
      }

      .main-content::-webkit-scrollbar-track {
        background: transparent;
      }

      .main-content::-webkit-scrollbar-thumb {
        background: transparent;
        border-radius: 4px;
      }

      /* Show scrollbar on hover */
      .main-content:hover::-webkit-scrollbar-thumb {
        background: #b4bcc5;
      }

      .main-content:hover::-webkit-scrollbar-thumb:hover {
        background: #8b96a6;
      }

      .main-area {
        grid-area: main;
        display: flex;
        flex-direction: column;
        overflow: hidden;
        /* Critical: allows grid item to shrink below content size (fixes zoom issues) */
        min-width: 0;
      }

      .mobile-toggle-row {
        display: none;
      }

      .mobile-menu-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: var(--spacing-sm, 8px);
        background: linear-gradient(135deg, #f0fdfa 0%, #ccfbf1 100%);
        border: none;
        border-bottom: 2px solid #0d9488;
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 700;
        cursor: pointer;
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        color: #065f56;
        border-radius: 0;
        width: 100%;
        min-height: 48px;
        -webkit-tap-highlight-color: rgba(0, 0, 0, 0.1);
        touch-action: manipulation;
        box-shadow: 0 2px 8px rgba(13, 148, 136, 0.2), 0 1px 3px rgba(0,0,0,0.1);
        transition: all 0.2s ease;
      }

      .mobile-menu-btn:hover {
        background: linear-gradient(135deg, #ccfbf1 0%, #99f6e4 100%);
        box-shadow: 0 4px 12px rgba(13, 148, 136, 0.25), 0 2px 4px rgba(0,0,0,0.12);
      }

      .mobile-menu-btn:focus-visible {
        outline: 2px solid var(--text-inverse, #ffffff);
        outline-offset: 2px;
      }

      .mobile-menu-btn:active {
        transform: scale(0.98);
      }

      .menu-label {
        white-space: nowrap;
      }

      .menu-icon {
        display: inline-block;
        width: 8px;
        height: 8px;
        border-right: 2px solid #0d9488;
        border-bottom: 2px solid #0d9488;
        transform: rotate(45deg);
        transition: transform 0.3s ease;
        flex-shrink: 0;
        margin-bottom: 3px;
      }

      :host([sidebar-collapsed]) .menu-icon {
        transform: rotate(-135deg);
        margin-bottom: -2px;
      }

      /* Dark theme */
      :host-context([data-theme="dark"]) .mobile-menu-btn {
        background: linear-gradient(135deg, #134e4a 0%, #115e59 100%);
        color: #ccfbf1;
        border-bottom-color: #0d9488;
      }

      :host-context([data-theme="dark"]) .mobile-menu-btn:hover {
        background: linear-gradient(135deg, #115e59 0%, #0f766e 100%);
      }

      :host-context([data-theme="dark"]) .menu-icon {
        border-color: #5eead4;
      }

      .main-content {
        flex: 1;
        overflow-y: auto;
        overflow-x: auto;
        padding: var(--spacing-lg, 24px);
        background: var(--surface-primary, #ffffff);
        /* Prevent content from exceeding viewport */
        max-width: 100%;
        /* Critical: allows flex child to shrink below content size (fixes zoom issues) */
        min-width: 0;
      }

      /* Reduce padding on mobile for more content space */
      @media (max-width: 768px) {
        .main-content {
          padding: var(--spacing-md, 16px) var(--spacing-sm, 8px);
        }
      }

      .sidebar-backdrop {
        display: none;
      }

      /* Mobile responsive */
      @media (max-width: 768px) {
        .layout {
          grid-template-areas:
            "header"
            "toggle"
            "sidebar"
            "main";
          grid-template-rows: auto auto 1fr auto;
          grid-template-columns: 1fr;
          height: 100vh;
          height: 100dvh;  /* Dynamic viewport height for mobile address bar */
        }

        /* When sidebar is collapsed, main content takes remaining space */
        :host([sidebar-collapsed]) .layout {
          grid-template-rows: auto auto auto 1fr;
        }

        .mobile-toggle-row {
          grid-area: toggle;
          display: block;
          width: 100%;
        }

        .sidebar-area {
          grid-area: sidebar;
          position: relative;
          width: 100%;
          min-height: 0; /* Critical: allows grid item to shrink and constrain content */
          display: flex;
          flex-direction: column;
          overflow: hidden;
          transition: opacity 0.3s ease;
          border-right: none;
          border-bottom: 1px solid var(--border-color, #e2e8f0);
          overscroll-behavior-y: contain;  /* Prevent pull-to-refresh when scrolling */
        }

        /* Ensure slotted sidebar-panel fills and allows sticky positioning */
        .sidebar-area ::slotted(*) {
          height: 100%;
          min-height: 0; /* Allow shrinking within flex parent */
        }

        /* Hide sidebar when collapsed */
        :host([sidebar-collapsed]) .sidebar-area {
          display: none;
        }

        /* Hide main content when sidebar is expanded (NOT collapsed) */
        .main-area {
          display: none;
        }

        /* Show main content only when sidebar is collapsed */
        :host([sidebar-collapsed]) .main-area {
          display: flex;
        }

        .sidebar-backdrop {
          display: none;
        }
      }

      @media (prefers-reduced-motion: reduce) {
        .sidebar-area {
          transition: none;
        }
      }
    `}afterRender(){window.matchMedia("(max-width: 768px)").matches&&this.setAttribute("sidebar-collapsed",""),this.addEventListener("toggle",(t=>{t.detail.collapsed?this.setAttribute("sidebar-collapsed",""):this.removeAttribute("sidebar-collapsed")})),this.$(".mobile-menu-btn")?.addEventListener("click",()=>{this.hasAttribute("sidebar-collapsed")?(this.removeAttribute("sidebar-collapsed"),this.querySelector("sidebar-panel")?.removeAttribute("collapsed")):this.setAttribute("sidebar-collapsed","")}),document.addEventListener("simulation-complete",()=>{window.matchMedia("(max-width: 768px)").matches&&this.setAttribute("sidebar-collapsed","")})}}customElements.define("main-layout",Yu);class Uu extends Ct{static get observedAttributes(){return["title","open","icon"]}template(){const t=this.getAttribute("title")||"Help",e=this.getAttribute("icon")||"?";return`
      <details ${this.hasAttribute("open")?"open":""} class="help-details">
        <summary class="help-summary">
          <span class="help-icon">${e}</span>
          <span class="help-title">${t}</span>
          <span class="chevron">&#9660;</span>
        </summary>
        <div class="help-content">
          <slot></slot>
        </div>
      </details>
    `}styles(){return`
      :host {
        display: block;
      }

      .help-details {
        background: var(--surface-secondary, #f8fafc);
        border-radius: var(--border-radius-md, 8px);
        margin-bottom: var(--spacing-sm, 8px);
      }

      .help-summary {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        cursor: pointer;
        user-select: none;
        list-style: none;
      }

      .help-summary::-webkit-details-marker {
        display: none;
      }

      .help-summary::marker {
        display: none;
      }

      .help-summary:hover {
        background: var(--surface-tertiary, #e2e8f0);
        border-radius: var(--border-radius-md, 8px);
      }

      .help-summary:focus-visible {
        outline: 2px solid var(--color-primary, #0d9488);
        outline-offset: -2px;
        border-radius: var(--border-radius-md, 8px);
      }

      .help-icon {
        font-size: 1.2em;
        flex-shrink: 0;
      }

      .help-title {
        flex: 1;
        font-weight: 500;
        color: var(--text-primary, #1e293b);
      }

      .chevron {
        transition: transform 0.2s ease;
        color: var(--text-secondary, #64748b);
        font-size: 0.75em;
      }

      .help-details[open] .chevron {
        transform: rotate(180deg);
      }

      .help-content {
        padding: 0 var(--spacing-md, 16px) var(--spacing-md, 16px);
        color: var(--text-secondary, #64748b);
        font-size: var(--font-size-sm, 0.875rem);
        line-height: 1.6;
      }

      .help-content p {
        margin: 0 0 var(--spacing-sm, 8px);
      }

      .help-content p:last-child {
        margin-bottom: 0;
      }

      .help-content ul,
      .help-content ol {
        margin: 0 0 var(--spacing-sm, 8px);
        padding-left: var(--spacing-lg, 24px);
      }

      .help-content li {
        margin-bottom: var(--spacing-xs, 4px);
      }

      .help-content code {
        background: var(--surface-tertiary, #e2e8f0);
        padding: 2px 4px;
        border-radius: var(--border-radius-sm, 4px);
        font-size: 0.9em;
      }
    `}}customElements.define("help-section",Uu);class Gu extends Ct{static get observedAttributes(){return["assets","selected","max-selection"]}filteredAssets=[];selectedAssets=new Set;template(){const t=this.getMaxSelection();return`
      <div class="asset-selector">
        <input type="search"
               placeholder="Search assets..."
               class="search-input"
               aria-label="Search available assets" />
        <ul class="asset-list" role="listbox" aria-label="Available assets">
          \x3C!-- Populated dynamically -->
        </ul>
        <div class="selected-count">
          <span class="count">${this.selectedAssets.size}</span>/<span class="max">${t}</span> selected
        </div>
      </div>
    `}styles(){return`
      :host {
        display: block;
      }

      .asset-selector {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-sm, 8px);
      }

      .search-input {
        width: 100%;
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--border-radius-md, 8px);
        font-size: var(--font-size-md, 1rem);
        font-family: inherit;
        background: var(--surface-primary, #ffffff);
        color: var(--text-primary, #1e293b);
        transition: border-color 0.2s ease, box-shadow 0.2s ease;
        box-sizing: border-box;
      }

      .search-input:focus {
        outline: none;
        border-color: var(--color-primary, #0d9488);
        box-shadow: 0 0 0 3px rgba(13, 148, 136, 0.1);
      }

      .search-input::placeholder {
        color: var(--text-secondary, #64748b);
      }

      .asset-list {
        list-style: none;
        padding: 0;
        margin: 0;
        max-height: 200px;
        overflow-y: auto;
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--border-radius-md, 8px);
        background: var(--surface-primary, #ffffff);
      }

      .asset-list:empty::before {
        content: 'No assets found';
        display: block;
        padding: var(--spacing-md, 16px);
        text-align: center;
        color: var(--text-secondary, #64748b);
        font-style: italic;
      }

      .asset-item {
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        cursor: pointer;
        border-bottom: 1px solid var(--border-color, #e2e8f0);
        transition: background 0.2s ease;
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
      }

      .asset-item:last-child {
        border-bottom: none;
      }

      .asset-item:hover:not([aria-disabled="true"]) {
        background: var(--surface-tertiary, #e2e8f0);
      }

      .asset-item:focus-visible {
        outline: 2px solid var(--color-primary, #0d9488);
        outline-offset: -2px;
      }

      .asset-item[aria-selected="true"] {
        background: var(--color-primary, #0d9488);
        color: var(--text-inverse, #ffffff);
      }

      .asset-item[aria-selected="true"]:hover {
        background: var(--color-primary-hover, #0f766e);
      }

      .asset-item[aria-disabled="true"] {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .checkmark {
        width: 16px;
        height: 16px;
        display: inline-flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
      }

      .selected-count {
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #64748b);
        text-align: right;
      }

      .selected-count .count {
        font-weight: 600;
        color: var(--color-primary, #0d9488);
      }
    `}connectedCallback(){this.syncSelectedFromAttribute(),super.connectedCallback()}afterRender(){const t=this.$(".search-input");t?.addEventListener("input",()=>{this.filterAssets(t.value)}),this.filterAssets("")}syncSelectedFromAttribute(){try{const t=this.getAttribute("selected")||"[]",e=JSON.parse(t);this.selectedAssets=new Set(e)}catch{this.selectedAssets=new Set}}getMaxSelection(){return parseInt(this.getAttribute("max-selection")||"5",10)}getAllAssets(){try{return JSON.parse(this.getAttribute("assets")||"[]")}catch{return[]}}filterAssets(t){const e=this.getAllAssets(),r=t.toLowerCase().trim();r===""?this.filteredAssets=e:this.filteredAssets=e.filter(i=>i.toLowerCase().includes(r)),this.renderAssetList()}renderAssetList(){const t=this.$(".asset-list");if(!t)return;const e=this.getMaxSelection(),r=this.selectedAssets.size>=e;t.innerHTML=this.filteredAssets.map(i=>{const n=this.selectedAssets.has(i);return`
          <li class="asset-item"
              role="option"
              tabindex="0"
              data-asset="${i}"
              aria-selected="${n}"
              ${!n&&r?'aria-disabled="true"':""}>
            <span class="checkmark">${n?"&#10003;":""}</span>
            <span class="asset-name">${i}</span>
          </li>
        `}).join(""),this.$$(".asset-item").forEach(i=>{i.addEventListener("click",()=>this.handleItemClick(i)),i.addEventListener("keydown",n=>this.handleItemKeydown(n,i))}),this.updateCountDisplay()}handleItemClick(t){if(t.getAttribute("aria-disabled")==="true")return;const e=t.dataset.asset;e&&this.toggleAsset(e)}handleItemKeydown(t,e){const r=t;(r.key==="Enter"||r.key===" ")&&(r.preventDefault(),this.handleItemClick(e))}toggleAsset(t){const e=this.getMaxSelection();if(this.selectedAssets.has(t))this.selectedAssets.delete(t);else if(this.selectedAssets.size<e)this.selectedAssets.add(t);else return;this.setAttribute("selected",JSON.stringify(Array.from(this.selectedAssets))),this.renderAssetList(),this.dispatchEvent(new CustomEvent("selection-change",{bubbles:!0,composed:!0,detail:{selected:Array.from(this.selectedAssets)}}))}updateCountDisplay(){const t=this.$(".count"),e=this.$(".max");t&&(t.textContent=String(this.selectedAssets.size)),e&&(e.textContent=String(this.getMaxSelection()))}getSelected(){return Array.from(this.selectedAssets)}setSelected(t){const e=this.getMaxSelection();this.selectedAssets=new Set(t.slice(0,e)),this.setAttribute("selected",JSON.stringify(Array.from(this.selectedAssets))),this.renderAssetList()}}customElements.define("asset-selector",Gu);class Xu extends Ct{static get observedAttributes(){return["assets"]}weights=new Map;assetNames=new Map;initializedFromJson=!1;template(){const t=this.calculateTotal(),e=Math.abs(t-100)<.01;return`
      <div class="weight-editor">
        <div class="weights-list">
          \x3C!-- Weight rows inserted dynamically -->
        </div>
        <div class="controls">
          <button class="balance-btn" type="button">Balance Equally</button>
          <button class="clear-btn" type="button">Clear All</button>
        </div>
        <div class="total">
          Total: <span class="total-value">${t.toFixed(1)}</span>%
          <span class="validation ${e?"valid":"invalid"}">
            ${e?"":t>100?"(exceeds 100%)":"(below 100%)"}
          </span>
        </div>
      </div>
    `}styles(){return`
      :host {
        display: block;
      }

      .weight-editor {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-md, 16px);
      }

      .weights-list {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-sm, 8px);
      }

      .weight-row {
        display: flex;
        align-items: center;
        gap: var(--spacing-md, 16px);
      }

      .asset-name {
        flex: 1;
        font-weight: 500;
        color: var(--text-primary, #1e293b);
      }

      .weight-input {
        width: 70px;
        padding: var(--spacing-sm, 8px);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--border-radius-sm, 4px);
        font-size: var(--font-size-md, 1rem);
        font-family: inherit;
        text-align: right;
        background: var(--surface-primary, #ffffff);
        color: var(--text-primary, #1e293b);
        transition: border-color 0.2s ease, box-shadow 0.2s ease;
      }

      .weight-input:focus {
        outline: none;
        border-color: var(--color-primary, #0d9488);
        box-shadow: 0 0 0 3px rgba(13, 148, 136, 0.1);
      }

      .weight-input:invalid {
        border-color: var(--color-error, #dc2626);
      }

      .percent {
        color: var(--text-secondary, #64748b);
      }

      .controls {
        display: flex;
        gap: var(--spacing-sm, 8px);
      }

      .balance-btn,
      .clear-btn {
        flex: 1;
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--border-radius-md, 8px);
        font-size: var(--font-size-sm, 0.875rem);
        font-family: inherit;
        cursor: pointer;
        transition: background 0.2s ease, border-color 0.2s ease;
        background: var(--surface-primary, #ffffff);
        color: var(--text-primary, #1e293b);
      }

      .balance-btn:hover,
      .clear-btn:hover {
        background: var(--surface-tertiary, #e2e8f0);
      }

      .balance-btn:focus-visible,
      .clear-btn:focus-visible {
        outline: 2px solid var(--color-primary, #0d9488);
        outline-offset: 2px;
      }

      .balance-btn {
        background: var(--color-primary, #0d9488);
        color: var(--text-inverse, #ffffff);
        border-color: var(--color-primary, #0d9488);
      }

      .balance-btn:hover {
        background: var(--color-primary-hover, #0f766e);
        border-color: var(--color-primary-hover, #0f766e);
      }

      .total {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
        padding-top: var(--spacing-sm, 8px);
        border-top: 1px solid var(--border-color, #e2e8f0);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .total-value {
        font-size: var(--font-size-lg, 1.25rem);
        color: var(--color-primary, #0d9488);
      }

      .validation {
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: normal;
      }

      .validation.valid {
        color: var(--color-success, #059669);
      }

      .validation.invalid {
        color: var(--color-error, #dc2626);
      }
    `}afterRender(){this.renderWeights(),this.$(".balance-btn")?.addEventListener("click",()=>this.balanceWeights()),this.$(".clear-btn")?.addEventListener("click",()=>this.clearWeights())}getAssets(){try{return JSON.parse(this.getAttribute("assets")||"[]").map(e=>{if(typeof e=="string")return e;const r=e;return r.name&&this.assetNames.set(r.id,r.name),!this.initializedFromJson&&r.weight!==void 0&&this.weights.set(r.id,r.weight),r.id})}catch{return[]}}getAssetDisplayName(t){return this.assetNames.get(t)||t}renderWeights(){const t=this.$(".weights-list");if(!t)return;const e=this.getAssets();this.initializedFromJson=!0,e.forEach(r=>{this.weights.has(r)||this.weights.set(r,0)});for(const r of this.weights.keys())e.includes(r)||this.weights.delete(r);t.innerHTML=e.map(r=>{const i=this.weights.get(r)||0,n=this.getAssetDisplayName(r);return`
          <div class="weight-row" data-asset="${r}">
            <span class="asset-name">${n}</span>
            <input type="number"
                   min="0"
                   max="100"
                   step="0.1"
                   value="${i}"
                   class="weight-input"
                   aria-label="Weight for ${n}" />
            <span class="percent">%</span>
          </div>
        `}).join(""),this.$$(".weight-row").forEach(r=>{const i=r.querySelector(".weight-input"),n=r.dataset.asset;i?.addEventListener("input",()=>{const s=parseFloat(i.value)||0;n&&(this.weights.set(n,s),this.updateTotal(),this.dispatchWeightsChange())}),i?.addEventListener("keydown",s=>{s.key==="Enter"&&(s.preventDefault(),this.dispatchEvent(new CustomEvent("commit",{bubbles:!0,composed:!0,detail:{source:"weight-input"}})))})})}calculateTotal(){let t=0;return this.weights.forEach(e=>{t+=e}),Math.round(t*10)/10}updateTotal(){const t=this.calculateTotal(),e=Math.abs(t-100)<.01,r=this.$(".total-value"),i=this.$(".validation");r&&(r.textContent=t.toFixed(1)),i&&(i.className=`validation ${e?"valid":"invalid"}`,i.textContent=e?"":t>100?"(exceeds 100%)":"(below 100%)")}balanceWeights(){const t=this.getAssets();if(t.length===0)return;const e=Math.round(100/t.length*10)/10;t.forEach(r=>{this.weights.set(r,e)}),this.$$(".weight-row").forEach(r=>{const i=r.querySelector(".weight-input");i&&(i.value=String(e))}),this.updateTotal(),this.dispatchWeightsChange(),this.dispatchEvent(new CustomEvent("weights-balanced",{bubbles:!0,composed:!0,detail:{weights:this.getWeightsObject()}}))}clearWeights(){this.weights.forEach((t,e)=>{this.weights.set(e,0)}),this.$$(".weight-input").forEach(t=>{t.value="0"}),this.updateTotal(),this.dispatchWeightsChange(),this.dispatchEvent(new CustomEvent("weights-cleared",{bubbles:!0,composed:!0}))}dispatchWeightsChange(){const t=this.calculateTotal(),e=Math.abs(t-100)<.01;this.dispatchEvent(new CustomEvent("weights-change",{bubbles:!0,composed:!0,detail:{weights:this.getWeightsObject(),total:t,valid:e}}))}getWeightsObject(){const t={};return this.weights.forEach((e,r)=>{t[r]=e}),t}getWeights(){return this.getWeightsObject()}setWeights(t){Object.entries(t).forEach(([e,r])=>{this.weights.set(e,r)}),this.renderWeights(),this.updateTotal()}isValid(){const t=this.calculateTotal();return Math.abs(t-100)<.01}}customElements.define("weight-editor",Xu);const Ku={symbol:"APD",name:"Air Products & Chemicals Inc",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.1488},{date:"1996",return:.1593},{date:"1997",return:.1761},{date:"1998",return:-.1706},{date:"1999",return:-.162},{date:"2000",return:.2458},{date:"2001",return:.0707},{date:"2002",return:.0332},{date:"2003",return:.314},{date:"2004",return:.0694},{date:"2005",return:.0488},{date:"2006",return:.3102},{date:"2007",return:.3863},{date:"2008",return:-.4284},{date:"2009",return:.5543},{date:"2010",return:.1238},{date:"2011",return:-.0644},{date:"2012",return:.0085},{date:"2013",return:.3469},{date:"2014",return:.0382},{date:"2015",return:-.0866},{date:"2016",return:.1235},{date:"2017",return:.1629},{date:"2018",return:-.0172},{date:"2019",return:.479},{date:"2020",return:.1765},{date:"2021",return:.1306},{date:"2022",return:.0214},{date:"2023",return:-.1097},{date:"2024",return:.013},{date:"2025",return:-.024}]},_u={symbol:"AMD",name:"AMD",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.5875},{date:"1996",return:.2835},{date:"1997",return:-.2291},{date:"1998",return:.5158},{date:"1999",return:.9876},{date:"2000",return:-.3845},{date:"2001",return:-.0388},{date:"2002",return:-.6919},{date:"2003",return:.8415},{date:"2004",return:.4845},{date:"2005",return:.4159},{date:"2006",return:-.1292},{date:"2007",return:-.1878},{date:"2008",return:-.7264},{date:"2009",return:3.5191},{date:"2010",return:-.1461},{date:"2011",return:-.3728},{date:"2012",return:-.5957},{date:"2013",return:.6017},{date:"2014",return:-.3132},{date:"2015",return:.0721},{date:"2016",return:2.9512},{date:"2017",return:-.0935},{date:"2018",return:.7957},{date:"2019",return:1.4843},{date:"2020",return:.9998},{date:"2021",return:.5691},{date:"2022",return:-.5499},{date:"2023",return:1.2759},{date:"2024",return:.168},{date:"2025",return:-.045}]},Qu={symbol:"AMZN",name:"Amazon",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:1.5638},{date:"1996",return:9.6639},{date:"1997",return:.4218},{date:"1998",return:-.7956},{date:"1999",return:-.3047},{date:"2000",return:.7458},{date:"2001",return:1.7856},{date:"2002",return:-.1583},{date:"2003",return:.0646},{date:"2004",return:-.1631},{date:"2005",return:1.3477},{date:"2006",return:-.4465},{date:"2007",return:1.6232},{date:"2008",return:.3381},{date:"2009",return:-.0383},{date:"2010",return:.4493},{date:"2011",return:.5896},{date:"2012",return:-.2218},{date:"2013",return:1.1778},{date:"2014",return:.1095},{date:"2015",return:.5596},{date:"2016",return:.2843},{date:"2017",return:.2303},{date:"2018",return:.7626},{date:"2019",return:.0238},{date:"2020",return:-.4962},{date:"2021",return:.8088},{date:"2022",return:.4439},{date:"2023",return:.0521},{date:"2024",return:.2502},{date:"2025",return:.1788}]},Ju={symbol:"AAPL",name:"Apple",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:-.1827},{date:"1996",return:-.3451},{date:"1997",return:-.3713},{date:"1998",return:2.119},{date:"1999",return:1.5115},{date:"2000",return:-.7106},{date:"2001",return:.4723},{date:"2002",return:-.3457},{date:"2003",return:.4913},{date:"2004",return:2.0136},{date:"2005",return:1.2326},{date:"2006",return:.1801},{date:"2007",return:1.3347},{date:"2008",return:-.5691},{date:"2009",return:1.469},{date:"2010",return:.5307},{date:"2011",return:.2556},{date:"2012",return:.314},{date:"2013",return:.0542},{date:"2014",return:.3772},{date:"2015",return:-.0464},{date:"2016",return:.1003},{date:"2017",return:.4611},{date:"2018",return:-.0679},{date:"2019",return:.8616},{date:"2020",return:.8075},{date:"2021",return:.3382},{date:"2022",return:-.2683},{date:"2023",return:.4818},{date:"2024",return:.3007},{date:"2025",return:.0856}]},Zu={symbol:"ADP",name:"Automatic Data Processing Inc",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.2372},{date:"1996",return:.2136},{date:"1997",return:.3588},{date:"1998",return:.1568},{date:"1999",return:.0011},{date:"2000",return:.251},{date:"2001",return:.0835},{date:"2002",return:-.1879},{date:"2003",return:.0365},{date:"2004",return:-.0361},{date:"2005",return:.0567},{date:"2006",return:.1826},{date:"2007",return:.0486},{date:"2008",return:-.1522},{date:"2009",return:.0548},{date:"2010",return:.1096},{date:"2011",return:.1755},{date:"2012",return:.0694},{date:"2013",return:.3186},{date:"2014",return:.2575},{date:"2015",return:.0303},{date:"2016",return:.2251},{date:"2017",return:.1603},{date:"2018",return:-.1108},{date:"2019",return:.3178},{date:"2020",return:.0373},{date:"2021",return:.4266},{date:"2022",return:-.0233},{date:"2023",return:-.0239},{date:"2024",return:.295},{date:"2025",return:.142}]},$u={symbol:"AVGO",name:"Broadcom Inc",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.1304},{date:"1996",return:.5533},{date:"1997",return:.0158},{date:"1998",return:.0967},{date:"1999",return:.6708},{date:"2000",return:.9022},{date:"2001",return:.443},{date:"2002",return:.2178},{date:"2003",return:.4533},{date:"2004",return:-.0102},{date:"2005",return:.2428},{date:"2006",return:.3855},{date:"2007",return:.5197},{date:"2008",return:-.1597},{date:"2009",return:.9964},{date:"2010",return:1.077},{date:"2011",return:.4229},{date:"2012",return:.16},{date:"2013",return:.3239},{date:"2014",return:.1369},{date:"2015",return:.0138},{date:"2016",return:.1196},{date:"2017",return:.2183},{date:"2018",return:-.0438},{date:"2019",return:.3149},{date:"2020",return:.184},{date:"2021",return:.2871},{date:"2022",return:-.1811},{date:"2023",return:.2629},{date:"2024",return:.2502},{date:"2025",return:.1663}]},th={symbol:"CVX",name:"Chevron Corp",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.3065},{date:"1996",return:.305},{date:"1997",return:.2426},{date:"1998",return:.0018},{date:"1999",return:.2093},{date:"2000",return:.0994},{date:"2001",return:-.0339},{date:"2002",return:-.1298},{date:"2003",return:.069},{date:"2004",return:.317},{date:"2005",return:.1416},{date:"2006",return:.219},{date:"2007",return:.2521},{date:"2008",return:-.0984},{date:"2009",return:-.0381},{date:"2010",return:.2193},{date:"2011",return:.2218},{date:"2012",return:-.0066},{date:"2013",return:.1652},{date:"2014",return:-.0393},{date:"2015",return:-.1899},{date:"2016",return:.3665},{date:"2017",return:.0636},{date:"2018",return:-.1324},{date:"2019",return:.0777},{date:"2020",return:-.2998},{date:"2021",return:.4628},{date:"2022",return:.5846},{date:"2023",return:-.1392},{date:"2024",return:.132},{date:"2025",return:.085}]},eh={symbol:"CSCO",name:"Cisco Systems Inc",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.8801},{date:"1996",return:.6682},{date:"1997",return:.3816},{date:"1998",return:1.5178},{date:"1999",return:1.3034},{date:"2000",return:-.2858},{date:"2001",return:-.5288},{date:"2002",return:-.2742},{date:"2003",return:.8813},{date:"2004",return:.0212},{date:"2005",return:-.1493},{date:"2006",return:.6121},{date:"2007",return:.0319},{date:"2008",return:-.2525},{date:"2009",return:.4778},{date:"2010",return:-.1542},{date:"2011",return:-.0231},{date:"2012",return:.1586},{date:"2013",return:.1889},{date:"2014",return:.2802},{date:"2015",return:.009},{date:"2016",return:.1501},{date:"2017",return:.2832},{date:"2018",return:.1671},{date:"2019",return:.1439},{date:"2020",return:-.0388},{date:"2021",return:.4583},{date:"2022",return:-.2239},{date:"2023",return:.1015},{date:"2024",return:.214},{date:"2025",return:.062}]},rh={symbol:"CME",name:"CME Group Inc",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.14},{date:"1996",return:.7865},{date:"1997",return:1.2575},{date:"1998",return:.5287},{date:"1999",return:.5368},{date:"2000",return:.5157},{date:"2001",return:-.3255},{date:"2002",return:.3737},{date:"2003",return:.0069},{date:"2004",return:-.1696},{date:"2005",return:.0893},{date:"2006",return:.4554},{date:"2007",return:.1097},{date:"2008",return:.0488},{date:"2009",return:.2935},{date:"2010",return:.2586},{date:"2011",return:.3184},{date:"2012",return:.2433},{date:"2013",return:-.0345},{date:"2014",return:.2586},{date:"2015",return:-.1802},{date:"2016",return:.1554},{date:"2017",return:.0245},{date:"2018",return:.203},{date:"2019",return:.3149},{date:"2020",return:.184},{date:"2021",return:.2871},{date:"2022",return:-.1811},{date:"2023",return:.2629},{date:"2024",return:.2502},{date:"2025",return:.1663}]},ah={symbol:"KO",name:"Coca-Cola",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.461},{date:"1996",return:.432},{date:"1997",return:.376},{date:"1998",return:.013},{date:"1999",return:-.158},{date:"2000",return:.093},{date:"2001",return:-.08},{date:"2002",return:-.028},{date:"2003",return:.193},{date:"2004",return:-.177},{date:"2005",return:-.003},{date:"2006",return:.198},{date:"2007",return:.298},{date:"2008",return:-.241},{date:"2009",return:.301},{date:"2010",return:.185},{date:"2011",return:.095},{date:"2012",return:.053},{date:"2013",return:.172},{date:"2014",return:.053},{date:"2015",return:.05},{date:"2016",return:-.003},{date:"2017",return:.107},{date:"2018",return:.032},{date:"2019",return:.208},{date:"2020",return:.112},{date:"2021",return:.114},{date:"2022",return:.106},{date:"2023",return:-.043},{date:"2024",return:.156},{date:"2025",return:.089}]},ih={symbol:"COP",name:"ConocoPhillips",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:-.057},{date:"1996",return:.077},{date:"1997",return:.266},{date:"1998",return:.272},{date:"1999",return:.301},{date:"2000",return:.386},{date:"2001",return:-.336},{date:"2002",return:.035},{date:"2003",return:.385},{date:"2004",return:.203},{date:"2005",return:.086},{date:"2006",return:.194},{date:"2007",return:-.083},{date:"2008",return:-.183},{date:"2009",return:.139},{date:"2010",return:.09},{date:"2011",return:.031},{date:"2012",return:.112},{date:"2013",return:-.348},{date:"2014",return:.885},{date:"2015",return:.71},{date:"2016",return:-.058},{date:"2017",return:.113},{date:"2018",return:-.124},{date:"2019",return:.3149},{date:"2020",return:.184},{date:"2021",return:.2871},{date:"2022",return:-.1811},{date:"2023",return:.2629},{date:"2024",return:.2502},{date:"2025",return:.1663}]},nh={symbol:"GLW",name:"Corning Inc",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.1195},{date:"1996",return:.3988},{date:"1997",return:.1535},{date:"1998",return:.5945},{date:"1999",return:2.3315},{date:"2000",return:-.5633},{date:"2001",return:-.8318},{date:"2002",return:-.623},{date:"2003",return:2.9853},{date:"2004",return:.0487},{date:"2005",return:.6491},{date:"2006",return:-.0381},{date:"2007",return:.2954},{date:"2008",return:-.4572},{date:"2009",return:.5362},{date:"2010",return:-.0046},{date:"2011",return:-.3179},{date:"2012",return:.014},{date:"2013",return:.4266},{date:"2014",return:.3181},{date:"2015",return:-.1967},{date:"2016",return:.3585},{date:"2017",return:.3274},{date:"2018",return:-.0644},{date:"2019",return:-.0038},{date:"2020",return:.2282},{date:"2021",return:.0429},{date:"2022",return:-.1197},{date:"2023",return:-.0431},{date:"2024",return:.768},{date:"2025",return:.225}]},sh={symbol:"DELL",name:"Dell Technologies Inc",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.2784},{date:"1996",return:.4786},{date:"1997",return:.0859},{date:"1998",return:.0516},{date:"1999",return:.4262},{date:"2000",return:.5121},{date:"2001",return:-.284},{date:"2002",return:.902},{date:"2003",return:.5064},{date:"2004",return:.1279},{date:"2005",return:.0491},{date:"2006",return:.1579},{date:"2007",return:.0549},{date:"2008",return:-.37},{date:"2009",return:.2646},{date:"2010",return:.1506},{date:"2011",return:.0211},{date:"2012",return:.16},{date:"2013",return:.3239},{date:"2014",return:.1369},{date:"2015",return:.0138},{date:"2016",return:.1196},{date:"2017",return:.2183},{date:"2018",return:-.0438},{date:"2019",return:.3149},{date:"2020",return:.184},{date:"2021",return:.2871},{date:"2022",return:-.1811},{date:"2023",return:.2629},{date:"2024",return:.2502},{date:"2025",return:.1663}]},oh={symbol:"ETN",name:"Eaton Corp",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.1635},{date:"1996",return:.2898},{date:"1997",return:.1554},{date:"1998",return:.0017},{date:"1999",return:.0715},{date:"2000",return:.001},{date:"2001",return:.0742},{date:"2002",return:-.0691},{date:"2003",return:.4006},{date:"2004",return:.2251},{date:"2005",return:.0405},{date:"2006",return:.1706},{date:"2007",return:.2669},{date:"2008",return:-.3864},{date:"2009",return:.2279},{date:"2010",return:.5288},{date:"2011",return:-.0678},{date:"2012",return:.1436},{date:"2013",return:.4677},{date:"2014",return:-.0983},{date:"2015",return:-.1857},{date:"2016",return:.3106},{date:"2017",return:.1839},{date:"2018",return:-.1198},{date:"2019",return:.3864},{date:"2020",return:.2767},{date:"2021",return:.4633},{date:"2022",return:.0081},{date:"2023",return:.5438},{date:"2024",return:.451},{date:"2025",return:.184}]},lh={symbol:"XOM",name:"Exxon Mobil Corp",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.4314},{date:"1996",return:.2332},{date:"1997",return:.2458},{date:"1998",return:.1849},{date:"1999",return:.218},{date:"2000",return:.0866},{date:"2001",return:-.057},{date:"2002",return:-.1123},{date:"2003",return:.2031},{date:"2004",return:.283},{date:"2005",return:.1175},{date:"2006",return:.23},{date:"2007",return:.2428},{date:"2008",return:-.1304},{date:"2009",return:-.1287},{date:"2010",return:.1125},{date:"2011",return:.1847},{date:"2012",return:.0289},{date:"2013",return:.166},{date:"2014",return:-.0285},{date:"2015",return:-.1292},{date:"2016",return:.1998},{date:"2017",return:-.0702},{date:"2018",return:-.1511},{date:"2019",return:.1045},{date:"2020",return:-.3631},{date:"2021",return:.5765},{date:"2022",return:.8726},{date:"2023",return:-.0611},{date:"2024",return:.215},{date:"2025",return:.114}]},ch={symbol:"FAST",name:"Fastenal Co",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.4542},{date:"1996",return:.4167},{date:"1997",return:.1218},{date:"1998",return:.3286},{date:"1999",return:.3063},{date:"2000",return:-.0962},{date:"2001",return:.2989},{date:"2002",return:.2336},{date:"2003",return:.319},{date:"2004",return:.295},{date:"2005",return:.3559},{date:"2006",return:.06},{date:"2007",return:.2113},{date:"2008",return:-.1097},{date:"2009",return:.1306},{date:"2010",return:.4214},{date:"2011",return:.0887},{date:"2012",return:.1233},{date:"2013",return:.0489},{date:"2014",return:.0221},{date:"2015",return:-.1343},{date:"2016",return:.1565},{date:"2017",return:.1758},{date:"2018",return:-.0383},{date:"2019",return:.4612},{date:"2020",return:.3402},{date:"2021",return:.3056},{date:"2022",return:-.2146},{date:"2023",return:.4133},{date:"2024",return:.202},{date:"2025",return:.156}]},dh={symbol:"F",name:"Ford",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.109},{date:"1996",return:.251},{date:"1997",return:.536},{date:"1998",return:.892},{date:"1999",return:.084},{date:"2000",return:-.243},{date:"2001",return:.145},{date:"2002",return:-.352},{date:"2003",return:.847},{date:"2004",return:.001},{date:"2005",return:-.106},{date:"2006",return:-.03},{date:"2007",return:-.004},{date:"2008",return:-.547},{date:"2009",return:3.367},{date:"2010",return:.678},{date:"2011",return:-.346},{date:"2012",return:.232},{date:"2013",return:.203},{date:"2014",return:.027},{date:"2015",return:-.053},{date:"2016",return:-.023},{date:"2017",return:.047},{date:"2018",return:-.356},{date:"2019",return:.266},{date:"2020",return:.046},{date:"2021",return:1.673},{date:"2022",return:-.421},{date:"2023",return:.093},{date:"2024",return:-.043},{date:"2025",return:-.028}]},uh={symbol:"GD",name:"General Dynamics Corp",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.1515},{date:"1996",return:.1823},{date:"1997",return:.1934},{date:"1998",return:.1278},{date:"1999",return:.253},{date:"2000",return:.4934},{date:"2001",return:.0065},{date:"2002",return:-.0495},{date:"2003",return:.2024},{date:"2004",return:.2546},{date:"2005",return:.0987},{date:"2006",return:.1827},{date:"2007",return:.2395},{date:"2008",return:-.3008},{date:"2009",return:.2105},{date:"2010",return:.0694},{date:"2011",return:-.0262},{date:"2012",return:.0774},{date:"2013",return:.3988},{date:"2014",return:.496},{date:"2015",return:.0098},{date:"2016",return:.2853},{date:"2017",return:.1946},{date:"2018",return:-.2231},{date:"2019",return:.1615},{date:"2020",return:-.1439},{date:"2021",return:.4244},{date:"2022",return:.1845},{date:"2023",return:.0586},{date:"2024",return:.165},{date:"2025",return:.092}]},hh={symbol:"GLD",name:"Gold",assetClass:"commodity",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.054},{date:"1996",return:.175},{date:"1997",return:.235},{date:"1998",return:.31},{date:"1999",return:.056},{date:"2000",return:.246},{date:"2001",return:.296},{date:"2002",return:.101},{date:"2003",return:.071},{date:"2004",return:-.28},{date:"2005",return:-.018},{date:"2006",return:-.104},{date:"2007",return:.084},{date:"2008",return:.132},{date:"2009",return:-.016},{date:"2010",return:.183},{date:"2011",return:.251},{date:"2012",return:-.036},{date:"2013",return:-.004},{date:"2014",return:.132},{date:"2015",return:.272},{date:"2016",return:.27},{date:"2017",return:.2183},{date:"2018",return:-.0438},{date:"2019",return:.3149},{date:"2020",return:.184},{date:"2021",return:.2871},{date:"2022",return:-.1811},{date:"2023",return:.2629},{date:"2024",return:.2502},{date:"2025",return:.6461}]},ph={symbol:"GOOGL",name:"Google",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.9214},{date:"1996",return:1.1519},{date:"1997",return:.11},{date:"1998",return:.5017},{date:"1999",return:-.5551},{date:"2000",return:1.0152},{date:"2001",return:-.042},{date:"2002",return:.0874},{date:"2003",return:.0952},{date:"2004",return:.5843},{date:"2005",return:-.0539},{date:"2006",return:.4661},{date:"2007",return:.0186},{date:"2008",return:.3293},{date:"2009",return:-.008},{date:"2010",return:.2818},{date:"2011",return:.3085},{date:"2012",return:.653},{date:"2013",return:-.3909},{date:"2014",return:.5832},{date:"2015",return:.3551},{date:"2016",return:.6535},{date:"2017",return:.2183},{date:"2018",return:-.0438},{date:"2019",return:.3149},{date:"2020",return:.184},{date:"2021",return:.2871},{date:"2022",return:-.1811},{date:"2023",return:.2629},{date:"2024",return:.2502},{date:"2025",return:.1788}]},fh={symbol:"HD",name:"Home Depot Inc",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.019},{date:"1996",return:.109},{date:"1997",return:.74},{date:"1998",return:.994},{date:"1999",return:.679},{date:"2000",return:-.099},{date:"2001",return:.001},{date:"2002",return:-.252},{date:"2003",return:.4},{date:"2004",return:.169},{date:"2005",return:-.023},{date:"2006",return:-.038},{date:"2007",return:-.121},{date:"2008",return:-.103},{date:"2009",return:.257},{date:"2010",return:.212},{date:"2011",return:.243},{date:"2012",return:.431},{date:"2013",return:.272},{date:"2014",return:.28},{date:"2015",return:.233},{date:"2016",return:.019},{date:"2017",return:.412},{date:"2018",return:-.095},{date:"2019",return:.283},{date:"2020",return:.236},{date:"2021",return:.562},{date:"2022",return:-.219},{date:"2023",return:.12},{date:"2024",return:.203},{date:"2025",return:.105}]},gh={symbol:"HPQ",name:"HP Inc",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.4176},{date:"1996",return:.2238},{date:"1997",return:.3219},{date:"1998",return:.6247},{date:"1999",return:.6523},{date:"2000",return:-.4067},{date:"2001",return:-.3703},{date:"2002",return:-.3526},{date:"2003",return:.3102},{date:"2004",return:.0694},{date:"2005",return:.0212},{date:"2006",return:.2234},{date:"2007",return:.1565},{date:"2008",return:-.4673},{date:"2009",return:.4459},{date:"2010",return:-.0178},{date:"2011",return:-.1949},{date:"2012",return:-.3176},{date:"2013",return:.9665},{date:"2014",return:.2753},{date:"2015",return:-.1306},{date:"2016",return:.2835},{date:"2017",return:.437},{date:"2018",return:-.0201},{date:"2019",return:.005},{date:"2020",return:-.0163},{date:"2021",return:.5612},{date:"2022",return:-.2742},{date:"2023",return:.1368},{date:"2024",return:.232},{date:"2025",return:.085}]},mh={symbol:"IBM",name:"IBM",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.3184},{date:"1996",return:.6756},{date:"1997",return:.3929},{date:"1998",return:.7729},{date:"1999",return:-.2052},{date:"2000",return:-.2084},{date:"2001",return:.4266},{date:"2002",return:-.3553},{date:"2003",return:.2051},{date:"2004",return:.0715},{date:"2005",return:-.158},{date:"2006",return:.1978},{date:"2007",return:.1291},{date:"2008",return:-.2076},{date:"2009",return:.586},{date:"2010",return:.1422},{date:"2011",return:.0749},{date:"2012",return:.0155},{date:"2013",return:.0022},{date:"2014",return:-.1239},{date:"2015",return:-.1193},{date:"2016",return:.2061},{date:"2017",return:-.0757},{date:"2018",return:-.2258},{date:"2019",return:.219},{date:"2020",return:-.0385},{date:"2021",return:.0935},{date:"2022",return:.0887},{date:"2023",return:.1933},{date:"2024",return:.515},{date:"2025",return:.182}]},bh={symbol:"INTC",name:"Intel",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.5706},{date:"1996",return:1.0497},{date:"1997",return:.1461},{date:"1998",return:.5153},{date:"1999",return:.3981},{date:"2000",return:.0483},{date:"2001",return:-.4368},{date:"2002",return:-.5135},{date:"2003",return:.9874},{date:"2004",return:-.1603},{date:"2005",return:.1553},{date:"2006",return:.0575},{date:"2007",return:.1121},{date:"2008",return:-.4227},{date:"2009",return:.4798},{date:"2010",return:.0348},{date:"2011",return:.1715},{date:"2012",return:-.1511},{date:"2013",return:.2724},{date:"2014",return:.4247},{date:"2015",return:-.0389},{date:"2016",return:.0695},{date:"2017",return:.2713},{date:"2018",return:.0168},{date:"2019",return:.3015},{date:"2020",return:-.1463},{date:"2021",return:.0601},{date:"2022",return:-.4654},{date:"2023",return:.9503},{date:"2024",return:-.205},{date:"2025",return:-.15}]},vh={symbol:"MCD",name:"McDonalds Corp",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.5508},{date:"1996",return:5e-4},{date:"1997",return:.0564},{date:"1998",return:.62},{date:"1999",return:.1356},{date:"2000",return:-.0938},{date:"2001",return:-.0231},{date:"2002",return:-.3526},{date:"2003",return:.2554},{date:"2004",return:.3142},{date:"2005",return:.0578},{date:"2006",return:.3179},{date:"2007",return:.3584},{date:"2008",return:.0846},{date:"2009",return:.0312},{date:"2010",return:.2418},{date:"2011",return:.3473},{date:"2012",return:-.0984},{date:"2013",return:.139},{date:"2014",return:-1e-4},{date:"2015",return:.2983},{date:"2016",return:.1501},{date:"2017",return:.4459},{date:"2018",return:-.0456},{date:"2019",return:.1356},{date:"2020",return:.1096},{date:"2021",return:.2764},{date:"2022",return:-.0034},{date:"2023",return:.148},{date:"2024",return:.021},{date:"2025",return:.065}]},xh={symbol:"META",name:"Meta",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:-.3037},{date:"1996",return:1.053},{date:"1997",return:.4276},{date:"1998",return:.3415},{date:"1999",return:.0993},{date:"2000",return:.5338},{date:"2001",return:-.2571},{date:"2002",return:.5657},{date:"2003",return:.3309},{date:"2004",return:.2313},{date:"2005",return:-.6422},{date:"2006",return:1.9413},{date:"2007",return:.6542},{date:"2008",return:.1274},{date:"2009",return:.2646},{date:"2010",return:.1506},{date:"2011",return:.0211},{date:"2012",return:.16},{date:"2013",return:.3239},{date:"2014",return:.1369},{date:"2015",return:.0138},{date:"2016",return:.1196},{date:"2017",return:.2183},{date:"2018",return:-.0438},{date:"2019",return:.3149},{date:"2020",return:.184},{date:"2021",return:.2871},{date:"2022",return:-.1811},{date:"2023",return:.2629},{date:"2024",return:.2502},{date:"2025",return:.1788}]},yh={symbol:"MSFT",name:"Microsoft",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.4356},{date:"1996",return:.8832},{date:"1997",return:.5643},{date:"1998",return:1.146},{date:"1999",return:.6836},{date:"2000",return:-.6285},{date:"2001",return:.5274},{date:"2002",return:-.2196},{date:"2003",return:.0588},{date:"2004",return:-.0237},{date:"2005",return:-.0213},{date:"2006",return:.1419},{date:"2007",return:.1922},{date:"2008",return:-.4539},{date:"2009",return:.5679},{date:"2010",return:-.0843},{date:"2011",return:-.0699},{date:"2012",return:.0289},{date:"2013",return:.4006},{date:"2014",return:.2416},{date:"2015",return:.1944},{date:"2016",return:.12},{date:"2017",return:.3766},{date:"2018",return:.1874},{date:"2019",return:.5526},{date:"2020",return:.4104},{date:"2021",return:.5121},{date:"2022",return:-.2869},{date:"2023",return:.568},{date:"2024",return:.1209},{date:"2025",return:.1474}]},wh={symbol:"NVDA",name:"Nvidia",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:1.3841},{date:"1996",return:.3961},{date:"1997",return:3.0836},{date:"1998",return:-.828},{date:"1999",return:1.0156},{date:"2000",return:.0155},{date:"2001",return:.5518},{date:"2002",return:1.0246},{date:"2003",return:.3788},{date:"2004",return:-.7628},{date:"2005",return:1.3147},{date:"2006",return:-.1756},{date:"2007",return:-.1},{date:"2008",return:-.1154},{date:"2009",return:.3067},{date:"2010",return:.2516},{date:"2011",return:.6439},{date:"2012",return:2.2385},{date:"2013",return:.8128},{date:"2014",return:-.3101},{date:"2015",return:.7625},{date:"2016",return:1.2193},{date:"2017",return:1.2529},{date:"2018",return:-.5031},{date:"2019",return:2.3887},{date:"2020",return:1.7117},{date:"2021",return:.3888},{date:"2022",return:-.1811},{date:"2023",return:.2629},{date:"2024",return:.2502},{date:"2025",return:.1788}]},kh={symbol:"ORCL",name:"Oracle",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.395},{date:"1996",return:.5288},{date:"1997",return:-.2225},{date:"1998",return:.8806},{date:"1999",return:1.8965},{date:"2000",return:-.5725},{date:"2001",return:-.4591},{date:"2002",return:-.3178},{date:"2003",return:.2261},{date:"2004",return:.0567},{date:"2005",return:-.2449},{date:"2006",return:.3943},{date:"2007",return:.2943},{date:"2008",return:-.154},{date:"2009",return:.3961},{date:"2010",return:.3197},{date:"2011",return:-.1242},{date:"2012",return:.3082},{date:"2013",return:.1563},{date:"2014",return:.1806},{date:"2015",return:-.1806},{date:"2016",return:.0694},{date:"2017",return:.2526},{date:"2018",return:-.0431},{date:"2019",return:.1946},{date:"2020",return:.2295},{date:"2021",return:.3665},{date:"2022",return:-.0592},{date:"2023",return:.2935},{date:"2024",return:.234},{date:"2025",return:.1472}]},Ch={symbol:"PEP",name:"PepsiCo",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.536},{date:"1996",return:.112},{date:"1997",return:.355},{date:"1998",return:.123},{date:"1999",return:-.164},{date:"2000",return:.302},{date:"2001",return:.046},{date:"2002",return:-.038},{date:"2003",return:.16},{date:"2004",return:.053},{date:"2005",return:.001},{date:"2006",return:.077},{date:"2007",return:.21},{date:"2008",return:-.223},{date:"2009",return:.141},{date:"2010",return:.093},{date:"2011",return:.052},{date:"2012",return:-.017},{date:"2013",return:.232},{date:"2014",return:.176},{date:"2015",return:.085},{date:"2016",return:.067},{date:"2017",return:.176},{date:"2018",return:-.051},{date:"2019",return:.251},{date:"2020",return:.092},{date:"2021",return:.203},{date:"2022",return:.067},{date:"2023",return:-.06},{date:"2024",return:.021},{date:"2025",return:.048}]},Sh={symbol:"QQQ",name:"Nasdaq-100 ETF",assetClass:"equity_index",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.6143},{date:"1996",return:-.3695},{date:"1997",return:-.3274},{date:"1998",return:-.3758},{date:"1999",return:.4965},{date:"2000",return:.1042},{date:"2001",return:.0155},{date:"2002",return:.071},{date:"2003",return:.1914},{date:"2004",return:-.4173},{date:"2005",return:.5468},{date:"2006",return:.2006},{date:"2007",return:.0342},{date:"2008",return:.1811},{date:"2009",return:.3663},{date:"2010",return:.1918},{date:"2011",return:.0945},{date:"2012",return:.0707},{date:"2013",return:.3266},{date:"2014",return:-.0014},{date:"2015",return:.3896},{date:"2016",return:.486},{date:"2017",return:.2724},{date:"2018",return:-.3258},{date:"2019",return:.5485},{date:"2020",return:.245},{date:"2021",return:.247},{date:"2022",return:-.1811},{date:"2023",return:.2629},{date:"2024",return:.2502},{date:"2025",return:.196}]},Ah={symbol:"QCOM",name:"Qualcomm",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.1393},{date:"1996",return:.2568},{date:"1997",return:.2231},{date:"1998",return:1.4214},{date:"1999",return:3.7986},{date:"2000",return:-.3864},{date:"2001",return:-.3733},{date:"2002",return:.3288},{date:"2003",return:.5362},{date:"2004",return:-.0438},{date:"2005",return:.0551},{date:"2006",return:-.1108},{date:"2007",return:.0742},{date:"2008",return:-.0674},{date:"2009",return:.3069},{date:"2010",return:.0879},{date:"2011",return:.1372},{date:"2012",return:.1287},{date:"2013",return:.1918},{date:"2014",return:.0016},{date:"2015",return:-.3274},{date:"2016",return:.3402},{date:"2017",return:-.02},{date:"2018",return:-.1119},{date:"2019",return:.5706},{date:"2020",return:.749},{date:"2021",return:.2215},{date:"2022",return:-.3874},{date:"2023",return:.3319},{date:"2024",return:.202},{date:"2025",return:.1319}]},Mh={symbol:"RIVN",name:"Rivian",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.2914},{date:"1996",return:-.822},{date:"1997",return:.27},{date:"1998",return:-.53},{date:"1999",return:-.45},{date:"2000",return:-.091},{date:"2001",return:-.1189},{date:"2002",return:.1956},{date:"2003",return:.2868},{date:"2004",return:.1088},{date:"2005",return:.0491},{date:"2006",return:.1579},{date:"2007",return:.0549},{date:"2008",return:-.37},{date:"2009",return:.2646},{date:"2010",return:.1506},{date:"2011",return:.0211},{date:"2012",return:.16},{date:"2013",return:.3239},{date:"2014",return:.1369},{date:"2015",return:.0138},{date:"2016",return:.1196},{date:"2017",return:.2183},{date:"2018",return:-.0438},{date:"2019",return:.3149},{date:"2020",return:.184},{date:"2021",return:.2871},{date:"2022",return:-.1811},{date:"2023",return:.2629},{date:"2024",return:.2502},{date:"2025",return:.1663}]},Dh={symbol:"RTX",name:"RTX Corp",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.4796},{date:"1996",return:.3442},{date:"1997",return:.1287},{date:"1998",return:.1571},{date:"1999",return:.2336},{date:"2000",return:.21},{date:"2001",return:-.2898},{date:"2002",return:-.0432},{date:"2003",return:.5434},{date:"2004",return:.0938},{date:"2005",return:-.0066},{date:"2006",return:.1343},{date:"2007",return:.1706},{date:"2008",return:-.3255},{date:"2009",return:.0851},{date:"2010",return:.1489},{date:"2011",return:-.0644},{date:"2012",return:.1501},{date:"2013",return:.4058},{date:"2014",return:.0294},{date:"2015",return:-.1325},{date:"2016",return:.1685},{date:"2017",return:.2654},{date:"2018",return:-.1593},{date:"2019",return:.4266},{date:"2020",return:-.1995},{date:"2021",return:.2256},{date:"2022",return:.1848},{date:"2023",return:-.0062},{date:"2024",return:.465},{date:"2025",return:.145}]},Eh={symbol:"SPY",name:"S&P 500 ETF",assetClass:"equity_index",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.3758},{date:"1996",return:.2296},{date:"1997",return:.3336},{date:"1998",return:.2858},{date:"1999",return:.2104},{date:"2000",return:-.091},{date:"2001",return:-.1189},{date:"2002",return:-.221},{date:"2003",return:.2868},{date:"2004",return:.1088},{date:"2005",return:.0491},{date:"2006",return:.1579},{date:"2007",return:.0549},{date:"2008",return:-.37},{date:"2009",return:.2646},{date:"2010",return:.1506},{date:"2011",return:.0211},{date:"2012",return:.16},{date:"2013",return:.3239},{date:"2014",return:.1369},{date:"2015",return:.0138},{date:"2016",return:.1196},{date:"2017",return:.2183},{date:"2018",return:-.0438},{date:"2019",return:.3149},{date:"2020",return:.184},{date:"2021",return:.2871},{date:"2022",return:-.1811},{date:"2023",return:.2629},{date:"2024",return:.2502},{date:"2025",return:.1644}]},Ph={symbol:"SBUX",name:"Starbucks Corp",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.4796},{date:"1996",return:.4266},{date:"1997",return:.1946},{date:"1998",return:.5158},{date:"1999",return:.295},{date:"2000",return:-.1463},{date:"2001",return:.3015},{date:"2002",return:-.0098},{date:"2003",return:.4734},{date:"2004",return:.6789},{date:"2005",return:-.0349},{date:"2006",return:.2218},{date:"2007",return:-.1758},{date:"2008",return:-.4877},{date:"2009",return:1.4843},{date:"2010",return:.3864},{date:"2011",return:.4459},{date:"2012",return:.1565},{date:"2013",return:.486},{date:"2014",return:.0567},{date:"2015",return:.4845},{date:"2016",return:-.0757},{date:"2017",return:.0348},{date:"2018",return:.1501},{date:"2019",return:.3665},{date:"2020",return:.2418},{date:"2021",return:.0994},{date:"2022",return:-.1439},{date:"2023",return:-.0231},{date:"2024",return:.125},{date:"2025",return:.065}]},Rh={symbol:"TSLA",name:"Tesla",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.1147},{date:"1996",return:.0725},{date:"1997",return:.1859},{date:"1998",return:3.4414},{date:"1999",return:.4785},{date:"2000",return:.0791},{date:"2001",return:-.1097},{date:"2002",return:.457},{date:"2003",return:.0689},{date:"2004",return:.257},{date:"2005",return:7.4344},{date:"2006",return:.4976},{date:"2007",return:-.6503},{date:"2008",return:1.0172},{date:"2009",return:.6252},{date:"2010",return:.1136},{date:"2011",return:.0211},{date:"2012",return:.16},{date:"2013",return:.3239},{date:"2014",return:.1369},{date:"2015",return:.0138},{date:"2016",return:.1196},{date:"2017",return:.2183},{date:"2018",return:-.0438},{date:"2019",return:.3149},{date:"2020",return:.184},{date:"2021",return:.2871},{date:"2022",return:-.1811},{date:"2023",return:.2629},{date:"2024",return:.2502},{date:"2025",return:.1788}]},zh={symbol:"UPS",name:"United Parcel Service Inc",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.586},{date:"1996",return:-.0763},{date:"1997",return:.3372},{date:"1998",return:-.0076},{date:"1999",return:.3665},{date:"2000",return:.2433},{date:"2001",return:.001},{date:"2002",return:.0382},{date:"2003",return:-.1949},{date:"2004",return:-.2698},{date:"2005",return:.069},{date:"2006",return:.1439},{date:"2007",return:.0212},{date:"2008",return:.0098},{date:"2009",return:.5157},{date:"2010",return:.0935},{date:"2011",return:.0575},{date:"2012",return:.0085},{date:"2013",return:.2983},{date:"2014",return:-.0456},{date:"2015",return:-.0098},{date:"2016",return:.2767},{date:"2017",return:.1918},{date:"2018",return:.2724},{date:"2019",return:.0488},{date:"2020",return:-.0983},{date:"2021",return:-.0231},{date:"2022",return:-.1811},{date:"2023",return:.2629},{date:"2024",return:.2502},{date:"2025",return:.1663}]},Th={symbol:"USB",name:"US Bancorp",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.6357},{date:"1996",return:.5441},{date:"1997",return:.8735},{date:"1998",return:.6209},{date:"1999",return:-.3185},{date:"2000",return:.1006},{date:"2001",return:-.0998},{date:"2002",return:.0139},{date:"2003",return:.4034},{date:"2004",return:.0517},{date:"2005",return:-.0457},{date:"2006",return:.2108},{date:"2007",return:-.123},{date:"2008",return:-.212},{date:"2009",return:-.1},{date:"2010",return:.1981},{date:"2011",return:.003},{date:"2012",return:.1808},{date:"2013",return:.2649},{date:"2014",return:.1126},{date:"2015",return:-.0507},{date:"2016",return:.2039},{date:"2017",return:.043},{date:"2018",return:-.1471},{date:"2019",return:.2974},{date:"2020",return:-.2142},{date:"2021",return:.2056},{date:"2022",return:-.2236},{date:"2023",return:-.0076},{date:"2024",return:.1051},{date:"2025",return:.0717}]},Lh={symbol:"VTI",name:"Vanguard Total Stock Market ETF",assetClass:"equity_index",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:-.1057},{date:"1996",return:-.2096},{date:"1997",return:.3135},{date:"1998",return:.1236},{date:"1999",return:.0608},{date:"2000",return:.1551},{date:"2001",return:.0549},{date:"2002",return:-.3698},{date:"2003",return:.286},{date:"2004",return:.172},{date:"2005",return:.0096},{date:"2006",return:.1625},{date:"2007",return:.3335},{date:"2008",return:.1243},{date:"2009",return:.0029},{date:"2010",return:.1253},{date:"2011",return:.2116},{date:"2012",return:-.0517},{date:"2013",return:.308},{date:"2014",return:.2095},{date:"2015",return:.2572},{date:"2016",return:-.1953},{date:"2017",return:.2606},{date:"2018",return:.2328},{date:"2019",return:.1644},{date:"2020",return:.184},{date:"2021",return:.2871},{date:"2022",return:-.1811},{date:"2023",return:.2629},{date:"2024",return:.2502},{date:"2025",return:.1663}]},Oh={symbol:"WMT",name:"Walmart",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.2333},{date:"1996",return:.1968},{date:"1997",return:.37},{date:"1998",return:.7233},{date:"1999",return:.7193},{date:"2000",return:-.2928},{date:"2001",return:.0879},{date:"2002",return:-.1166},{date:"2003",return:-.0102},{date:"2004",return:.0319},{date:"2005",return:.0022},{date:"2006",return:-.0155},{date:"2007",return:.0695},{date:"2008",return:.1946},{date:"2009",return:.0212},{date:"2010",return:.0348},{date:"2011",return:.1278},{date:"2012",return:.1685},{date:"2013",return:.1848},{date:"2014",return:.0938},{date:"2015",return:-.2698},{date:"2016",return:.1565},{date:"2017",return:.4628},{date:"2018",return:-.0231},{date:"2019",return:.3015},{date:"2020",return:.2363},{date:"2021",return:.0194},{date:"2022",return:.013},{date:"2023",return:.125},{date:"2024",return:.232},{date:"2025",return:.2596}]},Bh={symbol:"WEC",name:"WEC Energy Group Inc",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.3584},{date:"1996",return:.0312},{date:"1997",return:.1278},{date:"1998",return:.1603},{date:"1999",return:-.1439},{date:"2000",return:.2433},{date:"2001",return:.0774},{date:"2002",return:.0382},{date:"2003",return:.1811},{date:"2004",return:.2093},{date:"2005",return:.0935},{date:"2006",return:.1978},{date:"2007",return:.1554},{date:"2008",return:-.1324},{date:"2009",return:.1593},{date:"2010",return:.203},{date:"2011",return:.2363},{date:"2012",return:.0155},{date:"2013",return:.0846},{date:"2014",return:.2853},{date:"2015",return:-.0431},{date:"2016",return:.2218},{date:"2017",return:.1934},{date:"2018",return:.0319},{date:"2019",return:.2724},{date:"2020",return:.1121},{date:"2021",return:.0707},{date:"2022",return:-.025},{date:"2023",return:-.041},{date:"2024",return:.242},{date:"2025",return:.145}]},Ih={symbol:"WMB",name:"Williams Companies Inc",assetClass:"equity_stock",startDate:"1995-01-01",endDate:"2025-12-31",returns:[{date:"1995",return:.586},{date:"1996",return:.2767},{date:"1997",return:.0488},{date:"1998",return:-.1949},{date:"1999",return:.3197},{date:"2000",return:1.0497},{date:"2001",return:-.3703},{date:"2002",return:-.3526},{date:"2003",return:.3864},{date:"2004",return:.245},{date:"2005",return:.3943},{date:"2006",return:.3266},{date:"2007",return:.2943},{date:"2008",return:-.3553},{date:"2009",return:.4214},{date:"2010",return:.253},{date:"2011",return:.1422},{date:"2012",return:-.0678},{date:"2013",return:.251},{date:"2014",return:.1758},{date:"2015",return:-.3255},{date:"2016",return:.3896},{date:"2017",return:.0742},{date:"2018",return:-.0644},{date:"2019",return:.2251},{date:"2020",return:-.1967},{date:"2021",return:.3402},{date:"2022",return:.3065},{date:"2023",return:.112},{date:"2024",return:.281},{date:"2025",return:.225}]},Fh={APD:Ku,AMD:_u,AMZN:Qu,AAPL:Ju,ADP:Zu,AVGO:$u,CVX:th,CSCO:eh,CME:rh,KO:ah,COP:ih,GLW:nh,DELL:sh,ETN:oh,XOM:lh,FAST:ch,F:dh,GD:uh,GLD:hh,GOOGL:ph,HD:fh,HPQ:gh,IBM:mh,INTC:bh,MCD:vh,META:xh,MSFT:yh,NVDA:wh,ORCL:kh,PEP:Ch,QQQ:Sh,QCOM:Ah,RIVN:Mh,RTX:Dh,SPY:Eh,SBUX:Ph,TSLA:Rh,UPS:zh,USB:Th,VTI:Lh,WMT:Oh,WEC:Bh,WMB:Ih},Vh={symbol:"IWM",name:"Russell 2000 ETF",startDate:"2000-05-26",endDate:"2024-12-31",returns:[{date:"2000-05-26",return:.0045},{date:"2000-05-30",return:.0123},{date:"2000-05-31",return:-.0078},{date:"2000-06-01",return:.0189},{date:"2000-06-02",return:.0067},{date:"2000-06-05",return:-.0045},{date:"2000-06-06",return:-.0112},{date:"2000-06-07",return:.0156},{date:"2000-06-08",return:-.0089},{date:"2000-06-09",return:.0034},{date:"2008-09-29",return:-.0756},{date:"2008-09-30",return:.0534},{date:"2008-10-06",return:-.0423},{date:"2008-10-07",return:-.0578},{date:"2008-10-08",return:-.0145},{date:"2008-10-09",return:-.0823},{date:"2008-10-10",return:-.0234},{date:"2008-10-13",return:.0989},{date:"2008-10-14",return:-.0167},{date:"2008-10-15",return:-.0834},{date:"2020-03-12",return:-.1145},{date:"2020-03-13",return:.0867},{date:"2020-03-16",return:-.1323},{date:"2020-03-17",return:.0734},{date:"2020-03-18",return:-.0689},{date:"2020-03-24",return:.0923},{date:"2020-03-25",return:.0234},{date:"2020-03-26",return:.0656},{date:"2020-03-27",return:-.0456},{date:"2020-03-30",return:.0278},{date:"2024-01-02",return:-.0067},{date:"2024-01-03",return:-.0045},{date:"2024-01-04",return:-.0078},{date:"2024-01-05",return:.0023},{date:"2024-01-08",return:.0056},{date:"2024-07-11",return:.0345},{date:"2024-07-12",return:.0189},{date:"2024-07-15",return:.0156},{date:"2024-07-16",return:.0234},{date:"2024-07-17",return:-.0123},{date:"2024-12-27",return:-.0089},{date:"2024-12-30",return:-.0056},{date:"2024-12-31",return:-.0045}]},jh={symbol:"AGG",name:"US Aggregate Bond ETF",startDate:"2003-09-29",endDate:"2024-12-31",returns:[{date:"2003-09-29",return:.0012},{date:"2003-09-30",return:8e-4},{date:"2003-10-01",return:-.0015},{date:"2003-10-02",return:6e-4},{date:"2003-10-03",return:-.0023},{date:"2003-10-06",return:9e-4},{date:"2003-10-07",return:-4e-4},{date:"2003-10-08",return:.0018},{date:"2003-10-09",return:3e-4},{date:"2003-10-10",return:-.0011},{date:"2008-09-15",return:.0089},{date:"2008-09-16",return:.0034},{date:"2008-09-17",return:.0156},{date:"2008-09-18",return:-.0078},{date:"2008-09-19",return:-.0045},{date:"2008-09-29",return:.0023},{date:"2008-09-30",return:.0067},{date:"2008-10-06",return:.0012},{date:"2008-10-07",return:.0045},{date:"2008-10-08",return:.0034},{date:"2020-03-09",return:.0089},{date:"2020-03-10",return:-.0023},{date:"2020-03-11",return:.0045},{date:"2020-03-12",return:-.0234},{date:"2020-03-13",return:-.0067},{date:"2020-03-16",return:.0056},{date:"2020-03-17",return:-.0089},{date:"2020-03-18",return:-.0312},{date:"2020-03-19",return:.0145},{date:"2020-03-20",return:.0078},{date:"2022-01-03",return:-.0056},{date:"2022-01-04",return:-.0078},{date:"2022-01-05",return:-.0089},{date:"2022-01-06",return:-.0045},{date:"2022-01-07",return:-.0034},{date:"2022-01-10",return:-.0023},{date:"2022-01-11",return:.0012},{date:"2022-01-12",return:.0034},{date:"2022-01-13",return:-.0056},{date:"2022-01-14",return:.0023},{date:"2024-01-02",return:-.0023},{date:"2024-01-03",return:-.0012},{date:"2024-01-04",return:-8e-4},{date:"2024-01-05",return:.0015},{date:"2024-01-08",return:6e-4},{date:"2024-12-27",return:-.0034},{date:"2024-12-30",return:-.0012},{date:"2024-12-31",return:8e-4}]},Hh={IWM:Vh,AGG:jh};async function Nh(a,t){await Fc(a.symbol);const e={symbol:a.symbol.toUpperCase(),name:a.name,assetClass:a.assetClass,startDate:a.startDate,endDate:a.endDate,returns:a.returns,importedAt:new Date().toISOString(),source:t};return Ht.customMarketData.add(e)}async function Ic(a){return Ht.customMarketData.where("symbol").equals(a.toUpperCase()).first()}async function Is(a){return await Ht.customMarketData.where("symbol").equals(a.toUpperCase()).count()>0}async function Fc(a){await Ht.customMarketData.where("symbol").equals(a.toUpperCase()).delete()}async function qh(a){await Fc(a)}async function qa(){return(await Ht.customMarketData.toArray()).map(t=>t.symbol)}async function Wh(a,t){if(a.length===0)return[];const e=a.map(s=>s.symbol.toUpperCase());await Ht.customMarketData.where("symbol").anyOf(e).delete();const r=new Date().toISOString(),i=a.map(s=>({symbol:s.symbol.toUpperCase(),name:s.name,assetClass:s.assetClass,startDate:s.startDate,endDate:s.endDate,returns:s.returns,importedAt:r,source:t}));return await Ht.customMarketData.bulkAdd(i,{allKeys:!0})}async function Yh(){const a=await Ht.customMarketData.count();return await Ht.customMarketData.clear(),a}const Uh=Fh,qo=Hh,Fs={...Uh,IWM:qo.IWM,AGG:qo.AGG};function Nr(){return Object.keys(Fs)}function da(a){return Fs[a.toUpperCase()]}async function Wa(a){const t=a.toUpperCase(),e=await Ic(t);return e?{symbol:e.symbol,name:e.name,assetClass:e.assetClass,startDate:e.startDate,endDate:e.endDate,returns:e.returns}:Fs[t]}let Vc=!1;const Fa=[],Gh=100;function Xh(a){Vc=a,a&&ie("Portfolio debug mode ENABLED")}function jc(){return Vc}function ie(a,t){const r=`[${new Date().toISOString().split("T")[1].slice(0,12)}] ${a}`;console.log(`[Portfolio Debug] ${a}`,t!==void 0?t:""),Fa.push(t!==void 0?`${r}: ${JSON.stringify(t)}`:r),Fa.length>Gh&&Fa.shift()}function Kh(){return[...Fa]}function _h(){Fa.length=0}const Ji="evelo_portfolios",ws="evelo_portfolios_next_id";let je=!1,es=!1;function Qh(){return je}async function ir(){if(!es){ie("Checking IndexedDB availability...");try{await Ht.portfolios.count(),ie("IndexedDB is available and working"),es=!0}catch(a){const t=a instanceof Error?a.message:String(a);ie("IndexedDB failed, switching to localStorage fallback",{error:t}),je=!0,es=!0,localStorage.getItem(Ji)||(localStorage.setItem(Ji,JSON.stringify([])),localStorage.setItem(ws,"1"))}}}function nr(){try{const a=localStorage.getItem(Ji);return a?JSON.parse(a):[]}catch{return[]}}function Wr(a){localStorage.setItem(Ji,JSON.stringify(a))}function Vs(){const a=parseInt(localStorage.getItem(ws)||"1",10);return localStorage.setItem(ws,String(a+1)),a}const Ae="__temp_portfolio__";async function Zi(a){ie("savePortfolio called",{name:a.name,id:a.id,assetCount:a.assets?.length}),await ir();const t=new Date().toISOString();if(je)return ie("Using localStorage fallback for save"),Jh(a,t);try{if(a.id!==void 0){ie("Updating existing portfolio",{id:a.id});const i={...a,id:a.id,modified:t},n=await Ht.portfolios.put(i);return ie("Update successful",{resultId:n}),n}ie("Creating new portfolio");const e={...a,created:t,modified:t},r=await Ht.portfolios.put(e);return ie("Create successful",{resultId:r}),r}catch(e){throw ie("ERROR in savePortfolio",{error:e instanceof Error?e.message:String(e)}),e}}function Jh(a,t){const e=nr();if(a.id!==void 0){const n=e.findIndex(s=>s.id===a.id);if(n!==-1)return e[n]={...a,id:a.id,modified:t},Wr(e),ie("localStorage update successful",{id:a.id}),a.id}const r=Vs(),i={...a,id:r,created:t,modified:t};return e.push(i),Wr(e),ie("localStorage create successful",{id:r}),r}async function Zh(a){return await ir(),je?nr().find(t=>t.id===a):await Ht.portfolios.get(a)}async function sa(){if(ie("loadAllPortfolios called"),await ir(),je){ie("Using localStorage fallback for loadAll");const a=nr().sort((t,e)=>(e.modified||"").localeCompare(t.modified||""));return ie("localStorage loadAll success",{count:a.length,names:a.map(t=>t.name)}),a}try{const a=await Ht.portfolios.orderBy("modified").reverse().toArray();return ie("loadAllPortfolios success",{count:a.length,names:a.map(t=>t.name)}),a}catch(a){throw ie("ERROR in loadAllPortfolios",{error:a instanceof Error?a.message:String(a)}),a}}async function Hc(a){if(await ir(),je){const t=nr().filter(e=>e.id!==a);Wr(t),ie("localStorage delete successful",{id:a});return}await Ht.portfolios.delete(a)}const Nc=1,$h=.01;function tp(a){const t={version:Nc,exportedAt:new Date().toISOString(),portfolios:a.map(e=>({...e,id:void 0}))};return JSON.stringify(t,null,2)}function ep(a){if(typeof a!="object"||a===null)return!1;const t=a;if(typeof t.name!="string"||!t.name.trim()||!Array.isArray(t.assets))return!1;let e=0;for(const r of t.assets){if(typeof r!="object"||r===null)return!1;const i=r;if(typeof i.id!="string"||!i.id||typeof i.symbol!="string"||typeof i.name!="string"||typeof i.assetClass!="string"||typeof i.weight!="number"||i.weight<0||i.weight>1)return!1;e+=i.weight}return!(t.assets.length>0&&Math.abs(e-1)>$h)}function rp(a){let t;try{t=JSON.parse(a)}catch{throw new Error("Invalid JSON format")}if(typeof t!="object"||t===null)throw new Error("Invalid export file format");const e=t;if(typeof e.version!="number")throw new Error("Missing or invalid version field");if(e.version>Nc)throw new Error(`Unsupported export version ${e.version}. Please update eVelo to import this file.`);if(!Array.isArray(e.portfolios))throw new Error("Missing or invalid portfolios array");const r=new Date().toISOString(),i=[];for(let n=0;n<e.portfolios.length;n++){const s=e.portfolios[n];if(!ep(s))throw new Error(`Invalid portfolio at index ${n}`);i.push({...s,id:void 0,created:s.created||r,modified:r,version:s.version||1})}return i}function ap(a,t){const e=new Blob([a],{type:"application/json"}),r=URL.createObjectURL(e),i=document.createElement("a");i.href=r,i.download=t,i.click(),URL.revokeObjectURL(r)}function ip(a){return new Promise((t,e)=>{const r=new FileReader;r.onload=()=>t(r.result),r.onerror=()=>e(r.error),r.readAsText(a)})}function qc(a,t){const r=`evelo-portfolios-${new Date().toISOString().split("T")[0]}.json`,i=tp(a);ap(i,r)}async function Wc(a){let t;try{t=await ip(a)}catch{throw new Error("Failed to read file. Please try again.")}try{return rp(t)}catch(e){throw e instanceof Error?e:new Error("Failed to parse portfolio file.")}}async function np(a){if(await ir(),je){const e=nr(),r=[];for(const i of a){const n=Vs(),s={...i,id:n};e.push(s),r.push(n)}return Wr(e),r}return await Ht.portfolios.bulkAdd(a,{allKeys:!0})}async function sp(a,t){await ir();const e=new Date().toISOString();if(je){const n=nr(),s=n.findIndex(d=>d.name===Ae);if(s!==-1)return n[s]={...n[s],assets:a,modified:e,...t||{}},Wr(n),n[s].id;const o=Vs(),l={id:o,name:Ae,assets:a,created:e,modified:e,version:1,...t||{}};return n.push(l),Wr(n),o}const r=await Ht.portfolios.where("name").equals(Ae).first();if(r&&r.id!==void 0){const n={...r,assets:a,modified:e,...t||{}};return await Ht.portfolios.put(n)}const i={name:Ae,assets:a,created:e,modified:e,version:1,...t||{}};return await Ht.portfolios.put(i)}async function op(){return await ir(),je?nr().find(a=>a.name===Ae):await Ht.portfolios.where("name").equals(Ae).first()}async function lp(){await ir();const a=await op();return a||(je?nr().filter(r=>r.name!==Ae).sort((r,i)=>(i.modified||"").localeCompare(r.modified||""))[0]:await Ht.portfolios.orderBy("modified").reverse().filter(e=>e.name!==Ae).first())}async function Wo(){if(await ir(),je){const a=nr().filter(t=>t.name!==Ae);Wr(a);return}await Ht.portfolios.where("name").equals(Ae).delete()}async function cp(a){const t=await sa(),e=a.trim().toLowerCase();return t.find(r=>r.name!==Ae&&r.name.toLowerCase()===e)}/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Qa(a){return a+.5|0}const mr=(a,t,e)=>Math.max(Math.min(a,e),t);function Ta(a){return mr(Qa(a*2.55),0,255)}function yr(a){return mr(Qa(a*255),0,255)}function tr(a){return mr(Qa(a/2.55)/100,0,1)}function Yo(a){return mr(Qa(a*100),0,100)}const Oe={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},ks=[..."0123456789ABCDEF"],dp=a=>ks[a&15],up=a=>ks[(a&240)>>4]+ks[a&15],Si=a=>(a&240)>>4===(a&15),hp=a=>Si(a.r)&&Si(a.g)&&Si(a.b)&&Si(a.a);function pp(a){var t=a.length,e;return a[0]==="#"&&(t===4||t===5?e={r:255&Oe[a[1]]*17,g:255&Oe[a[2]]*17,b:255&Oe[a[3]]*17,a:t===5?Oe[a[4]]*17:255}:(t===7||t===9)&&(e={r:Oe[a[1]]<<4|Oe[a[2]],g:Oe[a[3]]<<4|Oe[a[4]],b:Oe[a[5]]<<4|Oe[a[6]],a:t===9?Oe[a[7]]<<4|Oe[a[8]]:255})),e}const fp=(a,t)=>a<255?t(a):"";function gp(a){var t=hp(a)?dp:up;return a?"#"+t(a.r)+t(a.g)+t(a.b)+fp(a.a,t):void 0}const mp=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Yc(a,t,e){const r=t*Math.min(e,1-e),i=(n,s=(n+a/30)%12)=>e-r*Math.max(Math.min(s-3,9-s,1),-1);return[i(0),i(8),i(4)]}function bp(a,t,e){const r=(i,n=(i+a/60)%6)=>e-e*t*Math.max(Math.min(n,4-n,1),0);return[r(5),r(3),r(1)]}function vp(a,t,e){const r=Yc(a,1,.5);let i;for(t+e>1&&(i=1/(t+e),t*=i,e*=i),i=0;i<3;i++)r[i]*=1-t-e,r[i]+=t;return r}function xp(a,t,e,r,i){return a===i?(t-e)/r+(t<e?6:0):t===i?(e-a)/r+2:(a-t)/r+4}function js(a){const e=a.r/255,r=a.g/255,i=a.b/255,n=Math.max(e,r,i),s=Math.min(e,r,i),o=(n+s)/2;let l,d,h;return n!==s&&(h=n-s,d=o>.5?h/(2-n-s):h/(n+s),l=xp(e,r,i,h,n),l=l*60+.5),[l|0,d||0,o]}function Hs(a,t,e,r){return(Array.isArray(t)?a(t[0],t[1],t[2]):a(t,e,r)).map(yr)}function Ns(a,t,e){return Hs(Yc,a,t,e)}function yp(a,t,e){return Hs(vp,a,t,e)}function wp(a,t,e){return Hs(bp,a,t,e)}function Uc(a){return(a%360+360)%360}function kp(a){const t=mp.exec(a);let e=255,r;if(!t)return;t[5]!==r&&(e=t[6]?Ta(+t[5]):yr(+t[5]));const i=Uc(+t[2]),n=+t[3]/100,s=+t[4]/100;return t[1]==="hwb"?r=yp(i,n,s):t[1]==="hsv"?r=wp(i,n,s):r=Ns(i,n,s),{r:r[0],g:r[1],b:r[2],a:e}}function Cp(a,t){var e=js(a);e[0]=Uc(e[0]+t),e=Ns(e),a.r=e[0],a.g=e[1],a.b=e[2]}function Sp(a){if(!a)return;const t=js(a),e=t[0],r=Yo(t[1]),i=Yo(t[2]);return a.a<255?`hsla(${e}, ${r}%, ${i}%, ${tr(a.a)})`:`hsl(${e}, ${r}%, ${i}%)`}const Uo={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Go={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Ap(){const a={},t=Object.keys(Go),e=Object.keys(Uo);let r,i,n,s,o;for(r=0;r<t.length;r++){for(s=o=t[r],i=0;i<e.length;i++)n=e[i],o=o.replace(n,Uo[n]);n=parseInt(Go[s],16),a[o]=[n>>16&255,n>>8&255,n&255]}return a}let Ai;function Mp(a){Ai||(Ai=Ap(),Ai.transparent=[0,0,0,0]);const t=Ai[a.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}const Dp=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Ep(a){const t=Dp.exec(a);let e=255,r,i,n;if(t){if(t[7]!==r){const s=+t[7];e=t[8]?Ta(s):mr(s*255,0,255)}return r=+t[1],i=+t[3],n=+t[5],r=255&(t[2]?Ta(r):mr(r,0,255)),i=255&(t[4]?Ta(i):mr(i,0,255)),n=255&(t[6]?Ta(n):mr(n,0,255)),{r,g:i,b:n,a:e}}}function Pp(a){return a&&(a.a<255?`rgba(${a.r}, ${a.g}, ${a.b}, ${tr(a.a)})`:`rgb(${a.r}, ${a.g}, ${a.b})`)}const rs=a=>a<=.0031308?a*12.92:Math.pow(a,1/2.4)*1.055-.055,aa=a=>a<=.04045?a/12.92:Math.pow((a+.055)/1.055,2.4);function Rp(a,t,e){const r=aa(tr(a.r)),i=aa(tr(a.g)),n=aa(tr(a.b));return{r:yr(rs(r+e*(aa(tr(t.r))-r))),g:yr(rs(i+e*(aa(tr(t.g))-i))),b:yr(rs(n+e*(aa(tr(t.b))-n))),a:a.a+e*(t.a-a.a)}}function Mi(a,t,e){if(a){let r=js(a);r[t]=Math.max(0,Math.min(r[t]+r[t]*e,t===0?360:1)),r=Ns(r),a.r=r[0],a.g=r[1],a.b=r[2]}}function Gc(a,t){return a&&Object.assign(t||{},a)}function Xo(a){var t={r:0,g:0,b:0,a:255};return Array.isArray(a)?a.length>=3&&(t={r:a[0],g:a[1],b:a[2],a:255},a.length>3&&(t.a=yr(a[3]))):(t=Gc(a,{r:0,g:0,b:0,a:1}),t.a=yr(t.a)),t}function zp(a){return a.charAt(0)==="r"?Ep(a):kp(a)}class Ya{constructor(t){if(t instanceof Ya)return t;const e=typeof t;let r;e==="object"?r=Xo(t):e==="string"&&(r=pp(t)||Mp(t)||zp(t)),this._rgb=r,this._valid=!!r}get valid(){return this._valid}get rgb(){var t=Gc(this._rgb);return t&&(t.a=tr(t.a)),t}set rgb(t){this._rgb=Xo(t)}rgbString(){return this._valid?Pp(this._rgb):void 0}hexString(){return this._valid?gp(this._rgb):void 0}hslString(){return this._valid?Sp(this._rgb):void 0}mix(t,e){if(t){const r=this.rgb,i=t.rgb;let n;const s=e===n?.5:e,o=2*s-1,l=r.a-i.a,d=((o*l===-1?o:(o+l)/(1+o*l))+1)/2;n=1-d,r.r=255&d*r.r+n*i.r+.5,r.g=255&d*r.g+n*i.g+.5,r.b=255&d*r.b+n*i.b+.5,r.a=s*r.a+(1-s)*i.a,this.rgb=r}return this}interpolate(t,e){return t&&(this._rgb=Rp(this._rgb,t._rgb,e)),this}clone(){return new Ya(this.rgb)}alpha(t){return this._rgb.a=yr(t),this}clearer(t){const e=this._rgb;return e.a*=1-t,this}greyscale(){const t=this._rgb,e=Qa(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){const e=this._rgb;return e.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return Mi(this._rgb,2,t),this}darken(t){return Mi(this._rgb,2,-t),this}saturate(t){return Mi(this._rgb,1,t),this}desaturate(t){return Mi(this._rgb,1,-t),this}rotate(t){return Cp(this._rgb,t),this}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Je(){}const Tp=(()=>{let a=0;return()=>a++})();function Tt(a){return a==null}function _t(a){if(Array.isArray&&Array.isArray(a))return!0;const t=Object.prototype.toString.call(a);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function Lt(a){return a!==null&&Object.prototype.toString.call(a)==="[object Object]"}function Zt(a){return(typeof a=="number"||a instanceof Number)&&isFinite(+a)}function ze(a,t){return Zt(a)?a:t}function St(a,t){return typeof a>"u"?t:a}const Lp=(a,t)=>typeof a=="string"&&a.endsWith("%")?parseFloat(a)/100:+a/t,Xc=(a,t)=>typeof a=="string"&&a.endsWith("%")?parseFloat(a)/100*t:+a;function Wt(a,t,e){if(a&&typeof a.call=="function")return a.apply(e,t)}function jt(a,t,e,r){let i,n,s;if(_t(a))for(n=a.length,i=0;i<n;i++)t.call(e,a[i],i);else if(Lt(a))for(s=Object.keys(a),n=s.length,i=0;i<n;i++)t.call(e,a[s[i]],s[i])}function $i(a,t){let e,r,i,n;if(!a||!t||a.length!==t.length)return!1;for(e=0,r=a.length;e<r;++e)if(i=a[e],n=t[e],i.datasetIndex!==n.datasetIndex||i.index!==n.index)return!1;return!0}function tn(a){if(_t(a))return a.map(tn);if(Lt(a)){const t=Object.create(null),e=Object.keys(a),r=e.length;let i=0;for(;i<r;++i)t[e[i]]=tn(a[e[i]]);return t}return a}function Kc(a){return["__proto__","prototype","constructor"].indexOf(a)===-1}function Op(a,t,e,r){if(!Kc(a))return;const i=t[a],n=e[a];Lt(i)&&Lt(n)?Ua(i,n,r):t[a]=tn(n)}function Ua(a,t,e){const r=_t(t)?t:[t],i=r.length;if(!Lt(a))return a;e=e||{};const n=e.merger||Op;let s;for(let o=0;o<i;++o){if(s=r[o],!Lt(s))continue;const l=Object.keys(s);for(let d=0,h=l.length;d<h;++d)n(l[d],a,s,e)}return a}function Va(a,t){return Ua(a,t,{merger:Bp})}function Bp(a,t,e){if(!Kc(a))return;const r=t[a],i=e[a];Lt(r)&&Lt(i)?Va(r,i):Object.prototype.hasOwnProperty.call(t,a)||(t[a]=tn(i))}const Ko={"":a=>a,x:a=>a.x,y:a=>a.y};function Ip(a){const t=a.split("."),e=[];let r="";for(const i of t)r+=i,r.endsWith("\\")?r=r.slice(0,-1)+".":(e.push(r),r="");return e}function Fp(a){const t=Ip(a);return e=>{for(const r of t){if(r==="")break;e=e&&e[r]}return e}}function Cr(a,t){return(Ko[t]||(Ko[t]=Fp(t)))(a)}function qs(a){return a.charAt(0).toUpperCase()+a.slice(1)}const Ga=a=>typeof a<"u",Sr=a=>typeof a=="function",_o=(a,t)=>{if(a.size!==t.size)return!1;for(const e of a)if(!t.has(e))return!1;return!0};function Vp(a){return a.type==="mouseup"||a.type==="click"||a.type==="contextmenu"}const Ft=Math.PI,Xt=2*Ft,jp=Xt+Ft,en=Number.POSITIVE_INFINITY,Hp=Ft/180,re=Ft/2,Lr=Ft/4,Qo=Ft*2/3,br=Math.log10,Ue=Math.sign;function ja(a,t,e){return Math.abs(a-t)<e}function Jo(a){const t=Math.round(a);a=ja(a,t,a/1e3)?t:a;const e=Math.pow(10,Math.floor(br(a))),r=a/e;return(r<=1?1:r<=2?2:r<=5?5:10)*e}function Np(a){const t=[],e=Math.sqrt(a);let r;for(r=1;r<e;r++)a%r===0&&(t.push(r),t.push(a/r));return e===(e|0)&&t.push(e),t.sort((i,n)=>i-n).pop(),t}function qp(a){return typeof a=="symbol"||typeof a=="object"&&a!==null&&!(Symbol.toPrimitive in a||"toString"in a||"valueOf"in a)}function ua(a){return!qp(a)&&!isNaN(parseFloat(a))&&isFinite(a)}function Wp(a,t){const e=Math.round(a);return e-t<=a&&e+t>=a}function _c(a,t,e){let r,i,n;for(r=0,i=a.length;r<i;r++)n=a[r][e],isNaN(n)||(t.min=Math.min(t.min,n),t.max=Math.max(t.max,n))}function Fe(a){return a*(Ft/180)}function Ws(a){return a*(180/Ft)}function Zo(a){if(!Zt(a))return;let t=1,e=0;for(;Math.round(a*t)/t!==a;)t*=10,e++;return e}function Qc(a,t){const e=t.x-a.x,r=t.y-a.y,i=Math.sqrt(e*e+r*r);let n=Math.atan2(r,e);return n<-.5*Ft&&(n+=Xt),{angle:n,distance:i}}function Cs(a,t){return Math.sqrt(Math.pow(t.x-a.x,2)+Math.pow(t.y-a.y,2))}function Yp(a,t){return(a-t+jp)%Xt-Ft}function be(a){return(a%Xt+Xt)%Xt}function Xa(a,t,e,r){const i=be(a),n=be(t),s=be(e),o=be(n-i),l=be(s-i),d=be(i-n),h=be(i-s);return i===n||i===s||r&&n===s||o>l&&d<h}function de(a,t,e){return Math.max(t,Math.min(e,a))}function Up(a){return de(a,-32768,32767)}function er(a,t,e,r=1e-6){return a>=Math.min(t,e)-r&&a<=Math.max(t,e)+r}function Ys(a,t,e){e=e||(s=>a[s]<t);let r=a.length-1,i=0,n;for(;r-i>1;)n=i+r>>1,e(n)?i=n:r=n;return{lo:i,hi:r}}const rr=(a,t,e,r)=>Ys(a,e,r?i=>{const n=a[i][t];return n<e||n===e&&a[i+1][t]===e}:i=>a[i][t]<e),Gp=(a,t,e)=>Ys(a,e,r=>a[r][t]>=e);function Xp(a,t,e){let r=0,i=a.length;for(;r<i&&a[r]<t;)r++;for(;i>r&&a[i-1]>e;)i--;return r>0||i<a.length?a.slice(r,i):a}const Jc=["push","pop","shift","splice","unshift"];function Kp(a,t){if(a._chartjs){a._chartjs.listeners.push(t);return}Object.defineProperty(a,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),Jc.forEach(e=>{const r="_onData"+qs(e),i=a[e];Object.defineProperty(a,e,{configurable:!0,enumerable:!1,value(...n){const s=i.apply(this,n);return a._chartjs.listeners.forEach(o=>{typeof o[r]=="function"&&o[r](...n)}),s}})})}function $o(a,t){const e=a._chartjs;if(!e)return;const r=e.listeners,i=r.indexOf(t);i!==-1&&r.splice(i,1),!(r.length>0)&&(Jc.forEach(n=>{delete a[n]}),delete a._chartjs)}function Zc(a){const t=new Set(a);return t.size===a.length?a:Array.from(t)}const $c=(function(){return typeof window>"u"?function(a){return a()}:window.requestAnimationFrame})();function td(a,t){let e=[],r=!1;return function(...i){e=i,r||(r=!0,$c.call(window,()=>{r=!1,a.apply(t,e)}))}}function _p(a,t){let e;return function(...r){return t?(clearTimeout(e),e=setTimeout(a,t,r)):a.apply(this,r),t}}const Us=a=>a==="start"?"left":a==="end"?"right":"center",me=(a,t,e)=>a==="start"?t:a==="end"?e:(t+e)/2,Qp=(a,t,e,r)=>a===(r?"left":"right")?e:a==="center"?(t+e)/2:t;function ed(a,t,e){const r=t.length;let i=0,n=r;if(a._sorted){const{iScale:s,vScale:o,_parsed:l}=a,d=a.dataset&&a.dataset.options?a.dataset.options.spanGaps:null,h=s.axis,{min:p,max:m,minDefined:v,maxDefined:g}=s.getUserBounds();if(v){if(i=Math.min(rr(l,h,p).lo,e?r:rr(t,h,s.getPixelForValue(p)).lo),d){const k=l.slice(0,i+1).reverse().findIndex(S=>!Tt(S[o.axis]));i-=Math.max(0,k)}i=de(i,0,r-1)}if(g){let k=Math.max(rr(l,s.axis,m,!0).hi+1,e?0:rr(t,h,s.getPixelForValue(m),!0).hi+1);if(d){const S=l.slice(k-1).findIndex(D=>!Tt(D[o.axis]));k+=Math.max(0,S)}n=de(k,i,r)-i}else n=r-i}return{start:i,count:n}}function rd(a){const{xScale:t,yScale:e,_scaleRanges:r}=a,i={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!r)return a._scaleRanges=i,!0;const n=r.xmin!==t.min||r.xmax!==t.max||r.ymin!==e.min||r.ymax!==e.max;return Object.assign(r,i),n}const Di=a=>a===0||a===1,tl=(a,t,e)=>-(Math.pow(2,10*(a-=1))*Math.sin((a-t)*Xt/e)),el=(a,t,e)=>Math.pow(2,-10*a)*Math.sin((a-t)*Xt/e)+1,Ha={linear:a=>a,easeInQuad:a=>a*a,easeOutQuad:a=>-a*(a-2),easeInOutQuad:a=>(a/=.5)<1?.5*a*a:-.5*(--a*(a-2)-1),easeInCubic:a=>a*a*a,easeOutCubic:a=>(a-=1)*a*a+1,easeInOutCubic:a=>(a/=.5)<1?.5*a*a*a:.5*((a-=2)*a*a+2),easeInQuart:a=>a*a*a*a,easeOutQuart:a=>-((a-=1)*a*a*a-1),easeInOutQuart:a=>(a/=.5)<1?.5*a*a*a*a:-.5*((a-=2)*a*a*a-2),easeInQuint:a=>a*a*a*a*a,easeOutQuint:a=>(a-=1)*a*a*a*a+1,easeInOutQuint:a=>(a/=.5)<1?.5*a*a*a*a*a:.5*((a-=2)*a*a*a*a+2),easeInSine:a=>-Math.cos(a*re)+1,easeOutSine:a=>Math.sin(a*re),easeInOutSine:a=>-.5*(Math.cos(Ft*a)-1),easeInExpo:a=>a===0?0:Math.pow(2,10*(a-1)),easeOutExpo:a=>a===1?1:-Math.pow(2,-10*a)+1,easeInOutExpo:a=>Di(a)?a:a<.5?.5*Math.pow(2,10*(a*2-1)):.5*(-Math.pow(2,-10*(a*2-1))+2),easeInCirc:a=>a>=1?a:-(Math.sqrt(1-a*a)-1),easeOutCirc:a=>Math.sqrt(1-(a-=1)*a),easeInOutCirc:a=>(a/=.5)<1?-.5*(Math.sqrt(1-a*a)-1):.5*(Math.sqrt(1-(a-=2)*a)+1),easeInElastic:a=>Di(a)?a:tl(a,.075,.3),easeOutElastic:a=>Di(a)?a:el(a,.075,.3),easeInOutElastic(a){return Di(a)?a:a<.5?.5*tl(a*2,.1125,.45):.5+.5*el(a*2-1,.1125,.45)},easeInBack(a){return a*a*((1.70158+1)*a-1.70158)},easeOutBack(a){return(a-=1)*a*((1.70158+1)*a+1.70158)+1},easeInOutBack(a){let t=1.70158;return(a/=.5)<1?.5*(a*a*(((t*=1.525)+1)*a-t)):.5*((a-=2)*a*(((t*=1.525)+1)*a+t)+2)},easeInBounce:a=>1-Ha.easeOutBounce(1-a),easeOutBounce(a){return a<1/2.75?7.5625*a*a:a<2/2.75?7.5625*(a-=1.5/2.75)*a+.75:a<2.5/2.75?7.5625*(a-=2.25/2.75)*a+.9375:7.5625*(a-=2.625/2.75)*a+.984375},easeInOutBounce:a=>a<.5?Ha.easeInBounce(a*2)*.5:Ha.easeOutBounce(a*2-1)*.5+.5};function Gs(a){if(a&&typeof a=="object"){const t=a.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function rl(a){return Gs(a)?a:new Ya(a)}function as(a){return Gs(a)?a:new Ya(a).saturate(.5).darken(.1).hexString()}const Jp=["x","y","borderWidth","radius","tension"],Zp=["color","borderColor","backgroundColor"];function $p(a){a.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),a.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),a.set("animations",{colors:{type:"color",properties:Zp},numbers:{type:"number",properties:Jp}}),a.describe("animations",{_fallback:"animation"}),a.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function tf(a){a.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const al=new Map;function ef(a,t){t=t||{};const e=a+JSON.stringify(t);let r=al.get(e);return r||(r=new Intl.NumberFormat(a,t),al.set(e,r)),r}function Ja(a,t,e){return ef(t,e).format(a)}const ad={values(a){return _t(a)?a:""+a},numeric(a,t,e){if(a===0)return"0";const r=this.chart.options.locale;let i,n=a;if(e.length>1){const d=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(d<1e-4||d>1e15)&&(i="scientific"),n=rf(a,e)}const s=br(Math.abs(n)),o=isNaN(s)?1:Math.max(Math.min(-1*Math.floor(s),20),0),l={notation:i,minimumFractionDigits:o,maximumFractionDigits:o};return Object.assign(l,this.options.ticks.format),Ja(a,r,l)},logarithmic(a,t,e){if(a===0)return"0";const r=e[t].significand||a/Math.pow(10,Math.floor(br(a)));return[1,2,3,5,10,15].includes(r)||t>.8*e.length?ad.numeric.call(this,a,t,e):""}};function rf(a,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&a!==Math.floor(a)&&(e=a-Math.floor(a)),e}var pn={formatters:ad};function af(a){a.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:pn.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),a.route("scale.ticks","color","","color"),a.route("scale.grid","color","","borderColor"),a.route("scale.border","color","","borderColor"),a.route("scale.title","color","","color"),a.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),a.describe("scales",{_fallback:"scale"}),a.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}const Yr=Object.create(null),Ss=Object.create(null);function Na(a,t){if(!t)return a;const e=t.split(".");for(let r=0,i=e.length;r<i;++r){const n=e[r];a=a[n]||(a[n]=Object.create(null))}return a}function is(a,t,e){return typeof t=="string"?Ua(Na(a,t),e):Ua(Na(a,""),t)}class nf{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=r=>r.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(r,i)=>as(i.backgroundColor),this.hoverBorderColor=(r,i)=>as(i.borderColor),this.hoverColor=(r,i)=>as(i.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return is(this,t,e)}get(t){return Na(this,t)}describe(t,e){return is(Ss,t,e)}override(t,e){return is(Yr,t,e)}route(t,e,r,i){const n=Na(this,t),s=Na(this,r),o="_"+e;Object.defineProperties(n,{[o]:{value:n[e],writable:!0},[e]:{enumerable:!0,get(){const l=this[o],d=s[i];return Lt(l)?Object.assign({},d,l):St(l,d)},set(l){this[o]=l}}})}apply(t){t.forEach(e=>e(this))}}var Qt=new nf({_scriptable:a=>!a.startsWith("on"),_indexable:a=>a!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[$p,tf,af]);function sf(a){return!a||Tt(a.size)||Tt(a.family)?null:(a.style?a.style+" ":"")+(a.weight?a.weight+" ":"")+a.size+"px "+a.family}function rn(a,t,e,r,i){let n=t[i];return n||(n=t[i]=a.measureText(i).width,e.push(i)),n>r&&(r=n),r}function of(a,t,e,r){r=r||{};let i=r.data=r.data||{},n=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(i=r.data={},n=r.garbageCollect=[],r.font=t),a.save(),a.font=t;let s=0;const o=e.length;let l,d,h,p,m;for(l=0;l<o;l++)if(p=e[l],p!=null&&!_t(p))s=rn(a,i,n,s,p);else if(_t(p))for(d=0,h=p.length;d<h;d++)m=p[d],m!=null&&!_t(m)&&(s=rn(a,i,n,s,m));a.restore();const v=n.length/2;if(v>e.length){for(l=0;l<v;l++)delete i[n[l]];n.splice(0,v)}return s}function Or(a,t,e){const r=a.currentDevicePixelRatio,i=e!==0?Math.max(e/2,.5):0;return Math.round((t-i)*r)/r+i}function il(a,t){!t&&!a||(t=t||a.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,a.width,a.height),t.restore())}function As(a,t,e,r){id(a,t,e,r,null)}function id(a,t,e,r,i){let n,s,o,l,d,h,p,m;const v=t.pointStyle,g=t.rotation,k=t.radius;let S=(g||0)*Hp;if(v&&typeof v=="object"&&(n=v.toString(),n==="[object HTMLImageElement]"||n==="[object HTMLCanvasElement]")){a.save(),a.translate(e,r),a.rotate(S),a.drawImage(v,-v.width/2,-v.height/2,v.width,v.height),a.restore();return}if(!(isNaN(k)||k<=0)){switch(a.beginPath(),v){default:i?a.ellipse(e,r,i/2,k,0,0,Xt):a.arc(e,r,k,0,Xt),a.closePath();break;case"triangle":h=i?i/2:k,a.moveTo(e+Math.sin(S)*h,r-Math.cos(S)*k),S+=Qo,a.lineTo(e+Math.sin(S)*h,r-Math.cos(S)*k),S+=Qo,a.lineTo(e+Math.sin(S)*h,r-Math.cos(S)*k),a.closePath();break;case"rectRounded":d=k*.516,l=k-d,s=Math.cos(S+Lr)*l,p=Math.cos(S+Lr)*(i?i/2-d:l),o=Math.sin(S+Lr)*l,m=Math.sin(S+Lr)*(i?i/2-d:l),a.arc(e-p,r-o,d,S-Ft,S-re),a.arc(e+m,r-s,d,S-re,S),a.arc(e+p,r+o,d,S,S+re),a.arc(e-m,r+s,d,S+re,S+Ft),a.closePath();break;case"rect":if(!g){l=Math.SQRT1_2*k,h=i?i/2:l,a.rect(e-h,r-l,2*h,2*l);break}S+=Lr;case"rectRot":p=Math.cos(S)*(i?i/2:k),s=Math.cos(S)*k,o=Math.sin(S)*k,m=Math.sin(S)*(i?i/2:k),a.moveTo(e-p,r-o),a.lineTo(e+m,r-s),a.lineTo(e+p,r+o),a.lineTo(e-m,r+s),a.closePath();break;case"crossRot":S+=Lr;case"cross":p=Math.cos(S)*(i?i/2:k),s=Math.cos(S)*k,o=Math.sin(S)*k,m=Math.sin(S)*(i?i/2:k),a.moveTo(e-p,r-o),a.lineTo(e+p,r+o),a.moveTo(e+m,r-s),a.lineTo(e-m,r+s);break;case"star":p=Math.cos(S)*(i?i/2:k),s=Math.cos(S)*k,o=Math.sin(S)*k,m=Math.sin(S)*(i?i/2:k),a.moveTo(e-p,r-o),a.lineTo(e+p,r+o),a.moveTo(e+m,r-s),a.lineTo(e-m,r+s),S+=Lr,p=Math.cos(S)*(i?i/2:k),s=Math.cos(S)*k,o=Math.sin(S)*k,m=Math.sin(S)*(i?i/2:k),a.moveTo(e-p,r-o),a.lineTo(e+p,r+o),a.moveTo(e+m,r-s),a.lineTo(e-m,r+s);break;case"line":s=i?i/2:Math.cos(S)*k,o=Math.sin(S)*k,a.moveTo(e-s,r-o),a.lineTo(e+s,r+o);break;case"dash":a.moveTo(e,r),a.lineTo(e+Math.cos(S)*(i?i/2:k),r+Math.sin(S)*k);break;case!1:a.closePath();break}a.fill(),t.borderWidth>0&&a.stroke()}}function ar(a,t,e){return e=e||.5,!t||a&&a.x>t.left-e&&a.x<t.right+e&&a.y>t.top-e&&a.y<t.bottom+e}function fn(a,t){a.save(),a.beginPath(),a.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),a.clip()}function gn(a){a.restore()}function lf(a,t,e,r,i){if(!t)return a.lineTo(e.x,e.y);if(i==="middle"){const n=(t.x+e.x)/2;a.lineTo(n,t.y),a.lineTo(n,e.y)}else i==="after"!=!!r?a.lineTo(t.x,e.y):a.lineTo(e.x,t.y);a.lineTo(e.x,e.y)}function cf(a,t,e,r){if(!t)return a.lineTo(e.x,e.y);a.bezierCurveTo(r?t.cp1x:t.cp2x,r?t.cp1y:t.cp2y,r?e.cp2x:e.cp1x,r?e.cp2y:e.cp1y,e.x,e.y)}function df(a,t){t.translation&&a.translate(t.translation[0],t.translation[1]),Tt(t.rotation)||a.rotate(t.rotation),t.color&&(a.fillStyle=t.color),t.textAlign&&(a.textAlign=t.textAlign),t.textBaseline&&(a.textBaseline=t.textBaseline)}function uf(a,t,e,r,i){if(i.strikethrough||i.underline){const n=a.measureText(r),s=t-n.actualBoundingBoxLeft,o=t+n.actualBoundingBoxRight,l=e-n.actualBoundingBoxAscent,d=e+n.actualBoundingBoxDescent,h=i.strikethrough?(l+d)/2:d;a.strokeStyle=a.fillStyle,a.beginPath(),a.lineWidth=i.decorationWidth||2,a.moveTo(s,h),a.lineTo(o,h),a.stroke()}}function hf(a,t){const e=a.fillStyle;a.fillStyle=t.color,a.fillRect(t.left,t.top,t.width,t.height),a.fillStyle=e}function Ur(a,t,e,r,i,n={}){const s=_t(t)?t:[t],o=n.strokeWidth>0&&n.strokeColor!=="";let l,d;for(a.save(),a.font=i.string,df(a,n),l=0;l<s.length;++l)d=s[l],n.backdrop&&hf(a,n.backdrop),o&&(n.strokeColor&&(a.strokeStyle=n.strokeColor),Tt(n.strokeWidth)||(a.lineWidth=n.strokeWidth),a.strokeText(d,e,r,n.maxWidth)),a.fillText(d,e,r,n.maxWidth),uf(a,e,r,d,n),r+=Number(i.lineHeight);a.restore()}function wr(a,t){const{x:e,y:r,w:i,h:n,radius:s}=t;a.arc(e+s.topLeft,r+s.topLeft,s.topLeft,1.5*Ft,Ft,!0),a.lineTo(e,r+n-s.bottomLeft),a.arc(e+s.bottomLeft,r+n-s.bottomLeft,s.bottomLeft,Ft,re,!0),a.lineTo(e+i-s.bottomRight,r+n),a.arc(e+i-s.bottomRight,r+n-s.bottomRight,s.bottomRight,re,0,!0),a.lineTo(e+i,r+s.topRight),a.arc(e+i-s.topRight,r+s.topRight,s.topRight,0,-re,!0),a.lineTo(e+s.topLeft,r)}const pf=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,ff=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function gf(a,t){const e=(""+a).match(pf);if(!e||e[1]==="normal")return t*1.2;switch(a=+e[2],e[3]){case"px":return a;case"%":a/=100;break}return t*a}const mf=a=>+a||0;function Xs(a,t){const e={},r=Lt(t),i=r?Object.keys(t):t,n=Lt(a)?r?s=>St(a[s],a[t[s]]):s=>a[s]:()=>a;for(const s of i)e[s]=mf(n(s));return e}function nd(a){return Xs(a,{top:"y",right:"x",bottom:"y",left:"x"})}function kr(a){return Xs(a,["topLeft","topRight","bottomLeft","bottomRight"])}function ye(a){const t=nd(a);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function ne(a,t){a=a||{},t=t||Qt.font;let e=St(a.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let r=St(a.style,t.style);r&&!(""+r).match(ff)&&(console.warn('Invalid font style specified: "'+r+'"'),r=void 0);const i={family:St(a.family,t.family),lineHeight:gf(St(a.lineHeight,t.lineHeight),e),size:e,style:r,weight:St(a.weight,t.weight),string:""};return i.string=sf(i),i}function La(a,t,e,r){let i,n,s;for(i=0,n=a.length;i<n;++i)if(s=a[i],s!==void 0&&s!==void 0)return s}function bf(a,t,e){const{min:r,max:i}=a,n=Xc(t,(i-r)/2),s=(o,l)=>e&&o===0?0:o+l;return{min:s(r,-Math.abs(n)),max:s(i,n)}}function Ar(a,t){return Object.assign(Object.create(a),t)}function Ks(a,t=[""],e,r,i=()=>a[0]){const n=e||a;typeof r>"u"&&(r=cd("_fallback",a));const s={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:a,_rootScopes:n,_fallback:r,_getTarget:i,override:o=>Ks([o,...a],t,n,r)};return new Proxy(s,{deleteProperty(o,l){return delete o[l],delete o._keys,delete a[0][l],!0},get(o,l){return od(o,l,()=>Af(l,t,a,o))},getOwnPropertyDescriptor(o,l){return Reflect.getOwnPropertyDescriptor(o._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(a[0])},has(o,l){return sl(o).includes(l)},ownKeys(o){return sl(o)},set(o,l,d){const h=o._storage||(o._storage=i());return o[l]=h[l]=d,delete o._keys,!0}})}function ha(a,t,e,r){const i={_cacheable:!1,_proxy:a,_context:t,_subProxy:e,_stack:new Set,_descriptors:sd(a,r),setContext:n=>ha(a,n,e,r),override:n=>ha(a.override(n),t,e,r)};return new Proxy(i,{deleteProperty(n,s){return delete n[s],delete a[s],!0},get(n,s,o){return od(n,s,()=>xf(n,s,o))},getOwnPropertyDescriptor(n,s){return n._descriptors.allKeys?Reflect.has(a,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(a,s)},getPrototypeOf(){return Reflect.getPrototypeOf(a)},has(n,s){return Reflect.has(a,s)},ownKeys(){return Reflect.ownKeys(a)},set(n,s,o){return a[s]=o,delete n[s],!0}})}function sd(a,t={scriptable:!0,indexable:!0}){const{_scriptable:e=t.scriptable,_indexable:r=t.indexable,_allKeys:i=t.allKeys}=a;return{allKeys:i,scriptable:e,indexable:r,isScriptable:Sr(e)?e:()=>e,isIndexable:Sr(r)?r:()=>r}}const vf=(a,t)=>a?a+qs(t):t,_s=(a,t)=>Lt(t)&&a!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function od(a,t,e){if(Object.prototype.hasOwnProperty.call(a,t)||t==="constructor")return a[t];const r=e();return a[t]=r,r}function xf(a,t,e){const{_proxy:r,_context:i,_subProxy:n,_descriptors:s}=a;let o=r[t];return Sr(o)&&s.isScriptable(t)&&(o=yf(t,o,a,e)),_t(o)&&o.length&&(o=wf(t,o,a,s.isIndexable)),_s(t,o)&&(o=ha(o,i,n&&n[t],s)),o}function yf(a,t,e,r){const{_proxy:i,_context:n,_subProxy:s,_stack:o}=e;if(o.has(a))throw new Error("Recursion detected: "+Array.from(o).join("->")+"->"+a);o.add(a);let l=t(n,s||r);return o.delete(a),_s(a,l)&&(l=Qs(i._scopes,i,a,l)),l}function wf(a,t,e,r){const{_proxy:i,_context:n,_subProxy:s,_descriptors:o}=e;if(typeof n.index<"u"&&r(a))return t[n.index%t.length];if(Lt(t[0])){const l=t,d=i._scopes.filter(h=>h!==l);t=[];for(const h of l){const p=Qs(d,i,a,h);t.push(ha(p,n,s&&s[a],o))}}return t}function ld(a,t,e){return Sr(a)?a(t,e):a}const kf=(a,t)=>a===!0?t:typeof a=="string"?Cr(t,a):void 0;function Cf(a,t,e,r,i){for(const n of t){const s=kf(e,n);if(s){a.add(s);const o=ld(s._fallback,e,i);if(typeof o<"u"&&o!==e&&o!==r)return o}else if(s===!1&&typeof r<"u"&&e!==r)return null}return!1}function Qs(a,t,e,r){const i=t._rootScopes,n=ld(t._fallback,e,r),s=[...a,...i],o=new Set;o.add(r);let l=nl(o,s,e,n||e,r);return l===null||typeof n<"u"&&n!==e&&(l=nl(o,s,n,l,r),l===null)?!1:Ks(Array.from(o),[""],i,n,()=>Sf(t,e,r))}function nl(a,t,e,r,i){for(;e;)e=Cf(a,t,e,r,i);return e}function Sf(a,t,e){const r=a._getTarget();t in r||(r[t]={});const i=r[t];return _t(i)&&Lt(e)?e:i||{}}function Af(a,t,e,r){let i;for(const n of t)if(i=cd(vf(n,a),e),typeof i<"u")return _s(a,i)?Qs(e,r,a,i):i}function cd(a,t){for(const e of t){if(!e)continue;const r=e[a];if(typeof r<"u")return r}}function sl(a){let t=a._keys;return t||(t=a._keys=Mf(a._scopes)),t}function Mf(a){const t=new Set;for(const e of a)for(const r of Object.keys(e).filter(i=>!i.startsWith("_")))t.add(r);return Array.from(t)}function dd(a,t,e,r){const{iScale:i}=a,{key:n="r"}=this._parsing,s=new Array(r);let o,l,d,h;for(o=0,l=r;o<l;++o)d=o+e,h=t[d],s[o]={r:i.parse(Cr(h,n),d)};return s}const Df=Number.EPSILON||1e-14,pa=(a,t)=>t<a.length&&!a[t].skip&&a[t],ud=a=>a==="x"?"y":"x";function Ef(a,t,e,r){const i=a.skip?t:a,n=t,s=e.skip?t:e,o=Cs(n,i),l=Cs(s,n);let d=o/(o+l),h=l/(o+l);d=isNaN(d)?0:d,h=isNaN(h)?0:h;const p=r*d,m=r*h;return{previous:{x:n.x-p*(s.x-i.x),y:n.y-p*(s.y-i.y)},next:{x:n.x+m*(s.x-i.x),y:n.y+m*(s.y-i.y)}}}function Pf(a,t,e){const r=a.length;let i,n,s,o,l,d=pa(a,0);for(let h=0;h<r-1;++h)if(l=d,d=pa(a,h+1),!(!l||!d)){if(ja(t[h],0,Df)){e[h]=e[h+1]=0;continue}i=e[h]/t[h],n=e[h+1]/t[h],o=Math.pow(i,2)+Math.pow(n,2),!(o<=9)&&(s=3/Math.sqrt(o),e[h]=i*s*t[h],e[h+1]=n*s*t[h])}}function Rf(a,t,e="x"){const r=ud(e),i=a.length;let n,s,o,l=pa(a,0);for(let d=0;d<i;++d){if(s=o,o=l,l=pa(a,d+1),!o)continue;const h=o[e],p=o[r];s&&(n=(h-s[e])/3,o[`cp1${e}`]=h-n,o[`cp1${r}`]=p-n*t[d]),l&&(n=(l[e]-h)/3,o[`cp2${e}`]=h+n,o[`cp2${r}`]=p+n*t[d])}}function zf(a,t="x"){const e=ud(t),r=a.length,i=Array(r).fill(0),n=Array(r);let s,o,l,d=pa(a,0);for(s=0;s<r;++s)if(o=l,l=d,d=pa(a,s+1),!!l){if(d){const h=d[t]-l[t];i[s]=h!==0?(d[e]-l[e])/h:0}n[s]=o?d?Ue(i[s-1])!==Ue(i[s])?0:(i[s-1]+i[s])/2:i[s-1]:i[s]}Pf(a,i,n),Rf(a,n,t)}function Ei(a,t,e){return Math.max(Math.min(a,e),t)}function Tf(a,t){let e,r,i,n,s,o=ar(a[0],t);for(e=0,r=a.length;e<r;++e)s=n,n=o,o=e<r-1&&ar(a[e+1],t),n&&(i=a[e],s&&(i.cp1x=Ei(i.cp1x,t.left,t.right),i.cp1y=Ei(i.cp1y,t.top,t.bottom)),o&&(i.cp2x=Ei(i.cp2x,t.left,t.right),i.cp2y=Ei(i.cp2y,t.top,t.bottom)))}function Lf(a,t,e,r,i){let n,s,o,l;if(t.spanGaps&&(a=a.filter(d=>!d.skip)),t.cubicInterpolationMode==="monotone")zf(a,i);else{let d=r?a[a.length-1]:a[0];for(n=0,s=a.length;n<s;++n)o=a[n],l=Ef(d,o,a[Math.min(n+1,s-(r?0:1))%s],t.tension),o.cp1x=l.previous.x,o.cp1y=l.previous.y,o.cp2x=l.next.x,o.cp2y=l.next.y,d=o}t.capBezierPoints&&Tf(a,e)}function Js(){return typeof window<"u"&&typeof document<"u"}function Zs(a){let t=a.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function an(a,t,e){let r;return typeof a=="string"?(r=parseInt(a,10),a.indexOf("%")!==-1&&(r=r/100*t.parentNode[e])):r=a,r}const mn=a=>a.ownerDocument.defaultView.getComputedStyle(a,null);function Of(a,t){return mn(a).getPropertyValue(t)}const Bf=["top","right","bottom","left"];function qr(a,t,e){const r={};e=e?"-"+e:"";for(let i=0;i<4;i++){const n=Bf[i];r[n]=parseFloat(a[t+"-"+n+e])||0}return r.width=r.left+r.right,r.height=r.top+r.bottom,r}const If=(a,t,e)=>(a>0||t>0)&&(!e||!e.shadowRoot);function Ff(a,t){const e=a.touches,r=e&&e.length?e[0]:a,{offsetX:i,offsetY:n}=r;let s=!1,o,l;if(If(i,n,a.target))o=i,l=n;else{const d=t.getBoundingClientRect();o=r.clientX-d.left,l=r.clientY-d.top,s=!0}return{x:o,y:l,box:s}}function Fr(a,t){if("native"in a)return a;const{canvas:e,currentDevicePixelRatio:r}=t,i=mn(e),n=i.boxSizing==="border-box",s=qr(i,"padding"),o=qr(i,"border","width"),{x:l,y:d,box:h}=Ff(a,e),p=s.left+(h&&o.left),m=s.top+(h&&o.top);let{width:v,height:g}=t;return n&&(v-=s.width+o.width,g-=s.height+o.height),{x:Math.round((l-p)/v*e.width/r),y:Math.round((d-m)/g*e.height/r)}}function Vf(a,t,e){let r,i;if(t===void 0||e===void 0){const n=a&&Zs(a);if(!n)t=a.clientWidth,e=a.clientHeight;else{const s=n.getBoundingClientRect(),o=mn(n),l=qr(o,"border","width"),d=qr(o,"padding");t=s.width-d.width-l.width,e=s.height-d.height-l.height,r=an(o.maxWidth,n,"clientWidth"),i=an(o.maxHeight,n,"clientHeight")}}return{width:t,height:e,maxWidth:r||en,maxHeight:i||en}}const vr=a=>Math.round(a*10)/10;function jf(a,t,e,r){const i=mn(a),n=qr(i,"margin"),s=an(i.maxWidth,a,"clientWidth")||en,o=an(i.maxHeight,a,"clientHeight")||en,l=Vf(a,t,e);let{width:d,height:h}=l;if(i.boxSizing==="content-box"){const m=qr(i,"border","width"),v=qr(i,"padding");d-=v.width+m.width,h-=v.height+m.height}return d=Math.max(0,d-n.width),h=Math.max(0,r?d/r:h-n.height),d=vr(Math.min(d,s,l.maxWidth)),h=vr(Math.min(h,o,l.maxHeight)),d&&!h&&(h=vr(d/2)),(t!==void 0||e!==void 0)&&r&&l.height&&h>l.height&&(h=l.height,d=vr(Math.floor(h*r))),{width:d,height:h}}function ol(a,t,e){const r=t||1,i=vr(a.height*r),n=vr(a.width*r);a.height=vr(a.height),a.width=vr(a.width);const s=a.canvas;return s.style&&(e||!s.style.height&&!s.style.width)&&(s.style.height=`${a.height}px`,s.style.width=`${a.width}px`),a.currentDevicePixelRatio!==r||s.height!==i||s.width!==n?(a.currentDevicePixelRatio=r,s.height=i,s.width=n,a.ctx.setTransform(r,0,0,r,0,0),!0):!1}const Hf=(function(){let a=!1;try{const t={get passive(){return a=!0,!1}};Js()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return a})();function ll(a,t){const e=Of(a,t),r=e&&e.match(/^(\d+)(\.\d+)?px$/);return r?+r[1]:void 0}function Vr(a,t,e,r){return{x:a.x+e*(t.x-a.x),y:a.y+e*(t.y-a.y)}}function Nf(a,t,e,r){return{x:a.x+e*(t.x-a.x),y:r==="middle"?e<.5?a.y:t.y:r==="after"?e<1?a.y:t.y:e>0?t.y:a.y}}function qf(a,t,e,r){const i={x:a.cp2x,y:a.cp2y},n={x:t.cp1x,y:t.cp1y},s=Vr(a,i,e),o=Vr(i,n,e),l=Vr(n,t,e),d=Vr(s,o,e),h=Vr(o,l,e);return Vr(d,h,e)}const Wf=function(a,t){return{x(e){return a+a+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,r){return e-r},leftForLtr(e,r){return e-r}}},Yf=function(){return{x(a){return a},setWidth(a){},textAlign(a){return a},xPlus(a,t){return a+t},leftForLtr(a,t){return a}}};function oa(a,t,e){return a?Wf(t,e):Yf()}function hd(a,t){let e,r;(t==="ltr"||t==="rtl")&&(e=a.canvas.style,r=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),a.prevTextDirection=r)}function pd(a,t){t!==void 0&&(delete a.prevTextDirection,a.canvas.style.setProperty("direction",t[0],t[1]))}function fd(a){return a==="angle"?{between:Xa,compare:Yp,normalize:be}:{between:er,compare:(t,e)=>t-e,normalize:t=>t}}function cl({start:a,end:t,count:e,loop:r,style:i}){return{start:a%e,end:t%e,loop:r&&(t-a+1)%e===0,style:i}}function Uf(a,t,e){const{property:r,start:i,end:n}=e,{between:s,normalize:o}=fd(r),l=t.length;let{start:d,end:h,loop:p}=a,m,v;if(p){for(d+=l,h+=l,m=0,v=l;m<v&&s(o(t[d%l][r]),i,n);++m)d--,h--;d%=l,h%=l}return h<d&&(h+=l),{start:d,end:h,loop:p,style:a.style}}function gd(a,t,e){if(!e)return[a];const{property:r,start:i,end:n}=e,s=t.length,{compare:o,between:l,normalize:d}=fd(r),{start:h,end:p,loop:m,style:v}=Uf(a,t,e),g=[];let k=!1,S=null,D,M,I;const W=()=>l(i,I,D)&&o(i,I)!==0,H=()=>o(n,D)===0||l(n,I,D),X=()=>k||W(),q=()=>!k||H();for(let w=h,C=h;w<=p;++w)M=t[w%s],!M.skip&&(D=d(M[r]),D!==I&&(k=l(D,i,n),S===null&&X()&&(S=o(D,i)===0?w:C),S!==null&&q()&&(g.push(cl({start:S,end:w,loop:m,count:s,style:v})),S=null),C=w,I=D));return S!==null&&g.push(cl({start:S,end:p,loop:m,count:s,style:v})),g}function md(a,t){const e=[],r=a.segments;for(let i=0;i<r.length;i++){const n=gd(r[i],a.points,t);n.length&&e.push(...n)}return e}function Gf(a,t,e,r){let i=0,n=t-1;if(e&&!r)for(;i<t&&!a[i].skip;)i++;for(;i<t&&a[i].skip;)i++;for(i%=t,e&&(n+=i);n>i&&a[n%t].skip;)n--;return n%=t,{start:i,end:n}}function Xf(a,t,e,r){const i=a.length,n=[];let s=t,o=a[t],l;for(l=t+1;l<=e;++l){const d=a[l%i];d.skip||d.stop?o.skip||(r=!1,n.push({start:t%i,end:(l-1)%i,loop:r}),t=s=d.stop?l:null):(s=l,o.skip&&(t=l)),o=d}return s!==null&&n.push({start:t%i,end:s%i,loop:r}),n}function Kf(a,t){const e=a.points,r=a.options.spanGaps,i=e.length;if(!i)return[];const n=!!a._loop,{start:s,end:o}=Gf(e,i,n,r);if(r===!0)return dl(a,[{start:s,end:o,loop:n}],e,t);const l=o<s?o+i:o,d=!!a._fullLoop&&s===0&&o===i-1;return dl(a,Xf(e,s,l,d),e,t)}function dl(a,t,e,r){return!r||!r.setContext||!e?t:_f(a,t,e,r)}function _f(a,t,e,r){const i=a._chart.getContext(),n=ul(a.options),{_datasetIndex:s,options:{spanGaps:o}}=a,l=e.length,d=[];let h=n,p=t[0].start,m=p;function v(g,k,S,D){const M=o?-1:1;if(g!==k){for(g+=l;e[g%l].skip;)g-=M;for(;e[k%l].skip;)k+=M;g%l!==k%l&&(d.push({start:g%l,end:k%l,loop:S,style:D}),h=D,p=k%l)}}for(const g of t){p=o?p:g.start;let k=e[p%l],S;for(m=p+1;m<=g.end;m++){const D=e[m%l];S=ul(r.setContext(Ar(i,{type:"segment",p0:k,p1:D,p0DataIndex:(m-1)%l,p1DataIndex:m%l,datasetIndex:s}))),Qf(S,h)&&v(p,m-1,g.loop,h),k=D,h=S}p<m-1&&v(p,m-1,g.loop,h)}return d}function ul(a){return{backgroundColor:a.backgroundColor,borderCapStyle:a.borderCapStyle,borderDash:a.borderDash,borderDashOffset:a.borderDashOffset,borderJoinStyle:a.borderJoinStyle,borderWidth:a.borderWidth,borderColor:a.borderColor}}function Qf(a,t){if(!t)return!1;const e=[],r=function(i,n){return Gs(n)?(e.includes(n)||e.push(n),e.indexOf(n)):n};return JSON.stringify(a,r)!==JSON.stringify(t,r)}function Pi(a,t,e){return a.options.clip?a[e]:t[e]}function Jf(a,t){const{xScale:e,yScale:r}=a;return e&&r?{left:Pi(e,t,"left"),right:Pi(e,t,"right"),top:Pi(r,t,"top"),bottom:Pi(r,t,"bottom")}:t}function bd(a,t){const e=t._clip;if(e.disabled)return!1;const r=Jf(t,a.chartArea);return{left:e.left===!1?0:r.left-(e.left===!0?0:e.left),right:e.right===!1?a.width:r.right+(e.right===!0?0:e.right),top:e.top===!1?0:r.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?a.height:r.bottom+(e.bottom===!0?0:e.bottom)}}/*!
 * Chart.js v4.5.1
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class Zf{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,r,i){const n=e.listeners[i],s=e.duration;n.forEach(o=>o({chart:t,initial:e.initial,numSteps:s,currentStep:Math.min(r-e.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=$c.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((r,i)=>{if(!r.running||!r.items.length)return;const n=r.items;let s=n.length-1,o=!1,l;for(;s>=0;--s)l=n[s],l._active?(l._total>r.duration&&(r.duration=l._total),l.tick(t),o=!0):(n[s]=n[n.length-1],n.pop());o&&(i.draw(),this._notify(i,r,t,"progress")),n.length||(r.running=!1,this._notify(i,r,t,"complete"),r.initial=!1),e+=n.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){const e=this._charts;let r=e.get(t);return r||(r={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,r)),r}listen(t,e,r){this._getAnims(t).listeners[e].push(r)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((r,i)=>Math.max(r,i._duration),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const r=e.items;let i=r.length-1;for(;i>=0;--i)r[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}}var Ze=new Zf;const hl="transparent",$f={boolean(a,t,e){return e>.5?t:a},color(a,t,e){const r=rl(a||hl),i=r.valid&&rl(t||hl);return i&&i.valid?i.mix(r,e).hexString():t},number(a,t,e){return a+(t-a)*e}};class t0{constructor(t,e,r,i){const n=e[r];i=La([t.to,i,n,t.from]);const s=La([t.from,n,i]);this._active=!0,this._fn=t.fn||$f[t.type||typeof s],this._easing=Ha[t.easing]||Ha.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=r,this._from=s,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,r){if(this._active){this._notify(!1);const i=this._target[this._prop],n=r-this._start,s=this._duration-n;this._start=r,this._duration=Math.floor(Math.max(s,t.duration)),this._total+=n,this._loop=!!t.loop,this._to=La([t.to,e,i,t.from]),this._from=La([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,r=this._duration,i=this._prop,n=this._from,s=this._loop,o=this._to;let l;if(this._active=n!==o&&(s||e<r),!this._active){this._target[i]=o,this._notify(!0);return}if(e<0){this._target[i]=n;return}l=e/r%2,l=s&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[i]=this._fn(n,o,l)}wait(){const t=this._promises||(this._promises=[]);return new Promise((e,r)=>{t.push({res:e,rej:r})})}_notify(t){const e=t?"res":"rej",r=this._promises||[];for(let i=0;i<r.length;i++)r[i][e]()}}class vd{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!Lt(t))return;const e=Object.keys(Qt.animation),r=this._properties;Object.getOwnPropertyNames(t).forEach(i=>{const n=t[i];if(!Lt(n))return;const s={};for(const o of e)s[o]=n[o];(_t(n.properties)&&n.properties||[i]).forEach(o=>{(o===i||!r.has(o))&&r.set(o,s)})})}_animateOptions(t,e){const r=e.options,i=r0(t,r);if(!i)return[];const n=this._createAnimations(i,r);return r.$shared&&e0(t.options.$animations,r).then(()=>{t.options=r},()=>{}),n}_createAnimations(t,e){const r=this._properties,i=[],n=t.$animations||(t.$animations={}),s=Object.keys(e),o=Date.now();let l;for(l=s.length-1;l>=0;--l){const d=s[l];if(d.charAt(0)==="$")continue;if(d==="options"){i.push(...this._animateOptions(t,e));continue}const h=e[d];let p=n[d];const m=r.get(d);if(p)if(m&&p.active()){p.update(m,h,o);continue}else p.cancel();if(!m||!m.duration){t[d]=h;continue}n[d]=p=new t0(m,t,d,h),i.push(p)}return i}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}const r=this._createAnimations(t,e);if(r.length)return Ze.add(this._chart,r),!0}}function e0(a,t){const e=[],r=Object.keys(t);for(let i=0;i<r.length;i++){const n=a[r[i]];n&&n.active()&&e.push(n.wait())}return Promise.all(e)}function r0(a,t){if(!t)return;let e=a.options;if(!e){a.options=t;return}return e.$shared&&(a.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function pl(a,t){const e=a&&a.options||{},r=e.reverse,i=e.min===void 0?t:0,n=e.max===void 0?t:0;return{start:r?n:i,end:r?i:n}}function a0(a,t,e){if(e===!1)return!1;const r=pl(a,e),i=pl(t,e);return{top:i.end,right:r.end,bottom:i.start,left:r.start}}function i0(a){let t,e,r,i;return Lt(a)?(t=a.top,e=a.right,r=a.bottom,i=a.left):t=e=r=i=a,{top:t,right:e,bottom:r,left:i,disabled:a===!1}}function xd(a,t){const e=[],r=a._getSortedDatasetMetas(t);let i,n;for(i=0,n=r.length;i<n;++i)e.push(r[i].index);return e}function fl(a,t,e,r={}){const i=a.keys,n=r.mode==="single";let s,o,l,d;if(t===null)return;let h=!1;for(s=0,o=i.length;s<o;++s){if(l=+i[s],l===e){if(h=!0,r.all)continue;break}d=a.values[l],Zt(d)&&(n||t===0||Ue(t)===Ue(d))&&(t+=d)}return!h&&!r.all?0:t}function n0(a,t){const{iScale:e,vScale:r}=t,i=e.axis==="x"?"x":"y",n=r.axis==="x"?"x":"y",s=Object.keys(a),o=new Array(s.length);let l,d,h;for(l=0,d=s.length;l<d;++l)h=s[l],o[l]={[i]:h,[n]:a[h]};return o}function ns(a,t){const e=a&&a.options.stacked;return e||e===void 0&&t.stack!==void 0}function s0(a,t,e){return`${a.id}.${t.id}.${e.stack||e.type}`}function o0(a){const{min:t,max:e,minDefined:r,maxDefined:i}=a.getUserBounds();return{min:r?t:Number.NEGATIVE_INFINITY,max:i?e:Number.POSITIVE_INFINITY}}function l0(a,t,e){const r=a[t]||(a[t]={});return r[e]||(r[e]={})}function gl(a,t,e,r){for(const i of t.getMatchingVisibleMetas(r).reverse()){const n=a[i.index];if(e&&n>0||!e&&n<0)return i.index}return null}function ml(a,t){const{chart:e,_cachedMeta:r}=a,i=e._stacks||(e._stacks={}),{iScale:n,vScale:s,index:o}=r,l=n.axis,d=s.axis,h=s0(n,s,r),p=t.length;let m;for(let v=0;v<p;++v){const g=t[v],{[l]:k,[d]:S}=g,D=g._stacks||(g._stacks={});m=D[d]=l0(i,h,k),m[o]=S,m._top=gl(m,s,!0,r.type),m._bottom=gl(m,s,!1,r.type);const M=m._visualValues||(m._visualValues={});M[o]=S}}function ss(a,t){const e=a.scales;return Object.keys(e).filter(r=>e[r].axis===t).shift()}function c0(a,t){return Ar(a,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function d0(a,t,e){return Ar(a,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function Aa(a,t){const e=a.controller.index,r=a.vScale&&a.vScale.axis;if(r){t=t||a._parsed;for(const i of t){const n=i._stacks;if(!n||n[r]===void 0||n[r][e]===void 0)return;delete n[r][e],n[r]._visualValues!==void 0&&n[r]._visualValues[e]!==void 0&&delete n[r]._visualValues[e]}}}const os=a=>a==="reset"||a==="none",bl=(a,t)=>t?a:Object.assign({},a),u0=(a,t,e)=>a&&!t.hidden&&t._stacked&&{keys:xd(e,!0),values:null};class sr{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=ns(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Aa(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,r=this.getDataset(),i=(p,m,v,g)=>p==="x"?m:p==="r"?g:v,n=e.xAxisID=St(r.xAxisID,ss(t,"x")),s=e.yAxisID=St(r.yAxisID,ss(t,"y")),o=e.rAxisID=St(r.rAxisID,ss(t,"r")),l=e.indexAxis,d=e.iAxisID=i(l,n,s,o),h=e.vAxisID=i(l,s,n,o);e.xScale=this.getScaleForId(n),e.yScale=this.getScaleForId(s),e.rScale=this.getScaleForId(o),e.iScale=this.getScaleForId(d),e.vScale=this.getScaleForId(h)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&$o(this._data,this),t._stacked&&Aa(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),r=this._data;if(Lt(e)){const i=this._cachedMeta;this._data=n0(e,i)}else if(r!==e){if(r){$o(r,this);const i=this._cachedMeta;Aa(i),i._parsed=[]}e&&Object.isExtensible(e)&&Kp(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,r=this.getDataset();let i=!1;this._dataCheck();const n=e._stacked;e._stacked=ns(e.vScale,e),e.stack!==r.stack&&(i=!0,Aa(e),e.stack=r.stack),this._resyncElements(t),(i||n!==e._stacked)&&(ml(this,e._parsed),e._stacked=ns(e.vScale,e))}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),r=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:r,_data:i}=this,{iScale:n,_stacked:s}=r,o=n.axis;let l=t===0&&e===i.length?!0:r._sorted,d=t>0&&r._parsed[t-1],h,p,m;if(this._parsing===!1)r._parsed=i,r._sorted=!0,m=i;else{_t(i[t])?m=this.parseArrayData(r,i,t,e):Lt(i[t])?m=this.parseObjectData(r,i,t,e):m=this.parsePrimitiveData(r,i,t,e);const v=()=>p[o]===null||d&&p[o]<d[o];for(h=0;h<e;++h)r._parsed[h+t]=p=m[h],l&&(v()&&(l=!1),d=p);r._sorted=l}s&&ml(this,m)}parsePrimitiveData(t,e,r,i){const{iScale:n,vScale:s}=t,o=n.axis,l=s.axis,d=n.getLabels(),h=n===s,p=new Array(i);let m,v,g;for(m=0,v=i;m<v;++m)g=m+r,p[m]={[o]:h||n.parse(d[g],g),[l]:s.parse(e[g],g)};return p}parseArrayData(t,e,r,i){const{xScale:n,yScale:s}=t,o=new Array(i);let l,d,h,p;for(l=0,d=i;l<d;++l)h=l+r,p=e[h],o[l]={x:n.parse(p[0],h),y:s.parse(p[1],h)};return o}parseObjectData(t,e,r,i){const{xScale:n,yScale:s}=t,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,d=new Array(i);let h,p,m,v;for(h=0,p=i;h<p;++h)m=h+r,v=e[m],d[h]={x:n.parse(Cr(v,o),m),y:s.parse(Cr(v,l),m)};return d}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,r){const i=this.chart,n=this._cachedMeta,s=e[t.axis],o={keys:xd(i,!0),values:e._stacks[t.axis]._visualValues};return fl(o,s,n.index,{mode:r})}updateRangeFromParsed(t,e,r,i){const n=r[e.axis];let s=n===null?NaN:n;const o=i&&r._stacks[e.axis];i&&o&&(i.values=o,s=fl(i,n,this._cachedMeta.index)),t.min=Math.min(t.min,s),t.max=Math.max(t.max,s)}getMinMax(t,e){const r=this._cachedMeta,i=r._parsed,n=r._sorted&&t===r.iScale,s=i.length,o=this._getOtherScale(t),l=u0(e,r,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:h,max:p}=o0(o);let m,v;function g(){v=i[m];const k=v[o.axis];return!Zt(v[t.axis])||h>k||p<k}for(m=0;m<s&&!(!g()&&(this.updateRangeFromParsed(d,t,v,l),n));++m);if(n){for(m=s-1;m>=0;--m)if(!g()){this.updateRangeFromParsed(d,t,v,l);break}}return d}getAllParsedValues(t){const e=this._cachedMeta._parsed,r=[];let i,n,s;for(i=0,n=e.length;i<n;++i)s=e[i][t.axis],Zt(s)&&r.push(s);return r}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,r=e.iScale,i=e.vScale,n=this.getParsed(t);return{label:r?""+r.getLabelForValue(n[r.axis]):"",value:i?""+i.getLabelForValue(n[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=i0(St(this.options.clip,a0(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,r=this._cachedMeta,i=r.data||[],n=e.chartArea,s=[],o=this._drawStart||0,l=this._drawCount||i.length-o,d=this.options.drawActiveElementsOnTop;let h;for(r.dataset&&r.dataset.draw(t,n,o,l),h=o;h<o+l;++h){const p=i[h];p.hidden||(p.active&&d?s.push(p):p.draw(t,n))}for(h=0;h<s.length;++h)s[h].draw(t,n)}getStyle(t,e){const r=e?"active":"default";return t===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(t||0,r)}getContext(t,e,r){const i=this.getDataset();let n;if(t>=0&&t<this._cachedMeta.data.length){const s=this._cachedMeta.data[t];n=s.$context||(s.$context=d0(this.getContext(),t,s)),n.parsed=this.getParsed(t),n.raw=i.data[t],n.index=n.dataIndex=t}else n=this.$context||(this.$context=c0(this.chart.getContext(),this.index)),n.dataset=i,n.index=n.datasetIndex=this.index;return n.active=!!e,n.mode=r,n}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",r){const i=e==="active",n=this._cachedDataOpts,s=t+"-"+e,o=n[s],l=this.enableOptionSharing&&Ga(r);if(o)return bl(o,l);const d=this.chart.config,h=d.datasetElementScopeKeys(this._type,t),p=i?[`${t}Hover`,"hover",t,""]:[t,""],m=d.getOptionScopes(this.getDataset(),h),v=Object.keys(Qt.elements[t]),g=()=>this.getContext(r,i,e),k=d.resolveNamedOptions(m,v,g,p);return k.$shared&&(k.$shared=l,n[s]=Object.freeze(bl(k,l))),k}_resolveAnimations(t,e,r){const i=this.chart,n=this._cachedDataOpts,s=`animation-${e}`,o=n[s];if(o)return o;let l;if(i.options.animation!==!1){const h=this.chart.config,p=h.datasetAnimationScopeKeys(this._type,e),m=h.getOptionScopes(this.getDataset(),p);l=h.createResolver(m,this.getContext(t,r,e))}const d=new vd(i,l&&l.animations);return l&&l._cacheable&&(n[s]=Object.freeze(d)),d}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||os(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const r=this.resolveDataElementOptions(t,e),i=this._sharedOptions,n=this.getSharedOptions(r),s=this.includeOptions(e,n)||n!==i;return this.updateSharedOptions(n,e,r),{sharedOptions:n,includeOptions:s}}updateElement(t,e,r,i){os(i)?Object.assign(t,r):this._resolveAnimations(e,i).update(t,r)}updateSharedOptions(t,e,r){t&&!os(e)&&this._resolveAnimations(void 0,e).update(t,r)}_setStyle(t,e,r,i){t.active=i;const n=this.getStyle(e,i);this._resolveAnimations(e,r,i).update(t,{options:!i&&this.getSharedOptions(n)||n})}removeHoverStyle(t,e,r){this._setStyle(t,r,"active",!1)}setHoverStyle(t,e,r){this._setStyle(t,r,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,r=this._cachedMeta.data;for(const[o,l,d]of this._syncList)this[o](l,d);this._syncList=[];const i=r.length,n=e.length,s=Math.min(n,i);s&&this.parse(0,s),n>i?this._insertElements(i,n-i,t):n<i&&this._removeElements(n,i-n)}_insertElements(t,e,r=!0){const i=this._cachedMeta,n=i.data,s=t+e;let o;const l=d=>{for(d.length+=e,o=d.length-1;o>=s;o--)d[o]=d[o-e]};for(l(n),o=t;o<s;++o)n[o]=new this.dataElementType;this._parsing&&l(i._parsed),this.parse(t,e),r&&this.updateElements(n,t,e,"reset")}updateElements(t,e,r,i){}_removeElements(t,e){const r=this._cachedMeta;if(this._parsing){const i=r._parsed.splice(t,e);r._stacked&&Aa(r,i)}r.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,r,i]=t;this[e](r,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const r=arguments.length-2;r&&this._sync(["_insertElements",t,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}function h0(a,t){if(!a._cache.$bar){const e=a.getMatchingVisibleMetas(t);let r=[];for(let i=0,n=e.length;i<n;i++)r=r.concat(e[i].controller.getAllParsedValues(a));a._cache.$bar=Zc(r.sort((i,n)=>i-n))}return a._cache.$bar}function p0(a){const t=a.iScale,e=h0(t,a.type);let r=t._length,i,n,s,o;const l=()=>{s===32767||s===-32768||(Ga(o)&&(r=Math.min(r,Math.abs(s-o)||r)),o=s)};for(i=0,n=e.length;i<n;++i)s=t.getPixelForValue(e[i]),l();for(o=void 0,i=0,n=t.ticks.length;i<n;++i)s=t.getPixelForTick(i),l();return r}function f0(a,t,e,r){const i=e.barThickness;let n,s;return Tt(i)?(n=t.min*e.categoryPercentage,s=e.barPercentage):(n=i*r,s=1),{chunk:n/r,ratio:s,start:t.pixels[a]-n/2}}function g0(a,t,e,r){const i=t.pixels,n=i[a];let s=a>0?i[a-1]:null,o=a<i.length-1?i[a+1]:null;const l=e.categoryPercentage;s===null&&(s=n-(o===null?t.end-t.start:o-n)),o===null&&(o=n+n-s);const d=n-(n-Math.min(s,o))/2*l;return{chunk:Math.abs(o-s)/2*l/r,ratio:e.barPercentage,start:d}}function m0(a,t,e,r){const i=e.parse(a[0],r),n=e.parse(a[1],r),s=Math.min(i,n),o=Math.max(i,n);let l=s,d=o;Math.abs(s)>Math.abs(o)&&(l=o,d=s),t[e.axis]=d,t._custom={barStart:l,barEnd:d,start:i,end:n,min:s,max:o}}function yd(a,t,e,r){return _t(a)?m0(a,t,e,r):t[e.axis]=e.parse(a,r),t}function vl(a,t,e,r){const i=a.iScale,n=a.vScale,s=i.getLabels(),o=i===n,l=[];let d,h,p,m;for(d=e,h=e+r;d<h;++d)m=t[d],p={},p[i.axis]=o||i.parse(s[d],d),l.push(yd(m,p,n,d));return l}function ls(a){return a&&a.barStart!==void 0&&a.barEnd!==void 0}function b0(a,t,e){return a!==0?Ue(a):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function v0(a){let t,e,r,i,n;return a.horizontal?(t=a.base>a.x,e="left",r="right"):(t=a.base<a.y,e="bottom",r="top"),t?(i="end",n="start"):(i="start",n="end"),{start:e,end:r,reverse:t,top:i,bottom:n}}function x0(a,t,e,r){let i=t.borderSkipped;const n={};if(!i){a.borderSkipped=n;return}if(i===!0){a.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:s,end:o,reverse:l,top:d,bottom:h}=v0(a);i==="middle"&&e&&(a.enableBorderRadius=!0,(e._top||0)===r?i=d:(e._bottom||0)===r?i=h:(n[xl(h,s,o,l)]=!0,i=d)),n[xl(i,s,o,l)]=!0,a.borderSkipped=n}function xl(a,t,e,r){return r?(a=y0(a,t,e),a=yl(a,e,t)):a=yl(a,t,e),a}function y0(a,t,e){return a===t?e:a===e?t:a}function yl(a,t,e){return a==="start"?t:a==="end"?e:a}function w0(a,{inflateAmount:t},e){a.inflateAmount=t==="auto"?e===1?.33:0:t}class k0 extends sr{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,r,i){return vl(t,e,r,i)}parseArrayData(t,e,r,i){return vl(t,e,r,i)}parseObjectData(t,e,r,i){const{iScale:n,vScale:s}=t,{xAxisKey:o="x",yAxisKey:l="y"}=this._parsing,d=n.axis==="x"?o:l,h=s.axis==="x"?o:l,p=[];let m,v,g,k;for(m=r,v=r+i;m<v;++m)k=e[m],g={},g[n.axis]=n.parse(Cr(k,d),m),p.push(yd(Cr(k,h),g,s,m));return p}updateRangeFromParsed(t,e,r,i){super.updateRangeFromParsed(t,e,r,i);const n=r._custom;n&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,n.min),t.max=Math.max(t.max,n.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:r,vScale:i}=e,n=this.getParsed(t),s=n._custom,o=ls(s)?"["+s.start+", "+s.end+"]":""+i.getLabelForValue(n[i.axis]);return{label:""+r.getLabelForValue(n[r.axis]),value:o}}initialize(){this.enableOptionSharing=!0,super.initialize();const t=this._cachedMeta;t.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,r,i){const n=i==="reset",{index:s,_cachedMeta:{vScale:o}}=this,l=o.getBasePixel(),d=o.isHorizontal(),h=this._getRuler(),{sharedOptions:p,includeOptions:m}=this._getSharedOptions(e,i);for(let v=e;v<e+r;v++){const g=this.getParsed(v),k=n||Tt(g[o.axis])?{base:l,head:l}:this._calculateBarValuePixels(v),S=this._calculateBarIndexPixels(v,h),D=(g._stacks||{})[o.axis],M={horizontal:d,base:k.base,enableBorderRadius:!D||ls(g._custom)||s===D._top||s===D._bottom,x:d?k.head:S.center,y:d?S.center:k.head,height:d?S.size:Math.abs(k.size),width:d?Math.abs(k.size):S.size};m&&(M.options=p||this.resolveDataElementOptions(v,t[v].active?"active":i));const I=M.options||t[v].options;x0(M,I,D,s),w0(M,I,h.ratio),this.updateElement(t[v],v,M,i)}}_getStacks(t,e){const{iScale:r}=this._cachedMeta,i=r.getMatchingVisibleMetas(this._type).filter(h=>h.controller.options.grouped),n=r.options.stacked,s=[],o=this._cachedMeta.controller.getParsed(e),l=o&&o[r.axis],d=h=>{const p=h._parsed.find(v=>v[r.axis]===l),m=p&&p[h.vScale.axis];if(Tt(m)||isNaN(m))return!0};for(const h of i)if(!(e!==void 0&&d(h))&&((n===!1||s.indexOf(h.stack)===-1||n===void 0&&h.stack===void 0)&&s.push(h.stack),h.index===t))break;return s.length||s.push(void 0),s}_getStackCount(t){return this._getStacks(void 0,t).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const t=this.chart.scales,e=this.chart.options.indexAxis;return Object.keys(t).filter(r=>t[r].axis===e).shift()}_getAxis(){const t={},e=this.getFirstScaleIdForIndexAxis();for(const r of this.chart.data.datasets)t[St(this.chart.options.indexAxis==="x"?r.xAxisID:r.yAxisID,e)]=!0;return Object.keys(t)}_getStackIndex(t,e,r){const i=this._getStacks(t,r),n=e!==void 0?i.indexOf(e):-1;return n===-1?i.length-1:n}_getRuler(){const t=this.options,e=this._cachedMeta,r=e.iScale,i=[];let n,s;for(n=0,s=e.data.length;n<s;++n)i.push(r.getPixelForValue(this.getParsed(n)[r.axis],n));const o=t.barThickness;return{min:o||p0(e),pixels:i,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:t.grouped,ratio:o?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:r,index:i},options:{base:n,minBarLength:s}}=this,o=n||0,l=this.getParsed(t),d=l._custom,h=ls(d);let p=l[e.axis],m=0,v=r?this.applyStack(e,l,r):p,g,k;v!==p&&(m=v-p,v=p),h&&(p=d.barStart,v=d.barEnd-d.barStart,p!==0&&Ue(p)!==Ue(d.barEnd)&&(m=0),m+=p);const S=!Tt(n)&&!h?n:m;let D=e.getPixelForValue(S);if(this.chart.getDataVisibility(t)?g=e.getPixelForValue(m+v):g=D,k=g-D,Math.abs(k)<s){k=b0(k,e,o)*s,p===o&&(D-=k/2);const M=e.getPixelForDecimal(0),I=e.getPixelForDecimal(1),W=Math.min(M,I),H=Math.max(M,I);D=Math.max(Math.min(D,H),W),g=D+k,r&&!h&&(l._stacks[e.axis]._visualValues[i]=e.getValueForPixel(g)-e.getValueForPixel(D))}if(D===e.getPixelForValue(o)){const M=Ue(k)*e.getLineWidthForValue(o)/2;D+=M,k-=M}return{size:k,base:D,head:g,center:g+k/2}}_calculateBarIndexPixels(t,e){const r=e.scale,i=this.options,n=i.skipNull,s=St(i.maxBarThickness,1/0);let o,l;const d=this._getAxisCount();if(e.grouped){const h=n?this._getStackCount(t):e.stackCount,p=i.barThickness==="flex"?g0(t,e,i,h*d):f0(t,e,i,h*d),m=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,v=this._getAxis().indexOf(St(m,this.getFirstScaleIdForIndexAxis())),g=this._getStackIndex(this.index,this._cachedMeta.stack,n?t:void 0)+v;o=p.start+p.chunk*g+p.chunk/2,l=Math.min(s,p.chunk*p.ratio)}else o=r.getPixelForValue(this.getParsed(t)[r.axis],t),l=Math.min(s,e.min*e.ratio);return{base:o-l/2,head:o+l/2,center:o,size:l}}draw(){const t=this._cachedMeta,e=t.vScale,r=t.data,i=r.length;let n=0;for(;n<i;++n)this.getParsed(n)[e.axis]!==null&&!r[n].hidden&&r[n].draw(this._ctx)}}class C0 extends sr{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,r,i){const n=super.parsePrimitiveData(t,e,r,i);for(let s=0;s<n.length;s++)n[s]._custom=this.resolveDataElementOptions(s+r).radius;return n}parseArrayData(t,e,r,i){const n=super.parseArrayData(t,e,r,i);for(let s=0;s<n.length;s++){const o=e[r+s];n[s]._custom=St(o[2],this.resolveDataElementOptions(s+r).radius)}return n}parseObjectData(t,e,r,i){const n=super.parseObjectData(t,e,r,i);for(let s=0;s<n.length;s++){const o=e[r+s];n[s]._custom=St(o&&o.r&&+o.r,this.resolveDataElementOptions(s+r).radius)}return n}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let r=t.length-1;r>=0;--r)e=Math.max(e,t[r].size(this.resolveDataElementOptions(r))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:n}=e,s=this.getParsed(t),o=i.getLabelForValue(s.x),l=n.getLabelForValue(s.y),d=s._custom;return{label:r[t]||"",value:"("+o+", "+l+(d?", "+d:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,r,i){const n=i==="reset",{iScale:s,vScale:o}=this._cachedMeta,{sharedOptions:l,includeOptions:d}=this._getSharedOptions(e,i),h=s.axis,p=o.axis;for(let m=e;m<e+r;m++){const v=t[m],g=!n&&this.getParsed(m),k={},S=k[h]=n?s.getPixelForDecimal(.5):s.getPixelForValue(g[h]),D=k[p]=n?o.getBasePixel():o.getPixelForValue(g[p]);k.skip=isNaN(S)||isNaN(D),d&&(k.options=l||this.resolveDataElementOptions(m,v.active?"active":i),n&&(k.options.radius=0)),this.updateElement(v,m,k,i)}}resolveDataElementOptions(t,e){const r=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const n=i.radius;return e!=="active"&&(i.radius=0),i.radius+=St(r&&r._custom,n),i}}function S0(a,t,e){let r=1,i=1,n=0,s=0;if(t<Xt){const o=a,l=o+t,d=Math.cos(o),h=Math.sin(o),p=Math.cos(l),m=Math.sin(l),v=(I,W,H)=>Xa(I,o,l,!0)?1:Math.max(W,W*e,H,H*e),g=(I,W,H)=>Xa(I,o,l,!0)?-1:Math.min(W,W*e,H,H*e),k=v(0,d,p),S=v(re,h,m),D=g(Ft,d,p),M=g(Ft+re,h,m);r=(k-D)/2,i=(S-M)/2,n=-(k+D)/2,s=-(S+M)/2}return{ratioX:r,ratioY:i,offsetX:n,offsetY:s}}class fa extends sr{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>t!=="spacing",_indexable:t=>t!=="spacing"&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data,{labels:{pointStyle:r,textAlign:i,color:n,useBorderRadius:s,borderRadius:o}}=t.legend.options;return e.labels.length&&e.datasets.length?e.labels.map((l,d)=>{const p=t.getDatasetMeta(0).controller.getStyle(d);return{text:l,fillStyle:p.backgroundColor,fontColor:n,hidden:!t.getDataVisibility(d),lineDash:p.borderDash,lineDashOffset:p.borderDashOffset,lineJoin:p.borderJoinStyle,lineWidth:p.borderWidth,strokeStyle:p.borderColor,textAlign:i,pointStyle:r,borderRadius:s&&(o||p.borderRadius),index:d}}):[]}},onClick(t,e,r){r.chart.toggleDataVisibility(e.index),r.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const r=this.getDataset().data,i=this._cachedMeta;if(this._parsing===!1)i._parsed=r;else{let n=l=>+r[l];if(Lt(r[t])){const{key:l="value"}=this._parsing;n=d=>+Cr(r[d],l)}let s,o;for(s=t,o=t+e;s<o;++s)i._parsed[s]=n(s)}}_getRotation(){return Fe(this.options.rotation-90)}_getCircumference(){return Fe(this.options.circumference)}_getRotationExtents(){let t=Xt,e=-Xt;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){const i=this.chart.getDatasetMeta(r).controller,n=i._getRotation(),s=i._getCircumference();t=Math.min(t,n),e=Math.max(e,n+s)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:r}=e,i=this._cachedMeta,n=i.data,s=this.getMaxBorderWidth()+this.getMaxOffset(n)+this.options.spacing,o=Math.max((Math.min(r.width,r.height)-s)/2,0),l=Math.min(Lp(this.options.cutout,o),1),d=this._getRingWeight(this.index),{circumference:h,rotation:p}=this._getRotationExtents(),{ratioX:m,ratioY:v,offsetX:g,offsetY:k}=S0(p,h,l),S=(r.width-s)/m,D=(r.height-s)/v,M=Math.max(Math.min(S,D)/2,0),I=Xc(this.options.radius,M),W=Math.max(I*l,0),H=(I-W)/this._getVisibleDatasetWeightTotal();this.offsetX=g*I,this.offsetY=k*I,i.total=this.calculateTotal(),this.outerRadius=I-H*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-H*d,0),this.updateElements(n,0,n.length,t)}_circumference(t,e){const r=this.options,i=this._cachedMeta,n=this._getCircumference();return e&&r.animation.animateRotate||!this.chart.getDataVisibility(t)||i._parsed[t]===null||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*n/Xt)}updateElements(t,e,r,i){const n=i==="reset",s=this.chart,o=s.chartArea,d=s.options.animation,h=(o.left+o.right)/2,p=(o.top+o.bottom)/2,m=n&&d.animateScale,v=m?0:this.innerRadius,g=m?0:this.outerRadius,{sharedOptions:k,includeOptions:S}=this._getSharedOptions(e,i);let D=this._getRotation(),M;for(M=0;M<e;++M)D+=this._circumference(M,n);for(M=e;M<e+r;++M){const I=this._circumference(M,n),W=t[M],H={x:h+this.offsetX,y:p+this.offsetY,startAngle:D,endAngle:D+I,circumference:I,outerRadius:g,innerRadius:v};S&&(H.options=k||this.resolveDataElementOptions(M,W.active?"active":i)),D+=I,this.updateElement(W,M,H,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let r=0,i;for(i=0;i<e.length;i++){const n=t._parsed[i];n!==null&&!isNaN(n)&&this.chart.getDataVisibility(i)&&!e[i].hidden&&(r+=Math.abs(n))}return r}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?Xt*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,r=this.chart,i=r.data.labels||[],n=Ja(e._parsed[t],r.options.locale);return{label:i[t]||"",value:n}}getMaxBorderWidth(t){let e=0;const r=this.chart;let i,n,s,o,l;if(!t){for(i=0,n=r.data.datasets.length;i<n;++i)if(r.isDatasetVisible(i)){s=r.getDatasetMeta(i),t=s.data,o=s.controller;break}}if(!t)return 0;for(i=0,n=t.length;i<n;++i)l=o.resolveDataElementOptions(i),l.borderAlign!=="inner"&&(e=Math.max(e,l.borderWidth||0,l.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let r=0,i=t.length;r<i;++r){const n=this.resolveDataElementOptions(r);e=Math.max(e,n.offset||0,n.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let r=0;r<t;++r)this.chart.isDatasetVisible(r)&&(e+=this._getRingWeight(r));return e}_getRingWeight(t){return Math.max(St(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class A0 extends sr{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:r,data:i=[],_dataset:n}=e,s=this.chart._animationsDisabled;let{start:o,count:l}=ed(e,i,s);this._drawStart=o,this._drawCount=l,rd(e)&&(o=0,l=i.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!n._decimated,r.points=i;const d=this.resolveDatasetElementOptions(t);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(r,void 0,{animated:!s,options:d},t),this.updateElements(i,o,l,t)}updateElements(t,e,r,i){const n=i==="reset",{iScale:s,vScale:o,_stacked:l,_dataset:d}=this._cachedMeta,{sharedOptions:h,includeOptions:p}=this._getSharedOptions(e,i),m=s.axis,v=o.axis,{spanGaps:g,segment:k}=this.options,S=ua(g)?g:Number.POSITIVE_INFINITY,D=this.chart._animationsDisabled||n||i==="none",M=e+r,I=t.length;let W=e>0&&this.getParsed(e-1);for(let H=0;H<I;++H){const X=t[H],q=D?X:{};if(H<e||H>=M){q.skip=!0;continue}const w=this.getParsed(H),C=Tt(w[v]),L=q[m]=s.getPixelForValue(w[m],H),Y=q[v]=n||C?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,w,l):w[v],H);q.skip=isNaN(L)||isNaN(Y)||C,q.stop=H>0&&Math.abs(w[m]-W[m])>S,k&&(q.parsed=w,q.raw=d.data[H]),p&&(q.options=h||this.resolveDataElementOptions(H,X.active?"active":i)),D||this.updateElement(X,H,q,i),W=w}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,r=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return r;const n=i[0].size(this.resolveDataElementOptions(0)),s=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(r,n,s)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}}class wd extends sr{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:r,color:i}}=t.legend.options;return e.labels.map((n,s)=>{const l=t.getDatasetMeta(0).controller.getStyle(s);return{text:n,fillStyle:l.backgroundColor,strokeStyle:l.borderColor,fontColor:i,lineWidth:l.borderWidth,pointStyle:r,hidden:!t.getDataVisibility(s),index:s}})}return[]}},onClick(t,e,r){r.chart.toggleDataVisibility(e.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,r=this.chart,i=r.data.labels||[],n=Ja(e._parsed[t].r,r.options.locale);return{label:i[t]||"",value:n}}parseObjectData(t,e,r,i){return dd.bind(this)(t,e,r,i)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach((r,i)=>{const n=this.getParsed(i).r;!isNaN(n)&&this.chart.getDataVisibility(i)&&(n<e.min&&(e.min=n),n>e.max&&(e.max=n))}),e}_updateRadius(){const t=this.chart,e=t.chartArea,r=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),n=Math.max(i/2,0),s=Math.max(r.cutoutPercentage?n/100*r.cutoutPercentage:1,0),o=(n-s)/t.getVisibleDatasetCount();this.outerRadius=n-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,e,r,i){const n=i==="reset",s=this.chart,l=s.options.animation,d=this._cachedMeta.rScale,h=d.xCenter,p=d.yCenter,m=d.getIndexAngle(0)-.5*Ft;let v=m,g;const k=360/this.countVisibleElements();for(g=0;g<e;++g)v+=this._computeAngle(g,i,k);for(g=e;g<e+r;g++){const S=t[g];let D=v,M=v+this._computeAngle(g,i,k),I=s.getDataVisibility(g)?d.getDistanceFromCenterForValue(this.getParsed(g).r):0;v=M,n&&(l.animateScale&&(I=0),l.animateRotate&&(D=M=m));const W={x:h,y:p,innerRadius:0,outerRadius:I,startAngle:D,endAngle:M,options:this.resolveDataElementOptions(g,S.active?"active":i)};this.updateElement(S,g,W,i)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach((r,i)=>{!isNaN(this.getParsed(i).r)&&this.chart.getDataVisibility(i)&&e++}),e}_computeAngle(t,e,r){return this.chart.getDataVisibility(t)?Fe(this.resolveDataElementOptions(t,e).angle||r):0}}class M0 extends fa{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}class D0 extends sr{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const e=this._cachedMeta.vScale,r=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(r[e.axis])}}parseObjectData(t,e,r,i){return dd.bind(this)(t,e,r,i)}update(t){const e=this._cachedMeta,r=e.dataset,i=e.data||[],n=e.iScale.getLabels();if(r.points=i,t!=="resize"){const s=this.resolveDatasetElementOptions(t);this.options.showLine||(s.borderWidth=0);const o={_loop:!0,_fullLoop:n.length===i.length,options:s};this.updateElement(r,void 0,o,t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,r,i){const n=this._cachedMeta.rScale,s=i==="reset";for(let o=e;o<e+r;o++){const l=t[o],d=this.resolveDataElementOptions(o,l.active?"active":i),h=n.getPointPositionForValue(o,this.getParsed(o).r),p=s?n.xCenter:h.x,m=s?n.yCenter:h.y,v={x:p,y:m,angle:h.angle,skip:isNaN(p)||isNaN(m),options:d};this.updateElement(l,o,v,i)}}}class E0 extends sr{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const e=this._cachedMeta,r=this.chart.data.labels||[],{xScale:i,yScale:n}=e,s=this.getParsed(t),o=i.getLabelForValue(s.x),l=n.getLabelForValue(s.y);return{label:r[t]||"",value:"("+o+", "+l+")"}}update(t){const e=this._cachedMeta,{data:r=[]}=e,i=this.chart._animationsDisabled;let{start:n,count:s}=ed(e,r,i);if(this._drawStart=n,this._drawCount=s,rd(e)&&(n=0,s=r.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:o,_dataset:l}=e;o._chart=this.chart,o._datasetIndex=this.index,o._decimated=!!l._decimated,o.points=r;const d=this.resolveDatasetElementOptions(t);d.segment=this.options.segment,this.updateElement(o,void 0,{animated:!i,options:d},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(r,n,s,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,r,i){const n=i==="reset",{iScale:s,vScale:o,_stacked:l,_dataset:d}=this._cachedMeta,h=this.resolveDataElementOptions(e,i),p=this.getSharedOptions(h),m=this.includeOptions(i,p),v=s.axis,g=o.axis,{spanGaps:k,segment:S}=this.options,D=ua(k)?k:Number.POSITIVE_INFINITY,M=this.chart._animationsDisabled||n||i==="none";let I=e>0&&this.getParsed(e-1);for(let W=e;W<e+r;++W){const H=t[W],X=this.getParsed(W),q=M?H:{},w=Tt(X[g]),C=q[v]=s.getPixelForValue(X[v],W),L=q[g]=n||w?o.getBasePixel():o.getPixelForValue(l?this.applyStack(o,X,l):X[g],W);q.skip=isNaN(C)||isNaN(L)||w,q.stop=W>0&&Math.abs(X[v]-I[v])>D,S&&(q.parsed=X,q.raw=d.data[W]),m&&(q.options=p||this.resolveDataElementOptions(W,H.active?"active":i)),M||this.updateElement(H,W,q,i),I=X}this.updateSharedOptions(p,i,h)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let o=0;for(let l=e.length-1;l>=0;--l)o=Math.max(o,e[l].size(this.resolveDataElementOptions(l))/2);return o>0&&o}const r=t.dataset,i=r.options&&r.options.borderWidth||0;if(!e.length)return i;const n=e[0].size(this.resolveDataElementOptions(0)),s=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(i,n,s)/2}}var P0=Object.freeze({__proto__:null,BarController:k0,BubbleController:C0,DoughnutController:fa,LineController:A0,PieController:M0,PolarAreaController:wd,RadarController:D0,ScatterController:E0});function Br(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class $s{static override(t){Object.assign($s.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return Br()}parse(){return Br()}format(){return Br()}add(){return Br()}diff(){return Br()}startOf(){return Br()}endOf(){return Br()}}var R0={_date:$s};function z0(a,t,e,r){const{controller:i,data:n,_sorted:s}=a,o=i._cachedMeta.iScale,l=a.dataset&&a.dataset.options?a.dataset.options.spanGaps:null;if(o&&t===o.axis&&t!=="r"&&s&&n.length){const d=o._reversePixels?Gp:rr;if(r){if(i._sharedOptions){const h=n[0],p=typeof h.getRange=="function"&&h.getRange(t);if(p){const m=d(n,t,e-p),v=d(n,t,e+p);return{lo:m.lo,hi:v.hi}}}}else{const h=d(n,t,e);if(l){const{vScale:p}=i._cachedMeta,{_parsed:m}=a,v=m.slice(0,h.lo+1).reverse().findIndex(k=>!Tt(k[p.axis]));h.lo-=Math.max(0,v);const g=m.slice(h.hi).findIndex(k=>!Tt(k[p.axis]));h.hi+=Math.max(0,g)}return h}}return{lo:0,hi:n.length-1}}function bn(a,t,e,r,i){const n=a.getSortedVisibleDatasetMetas(),s=e[t];for(let o=0,l=n.length;o<l;++o){const{index:d,data:h}=n[o],{lo:p,hi:m}=z0(n[o],t,s,i);for(let v=p;v<=m;++v){const g=h[v];g.skip||r(g,d,v)}}}function T0(a){const t=a.indexOf("x")!==-1,e=a.indexOf("y")!==-1;return function(r,i){const n=t?Math.abs(r.x-i.x):0,s=e?Math.abs(r.y-i.y):0;return Math.sqrt(Math.pow(n,2)+Math.pow(s,2))}}function cs(a,t,e,r,i){const n=[];return!i&&!a.isPointInArea(t)||bn(a,e,t,function(o,l,d){!i&&!ar(o,a.chartArea,0)||o.inRange(t.x,t.y,r)&&n.push({element:o,datasetIndex:l,index:d})},!0),n}function L0(a,t,e,r){let i=[];function n(s,o,l){const{startAngle:d,endAngle:h}=s.getProps(["startAngle","endAngle"],r),{angle:p}=Qc(s,{x:t.x,y:t.y});Xa(p,d,h)&&i.push({element:s,datasetIndex:o,index:l})}return bn(a,e,t,n),i}function O0(a,t,e,r,i,n){let s=[];const o=T0(e);let l=Number.POSITIVE_INFINITY;function d(h,p,m){const v=h.inRange(t.x,t.y,i);if(r&&!v)return;const g=h.getCenterPoint(i);if(!(!!n||a.isPointInArea(g))&&!v)return;const S=o(t,g);S<l?(s=[{element:h,datasetIndex:p,index:m}],l=S):S===l&&s.push({element:h,datasetIndex:p,index:m})}return bn(a,e,t,d),s}function ds(a,t,e,r,i,n){return!n&&!a.isPointInArea(t)?[]:e==="r"&&!r?L0(a,t,e,i):O0(a,t,e,r,i,n)}function wl(a,t,e,r,i){const n=[],s=e==="x"?"inXRange":"inYRange";let o=!1;return bn(a,e,t,(l,d,h)=>{l[s]&&l[s](t[e],i)&&(n.push({element:l,datasetIndex:d,index:h}),o=o||l.inRange(t.x,t.y,i))}),r&&!o?[]:n}var B0={modes:{index(a,t,e,r){const i=Fr(t,a),n=e.axis||"x",s=e.includeInvisible||!1,o=e.intersect?cs(a,i,n,r,s):ds(a,i,n,!1,r,s),l=[];return o.length?(a.getSortedVisibleDatasetMetas().forEach(d=>{const h=o[0].index,p=d.data[h];p&&!p.skip&&l.push({element:p,datasetIndex:d.index,index:h})}),l):[]},dataset(a,t,e,r){const i=Fr(t,a),n=e.axis||"xy",s=e.includeInvisible||!1;let o=e.intersect?cs(a,i,n,r,s):ds(a,i,n,!1,r,s);if(o.length>0){const l=o[0].datasetIndex,d=a.getDatasetMeta(l).data;o=[];for(let h=0;h<d.length;++h)o.push({element:d[h],datasetIndex:l,index:h})}return o},point(a,t,e,r){const i=Fr(t,a),n=e.axis||"xy",s=e.includeInvisible||!1;return cs(a,i,n,r,s)},nearest(a,t,e,r){const i=Fr(t,a),n=e.axis||"xy",s=e.includeInvisible||!1;return ds(a,i,n,e.intersect,r,s)},x(a,t,e,r){const i=Fr(t,a);return wl(a,i,"x",e.intersect,r)},y(a,t,e,r){const i=Fr(t,a);return wl(a,i,"y",e.intersect,r)}}};const kd=["left","top","right","bottom"];function Ma(a,t){return a.filter(e=>e.pos===t)}function kl(a,t){return a.filter(e=>kd.indexOf(e.pos)===-1&&e.box.axis===t)}function Da(a,t){return a.sort((e,r)=>{const i=t?r:e,n=t?e:r;return i.weight===n.weight?i.index-n.index:i.weight-n.weight})}function I0(a){const t=[];let e,r,i,n,s,o;for(e=0,r=(a||[]).length;e<r;++e)i=a[e],{position:n,options:{stack:s,stackWeight:o=1}}=i,t.push({index:e,box:i,pos:n,horizontal:i.isHorizontal(),weight:i.weight,stack:s&&n+s,stackWeight:o});return t}function F0(a){const t={};for(const e of a){const{stack:r,pos:i,stackWeight:n}=e;if(!r||!kd.includes(i))continue;const s=t[r]||(t[r]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=n}return t}function V0(a,t){const e=F0(a),{vBoxMaxWidth:r,hBoxMaxHeight:i}=t;let n,s,o;for(n=0,s=a.length;n<s;++n){o=a[n];const{fullSize:l}=o.box,d=e[o.stack],h=d&&o.stackWeight/d.weight;o.horizontal?(o.width=h?h*r:l&&t.availableWidth,o.height=i):(o.width=r,o.height=h?h*i:l&&t.availableHeight)}return e}function j0(a){const t=I0(a),e=Da(t.filter(d=>d.box.fullSize),!0),r=Da(Ma(t,"left"),!0),i=Da(Ma(t,"right")),n=Da(Ma(t,"top"),!0),s=Da(Ma(t,"bottom")),o=kl(t,"x"),l=kl(t,"y");return{fullSize:e,leftAndTop:r.concat(n),rightAndBottom:i.concat(l).concat(s).concat(o),chartArea:Ma(t,"chartArea"),vertical:r.concat(i).concat(l),horizontal:n.concat(s).concat(o)}}function Cl(a,t,e,r){return Math.max(a[e],t[e])+Math.max(a[r],t[r])}function Cd(a,t){a.top=Math.max(a.top,t.top),a.left=Math.max(a.left,t.left),a.bottom=Math.max(a.bottom,t.bottom),a.right=Math.max(a.right,t.right)}function H0(a,t,e,r){const{pos:i,box:n}=e,s=a.maxPadding;if(!Lt(i)){e.size&&(a[i]-=e.size);const p=r[e.stack]||{size:0,count:1};p.size=Math.max(p.size,e.horizontal?n.height:n.width),e.size=p.size/p.count,a[i]+=e.size}n.getPadding&&Cd(s,n.getPadding());const o=Math.max(0,t.outerWidth-Cl(s,a,"left","right")),l=Math.max(0,t.outerHeight-Cl(s,a,"top","bottom")),d=o!==a.w,h=l!==a.h;return a.w=o,a.h=l,e.horizontal?{same:d,other:h}:{same:h,other:d}}function N0(a){const t=a.maxPadding;function e(r){const i=Math.max(t[r]-a[r],0);return a[r]+=i,i}a.y+=e("top"),a.x+=e("left"),e("right"),e("bottom")}function q0(a,t){const e=t.maxPadding;function r(i){const n={left:0,top:0,right:0,bottom:0};return i.forEach(s=>{n[s]=Math.max(t[s],e[s])}),n}return r(a?["left","right"]:["top","bottom"])}function Oa(a,t,e,r){const i=[];let n,s,o,l,d,h;for(n=0,s=a.length,d=0;n<s;++n){o=a[n],l=o.box,l.update(o.width||t.w,o.height||t.h,q0(o.horizontal,t));const{same:p,other:m}=H0(t,e,o,r);d|=p&&i.length,h=h||m,l.fullSize||i.push(o)}return d&&Oa(i,t,e,r)||h}function Ri(a,t,e,r,i){a.top=e,a.left=t,a.right=t+r,a.bottom=e+i,a.width=r,a.height=i}function Sl(a,t,e,r){const i=e.padding;let{x:n,y:s}=t;for(const o of a){const l=o.box,d=r[o.stack]||{placed:0,weight:1},h=o.stackWeight/d.weight||1;if(o.horizontal){const p=t.w*h,m=d.size||l.height;Ga(d.start)&&(s=d.start),l.fullSize?Ri(l,i.left,s,e.outerWidth-i.right-i.left,m):Ri(l,t.left+d.placed,s,p,m),d.start=s,d.placed+=p,s=l.bottom}else{const p=t.h*h,m=d.size||l.width;Ga(d.start)&&(n=d.start),l.fullSize?Ri(l,n,i.top,m,e.outerHeight-i.bottom-i.top):Ri(l,n,t.top+d.placed,m,p),d.start=n,d.placed+=p,n=l.right}}t.x=n,t.y=s}var xe={addBox(a,t){a.boxes||(a.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},a.boxes.push(t)},removeBox(a,t){const e=a.boxes?a.boxes.indexOf(t):-1;e!==-1&&a.boxes.splice(e,1)},configure(a,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(a,t,e,r){if(!a)return;const i=ye(a.options.layout.padding),n=Math.max(t-i.width,0),s=Math.max(e-i.height,0),o=j0(a.boxes),l=o.vertical,d=o.horizontal;jt(a.boxes,k=>{typeof k.beforeLayout=="function"&&k.beforeLayout()});const h=l.reduce((k,S)=>S.box.options&&S.box.options.display===!1?k:k+1,0)||1,p=Object.freeze({outerWidth:t,outerHeight:e,padding:i,availableWidth:n,availableHeight:s,vBoxMaxWidth:n/2/h,hBoxMaxHeight:s/2}),m=Object.assign({},i);Cd(m,ye(r));const v=Object.assign({maxPadding:m,w:n,h:s,x:i.left,y:i.top},i),g=V0(l.concat(d),p);Oa(o.fullSize,v,p,g),Oa(l,v,p,g),Oa(d,v,p,g)&&Oa(l,v,p,g),N0(v),Sl(o.leftAndTop,v,p,g),v.x+=v.w,v.y+=v.h,Sl(o.rightAndBottom,v,p,g),a.chartArea={left:v.left,top:v.top,right:v.left+v.w,bottom:v.top+v.h,height:v.h,width:v.w},jt(o.chartArea,k=>{const S=k.box;Object.assign(S,a.chartArea),S.update(v.w,v.h,{left:0,top:0,right:0,bottom:0})})}};class Sd{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,r){}removeEventListener(t,e,r){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,r,i){return e=Math.max(0,e||t.width),r=r||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):r)}}isAttached(t){return!0}updateConfig(t){}}class W0 extends Sd{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const Gi="$chartjs",Y0={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Al=a=>a===null||a==="";function U0(a,t){const e=a.style,r=a.getAttribute("height"),i=a.getAttribute("width");if(a[Gi]={initial:{height:r,width:i,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",Al(i)){const n=ll(a,"width");n!==void 0&&(a.width=n)}if(Al(r))if(a.style.height==="")a.height=a.width/(t||2);else{const n=ll(a,"height");n!==void 0&&(a.height=n)}return a}const Ad=Hf?{passive:!0}:!1;function G0(a,t,e){a&&a.addEventListener(t,e,Ad)}function X0(a,t,e){a&&a.canvas&&a.canvas.removeEventListener(t,e,Ad)}function K0(a,t){const e=Y0[a.type]||a.type,{x:r,y:i}=Fr(a,t);return{type:e,chart:t,native:a,x:r!==void 0?r:null,y:i!==void 0?i:null}}function nn(a,t){for(const e of a)if(e===t||e.contains(t))return!0}function _0(a,t,e){const r=a.canvas,i=new MutationObserver(n=>{let s=!1;for(const o of n)s=s||nn(o.addedNodes,r),s=s&&!nn(o.removedNodes,r);s&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}function Q0(a,t,e){const r=a.canvas,i=new MutationObserver(n=>{let s=!1;for(const o of n)s=s||nn(o.removedNodes,r),s=s&&!nn(o.addedNodes,r);s&&e()});return i.observe(document,{childList:!0,subtree:!0}),i}const Ka=new Map;let Ml=0;function Md(){const a=window.devicePixelRatio;a!==Ml&&(Ml=a,Ka.forEach((t,e)=>{e.currentDevicePixelRatio!==a&&t()}))}function J0(a,t){Ka.size||window.addEventListener("resize",Md),Ka.set(a,t)}function Z0(a){Ka.delete(a),Ka.size||window.removeEventListener("resize",Md)}function $0(a,t,e){const r=a.canvas,i=r&&Zs(r);if(!i)return;const n=td((o,l)=>{const d=i.clientWidth;e(o,l),d<i.clientWidth&&e()},window),s=new ResizeObserver(o=>{const l=o[0],d=l.contentRect.width,h=l.contentRect.height;d===0&&h===0||n(d,h)});return s.observe(i),J0(a,n),s}function us(a,t,e){e&&e.disconnect(),t==="resize"&&Z0(a)}function tg(a,t,e){const r=a.canvas,i=td(n=>{a.ctx!==null&&e(K0(n,a))},a);return G0(r,t,i),i}class eg extends Sd{acquireContext(t,e){const r=t&&t.getContext&&t.getContext("2d");return r&&r.canvas===t?(U0(t,e),r):null}releaseContext(t){const e=t.canvas;if(!e[Gi])return!1;const r=e[Gi].initial;["height","width"].forEach(n=>{const s=r[n];Tt(s)?e.removeAttribute(n):e.setAttribute(n,s)});const i=r.style||{};return Object.keys(i).forEach(n=>{e.style[n]=i[n]}),e.width=e.width,delete e[Gi],!0}addEventListener(t,e,r){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),s={attach:_0,detach:Q0,resize:$0}[e]||tg;i[e]=s(t,e,r)}removeEventListener(t,e){const r=t.$proxies||(t.$proxies={}),i=r[e];if(!i)return;({attach:us,detach:us,resize:us}[e]||X0)(t,e,i),r[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,r,i){return jf(t,e,r,i)}isAttached(t){const e=t&&Zs(t);return!!(e&&e.isConnected)}}function rg(a){return!Js()||typeof OffscreenCanvas<"u"&&a instanceof OffscreenCanvas?W0:eg}class Ge{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:r}=this.getProps(["x","y"],t);return{x:e,y:r}}hasValue(){return ua(this.x)&&ua(this.y)}getProps(t,e){const r=this.$animations;if(!e||!r)return this;const i={};return t.forEach(n=>{i[n]=r[n]&&r[n].active()?r[n]._to:this[n]}),i}}function ag(a,t){const e=a.options.ticks,r=ig(a),i=Math.min(e.maxTicksLimit||r,r),n=e.major.enabled?sg(t):[],s=n.length,o=n[0],l=n[s-1],d=[];if(s>i)return og(t,d,n,s/i),d;const h=ng(n,t,i);if(s>0){let p,m;const v=s>1?Math.round((l-o)/(s-1)):null;for(zi(t,d,h,Tt(v)?0:o-v,o),p=0,m=s-1;p<m;p++)zi(t,d,h,n[p],n[p+1]);return zi(t,d,h,l,Tt(v)?t.length:l+v),d}return zi(t,d,h),d}function ig(a){const t=a.options.offset,e=a._tickSize(),r=a._length/e+(t?0:1),i=a._maxLength/e;return Math.floor(Math.min(r,i))}function ng(a,t,e){const r=lg(a),i=t.length/e;if(!r)return Math.max(i,1);const n=Np(r);for(let s=0,o=n.length-1;s<o;s++){const l=n[s];if(l>i)return l}return Math.max(i,1)}function sg(a){const t=[];let e,r;for(e=0,r=a.length;e<r;e++)a[e].major&&t.push(e);return t}function og(a,t,e,r){let i=0,n=e[0],s;for(r=Math.ceil(r),s=0;s<a.length;s++)s===n&&(t.push(a[s]),i++,n=e[i*r])}function zi(a,t,e,r,i){const n=St(r,0),s=Math.min(St(i,a.length),a.length);let o=0,l,d,h;for(e=Math.ceil(e),i&&(l=i-r,e=l/Math.floor(l/e)),h=n;h<0;)o++,h=Math.round(n+o*e);for(d=Math.max(n,0);d<s;d++)d===h&&(t.push(a[d]),o++,h=Math.round(n+o*e))}function lg(a){const t=a.length;let e,r;if(t<2)return!1;for(r=a[0],e=1;e<t;++e)if(a[e]-a[e-1]!==r)return!1;return r}const cg=a=>a==="left"?"right":a==="right"?"left":a,Dl=(a,t,e)=>t==="top"||t==="left"?a[t]+e:a[t]-e,El=(a,t)=>Math.min(t||a,a);function Pl(a,t){const e=[],r=a.length/t,i=a.length;let n=0;for(;n<i;n+=r)e.push(a[Math.floor(n)]);return e}function dg(a,t,e){const r=a.ticks.length,i=Math.min(t,r-1),n=a._startPixel,s=a._endPixel,o=1e-6;let l=a.getPixelForTick(i),d;if(!(e&&(r===1?d=Math.max(l-n,s-l):t===0?d=(a.getPixelForTick(1)-l)/2:d=(l-a.getPixelForTick(i-1))/2,l+=i<t?d:-d,l<n-o||l>s+o)))return l}function ug(a,t){jt(a,e=>{const r=e.gc,i=r.length/2;let n;if(i>t){for(n=0;n<i;++n)delete e.data[r[n]];r.splice(0,i)}})}function Ea(a){return a.drawTicks?a.tickLength:0}function Rl(a,t){if(!a.display)return 0;const e=ne(a.font,t),r=ye(a.padding);return(_t(a.text)?a.text.length:1)*e.lineHeight+r.height}function hg(a,t){return Ar(a,{scale:t,type:"scale"})}function pg(a,t,e){return Ar(a,{tick:e,index:t,type:"tick"})}function fg(a,t,e){let r=Us(a);return(e&&t!=="right"||!e&&t==="right")&&(r=cg(r)),r}function gg(a,t,e,r){const{top:i,left:n,bottom:s,right:o,chart:l}=a,{chartArea:d,scales:h}=l;let p=0,m,v,g;const k=s-i,S=o-n;if(a.isHorizontal()){if(v=me(r,n,o),Lt(e)){const D=Object.keys(e)[0],M=e[D];g=h[D].getPixelForValue(M)+k-t}else e==="center"?g=(d.bottom+d.top)/2+k-t:g=Dl(a,e,t);m=o-n}else{if(Lt(e)){const D=Object.keys(e)[0],M=e[D];v=h[D].getPixelForValue(M)-S+t}else e==="center"?v=(d.left+d.right)/2-S+t:v=Dl(a,e,t);g=me(r,s,i),p=e==="left"?-re:re}return{titleX:v,titleY:g,maxWidth:m,rotation:p}}class Gr extends Ge{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:r,_suggestedMax:i}=this;return t=ze(t,Number.POSITIVE_INFINITY),e=ze(e,Number.NEGATIVE_INFINITY),r=ze(r,Number.POSITIVE_INFINITY),i=ze(i,Number.NEGATIVE_INFINITY),{min:ze(t,r),max:ze(e,i),minDefined:Zt(t),maxDefined:Zt(e)}}getMinMax(t){let{min:e,max:r,minDefined:i,maxDefined:n}=this.getUserBounds(),s;if(i&&n)return{min:e,max:r};const o=this.getMatchingVisibleMetas();for(let l=0,d=o.length;l<d;++l)s=o[l].controller.getMinMax(this,t),i||(e=Math.min(e,s.min)),n||(r=Math.max(r,s.max));return e=n&&e>r?r:e,r=i&&e>r?e:r,{min:ze(e,ze(r,e)),max:ze(r,ze(e,r))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Wt(this.options.beforeUpdate,[this])}update(t,e,r){const{beginAtZero:i,grace:n,ticks:s}=this.options,o=s.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=r=Object.assign({left:0,right:0,top:0,bottom:0},r),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+r.left+r.right:this.height+r.top+r.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=bf(this,n,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const l=o<this.ticks.length;this._convertTicksToLabels(l?Pl(this.ticks,o):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||s.source==="auto")&&(this.ticks=ag(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,r;this.isHorizontal()?(e=this.left,r=this.right):(e=this.top,r=this.bottom,t=!t),this._startPixel=e,this._endPixel=r,this._reversePixels=t,this._length=r-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Wt(this.options.afterUpdate,[this])}beforeSetDimensions(){Wt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Wt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Wt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Wt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let r,i,n;for(r=0,i=t.length;r<i;r++)n=t[r],n.label=Wt(e.callback,[n.value,r,t],this)}afterTickToLabelConversion(){Wt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Wt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,r=El(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,n=e.maxRotation;let s=i,o,l,d;if(!this._isVisible()||!e.display||i>=n||r<=1||!this.isHorizontal()){this.labelRotation=i;return}const h=this._getLabelSizes(),p=h.widest.width,m=h.highest.height,v=de(this.chart.width-p,0,this.maxWidth);o=t.offset?this.maxWidth/r:v/(r-1),p+6>o&&(o=v/(r-(t.offset?.5:1)),l=this.maxHeight-Ea(t.grid)-e.padding-Rl(t.title,this.chart.options.font),d=Math.sqrt(p*p+m*m),s=Ws(Math.min(Math.asin(de((h.highest.height+6)/o,-1,1)),Math.asin(de(l/d,-1,1))-Math.asin(de(m/d,-1,1)))),s=Math.max(i,Math.min(n,s))),this.labelRotation=s}afterCalculateLabelRotation(){Wt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Wt(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:r,title:i,grid:n}}=this,s=this._isVisible(),o=this.isHorizontal();if(s){const l=Rl(i,e.options.font);if(o?(t.width=this.maxWidth,t.height=Ea(n)+l):(t.height=this.maxHeight,t.width=Ea(n)+l),r.display&&this.ticks.length){const{first:d,last:h,widest:p,highest:m}=this._getLabelSizes(),v=r.padding*2,g=Fe(this.labelRotation),k=Math.cos(g),S=Math.sin(g);if(o){const D=r.mirror?0:S*p.width+k*m.height;t.height=Math.min(this.maxHeight,t.height+D+v)}else{const D=r.mirror?0:k*p.width+S*m.height;t.width=Math.min(this.maxWidth,t.width+D+v)}this._calculatePadding(d,h,S,k)}}this._handleMargins(),o?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,r,i){const{ticks:{align:n,padding:s},position:o}=this.options,l=this.labelRotation!==0,d=o!=="top"&&this.axis==="x";if(this.isHorizontal()){const h=this.getPixelForTick(0)-this.left,p=this.right-this.getPixelForTick(this.ticks.length-1);let m=0,v=0;l?d?(m=i*t.width,v=r*e.height):(m=r*t.height,v=i*e.width):n==="start"?v=e.width:n==="end"?m=t.width:n!=="inner"&&(m=t.width/2,v=e.width/2),this.paddingLeft=Math.max((m-h+s)*this.width/(this.width-h),0),this.paddingRight=Math.max((v-p+s)*this.width/(this.width-p),0)}else{let h=e.height/2,p=t.height/2;n==="start"?(h=0,p=t.height):n==="end"&&(h=e.height,p=0),this.paddingTop=h+s,this.paddingBottom=p+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Wt(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,r;for(e=0,r=t.length;e<r;e++)Tt(t[e].label)&&(t.splice(e,1),r--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let r=this.ticks;e<r.length&&(r=Pl(r,e)),this._labelSizes=t=this._computeLabelSizes(r,r.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,r){const{ctx:i,_longestTextCache:n}=this,s=[],o=[],l=Math.floor(e/El(e,r));let d=0,h=0,p,m,v,g,k,S,D,M,I,W,H;for(p=0;p<e;p+=l){if(g=t[p].label,k=this._resolveTickFontOptions(p),i.font=S=k.string,D=n[S]=n[S]||{data:{},gc:[]},M=k.lineHeight,I=W=0,!Tt(g)&&!_t(g))I=rn(i,D.data,D.gc,I,g),W=M;else if(_t(g))for(m=0,v=g.length;m<v;++m)H=g[m],!Tt(H)&&!_t(H)&&(I=rn(i,D.data,D.gc,I,H),W+=M);s.push(I),o.push(W),d=Math.max(I,d),h=Math.max(W,h)}ug(n,e);const X=s.indexOf(d),q=o.indexOf(h),w=C=>({width:s[C]||0,height:o[C]||0});return{first:w(0),last:w(e-1),widest:w(X),highest:w(q),widths:s,heights:o}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return Up(this._alignToPixels?Or(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const r=e[t];return r.$context||(r.$context=pg(this.getContext(),t,r))}return this.$context||(this.$context=hg(this.chart.getContext(),this))}_tickSize(){const t=this.options.ticks,e=Fe(this.labelRotation),r=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),n=this._getLabelSizes(),s=t.autoSkipPadding||0,o=n?n.widest.width+s:0,l=n?n.highest.height+s:0;return this.isHorizontal()?l*r>o*i?o/r:l/i:l*i<o*r?l/r:o/i}_isVisible(){const t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,r=this.chart,i=this.options,{grid:n,position:s,border:o}=i,l=n.offset,d=this.isHorizontal(),p=this.ticks.length+(l?1:0),m=Ea(n),v=[],g=o.setContext(this.getContext()),k=g.display?g.width:0,S=k/2,D=function(lt){return Or(r,lt,k)};let M,I,W,H,X,q,w,C,L,Y,K,tt;if(s==="top")M=D(this.bottom),q=this.bottom-m,C=M-S,Y=D(t.top)+S,tt=t.bottom;else if(s==="bottom")M=D(this.top),Y=t.top,tt=D(t.bottom)-S,q=M+S,C=this.top+m;else if(s==="left")M=D(this.right),X=this.right-m,w=M-S,L=D(t.left)+S,K=t.right;else if(s==="right")M=D(this.left),L=t.left,K=D(t.right)-S,X=M+S,w=this.left+m;else if(e==="x"){if(s==="center")M=D((t.top+t.bottom)/2+.5);else if(Lt(s)){const lt=Object.keys(s)[0],G=s[lt];M=D(this.chart.scales[lt].getPixelForValue(G))}Y=t.top,tt=t.bottom,q=M+S,C=q+m}else if(e==="y"){if(s==="center")M=D((t.left+t.right)/2);else if(Lt(s)){const lt=Object.keys(s)[0],G=s[lt];M=D(this.chart.scales[lt].getPixelForValue(G))}X=M-S,w=X-m,L=t.left,K=t.right}const ht=St(i.ticks.maxTicksLimit,p),pt=Math.max(1,Math.ceil(p/ht));for(I=0;I<p;I+=pt){const lt=this.getContext(I),G=n.setContext(lt),Z=o.setContext(lt),J=G.lineWidth,bt=G.color,dt=Z.dash||[],gt=Z.dashOffset,at=G.tickWidth,ft=G.tickColor,wt=G.tickBorderDash||[],kt=G.tickBorderDashOffset;W=dg(this,I,l),W!==void 0&&(H=Or(r,W,J),d?X=w=L=K=H:q=C=Y=tt=H,v.push({tx1:X,ty1:q,tx2:w,ty2:C,x1:L,y1:Y,x2:K,y2:tt,width:J,color:bt,borderDash:dt,borderDashOffset:gt,tickWidth:at,tickColor:ft,tickBorderDash:wt,tickBorderDashOffset:kt}))}return this._ticksLength=p,this._borderValue=M,v}_computeLabelItems(t){const e=this.axis,r=this.options,{position:i,ticks:n}=r,s=this.isHorizontal(),o=this.ticks,{align:l,crossAlign:d,padding:h,mirror:p}=n,m=Ea(r.grid),v=m+h,g=p?-h:v,k=-Fe(this.labelRotation),S=[];let D,M,I,W,H,X,q,w,C,L,Y,K,tt="middle";if(i==="top")X=this.bottom-g,q=this._getXAxisLabelAlignment();else if(i==="bottom")X=this.top+g,q=this._getXAxisLabelAlignment();else if(i==="left"){const pt=this._getYAxisLabelAlignment(m);q=pt.textAlign,H=pt.x}else if(i==="right"){const pt=this._getYAxisLabelAlignment(m);q=pt.textAlign,H=pt.x}else if(e==="x"){if(i==="center")X=(t.top+t.bottom)/2+v;else if(Lt(i)){const pt=Object.keys(i)[0],lt=i[pt];X=this.chart.scales[pt].getPixelForValue(lt)+v}q=this._getXAxisLabelAlignment()}else if(e==="y"){if(i==="center")H=(t.left+t.right)/2-v;else if(Lt(i)){const pt=Object.keys(i)[0],lt=i[pt];H=this.chart.scales[pt].getPixelForValue(lt)}q=this._getYAxisLabelAlignment(m).textAlign}e==="y"&&(l==="start"?tt="top":l==="end"&&(tt="bottom"));const ht=this._getLabelSizes();for(D=0,M=o.length;D<M;++D){I=o[D],W=I.label;const pt=n.setContext(this.getContext(D));w=this.getPixelForTick(D)+n.labelOffset,C=this._resolveTickFontOptions(D),L=C.lineHeight,Y=_t(W)?W.length:1;const lt=Y/2,G=pt.color,Z=pt.textStrokeColor,J=pt.textStrokeWidth;let bt=q;s?(H=w,q==="inner"&&(D===M-1?bt=this.options.reverse?"left":"right":D===0?bt=this.options.reverse?"right":"left":bt="center"),i==="top"?d==="near"||k!==0?K=-Y*L+L/2:d==="center"?K=-ht.highest.height/2-lt*L+L:K=-ht.highest.height+L/2:d==="near"||k!==0?K=L/2:d==="center"?K=ht.highest.height/2-lt*L:K=ht.highest.height-Y*L,p&&(K*=-1),k!==0&&!pt.showLabelBackdrop&&(H+=L/2*Math.sin(k))):(X=w,K=(1-Y)*L/2);let dt;if(pt.showLabelBackdrop){const gt=ye(pt.backdropPadding),at=ht.heights[D],ft=ht.widths[D];let wt=K-gt.top,kt=0-gt.left;switch(tt){case"middle":wt-=at/2;break;case"bottom":wt-=at;break}switch(q){case"center":kt-=ft/2;break;case"right":kt-=ft;break;case"inner":D===M-1?kt-=ft:D>0&&(kt-=ft/2);break}dt={left:kt,top:wt,width:ft+gt.width,height:at+gt.height,color:pt.backdropColor}}S.push({label:W,font:C,textOffset:K,options:{rotation:k,color:G,strokeColor:Z,strokeWidth:J,textAlign:bt,textBaseline:tt,translation:[H,X],backdrop:dt}})}return S}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Fe(this.labelRotation))return t==="top"?"left":"right";let i="center";return e.align==="start"?i="left":e.align==="end"?i="right":e.align==="inner"&&(i="inner"),i}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:r,mirror:i,padding:n}}=this.options,s=this._getLabelSizes(),o=t+n,l=s.widest.width;let d,h;return e==="left"?i?(h=this.right+n,r==="near"?d="left":r==="center"?(d="center",h+=l/2):(d="right",h+=l)):(h=this.right-o,r==="near"?d="right":r==="center"?(d="center",h-=l/2):(d="left",h=this.left)):e==="right"?i?(h=this.left+n,r==="near"?d="right":r==="center"?(d="center",h-=l/2):(d="left",h-=l)):(h=this.left+o,r==="near"?d="left":r==="center"?(d="center",h+=l/2):(d="right",h=this.right)):d="right",{textAlign:d,x:h}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:r,top:i,width:n,height:s}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(r,i,n,s),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const i=this.ticks.findIndex(n=>n.value===t);return i>=0?e.setContext(this.getContext(i)).lineWidth:0}drawGrid(t){const e=this.options.grid,r=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let n,s;const o=(l,d,h)=>{!h.width||!h.color||(r.save(),r.lineWidth=h.width,r.strokeStyle=h.color,r.setLineDash(h.borderDash||[]),r.lineDashOffset=h.borderDashOffset,r.beginPath(),r.moveTo(l.x,l.y),r.lineTo(d.x,d.y),r.stroke(),r.restore())};if(e.display)for(n=0,s=i.length;n<s;++n){const l=i[n];e.drawOnChartArea&&o({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&o({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:r,grid:i}}=this,n=r.setContext(this.getContext()),s=r.display?n.width:0;if(!s)return;const o=i.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let d,h,p,m;this.isHorizontal()?(d=Or(t,this.left,s)-s/2,h=Or(t,this.right,o)+o/2,p=m=l):(p=Or(t,this.top,s)-s/2,m=Or(t,this.bottom,o)+o/2,d=h=l),e.save(),e.lineWidth=n.width,e.strokeStyle=n.color,e.beginPath(),e.moveTo(d,p),e.lineTo(h,m),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const r=this.ctx,i=this._computeLabelArea();i&&fn(r,i);const n=this.getLabelItems(t);for(const s of n){const o=s.options,l=s.font,d=s.label,h=s.textOffset;Ur(r,d,0,h,l,o)}i&&gn(r)}drawTitle(){const{ctx:t,options:{position:e,title:r,reverse:i}}=this;if(!r.display)return;const n=ne(r.font),s=ye(r.padding),o=r.align;let l=n.lineHeight/2;e==="bottom"||e==="center"||Lt(e)?(l+=s.bottom,_t(r.text)&&(l+=n.lineHeight*(r.text.length-1))):l+=s.top;const{titleX:d,titleY:h,maxWidth:p,rotation:m}=gg(this,l,e,o);Ur(t,r.text,0,0,n,{color:r.color,maxWidth:p,rotation:m,textAlign:fg(o,e,i),textBaseline:"middle",translation:[d,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,r=St(t.grid&&t.grid.z,-1),i=St(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==Gr.prototype.draw?[{z:e,draw:n=>{this.draw(n)}}]:[{z:r,draw:n=>{this.drawBackground(),this.drawGrid(n),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:n=>{this.drawLabels(n)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),r=this.axis+"AxisID",i=[];let n,s;for(n=0,s=e.length;n<s;++n){const o=e[n];o[r]===this.id&&(!t||o.type===t)&&i.push(o)}return i}_resolveTickFontOptions(t){const e=this.options.ticks.setContext(this.getContext(t));return ne(e.font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Ti{constructor(t,e,r){this.type=t,this.scope=e,this.override=r,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let r;vg(e)&&(r=this.register(e));const i=this.items,n=t.id,s=this.scope+"."+n;if(!n)throw new Error("class does not have id: "+t);return n in i||(i[n]=t,mg(t,s,r),this.override&&Qt.override(t.id,t.overrides)),s}get(t){return this.items[t]}unregister(t){const e=this.items,r=t.id,i=this.scope;r in e&&delete e[r],i&&r in Qt[i]&&(delete Qt[i][r],this.override&&delete Yr[r])}}function mg(a,t,e){const r=Ua(Object.create(null),[e?Qt.get(e):{},Qt.get(t),a.defaults]);Qt.set(t,r),a.defaultRoutes&&bg(t,a.defaultRoutes),a.descriptors&&Qt.describe(t,a.descriptors)}function bg(a,t){Object.keys(t).forEach(e=>{const r=e.split("."),i=r.pop(),n=[a].concat(r).join("."),s=t[e].split("."),o=s.pop(),l=s.join(".");Qt.route(n,i,l,o)})}function vg(a){return"id"in a&&"defaults"in a}class xg{constructor(){this.controllers=new Ti(sr,"datasets",!0),this.elements=new Ti(Ge,"elements"),this.plugins=new Ti(Object,"plugins"),this.scales=new Ti(Gr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,r){[...e].forEach(i=>{const n=r||this._getRegistryForType(i);r||n.isForType(i)||n===this.plugins&&i.id?this._exec(t,n,i):jt(i,s=>{const o=r||this._getRegistryForType(s);this._exec(t,o,s)})})}_exec(t,e,r){const i=qs(t);Wt(r["before"+i],[],r),e[t](r),Wt(r["after"+i],[],r)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const r=this._typedRegistries[e];if(r.isForType(t))return r}return this.plugins}_get(t,e,r){const i=e.get(t);if(i===void 0)throw new Error('"'+t+'" is not a registered '+r+".");return i}}var Ye=new xg;class yg{constructor(){this._init=void 0}notify(t,e,r,i){if(e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install")),this._init===void 0)return;const n=i?this._descriptors(t).filter(i):this._descriptors(t),s=this._notify(n,t,e,r);return e==="afterDestroy"&&(this._notify(n,t,"stop"),this._notify(this._init,t,"uninstall"),this._init=void 0),s}_notify(t,e,r,i){i=i||{};for(const n of t){const s=n.plugin,o=s[r],l=[e,i,n.options];if(Wt(o,l,s)===!1&&i.cancelable)return!1}return!0}invalidate(){Tt(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const r=t&&t.config,i=St(r.options&&r.options.plugins,{}),n=wg(r);return i===!1&&!e?[]:Cg(t,n,i,e)}_notifyStateChanges(t){const e=this._oldCache||[],r=this._cache,i=(n,s)=>n.filter(o=>!s.some(l=>o.plugin.id===l.plugin.id));this._notify(i(e,r),t,"stop"),this._notify(i(r,e),t,"start")}}function wg(a){const t={},e=[],r=Object.keys(Ye.plugins.items);for(let n=0;n<r.length;n++)e.push(Ye.getPlugin(r[n]));const i=a.plugins||[];for(let n=0;n<i.length;n++){const s=i[n];e.indexOf(s)===-1&&(e.push(s),t[s.id]=!0)}return{plugins:e,localIds:t}}function kg(a,t){return!t&&a===!1?null:a===!0?{}:a}function Cg(a,{plugins:t,localIds:e},r,i){const n=[],s=a.getContext();for(const o of t){const l=o.id,d=kg(r[l],i);d!==null&&n.push({plugin:o,options:Sg(a.config,{plugin:o,local:e[l]},d,s)})}return n}function Sg(a,{plugin:t,local:e},r,i){const n=a.pluginScopeKeys(t),s=a.getOptionScopes(r,n);return e&&t.defaults&&s.push(t.defaults),a.createResolver(s,i,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ms(a,t){const e=Qt.datasets[a]||{};return((t.datasets||{})[a]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function Ag(a,t){let e=a;return a==="_index_"?e=t:a==="_value_"&&(e=t==="x"?"y":"x"),e}function Mg(a,t){return a===t?"_index_":"_value_"}function zl(a){if(a==="x"||a==="y"||a==="r")return a}function Dg(a){if(a==="top"||a==="bottom")return"x";if(a==="left"||a==="right")return"y"}function Ds(a,...t){if(zl(a))return a;for(const e of t){const r=e.axis||Dg(e.position)||a.length>1&&zl(a[0].toLowerCase());if(r)return r}throw new Error(`Cannot determine type of '${a}' axis. Please provide 'axis' or 'position' option.`)}function Tl(a,t,e){if(e[t+"AxisID"]===a)return{axis:t}}function Eg(a,t){if(t.data&&t.data.datasets){const e=t.data.datasets.filter(r=>r.xAxisID===a||r.yAxisID===a);if(e.length)return Tl(a,"x",e[0])||Tl(a,"y",e[0])}return{}}function Pg(a,t){const e=Yr[a.type]||{scales:{}},r=t.scales||{},i=Ms(a.type,t),n=Object.create(null);return Object.keys(r).forEach(s=>{const o=r[s];if(!Lt(o))return console.error(`Invalid scale configuration for scale: ${s}`);if(o._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${s}`);const l=Ds(s,o,Eg(s,a),Qt.scales[o.type]),d=Mg(l,i),h=e.scales||{};n[s]=Va(Object.create(null),[{axis:l},o,h[l],h[d]])}),a.data.datasets.forEach(s=>{const o=s.type||a.type,l=s.indexAxis||Ms(o,t),h=(Yr[o]||{}).scales||{};Object.keys(h).forEach(p=>{const m=Ag(p,l),v=s[m+"AxisID"]||m;n[v]=n[v]||Object.create(null),Va(n[v],[{axis:m},r[v],h[p]])})}),Object.keys(n).forEach(s=>{const o=n[s];Va(o,[Qt.scales[o.type],Qt.scale])}),n}function Dd(a){const t=a.options||(a.options={});t.plugins=St(t.plugins,{}),t.scales=Pg(a,t)}function Ed(a){return a=a||{},a.datasets=a.datasets||[],a.labels=a.labels||[],a}function Rg(a){return a=a||{},a.data=Ed(a.data),Dd(a),a}const Ll=new Map,Pd=new Set;function Li(a,t){let e=Ll.get(a);return e||(e=t(),Ll.set(a,e),Pd.add(e)),e}const Pa=(a,t,e)=>{const r=Cr(t,e);r!==void 0&&a.add(r)};class zg{constructor(t){this._config=Rg(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=Ed(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),Dd(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return Li(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return Li(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return Li(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){const e=t.id,r=this.type;return Li(`${r}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){const r=this._scopeCache;let i=r.get(t);return(!i||e)&&(i=new Map,r.set(t,i)),i}getOptionScopes(t,e,r){const{options:i,type:n}=this,s=this._cachedScopes(t,r),o=s.get(e);if(o)return o;const l=new Set;e.forEach(h=>{t&&(l.add(t),h.forEach(p=>Pa(l,t,p))),h.forEach(p=>Pa(l,i,p)),h.forEach(p=>Pa(l,Yr[n]||{},p)),h.forEach(p=>Pa(l,Qt,p)),h.forEach(p=>Pa(l,Ss,p))});const d=Array.from(l);return d.length===0&&d.push(Object.create(null)),Pd.has(e)&&s.set(e,d),d}chartOptionScopes(){const{options:t,type:e}=this;return[t,Yr[e]||{},Qt.datasets[e]||{},{type:e},Qt,Ss]}resolveNamedOptions(t,e,r,i=[""]){const n={$shared:!0},{resolver:s,subPrefixes:o}=Ol(this._resolverCache,t,i);let l=s;if(Lg(s,e)){n.$shared=!1,r=Sr(r)?r():r;const d=this.createResolver(t,r,o);l=ha(s,r,d)}for(const d of e)n[d]=l[d];return n}createResolver(t,e,r=[""],i){const{resolver:n}=Ol(this._resolverCache,t,r);return Lt(e)?ha(n,e,void 0,i):n}}function Ol(a,t,e){let r=a.get(t);r||(r=new Map,a.set(t,r));const i=e.join();let n=r.get(i);return n||(n={resolver:Ks(t,e),subPrefixes:e.filter(o=>!o.toLowerCase().includes("hover"))},r.set(i,n)),n}const Tg=a=>Lt(a)&&Object.getOwnPropertyNames(a).some(t=>Sr(a[t]));function Lg(a,t){const{isScriptable:e,isIndexable:r}=sd(a);for(const i of t){const n=e(i),s=r(i),o=(s||n)&&a[i];if(n&&(Sr(o)||Tg(o))||s&&_t(o))return!0}return!1}var Og="4.5.1";const Bg=["top","bottom","left","right","chartArea"];function Bl(a,t){return a==="top"||a==="bottom"||Bg.indexOf(a)===-1&&t==="x"}function Il(a,t){return function(e,r){return e[a]===r[a]?e[t]-r[t]:e[a]-r[a]}}function Fl(a){const t=a.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Wt(e&&e.onComplete,[a],t)}function Ig(a){const t=a.chart,e=t.options.animation;Wt(e&&e.onProgress,[a],t)}function Rd(a){return Js()&&typeof a=="string"?a=document.getElementById(a):a&&a.length&&(a=a[0]),a&&a.canvas&&(a=a.canvas),a}const Xi={},Vl=a=>{const t=Rd(a);return Object.values(Xi).filter(e=>e.canvas===t).pop()};function Fg(a,t,e){const r=Object.keys(a);for(const i of r){const n=+i;if(n>=t){const s=a[i];delete a[i],(e>0||n>t)&&(a[n+e]=s)}}}function Vg(a,t,e,r){return!e||a.type==="mouseout"?null:r?t:a}class Ve{static defaults=Qt;static instances=Xi;static overrides=Yr;static registry=Ye;static version=Og;static getChart=Vl;static register(...t){Ye.add(...t),jl()}static unregister(...t){Ye.remove(...t),jl()}constructor(t,e){const r=this.config=new zg(e),i=Rd(t),n=Vl(i);if(n)throw new Error("Canvas is already in use. Chart with ID '"+n.id+"' must be destroyed before the canvas with ID '"+n.canvas.id+"' can be reused.");const s=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||rg(i)),this.platform.updateConfig(r);const o=this.platform.acquireContext(i,s.aspectRatio),l=o&&o.canvas,d=l&&l.height,h=l&&l.width;if(this.id=Tp(),this.ctx=o,this.canvas=l,this.width=h,this.height=d,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new yg,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=_p(p=>this.update(p),s.resizeDelay||0),this._dataChanges=[],Xi[this.id]=this,!o||!l){console.error("Failed to create chart: can't acquire context from the given item");return}Ze.listen(this,"complete",Fl),Ze.listen(this,"progress",Ig),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:r,height:i,_aspectRatio:n}=this;return Tt(t)?e&&n?n:i?r/i:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return Ye}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ol(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return il(this.canvas,this.ctx),this}stop(){return Ze.stop(this),this}resize(t,e){Ze.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const r=this.options,i=this.canvas,n=r.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(i,t,e,n),o=r.devicePixelRatio||this.platform.getDevicePixelRatio(),l=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,ol(this,o,!0)&&(this.notifyPlugins("resize",{size:s}),Wt(r.onResize,[this,s],this),this.attached&&this._doResize(l)&&this.render())}ensureScalesHaveIDs(){const e=this.options.scales||{};jt(e,(r,i)=>{r.id=i})}buildOrUpdateScales(){const t=this.options,e=t.scales,r=this.scales,i=Object.keys(r).reduce((s,o)=>(s[o]=!1,s),{});let n=[];e&&(n=n.concat(Object.keys(e).map(s=>{const o=e[s],l=Ds(s,o),d=l==="r",h=l==="x";return{options:o,dposition:d?"chartArea":h?"bottom":"left",dtype:d?"radialLinear":h?"category":"linear"}}))),jt(n,s=>{const o=s.options,l=o.id,d=Ds(l,o),h=St(o.type,s.dtype);(o.position===void 0||Bl(o.position,d)!==Bl(s.dposition))&&(o.position=s.dposition),i[l]=!0;let p=null;if(l in r&&r[l].type===h)p=r[l];else{const m=Ye.getScale(h);p=new m({id:l,type:h,ctx:this.ctx,chart:this}),r[p.id]=p}p.init(o,t)}),jt(i,(s,o)=>{s||delete r[o]}),jt(r,s=>{xe.configure(this,s,s.options),xe.addBox(this,s)})}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,r=t.length;if(t.sort((i,n)=>i.index-n.index),r>e){for(let i=e;i<r;++i)this._destroyDatasetMeta(i);t.splice(e,r-e)}this._sortedMetasets=t.slice(0).sort(Il("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach((r,i)=>{e.filter(n=>n===r._dataset).length===0&&this._destroyDatasetMeta(i)})}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let r,i;for(this._removeUnreferencedMetasets(),r=0,i=e.length;r<i;r++){const n=e[r];let s=this.getDatasetMeta(r);const o=n.type||this.config.type;if(s.type&&s.type!==o&&(this._destroyDatasetMeta(r),s=this.getDatasetMeta(r)),s.type=o,s.indexAxis=n.indexAxis||Ms(o,this.options),s.order=n.order||0,s.index=r,s.label=""+n.label,s.visible=this.isDatasetVisible(r),s.controller)s.controller.updateIndex(r),s.controller.linkScales();else{const l=Ye.getController(o),{datasetElementType:d,dataElementType:h}=Qt.datasets[o];Object.assign(l,{dataElementType:Ye.getElement(h),datasetElementType:d&&Ye.getElement(d)}),s.controller=new l(this,r),t.push(s.controller)}}return this._updateMetasets(),t}_resetElements(){jt(this.data.datasets,(t,e)=>{this.getDatasetMeta(e).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const r=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0})===!1)return;const n=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let d=0,h=this.data.datasets.length;d<h;d++){const{controller:p}=this.getDatasetMeta(d),m=!i&&n.indexOf(p)===-1;p.buildOrUpdateElements(m),s=Math.max(+p.getMaxOverflow(),s)}s=this._minPadding=r.layout.autoPadding?s:0,this._updateLayout(s),i||jt(n,d=>{d.reset()}),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(Il("z","_idx"));const{_active:o,_lastEvent:l}=this;l?this._eventHandler(l,!0):o.length&&this._updateHoverStyles(o,o,!0),this.render()}_updateScales(){jt(this.scales,t=>{xe.removeBox(this,t)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),r=new Set(t.events);(!_o(e,r)||!!this._responsiveListeners!==t.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:r,start:i,count:n}of e){const s=r==="_removeElements"?-n:n;Fg(t,i,s)}}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,r=n=>new Set(t.filter(s=>s[0]===n).map((s,o)=>o+","+s.splice(1).join(","))),i=r(0);for(let n=1;n<e;n++)if(!_o(i,r(n)))return;return Array.from(i).map(n=>n.split(",")).map(n=>({method:n[1],start:+n[2],count:+n[3]}))}_updateLayout(t){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;xe.update(this,this.width,this.height,t);const e=this.chartArea,r=e.width<=0||e.height<=0;this._layers=[],jt(this.boxes,i=>{r&&i.position==="chartArea"||(i.configure&&i.configure(),this._layers.push(...i._layers()))},this),this._layers.forEach((i,n)=>{i._idx=n}),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})!==!1){for(let e=0,r=this.data.datasets.length;e<r;++e)this.getDatasetMeta(e).controller.configure();for(let e=0,r=this.data.datasets.length;e<r;++e)this._updateDataset(e,Sr(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const r=this.getDatasetMeta(t),i={meta:r,index:t,mode:e,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",i)!==!1&&(r.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ze.has(this)?this.attached&&!Ze.running(this)&&Ze.start(this):(this.draw(),Fl({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:r,height:i}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,i)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,r=[];let i,n;for(i=0,n=e.length;i<n;++i){const s=e[i];(!t||s.visible)&&r.push(s)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,r={meta:t,index:t.index,cancelable:!0},i=bd(this,t);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(i&&fn(e,i),t.controller.draw(),i&&gn(e),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(t){return ar(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,r,i){const n=B0.modes[e];return typeof n=="function"?n(this,t,r,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],r=this._metasets;let i=r.filter(n=>n&&n._dataset===e).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},r.push(i)),i}getContext(){return this.$context||(this.$context=Ar(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const r=this.getDatasetMeta(t);return typeof r.hidden=="boolean"?!r.hidden:!e.hidden}setDatasetVisibility(t,e){const r=this.getDatasetMeta(t);r.hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,r){const i=r?"show":"hide",n=this.getDatasetMeta(t),s=n.controller._resolveAnimations(void 0,i);Ga(e)?(n.data[e].hidden=!r,this.update()):(this.setDatasetVisibility(t,r),s.update(n,{visible:r}),this.update(o=>o.datasetIndex===t?i:void 0))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),Ze.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),il(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete Xi[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,r=(n,s)=>{e.addEventListener(this,n,s),t[n]=s},i=(n,s,o)=>{n.offsetX=s,n.offsetY=o,this._eventHandler(n)};jt(this.options.events,n=>r(n,i))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,r=(l,d)=>{e.addEventListener(this,l,d),t[l]=d},i=(l,d)=>{t[l]&&(e.removeEventListener(this,l,d),delete t[l])},n=(l,d)=>{this.canvas&&this.resize(l,d)};let s;const o=()=>{i("attach",o),this.attached=!0,this.resize(),r("resize",n),r("detach",s)};s=()=>{this.attached=!1,i("resize",n),this._stop(),this._resize(0,0),r("attach",o)},e.isAttached(this.canvas)?o():s()}unbindEvents(){jt(this._listeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._listeners={},jt(this._responsiveListeners,(t,e)=>{this.platform.removeEventListener(this,e,t)}),this._responsiveListeners=void 0}updateHoverStyle(t,e,r){const i=r?"set":"remove";let n,s,o,l;for(e==="dataset"&&(n=this.getDatasetMeta(t[0].datasetIndex),n.controller["_"+i+"DatasetHoverStyle"]()),o=0,l=t.length;o<l;++o){s=t[o];const d=s&&this.getDatasetMeta(s.datasetIndex).controller;d&&d[i+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],r=t.map(({datasetIndex:n,index:s})=>{const o=this.getDatasetMeta(n);if(!o)throw new Error("No dataset found at index "+n);return{datasetIndex:n,element:o.data[s],index:s}});!$i(r,e)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,e))}notifyPlugins(t,e,r){return this._plugins.notify(this,t,e,r)}isPluginEnabled(t){return this._plugins._cache.filter(e=>e.plugin.id===t).length===1}_updateHoverStyles(t,e,r){const i=this.options.hover,n=(l,d)=>l.filter(h=>!d.some(p=>h.datasetIndex===p.datasetIndex&&h.index===p.index)),s=n(e,t),o=r?t:n(t,e);s.length&&this.updateHoverStyle(s,i.mode,!1),o.length&&i.mode&&this.updateHoverStyle(o,i.mode,!0)}_eventHandler(t,e){const r={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=s=>(s.options.events||this.options.events).includes(t.native.type);if(this.notifyPlugins("beforeEvent",r,i)===!1)return;const n=this._handleEvent(t,e,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,i),(n||r.changed)&&this.render(),this}_handleEvent(t,e,r){const{_active:i=[],options:n}=this,s=e,o=this._getActiveElements(t,i,r,s),l=Vp(t),d=Vg(t,this._lastEvent,r,l);r&&(this._lastEvent=null,Wt(n.onHover,[t,o,this],this),l&&Wt(n.onClick,[t,o,this],this));const h=!$i(o,i);return(h||e)&&(this._active=o,this._updateHoverStyles(o,i,e)),this._lastEvent=d,h}_getActiveElements(t,e,r,i){if(t.type==="mouseout")return[];if(!r)return e;const n=this.options.hover;return this.getElementsAtEventForMode(t,n.mode,n,i)}}function jl(){return jt(Ve.instances,a=>a._plugins.invalidate())}function jg(a,t,e){const{startAngle:r,x:i,y:n,outerRadius:s,innerRadius:o,options:l}=t,{borderWidth:d,borderJoinStyle:h}=l,p=Math.min(d/s,be(r-e));if(a.beginPath(),a.arc(i,n,s-d/2,r+p/2,e-p/2),o>0){const m=Math.min(d/o,be(r-e));a.arc(i,n,o+d/2,e-m/2,r+m/2,!0)}else{const m=Math.min(d/2,s*be(r-e));if(h==="round")a.arc(i,n,m,e-Ft/2,r+Ft/2,!0);else if(h==="bevel"){const v=2*m*m,g=-v*Math.cos(e+Ft/2)+i,k=-v*Math.sin(e+Ft/2)+n,S=v*Math.cos(r+Ft/2)+i,D=v*Math.sin(r+Ft/2)+n;a.lineTo(g,k),a.lineTo(S,D)}}a.closePath(),a.moveTo(0,0),a.rect(0,0,a.canvas.width,a.canvas.height),a.clip("evenodd")}function Hg(a,t,e){const{startAngle:r,pixelMargin:i,x:n,y:s,outerRadius:o,innerRadius:l}=t;let d=i/o;a.beginPath(),a.arc(n,s,o,r-d,e+d),l>i?(d=i/l,a.arc(n,s,l,e+d,r-d,!0)):a.arc(n,s,i,e+re,r-re),a.closePath(),a.clip()}function Ng(a){return Xs(a,["outerStart","outerEnd","innerStart","innerEnd"])}function qg(a,t,e,r){const i=Ng(a.options.borderRadius),n=(e-t)/2,s=Math.min(n,r*t/2),o=l=>{const d=(e-Math.min(n,l))*r/2;return de(l,0,Math.min(n,d))};return{outerStart:o(i.outerStart),outerEnd:o(i.outerEnd),innerStart:de(i.innerStart,0,s),innerEnd:de(i.innerEnd,0,s)}}function ia(a,t,e,r){return{x:e+a*Math.cos(t),y:r+a*Math.sin(t)}}function sn(a,t,e,r,i,n){const{x:s,y:o,startAngle:l,pixelMargin:d,innerRadius:h}=t,p=Math.max(t.outerRadius+r+e-d,0),m=h>0?h+r+e+d:0;let v=0;const g=i-l;if(r){const pt=h>0?h-r:0,lt=p>0?p-r:0,G=(pt+lt)/2,Z=G!==0?g*G/(G+r):g;v=(g-Z)/2}const k=Math.max(.001,g*p-e/Ft)/p,S=(g-k)/2,D=l+S+v,M=i-S-v,{outerStart:I,outerEnd:W,innerStart:H,innerEnd:X}=qg(t,m,p,M-D),q=p-I,w=p-W,C=D+I/q,L=M-W/w,Y=m+H,K=m+X,tt=D+H/Y,ht=M-X/K;if(a.beginPath(),n){const pt=(C+L)/2;if(a.arc(s,o,p,C,pt),a.arc(s,o,p,pt,L),W>0){const J=ia(w,L,s,o);a.arc(J.x,J.y,W,L,M+re)}const lt=ia(K,M,s,o);if(a.lineTo(lt.x,lt.y),X>0){const J=ia(K,ht,s,o);a.arc(J.x,J.y,X,M+re,ht+Math.PI)}const G=(M-X/m+(D+H/m))/2;if(a.arc(s,o,m,M-X/m,G,!0),a.arc(s,o,m,G,D+H/m,!0),H>0){const J=ia(Y,tt,s,o);a.arc(J.x,J.y,H,tt+Math.PI,D-re)}const Z=ia(q,D,s,o);if(a.lineTo(Z.x,Z.y),I>0){const J=ia(q,C,s,o);a.arc(J.x,J.y,I,D-re,C)}}else{a.moveTo(s,o);const pt=Math.cos(C)*p+s,lt=Math.sin(C)*p+o;a.lineTo(pt,lt);const G=Math.cos(L)*p+s,Z=Math.sin(L)*p+o;a.lineTo(G,Z)}a.closePath()}function Wg(a,t,e,r,i){const{fullCircles:n,startAngle:s,circumference:o}=t;let l=t.endAngle;if(n){sn(a,t,e,r,l,i);for(let d=0;d<n;++d)a.fill();isNaN(o)||(l=s+(o%Xt||Xt))}return sn(a,t,e,r,l,i),a.fill(),l}function Yg(a,t,e,r,i){const{fullCircles:n,startAngle:s,circumference:o,options:l}=t,{borderWidth:d,borderJoinStyle:h,borderDash:p,borderDashOffset:m,borderRadius:v}=l,g=l.borderAlign==="inner";if(!d)return;a.setLineDash(p||[]),a.lineDashOffset=m,g?(a.lineWidth=d*2,a.lineJoin=h||"round"):(a.lineWidth=d,a.lineJoin=h||"bevel");let k=t.endAngle;if(n){sn(a,t,e,r,k,i);for(let S=0;S<n;++S)a.stroke();isNaN(o)||(k=s+(o%Xt||Xt))}g&&Hg(a,t,k),l.selfJoin&&k-s>=Ft&&v===0&&h!=="miter"&&jg(a,t,k),n||(sn(a,t,e,r,k,i),a.stroke())}class vn extends Ge{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0,selfJoin:!1};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,r){const i=this.getProps(["x","y"],r),{angle:n,distance:s}=Qc(i,{x:t,y:e}),{startAngle:o,endAngle:l,innerRadius:d,outerRadius:h,circumference:p}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],r),m=(this.options.spacing+this.options.borderWidth)/2,v=St(p,l-o),g=Xa(n,o,l)&&o!==l,k=v>=Xt||g,S=er(s,d+m,h+m);return k&&S}getCenterPoint(t){const{x:e,y:r,startAngle:i,endAngle:n,innerRadius:s,outerRadius:o}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:d}=this.options,h=(i+n)/2,p=(s+o+d+l)/2;return{x:e+Math.cos(h)*p,y:r+Math.sin(h)*p}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:r}=this,i=(e.offset||0)/4,n=(e.spacing||0)/2,s=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=r>Xt?Math.floor(r/Xt):0,r===0||this.innerRadius<0||this.outerRadius<0)return;t.save();const o=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(o)*i,Math.sin(o)*i);const l=1-Math.sin(Math.min(Ft,r||0)),d=i*l;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,Wg(t,this,d,n,s),Yg(t,this,d,n,s),t.restore()}}function zd(a,t,e=t){a.lineCap=St(e.borderCapStyle,t.borderCapStyle),a.setLineDash(St(e.borderDash,t.borderDash)),a.lineDashOffset=St(e.borderDashOffset,t.borderDashOffset),a.lineJoin=St(e.borderJoinStyle,t.borderJoinStyle),a.lineWidth=St(e.borderWidth,t.borderWidth),a.strokeStyle=St(e.borderColor,t.borderColor)}function Ug(a,t,e){a.lineTo(e.x,e.y)}function Gg(a){return a.stepped?lf:a.tension||a.cubicInterpolationMode==="monotone"?cf:Ug}function Td(a,t,e={}){const r=a.length,{start:i=0,end:n=r-1}=e,{start:s,end:o}=t,l=Math.max(i,s),d=Math.min(n,o),h=i<s&&n<s||i>o&&n>o;return{count:r,start:l,loop:t.loop,ilen:d<l&&!h?r+d-l:d-l}}function Xg(a,t,e,r){const{points:i,options:n}=t,{count:s,start:o,loop:l,ilen:d}=Td(i,e,r),h=Gg(n);let{move:p=!0,reverse:m}=r||{},v,g,k;for(v=0;v<=d;++v)g=i[(o+(m?d-v:v))%s],!g.skip&&(p?(a.moveTo(g.x,g.y),p=!1):h(a,k,g,m,n.stepped),k=g);return l&&(g=i[(o+(m?d:0))%s],h(a,k,g,m,n.stepped)),!!l}function Kg(a,t,e,r){const i=t.points,{count:n,start:s,ilen:o}=Td(i,e,r),{move:l=!0,reverse:d}=r||{};let h=0,p=0,m,v,g,k,S,D;const M=W=>(s+(d?o-W:W))%n,I=()=>{k!==S&&(a.lineTo(h,S),a.lineTo(h,k),a.lineTo(h,D))};for(l&&(v=i[M(0)],a.moveTo(v.x,v.y)),m=0;m<=o;++m){if(v=i[M(m)],v.skip)continue;const W=v.x,H=v.y,X=W|0;X===g?(H<k?k=H:H>S&&(S=H),h=(p*h+W)/++p):(I(),a.lineTo(W,H),g=X,p=0,k=S=H),D=H}I()}function Es(a){const t=a.options,e=t.borderDash&&t.borderDash.length;return!a._decimated&&!a._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?Kg:Xg}function _g(a){return a.stepped?Nf:a.tension||a.cubicInterpolationMode==="monotone"?qf:Vr}function Qg(a,t,e,r){let i=t._path;i||(i=t._path=new Path2D,t.path(i,e,r)&&i.closePath()),zd(a,t.options),a.stroke(i)}function Jg(a,t,e,r){const{segments:i,options:n}=t,s=Es(t);for(const o of i)zd(a,n,o.style),a.beginPath(),s(a,t,o,{start:e,end:e+r-1})&&a.closePath(),a.stroke()}const Zg=typeof Path2D=="function";function $g(a,t,e,r){Zg&&!t.options.segment?Qg(a,t,e,r):Jg(a,t,e,r)}class xn extends Ge{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"&&t!=="fill"};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){const i=r.spanGaps?this._loop:this._fullLoop;Lf(this._points,r,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=Kf(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,r=t.length;return r&&e[t[r-1].end]}interpolate(t,e){const r=this.options,i=t[e],n=this.points,s=md(this,{property:e,start:i,end:i});if(!s.length)return;const o=[],l=_g(r);let d,h;for(d=0,h=s.length;d<h;++d){const{start:p,end:m}=s[d],v=n[p],g=n[m];if(v===g){o.push(v);continue}const k=Math.abs((i-v[e])/(g[e]-v[e])),S=l(v,g,k,r.stepped);S[e]=t[e],o.push(S)}return o.length===1?o[0]:o}pathSegment(t,e,r){return Es(this)(t,this,e,r)}path(t,e,r){const i=this.segments,n=Es(this);let s=this._loop;e=e||0,r=r||this.points.length-e;for(const o of i)s&=n(t,this,o,{start:e,end:e+r-1});return!!s}draw(t,e,r,i){const n=this.options||{};(this.points||[]).length&&n.borderWidth&&(t.save(),$g(t,this,r,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Hl(a,t,e,r){const i=a.options,{[e]:n}=a.getProps([e],r);return Math.abs(t-n)<i.radius+i.hitRadius}class tm extends Ge{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,r){const i=this.options,{x:n,y:s}=this.getProps(["x","y"],r);return Math.pow(t-n,2)+Math.pow(e-s,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,e){return Hl(this,t,"x",e)}inYRange(t,e){return Hl(this,t,"y",e)}getCenterPoint(t){const{x:e,y:r}=this.getProps(["x","y"],t);return{x:e,y:r}}size(t){t=t||this.options||{};let e=t.radius||0;e=Math.max(e,e&&t.hoverRadius||0);const r=e&&t.borderWidth||0;return(e+r)*2}draw(t,e){const r=this.options;this.skip||r.radius<.1||!ar(this,e,this.size(r)/2)||(t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.fillStyle=r.backgroundColor,As(t,r,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}function Ld(a,t){const{x:e,y:r,base:i,width:n,height:s}=a.getProps(["x","y","base","width","height"],t);let o,l,d,h,p;return a.horizontal?(p=s/2,o=Math.min(e,i),l=Math.max(e,i),d=r-p,h=r+p):(p=n/2,o=e-p,l=e+p,d=Math.min(r,i),h=Math.max(r,i)),{left:o,top:d,right:l,bottom:h}}function xr(a,t,e,r){return a?0:de(t,e,r)}function em(a,t,e){const r=a.options.borderWidth,i=a.borderSkipped,n=nd(r);return{t:xr(i.top,n.top,0,e),r:xr(i.right,n.right,0,t),b:xr(i.bottom,n.bottom,0,e),l:xr(i.left,n.left,0,t)}}function rm(a,t,e){const{enableBorderRadius:r}=a.getProps(["enableBorderRadius"]),i=a.options.borderRadius,n=kr(i),s=Math.min(t,e),o=a.borderSkipped,l=r||Lt(i);return{topLeft:xr(!l||o.top||o.left,n.topLeft,0,s),topRight:xr(!l||o.top||o.right,n.topRight,0,s),bottomLeft:xr(!l||o.bottom||o.left,n.bottomLeft,0,s),bottomRight:xr(!l||o.bottom||o.right,n.bottomRight,0,s)}}function am(a){const t=Ld(a),e=t.right-t.left,r=t.bottom-t.top,i=em(a,e/2,r/2),n=rm(a,e/2,r/2);return{outer:{x:t.left,y:t.top,w:e,h:r,radius:n},inner:{x:t.left+i.l,y:t.top+i.t,w:e-i.l-i.r,h:r-i.t-i.b,radius:{topLeft:Math.max(0,n.topLeft-Math.max(i.t,i.l)),topRight:Math.max(0,n.topRight-Math.max(i.t,i.r)),bottomLeft:Math.max(0,n.bottomLeft-Math.max(i.b,i.l)),bottomRight:Math.max(0,n.bottomRight-Math.max(i.b,i.r))}}}}function hs(a,t,e,r){const i=t===null,n=e===null,o=a&&!(i&&n)&&Ld(a,r);return o&&(i||er(t,o.left,o.right))&&(n||er(e,o.top,o.bottom))}function im(a){return a.topLeft||a.topRight||a.bottomLeft||a.bottomRight}function nm(a,t){a.rect(t.x,t.y,t.w,t.h)}function ps(a,t,e={}){const r=a.x!==e.x?-t:0,i=a.y!==e.y?-t:0,n=(a.x+a.w!==e.x+e.w?t:0)-r,s=(a.y+a.h!==e.y+e.h?t:0)-i;return{x:a.x+r,y:a.y+i,w:a.w+n,h:a.h+s,radius:a.radius}}class sm extends Ge{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:r,backgroundColor:i}}=this,{inner:n,outer:s}=am(this),o=im(s.radius)?wr:nm;t.save(),(s.w!==n.w||s.h!==n.h)&&(t.beginPath(),o(t,ps(s,e,n)),t.clip(),o(t,ps(n,-e,s)),t.fillStyle=r,t.fill("evenodd")),t.beginPath(),o(t,ps(n,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,r){return hs(this,t,e,r)}inXRange(t,e){return hs(this,t,null,e)}inYRange(t,e){return hs(this,null,t,e)}getCenterPoint(t){const{x:e,y:r,base:i,horizontal:n}=this.getProps(["x","y","base","horizontal"],t);return{x:n?(e+i)/2:e,y:n?r:(r+i)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}}var om=Object.freeze({__proto__:null,ArcElement:vn,BarElement:sm,LineElement:xn,PointElement:tm});const Ps=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Nl=Ps.map(a=>a.replace("rgb(","rgba(").replace(")",", 0.5)"));function Od(a){return Ps[a%Ps.length]}function Bd(a){return Nl[a%Nl.length]}function lm(a,t){return a.borderColor=Od(t),a.backgroundColor=Bd(t),++t}function cm(a,t){return a.backgroundColor=a.data.map(()=>Od(t++)),t}function dm(a,t){return a.backgroundColor=a.data.map(()=>Bd(t++)),t}function um(a){let t=0;return(e,r)=>{const i=a.getDatasetMeta(r).controller;i instanceof fa?t=cm(e,t):i instanceof wd?t=dm(e,t):i&&(t=lm(e,t))}}function ql(a){let t;for(t in a)if(a[t].borderColor||a[t].backgroundColor)return!0;return!1}function hm(a){return a&&(a.borderColor||a.backgroundColor)}function pm(){return Qt.borderColor!=="rgba(0,0,0,0.1)"||Qt.backgroundColor!=="rgba(0,0,0,0.1)"}var fm={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(a,t,e){if(!e.enabled)return;const{data:{datasets:r},options:i}=a.config,{elements:n}=i,s=ql(r)||hm(i)||n&&ql(n)||pm();if(!e.forceOverride&&s)return;const o=um(a);r.forEach(o)}};function gm(a,t,e,r,i){const n=i.samples||r;if(n>=e)return a.slice(t,t+e);const s=[],o=(e-2)/(n-2);let l=0;const d=t+e-1;let h=t,p,m,v,g,k;for(s[l++]=a[h],p=0;p<n-2;p++){let S=0,D=0,M;const I=Math.floor((p+1)*o)+1+t,W=Math.min(Math.floor((p+2)*o)+1,e)+t,H=W-I;for(M=I;M<W;M++)S+=a[M].x,D+=a[M].y;S/=H,D/=H;const X=Math.floor(p*o)+1+t,q=Math.min(Math.floor((p+1)*o)+1,e)+t,{x:w,y:C}=a[h];for(v=g=-1,M=X;M<q;M++)g=.5*Math.abs((w-S)*(a[M].y-C)-(w-a[M].x)*(D-C)),g>v&&(v=g,m=a[M],k=M);s[l++]=m,h=k}return s[l++]=a[d],s}function mm(a,t,e,r){let i=0,n=0,s,o,l,d,h,p,m,v,g,k;const S=[],D=t+e-1,M=a[t].x,W=a[D].x-M;for(s=t;s<t+e;++s){o=a[s],l=(o.x-M)/W*r,d=o.y;const H=l|0;if(H===h)d<g?(g=d,p=s):d>k&&(k=d,m=s),i=(n*i+o.x)/++n;else{const X=s-1;if(!Tt(p)&&!Tt(m)){const q=Math.min(p,m),w=Math.max(p,m);q!==v&&q!==X&&S.push({...a[q],x:i}),w!==v&&w!==X&&S.push({...a[w],x:i})}s>0&&X!==v&&S.push(a[X]),S.push(o),h=H,n=0,g=k=d,p=m=v=s}}return S}function Id(a){if(a._decimated){const t=a._data;delete a._decimated,delete a._data,Object.defineProperty(a,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function Wl(a){a.data.datasets.forEach(t=>{Id(t)})}function bm(a,t){const e=t.length;let r=0,i;const{iScale:n}=a,{min:s,max:o,minDefined:l,maxDefined:d}=n.getUserBounds();return l&&(r=de(rr(t,n.axis,s).lo,0,e-1)),d?i=de(rr(t,n.axis,o).hi+1,r,e)-r:i=e-r,{start:r,count:i}}var vm={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(a,t,e)=>{if(!e.enabled){Wl(a);return}const r=a.width;a.data.datasets.forEach((i,n)=>{const{_data:s,indexAxis:o}=i,l=a.getDatasetMeta(n),d=s||i.data;if(La([o,a.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;const h=a.scales[l.xAxisID];if(h.type!=="linear"&&h.type!=="time"||a.options.parsing)return;let{start:p,count:m}=bm(l,d);const v=e.threshold||4*r;if(m<=v){Id(i);return}Tt(s)&&(i._data=d,delete i.data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(k){this._data=k}}));let g;switch(e.algorithm){case"lttb":g=gm(d,p,m,r,e);break;case"min-max":g=mm(d,p,m,r);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}i._decimated=g})},destroy(a){Wl(a)}};function xm(a,t,e){const r=a.segments,i=a.points,n=t.points,s=[];for(const o of r){let{start:l,end:d}=o;d=yn(l,d,i);const h=Rs(e,i[l],i[d],o.loop);if(!t.segments){s.push({source:o,target:h,start:i[l],end:i[d]});continue}const p=md(t,h);for(const m of p){const v=Rs(e,n[m.start],n[m.end],m.loop),g=gd(o,i,v);for(const k of g)s.push({source:k,target:m,start:{[e]:Yl(h,v,"start",Math.max)},end:{[e]:Yl(h,v,"end",Math.min)}})}}return s}function Rs(a,t,e,r){if(r)return;let i=t[a],n=e[a];return a==="angle"&&(i=be(i),n=be(n)),{property:a,start:i,end:n}}function ym(a,t){const{x:e=null,y:r=null}=a||{},i=t.points,n=[];return t.segments.forEach(({start:s,end:o})=>{o=yn(s,o,i);const l=i[s],d=i[o];r!==null?(n.push({x:l.x,y:r}),n.push({x:d.x,y:r})):e!==null&&(n.push({x:e,y:l.y}),n.push({x:e,y:d.y}))}),n}function yn(a,t,e){for(;t>a;t--){const r=e[t];if(!isNaN(r.x)&&!isNaN(r.y))break}return t}function Yl(a,t,e,r){return a&&t?r(a[e],t[e]):a?a[e]:t?t[e]:0}function Fd(a,t){let e=[],r=!1;return _t(a)?(r=!0,e=a):e=ym(a,t),e.length?new xn({points:e,options:{tension:0},_loop:r,_fullLoop:r}):null}function Ul(a){return a&&a.fill!==!1}function wm(a,t,e){let i=a[t].fill;const n=[t];let s;if(!e)return i;for(;i!==!1&&n.indexOf(i)===-1;){if(!Zt(i))return i;if(s=a[i],!s)return!1;if(s.visible)return i;n.push(i),i=s.fill}return!1}function km(a,t,e){const r=Mm(a);if(Lt(r))return isNaN(r.value)?!1:r;let i=parseFloat(r);return Zt(i)&&Math.floor(i)===i?Cm(r[0],t,i,e):["origin","start","end","stack","shape"].indexOf(r)>=0&&r}function Cm(a,t,e,r){return(a==="-"||a==="+")&&(e=t+e),e===t||e<0||e>=r?!1:e}function Sm(a,t){let e=null;return a==="start"?e=t.bottom:a==="end"?e=t.top:Lt(a)?e=t.getPixelForValue(a.value):t.getBasePixel&&(e=t.getBasePixel()),e}function Am(a,t,e){let r;return a==="start"?r=e:a==="end"?r=t.options.reverse?t.min:t.max:Lt(a)?r=a.value:r=t.getBaseValue(),r}function Mm(a){const t=a.options,e=t.fill;let r=St(e&&e.target,e);return r===void 0&&(r=!!t.backgroundColor),r===!1||r===null?!1:r===!0?"origin":r}function Dm(a){const{scale:t,index:e,line:r}=a,i=[],n=r.segments,s=r.points,o=Em(t,e);o.push(Fd({x:null,y:t.bottom},r));for(let l=0;l<n.length;l++){const d=n[l];for(let h=d.start;h<=d.end;h++)Pm(i,s[h],o)}return new xn({points:i,options:{}})}function Em(a,t){const e=[],r=a.getMatchingVisibleMetas("line");for(let i=0;i<r.length;i++){const n=r[i];if(n.index===t)break;n.hidden||e.unshift(n.dataset)}return e}function Pm(a,t,e){const r=[];for(let i=0;i<e.length;i++){const n=e[i],{first:s,last:o,point:l}=Rm(n,t,"x");if(!(!l||s&&o)){if(s)r.unshift(l);else if(a.push(l),!o)break}}a.push(...r)}function Rm(a,t,e){const r=a.interpolate(t,e);if(!r)return{};const i=r[e],n=a.segments,s=a.points;let o=!1,l=!1;for(let d=0;d<n.length;d++){const h=n[d],p=s[h.start][e],m=s[h.end][e];if(er(i,p,m)){o=i===p,l=i===m;break}}return{first:o,last:l,point:r}}class Vd{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,r){const{x:i,y:n,radius:s}=this;return e=e||{start:0,end:Xt},t.arc(i,n,s,e.end,e.start,!0),!r.bounds}interpolate(t){const{x:e,y:r,radius:i}=this,n=t.angle;return{x:e+Math.cos(n)*i,y:r+Math.sin(n)*i,angle:n}}}function zm(a){const{chart:t,fill:e,line:r}=a;if(Zt(e))return Tm(t,e);if(e==="stack")return Dm(a);if(e==="shape")return!0;const i=Lm(a);return i instanceof Vd?i:Fd(i,r)}function Tm(a,t){const e=a.getDatasetMeta(t);return e&&a.isDatasetVisible(t)?e.dataset:null}function Lm(a){return(a.scale||{}).getPointPositionForValue?Bm(a):Om(a)}function Om(a){const{scale:t={},fill:e}=a,r=Sm(e,t);if(Zt(r)){const i=t.isHorizontal();return{x:i?r:null,y:i?null:r}}return null}function Bm(a){const{scale:t,fill:e}=a,r=t.options,i=t.getLabels().length,n=r.reverse?t.max:t.min,s=Am(e,t,n),o=[];if(r.grid.circular){const l=t.getPointPositionForValue(0,n);return new Vd({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(s)})}for(let l=0;l<i;++l)o.push(t.getPointPositionForValue(l,s));return o}function fs(a,t,e){const r=zm(t),{chart:i,index:n,line:s,scale:o,axis:l}=t,d=s.options,h=d.fill,p=d.backgroundColor,{above:m=p,below:v=p}=h||{},g=i.getDatasetMeta(n),k=bd(i,g);r&&s.points.length&&(fn(a,e),Im(a,{line:s,target:r,above:m,below:v,area:e,scale:o,axis:l,clip:k}),gn(a))}function Im(a,t){const{line:e,target:r,above:i,below:n,area:s,scale:o,clip:l}=t,d=e._loop?"angle":t.axis;a.save();let h=n;n!==i&&(d==="x"?(Gl(a,r,s.top),gs(a,{line:e,target:r,color:i,scale:o,property:d,clip:l}),a.restore(),a.save(),Gl(a,r,s.bottom)):d==="y"&&(Xl(a,r,s.left),gs(a,{line:e,target:r,color:n,scale:o,property:d,clip:l}),a.restore(),a.save(),Xl(a,r,s.right),h=i)),gs(a,{line:e,target:r,color:h,scale:o,property:d,clip:l}),a.restore()}function Gl(a,t,e){const{segments:r,points:i}=t;let n=!0,s=!1;a.beginPath();for(const o of r){const{start:l,end:d}=o,h=i[l],p=i[yn(l,d,i)];n?(a.moveTo(h.x,h.y),n=!1):(a.lineTo(h.x,e),a.lineTo(h.x,h.y)),s=!!t.pathSegment(a,o,{move:s}),s?a.closePath():a.lineTo(p.x,e)}a.lineTo(t.first().x,e),a.closePath(),a.clip()}function Xl(a,t,e){const{segments:r,points:i}=t;let n=!0,s=!1;a.beginPath();for(const o of r){const{start:l,end:d}=o,h=i[l],p=i[yn(l,d,i)];n?(a.moveTo(h.x,h.y),n=!1):(a.lineTo(e,h.y),a.lineTo(h.x,h.y)),s=!!t.pathSegment(a,o,{move:s}),s?a.closePath():a.lineTo(e,p.y)}a.lineTo(e,t.first().y),a.closePath(),a.clip()}function gs(a,t){const{line:e,target:r,property:i,color:n,scale:s,clip:o}=t,l=xm(e,r,i);for(const{source:d,target:h,start:p,end:m}of l){const{style:{backgroundColor:v=n}={}}=d,g=r!==!0;a.save(),a.fillStyle=v,Fm(a,s,o,g&&Rs(i,p,m)),a.beginPath();const k=!!e.pathSegment(a,d);let S;if(g){k?a.closePath():Kl(a,r,m,i);const D=!!r.pathSegment(a,h,{move:k,reverse:!0});S=k&&D,S||Kl(a,r,p,i)}a.closePath(),a.fill(S?"evenodd":"nonzero"),a.restore()}}function Fm(a,t,e,r){const i=t.chart.chartArea,{property:n,start:s,end:o}=r||{};if(n==="x"||n==="y"){let l,d,h,p;n==="x"?(l=s,d=i.top,h=o,p=i.bottom):(l=i.left,d=s,h=i.right,p=o),a.beginPath(),e&&(l=Math.max(l,e.left),h=Math.min(h,e.right),d=Math.max(d,e.top),p=Math.min(p,e.bottom)),a.rect(l,d,h-l,p-d),a.clip()}}function Kl(a,t,e,r){const i=t.interpolate(e,r);i&&a.lineTo(i.x,i.y)}var Vm={id:"filler",afterDatasetsUpdate(a,t,e){const r=(a.data.datasets||[]).length,i=[];let n,s,o,l;for(s=0;s<r;++s)n=a.getDatasetMeta(s),o=n.dataset,l=null,o&&o.options&&o instanceof xn&&(l={visible:a.isDatasetVisible(s),index:s,fill:km(o,s,r),chart:a,axis:n.controller.options.indexAxis,scale:n.vScale,line:o}),n.$filler=l,i.push(l);for(s=0;s<r;++s)l=i[s],!(!l||l.fill===!1)&&(l.fill=wm(i,s,e.propagate))},beforeDraw(a,t,e){const r=e.drawTime==="beforeDraw",i=a.getSortedVisibleDatasetMetas(),n=a.chartArea;for(let s=i.length-1;s>=0;--s){const o=i[s].$filler;o&&(o.line.updateControlPoints(n,o.axis),r&&o.fill&&fs(a.ctx,o,n))}},beforeDatasetsDraw(a,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;const r=a.getSortedVisibleDatasetMetas();for(let i=r.length-1;i>=0;--i){const n=r[i].$filler;Ul(n)&&fs(a.ctx,n,a.chartArea)}},beforeDatasetDraw(a,t,e){const r=t.meta.$filler;!Ul(r)||e.drawTime!=="beforeDatasetDraw"||fs(a.ctx,r,a.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const _l=(a,t)=>{let{boxHeight:e=t,boxWidth:r=t}=a;return a.usePointStyle&&(e=Math.min(e,t),r=a.pointStyleWidth||Math.min(r,t)),{boxWidth:r,boxHeight:e,itemHeight:Math.max(t,e)}},jm=(a,t)=>a!==null&&t!==null&&a.datasetIndex===t.datasetIndex&&a.index===t.index;class Ql extends Ge{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,r){this.maxWidth=t,this.maxHeight=e,this._margins=r,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=Wt(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(r=>t.filter(r,this.chart.data))),t.sort&&(e=e.sort((r,i)=>t.sort(r,i,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}const r=t.labels,i=ne(r.font),n=i.size,s=this._computeTitleHeight(),{boxWidth:o,itemHeight:l}=_l(r,n);let d,h;e.font=i.string,this.isHorizontal()?(d=this.maxWidth,h=this._fitRows(s,n,o,l)+10):(h=this.maxHeight,d=this._fitCols(s,i,o,l)+10),this.width=Math.min(d,t.maxWidth||this.maxWidth),this.height=Math.min(h,t.maxHeight||this.maxHeight)}_fitRows(t,e,r,i){const{ctx:n,maxWidth:s,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],d=this.lineWidths=[0],h=i+o;let p=t;n.textAlign="left",n.textBaseline="middle";let m=-1,v=-h;return this.legendItems.forEach((g,k)=>{const S=r+e/2+n.measureText(g.text).width;(k===0||d[d.length-1]+S+2*o>s)&&(p+=h,d[d.length-(k>0?0:1)]=0,v+=h,m++),l[k]={left:0,top:v,row:m,width:S,height:i},d[d.length-1]+=S+o}),p}_fitCols(t,e,r,i){const{ctx:n,maxHeight:s,options:{labels:{padding:o}}}=this,l=this.legendHitBoxes=[],d=this.columnSizes=[],h=s-t;let p=o,m=0,v=0,g=0,k=0;return this.legendItems.forEach((S,D)=>{const{itemWidth:M,itemHeight:I}=Hm(r,e,n,S,i);D>0&&v+I+2*o>h&&(p+=m+o,d.push({width:m,height:v}),g+=m+o,k++,m=v=0),l[D]={left:g,top:v,col:k,width:M,height:I},m=Math.max(m,M),v+=I+o}),p+=m,d.push({width:m,height:v}),p}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:r,labels:{padding:i},rtl:n}}=this,s=oa(n,this.left,this.width);if(this.isHorizontal()){let o=0,l=me(r,this.left+i,this.right-this.lineWidths[o]);for(const d of e)o!==d.row&&(o=d.row,l=me(r,this.left+i,this.right-this.lineWidths[o])),d.top+=this.top+t+i,d.left=s.leftForLtr(s.x(l),d.width),l+=d.width+i}else{let o=0,l=me(r,this.top+t+i,this.bottom-this.columnSizes[o].height);for(const d of e)d.col!==o&&(o=d.col,l=me(r,this.top+t+i,this.bottom-this.columnSizes[o].height)),d.top=l,d.left+=this.left+i,d.left=s.leftForLtr(s.x(d.left),d.width),l+=d.height+i}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const t=this.ctx;fn(t,this),this._draw(),gn(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:r,ctx:i}=this,{align:n,labels:s}=t,o=Qt.color,l=oa(t.rtl,this.left,this.width),d=ne(s.font),{padding:h}=s,p=d.size,m=p/2;let v;this.drawTitle(),i.textAlign=l.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=d.string;const{boxWidth:g,boxHeight:k,itemHeight:S}=_l(s,p),D=function(X,q,w){if(isNaN(g)||g<=0||isNaN(k)||k<0)return;i.save();const C=St(w.lineWidth,1);if(i.fillStyle=St(w.fillStyle,o),i.lineCap=St(w.lineCap,"butt"),i.lineDashOffset=St(w.lineDashOffset,0),i.lineJoin=St(w.lineJoin,"miter"),i.lineWidth=C,i.strokeStyle=St(w.strokeStyle,o),i.setLineDash(St(w.lineDash,[])),s.usePointStyle){const L={radius:k*Math.SQRT2/2,pointStyle:w.pointStyle,rotation:w.rotation,borderWidth:C},Y=l.xPlus(X,g/2),K=q+m;id(i,L,Y,K,s.pointStyleWidth&&g)}else{const L=q+Math.max((p-k)/2,0),Y=l.leftForLtr(X,g),K=kr(w.borderRadius);i.beginPath(),Object.values(K).some(tt=>tt!==0)?wr(i,{x:Y,y:L,w:g,h:k,radius:K}):i.rect(Y,L,g,k),i.fill(),C!==0&&i.stroke()}i.restore()},M=function(X,q,w){Ur(i,w.text,X,q+S/2,d,{strikethrough:w.hidden,textAlign:l.textAlign(w.textAlign)})},I=this.isHorizontal(),W=this._computeTitleHeight();I?v={x:me(n,this.left+h,this.right-r[0]),y:this.top+h+W,line:0}:v={x:this.left+h,y:me(n,this.top+W+h,this.bottom-e[0].height),line:0},hd(this.ctx,t.textDirection);const H=S+h;this.legendItems.forEach((X,q)=>{i.strokeStyle=X.fontColor,i.fillStyle=X.fontColor;const w=i.measureText(X.text).width,C=l.textAlign(X.textAlign||(X.textAlign=s.textAlign)),L=g+m+w;let Y=v.x,K=v.y;l.setWidth(this.width),I?q>0&&Y+L+h>this.right&&(K=v.y+=H,v.line++,Y=v.x=me(n,this.left+h,this.right-r[v.line])):q>0&&K+H>this.bottom&&(Y=v.x=Y+e[v.line].width+h,v.line++,K=v.y=me(n,this.top+W+h,this.bottom-e[v.line].height));const tt=l.x(Y);if(D(tt,K,X),Y=Qp(C,Y+g+m,I?Y+L:this.right,t.rtl),M(l.x(Y),K,X),I)v.x+=L+h;else if(typeof X.text!="string"){const ht=d.lineHeight;v.y+=jd(X,ht)+h}else v.y+=H}),pd(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,r=ne(e.font),i=ye(e.padding);if(!e.display)return;const n=oa(t.rtl,this.left,this.width),s=this.ctx,o=e.position,l=r.size/2,d=i.top+l;let h,p=this.left,m=this.width;if(this.isHorizontal())m=Math.max(...this.lineWidths),h=this.top+d,p=me(t.align,p,this.right-m);else{const g=this.columnSizes.reduce((k,S)=>Math.max(k,S.height),0);h=d+me(t.align,this.top,this.bottom-g-t.labels.padding-this._computeTitleHeight())}const v=me(o,p,p+m);s.textAlign=n.textAlign(Us(o)),s.textBaseline="middle",s.strokeStyle=e.color,s.fillStyle=e.color,s.font=r.string,Ur(s,e.text,v,h,r)}_computeTitleHeight(){const t=this.options.title,e=ne(t.font),r=ye(t.padding);return t.display?e.lineHeight+r.height:0}_getLegendItemAt(t,e){let r,i,n;if(er(t,this.left,this.right)&&er(e,this.top,this.bottom)){for(n=this.legendHitBoxes,r=0;r<n.length;++r)if(i=n[r],er(t,i.left,i.left+i.width)&&er(e,i.top,i.top+i.height))return this.legendItems[r]}return null}handleEvent(t){const e=this.options;if(!Wm(t.type,e))return;const r=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){const i=this._hoveredItem,n=jm(i,r);i&&!n&&Wt(e.onLeave,[t,i,this],this),this._hoveredItem=r,r&&!n&&Wt(e.onHover,[t,r,this],this)}else r&&Wt(e.onClick,[t,r,this],this)}}function Hm(a,t,e,r,i){const n=Nm(r,a,t,e),s=qm(i,r,t.lineHeight);return{itemWidth:n,itemHeight:s}}function Nm(a,t,e,r){let i=a.text;return i&&typeof i!="string"&&(i=i.reduce((n,s)=>n.length>s.length?n:s)),t+e.size/2+r.measureText(i).width}function qm(a,t,e){let r=a;return typeof t.text!="string"&&(r=jd(t,e)),r}function jd(a,t){const e=a.text?a.text.length:0;return t*e}function Wm(a,t){return!!((a==="mousemove"||a==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(a==="click"||a==="mouseup"))}var Ym={id:"legend",_element:Ql,start(a,t,e){const r=a.legend=new Ql({ctx:a.ctx,options:e,chart:a});xe.configure(a,r,e),xe.addBox(a,r)},stop(a){xe.removeBox(a,a.legend),delete a.legend},beforeUpdate(a,t,e){const r=a.legend;xe.configure(a,r,e),r.options=e},afterUpdate(a){const t=a.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(a,t){t.replay||a.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(a,t,e){const r=t.datasetIndex,i=e.chart;i.isDatasetVisible(r)?(i.hide(r),t.hidden=!0):(i.show(r),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:a=>a.chart.options.color,boxWidth:40,padding:10,generateLabels(a){const t=a.data.datasets,{labels:{usePointStyle:e,pointStyle:r,textAlign:i,color:n,useBorderRadius:s,borderRadius:o}}=a.legend.options;return a._getSortedDatasetMetas().map(l=>{const d=l.controller.getStyle(e?0:void 0),h=ye(d.borderWidth);return{text:t[l.index].label,fillStyle:d.backgroundColor,fontColor:n,hidden:!l.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(h.width+h.height)/4,strokeStyle:d.borderColor,pointStyle:r||d.pointStyle,rotation:d.rotation,textAlign:i||d.textAlign,borderRadius:s&&(o||d.borderRadius),datasetIndex:l.index}},this)}},title:{color:a=>a.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:a=>!a.startsWith("on"),labels:{_scriptable:a=>!["generateLabels","filter","sort"].includes(a)}}};class to extends Ge{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const r=this.options;if(this.left=0,this.top=0,!r.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;const i=_t(r.text)?r.text.length:1;this._padding=ye(r.padding);const n=i*ne(r.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=n:this.width=n}isHorizontal(){const t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){const{top:e,left:r,bottom:i,right:n,options:s}=this,o=s.align;let l=0,d,h,p;return this.isHorizontal()?(h=me(o,r,n),p=e+t,d=n-r):(s.position==="left"?(h=r+t,p=me(o,i,e),l=Ft*-.5):(h=n-t,p=me(o,e,i),l=Ft*.5),d=i-e),{titleX:h,titleY:p,maxWidth:d,rotation:l}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const r=ne(e.font),n=r.lineHeight/2+this._padding.top,{titleX:s,titleY:o,maxWidth:l,rotation:d}=this._drawArgs(n);Ur(t,e.text,0,0,r,{color:e.color,maxWidth:l,rotation:d,textAlign:Us(e.align),textBaseline:"middle",translation:[s,o]})}}function Um(a,t){const e=new to({ctx:a.ctx,options:t,chart:a});xe.configure(a,e,t),xe.addBox(a,e),a.titleBlock=e}var Gm={id:"title",_element:to,start(a,t,e){Um(a,e)},stop(a){const t=a.titleBlock;xe.removeBox(a,t),delete a.titleBlock},beforeUpdate(a,t,e){const r=a.titleBlock;xe.configure(a,r,e),r.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Oi=new WeakMap;var Xm={id:"subtitle",start(a,t,e){const r=new to({ctx:a.ctx,options:e,chart:a});xe.configure(a,r,e),xe.addBox(a,r),Oi.set(a,r)},stop(a){xe.removeBox(a,Oi.get(a)),Oi.delete(a)},beforeUpdate(a,t,e){const r=Oi.get(a);xe.configure(a,r,e),r.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ba={average(a){if(!a.length)return!1;let t,e,r=new Set,i=0,n=0;for(t=0,e=a.length;t<e;++t){const o=a[t].element;if(o&&o.hasValue()){const l=o.tooltipPosition();r.add(l.x),i+=l.y,++n}}return n===0||r.size===0?!1:{x:[...r].reduce((o,l)=>o+l)/r.size,y:i/n}},nearest(a,t){if(!a.length)return!1;let e=t.x,r=t.y,i=Number.POSITIVE_INFINITY,n,s,o;for(n=0,s=a.length;n<s;++n){const l=a[n].element;if(l&&l.hasValue()){const d=l.getCenterPoint(),h=Cs(t,d);h<i&&(i=h,o=l)}}if(o){const l=o.tooltipPosition();e=l.x,r=l.y}return{x:e,y:r}}};function We(a,t){return t&&(_t(t)?Array.prototype.push.apply(a,t):a.push(t)),a}function $e(a){return(typeof a=="string"||a instanceof String)&&a.indexOf(`
`)>-1?a.split(`
`):a}function Km(a,t){const{element:e,datasetIndex:r,index:i}=t,n=a.getDatasetMeta(r).controller,{label:s,value:o}=n.getLabelAndValue(i);return{chart:a,label:s,parsed:n.getParsed(i),raw:a.data.datasets[r].data[i],formattedValue:o,dataset:n.getDataset(),dataIndex:i,datasetIndex:r,element:e}}function Jl(a,t){const e=a.chart.ctx,{body:r,footer:i,title:n}=a,{boxWidth:s,boxHeight:o}=t,l=ne(t.bodyFont),d=ne(t.titleFont),h=ne(t.footerFont),p=n.length,m=i.length,v=r.length,g=ye(t.padding);let k=g.height,S=0,D=r.reduce((W,H)=>W+H.before.length+H.lines.length+H.after.length,0);if(D+=a.beforeBody.length+a.afterBody.length,p&&(k+=p*d.lineHeight+(p-1)*t.titleSpacing+t.titleMarginBottom),D){const W=t.displayColors?Math.max(o,l.lineHeight):l.lineHeight;k+=v*W+(D-v)*l.lineHeight+(D-1)*t.bodySpacing}m&&(k+=t.footerMarginTop+m*h.lineHeight+(m-1)*t.footerSpacing);let M=0;const I=function(W){S=Math.max(S,e.measureText(W).width+M)};return e.save(),e.font=d.string,jt(a.title,I),e.font=l.string,jt(a.beforeBody.concat(a.afterBody),I),M=t.displayColors?s+2+t.boxPadding:0,jt(r,W=>{jt(W.before,I),jt(W.lines,I),jt(W.after,I)}),M=0,e.font=h.string,jt(a.footer,I),e.restore(),S+=g.width,{width:S,height:k}}function _m(a,t){const{y:e,height:r}=t;return e<r/2?"top":e>a.height-r/2?"bottom":"center"}function Qm(a,t,e,r){const{x:i,width:n}=r,s=e.caretSize+e.caretPadding;if(a==="left"&&i+n+s>t.width||a==="right"&&i-n-s<0)return!0}function Jm(a,t,e,r){const{x:i,width:n}=e,{width:s,chartArea:{left:o,right:l}}=a;let d="center";return r==="center"?d=i<=(o+l)/2?"left":"right":i<=n/2?d="left":i>=s-n/2&&(d="right"),Qm(d,a,t,e)&&(d="center"),d}function Zl(a,t,e){const r=e.yAlign||t.yAlign||_m(a,e);return{xAlign:e.xAlign||t.xAlign||Jm(a,t,e,r),yAlign:r}}function Zm(a,t){let{x:e,width:r}=a;return t==="right"?e-=r:t==="center"&&(e-=r/2),e}function $m(a,t,e){let{y:r,height:i}=a;return t==="top"?r+=e:t==="bottom"?r-=i+e:r-=i/2,r}function $l(a,t,e,r){const{caretSize:i,caretPadding:n,cornerRadius:s}=a,{xAlign:o,yAlign:l}=e,d=i+n,{topLeft:h,topRight:p,bottomLeft:m,bottomRight:v}=kr(s);let g=Zm(t,o);const k=$m(t,l,d);return l==="center"?o==="left"?g+=d:o==="right"&&(g-=d):o==="left"?g-=Math.max(h,m)+i:o==="right"&&(g+=Math.max(p,v)+i),{x:de(g,0,r.width-t.width),y:de(k,0,r.height-t.height)}}function Bi(a,t,e){const r=ye(e.padding);return t==="center"?a.x+a.width/2:t==="right"?a.x+a.width-r.right:a.x+r.left}function tc(a){return We([],$e(a))}function tb(a,t,e){return Ar(a,{tooltip:t,tooltipItems:e,type:"tooltip"})}function ec(a,t){const e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?a.override(e):a}const Hd={beforeTitle:Je,title(a){if(a.length>0){const t=a[0],e=t.chart.data.labels,r=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(r>0&&t.dataIndex<r)return e[t.dataIndex]}return""},afterTitle:Je,beforeBody:Je,beforeLabel:Je,label(a){if(this&&this.options&&this.options.mode==="dataset")return a.label+": "+a.formattedValue||a.formattedValue;let t=a.dataset.label||"";t&&(t+=": ");const e=a.formattedValue;return Tt(e)||(t+=e),t},labelColor(a){const e=a.chart.getDatasetMeta(a.datasetIndex).controller.getStyle(a.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(a){const e=a.chart.getDatasetMeta(a.datasetIndex).controller.getStyle(a.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:Je,afterBody:Je,beforeFooter:Je,footer:Je,afterFooter:Je};function Ce(a,t,e,r){const i=a[t].call(e,r);return typeof i>"u"?Hd[t].call(e,r):i}class rc extends Ge{static positioners=Ba;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,r=this.options.setContext(this.getContext()),i=r.enabled&&e.options.animation&&r.animations,n=new vd(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(n)),n}getContext(){return this.$context||(this.$context=tb(this.chart.getContext(),this,this._tooltipItems))}getTitle(t,e){const{callbacks:r}=e,i=Ce(r,"beforeTitle",this,t),n=Ce(r,"title",this,t),s=Ce(r,"afterTitle",this,t);let o=[];return o=We(o,$e(i)),o=We(o,$e(n)),o=We(o,$e(s)),o}getBeforeBody(t,e){return tc(Ce(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:r}=e,i=[];return jt(t,n=>{const s={before:[],lines:[],after:[]},o=ec(r,n);We(s.before,$e(Ce(o,"beforeLabel",this,n))),We(s.lines,Ce(o,"label",this,n)),We(s.after,$e(Ce(o,"afterLabel",this,n))),i.push(s)}),i}getAfterBody(t,e){return tc(Ce(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:r}=e,i=Ce(r,"beforeFooter",this,t),n=Ce(r,"footer",this,t),s=Ce(r,"afterFooter",this,t);let o=[];return o=We(o,$e(i)),o=We(o,$e(n)),o=We(o,$e(s)),o}_createItems(t){const e=this._active,r=this.chart.data,i=[],n=[],s=[];let o=[],l,d;for(l=0,d=e.length;l<d;++l)o.push(Km(this.chart,e[l]));return t.filter&&(o=o.filter((h,p,m)=>t.filter(h,p,m,r))),t.itemSort&&(o=o.sort((h,p)=>t.itemSort(h,p,r))),jt(o,h=>{const p=ec(t.callbacks,h);i.push(Ce(p,"labelColor",this,h)),n.push(Ce(p,"labelPointStyle",this,h)),s.push(Ce(p,"labelTextColor",this,h))}),this.labelColors=i,this.labelPointStyles=n,this.labelTextColors=s,this.dataPoints=o,o}update(t,e){const r=this.options.setContext(this.getContext()),i=this._active;let n,s=[];if(!i.length)this.opacity!==0&&(n={opacity:0});else{const o=Ba[r.position].call(this,i,this._eventPosition);s=this._createItems(r),this.title=this.getTitle(s,r),this.beforeBody=this.getBeforeBody(s,r),this.body=this.getBody(s,r),this.afterBody=this.getAfterBody(s,r),this.footer=this.getFooter(s,r);const l=this._size=Jl(this,r),d=Object.assign({},o,l),h=Zl(this.chart,r,d),p=$l(r,d,h,this.chart);this.xAlign=h.xAlign,this.yAlign=h.yAlign,n={opacity:1,x:p.x,y:p.y,width:l.width,height:l.height,caretX:o.x,caretY:o.y}}this._tooltipItems=s,this.$context=void 0,n&&this._resolveAnimations().update(this,n),t&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,r,i){const n=this.getCaretPosition(t,r,i);e.lineTo(n.x1,n.y1),e.lineTo(n.x2,n.y2),e.lineTo(n.x3,n.y3)}getCaretPosition(t,e,r){const{xAlign:i,yAlign:n}=this,{caretSize:s,cornerRadius:o}=r,{topLeft:l,topRight:d,bottomLeft:h,bottomRight:p}=kr(o),{x:m,y:v}=t,{width:g,height:k}=e;let S,D,M,I,W,H;return n==="center"?(W=v+k/2,i==="left"?(S=m,D=S-s,I=W+s,H=W-s):(S=m+g,D=S+s,I=W-s,H=W+s),M=S):(i==="left"?D=m+Math.max(l,h)+s:i==="right"?D=m+g-Math.max(d,p)-s:D=this.caretX,n==="top"?(I=v,W=I-s,S=D-s,M=D+s):(I=v+k,W=I+s,S=D+s,M=D-s),H=I),{x1:S,x2:D,x3:M,y1:I,y2:W,y3:H}}drawTitle(t,e,r){const i=this.title,n=i.length;let s,o,l;if(n){const d=oa(r.rtl,this.x,this.width);for(t.x=Bi(this,r.titleAlign,r),e.textAlign=d.textAlign(r.titleAlign),e.textBaseline="middle",s=ne(r.titleFont),o=r.titleSpacing,e.fillStyle=r.titleColor,e.font=s.string,l=0;l<n;++l)e.fillText(i[l],d.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+o,l+1===n&&(t.y+=r.titleMarginBottom-o)}}_drawColorBox(t,e,r,i,n){const s=this.labelColors[r],o=this.labelPointStyles[r],{boxHeight:l,boxWidth:d}=n,h=ne(n.bodyFont),p=Bi(this,"left",n),m=i.x(p),v=l<h.lineHeight?(h.lineHeight-l)/2:0,g=e.y+v;if(n.usePointStyle){const k={radius:Math.min(d,l)/2,pointStyle:o.pointStyle,rotation:o.rotation,borderWidth:1},S=i.leftForLtr(m,d)+d/2,D=g+l/2;t.strokeStyle=n.multiKeyBackground,t.fillStyle=n.multiKeyBackground,As(t,k,S,D),t.strokeStyle=s.borderColor,t.fillStyle=s.backgroundColor,As(t,k,S,D)}else{t.lineWidth=Lt(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,t.strokeStyle=s.borderColor,t.setLineDash(s.borderDash||[]),t.lineDashOffset=s.borderDashOffset||0;const k=i.leftForLtr(m,d),S=i.leftForLtr(i.xPlus(m,1),d-2),D=kr(s.borderRadius);Object.values(D).some(M=>M!==0)?(t.beginPath(),t.fillStyle=n.multiKeyBackground,wr(t,{x:k,y:g,w:d,h:l,radius:D}),t.fill(),t.stroke(),t.fillStyle=s.backgroundColor,t.beginPath(),wr(t,{x:S,y:g+1,w:d-2,h:l-2,radius:D}),t.fill()):(t.fillStyle=n.multiKeyBackground,t.fillRect(k,g,d,l),t.strokeRect(k,g,d,l),t.fillStyle=s.backgroundColor,t.fillRect(S,g+1,d-2,l-2))}t.fillStyle=this.labelTextColors[r]}drawBody(t,e,r){const{body:i}=this,{bodySpacing:n,bodyAlign:s,displayColors:o,boxHeight:l,boxWidth:d,boxPadding:h}=r,p=ne(r.bodyFont);let m=p.lineHeight,v=0;const g=oa(r.rtl,this.x,this.width),k=function(w){e.fillText(w,g.x(t.x+v),t.y+m/2),t.y+=m+n},S=g.textAlign(s);let D,M,I,W,H,X,q;for(e.textAlign=s,e.textBaseline="middle",e.font=p.string,t.x=Bi(this,S,r),e.fillStyle=r.bodyColor,jt(this.beforeBody,k),v=o&&S!=="right"?s==="center"?d/2+h:d+2+h:0,W=0,X=i.length;W<X;++W){for(D=i[W],M=this.labelTextColors[W],e.fillStyle=M,jt(D.before,k),I=D.lines,o&&I.length&&(this._drawColorBox(e,t,W,g,r),m=Math.max(p.lineHeight,l)),H=0,q=I.length;H<q;++H)k(I[H]),m=p.lineHeight;jt(D.after,k)}v=0,m=p.lineHeight,jt(this.afterBody,k),t.y-=n}drawFooter(t,e,r){const i=this.footer,n=i.length;let s,o;if(n){const l=oa(r.rtl,this.x,this.width);for(t.x=Bi(this,r.footerAlign,r),t.y+=r.footerMarginTop,e.textAlign=l.textAlign(r.footerAlign),e.textBaseline="middle",s=ne(r.footerFont),e.fillStyle=r.footerColor,e.font=s.string,o=0;o<n;++o)e.fillText(i[o],l.x(t.x),t.y+s.lineHeight/2),t.y+=s.lineHeight+r.footerSpacing}}drawBackground(t,e,r,i){const{xAlign:n,yAlign:s}=this,{x:o,y:l}=t,{width:d,height:h}=r,{topLeft:p,topRight:m,bottomLeft:v,bottomRight:g}=kr(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(o+p,l),s==="top"&&this.drawCaret(t,e,r,i),e.lineTo(o+d-m,l),e.quadraticCurveTo(o+d,l,o+d,l+m),s==="center"&&n==="right"&&this.drawCaret(t,e,r,i),e.lineTo(o+d,l+h-g),e.quadraticCurveTo(o+d,l+h,o+d-g,l+h),s==="bottom"&&this.drawCaret(t,e,r,i),e.lineTo(o+v,l+h),e.quadraticCurveTo(o,l+h,o,l+h-v),s==="center"&&n==="left"&&this.drawCaret(t,e,r,i),e.lineTo(o,l+p),e.quadraticCurveTo(o,l,o+p,l),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,r=this.$animations,i=r&&r.x,n=r&&r.y;if(i||n){const s=Ba[t.position].call(this,this._active,this._eventPosition);if(!s)return;const o=this._size=Jl(this,t),l=Object.assign({},s,this._size),d=Zl(e,t,l),h=$l(t,l,d,e);(i._to!==h.x||n._to!==h.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=o.width,this.height=o.height,this.caretX=s.x,this.caretY=s.y,this._resolveAnimations().update(this,h))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let r=this.opacity;if(!r)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},n={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;const s=ye(e.padding),o=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&o&&(t.save(),t.globalAlpha=r,this.drawBackground(n,t,i,e),hd(t,e.textDirection),n.y+=s.top,this.drawTitle(n,t,e),this.drawBody(n,t,e),this.drawFooter(n,t,e),pd(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const r=this._active,i=t.map(({datasetIndex:o,index:l})=>{const d=this.chart.getDatasetMeta(o);if(!d)throw new Error("Cannot find a dataset at index "+o);return{datasetIndex:o,element:d.data[l],index:l}}),n=!$i(r,i),s=this._positionChanged(i,e);(n||s)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,r=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,n=this._active||[],s=this._getActiveElements(t,n,e,r),o=this._positionChanged(s,t),l=e||!$i(s,n)||o;return l&&(this._active=s,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),l}_getActiveElements(t,e,r,i){const n=this.options;if(t.type==="mouseout")return[];if(!i)return e.filter(o=>this.chart.data.datasets[o.datasetIndex]&&this.chart.getDatasetMeta(o.datasetIndex).controller.getParsed(o.index)!==void 0);const s=this.chart.getElementsAtEventForMode(t,n.mode,n,r);return n.reverse&&s.reverse(),s}_positionChanged(t,e){const{caretX:r,caretY:i,options:n}=this,s=Ba[n.position].call(this,t,e);return s!==!1&&(r!==s.x||i!==s.y)}}var Nd={id:"tooltip",_element:rc,positioners:Ba,afterInit(a,t,e){e&&(a.tooltip=new rc({chart:a,options:e}))},beforeUpdate(a,t,e){a.tooltip&&a.tooltip.initialize(e)},reset(a,t,e){a.tooltip&&a.tooltip.initialize(e)},afterDraw(a){const t=a.tooltip;if(t&&t._willRender()){const e={tooltip:t};if(a.notifyPlugins("beforeTooltipDraw",{...e,cancelable:!0})===!1)return;t.draw(a.ctx),a.notifyPlugins("afterTooltipDraw",e)}},afterEvent(a,t){if(a.tooltip){const e=t.replay;a.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(a,t)=>t.bodyFont.size,boxWidth:(a,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Hd},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:a=>a!=="filter"&&a!=="itemSort"&&a!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},eb=Object.freeze({__proto__:null,Colors:fm,Decimation:vm,Filler:Vm,Legend:Ym,SubTitle:Xm,Title:Gm,Tooltip:Nd});const rb=(a,t,e,r)=>(typeof t=="string"?(e=a.push(t)-1,r.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function ab(a,t,e,r){const i=a.indexOf(t);if(i===-1)return rb(a,t,e,r);const n=a.lastIndexOf(t);return i!==n?e:i}const ib=(a,t)=>a===null?null:de(Math.round(a),0,t);function ac(a){const t=this.getLabels();return a>=0&&a<t.length?t[a]:a}class nb extends Gr{static id="category";static defaults={ticks:{callback:ac}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const r=this.getLabels();for(const{index:i,label:n}of e)r[i]===n&&r.splice(i,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(Tt(t))return null;const r=this.getLabels();return e=isFinite(e)&&r[e]===t?e:ab(r,t,St(e,t),this._addedLabels),ib(e,r.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:r,max:i}=this.getMinMax(!0);this.options.bounds==="ticks"&&(t||(r=0),e||(i=this.getLabels().length-1)),this.min=r,this.max=i}buildTicks(){const t=this.min,e=this.max,r=this.options.offset,i=[];let n=this.getLabels();n=t===0&&e===n.length-1?n:n.slice(t,e+1),this._valueRange=Math.max(n.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let s=t;s<=e;s++)i.push({value:s});return i}getLabelForValue(t){return ac.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return typeof t!="number"&&(t=this.parse(t)),t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}}function sb(a,t){const e=[],{bounds:i,step:n,min:s,max:o,precision:l,count:d,maxTicks:h,maxDigits:p,includeBounds:m}=a,v=n||1,g=h-1,{min:k,max:S}=t,D=!Tt(s),M=!Tt(o),I=!Tt(d),W=(S-k)/(p+1);let H=Jo((S-k)/g/v)*v,X,q,w,C;if(H<1e-14&&!D&&!M)return[{value:k},{value:S}];C=Math.ceil(S/H)-Math.floor(k/H),C>g&&(H=Jo(C*H/g/v)*v),Tt(l)||(X=Math.pow(10,l),H=Math.ceil(H*X)/X),i==="ticks"?(q=Math.floor(k/H)*H,w=Math.ceil(S/H)*H):(q=k,w=S),D&&M&&n&&Wp((o-s)/n,H/1e3)?(C=Math.round(Math.min((o-s)/H,h)),H=(o-s)/C,q=s,w=o):I?(q=D?s:q,w=M?o:w,C=d-1,H=(w-q)/C):(C=(w-q)/H,ja(C,Math.round(C),H/1e3)?C=Math.round(C):C=Math.ceil(C));const L=Math.max(Zo(H),Zo(q));X=Math.pow(10,Tt(l)?L:l),q=Math.round(q*X)/X,w=Math.round(w*X)/X;let Y=0;for(D&&(m&&q!==s?(e.push({value:s}),q<s&&Y++,ja(Math.round((q+Y*H)*X)/X,s,ic(s,W,a))&&Y++):q<s&&Y++);Y<C;++Y){const K=Math.round((q+Y*H)*X)/X;if(M&&K>o)break;e.push({value:K})}return M&&m&&w!==o?e.length&&ja(e[e.length-1].value,o,ic(o,W,a))?e[e.length-1].value=o:e.push({value:o}):(!M||w===o)&&e.push({value:w}),e}function ic(a,t,{horizontal:e,minRotation:r}){const i=Fe(r),n=(e?Math.sin(i):Math.cos(i))||.001,s=.75*t*(""+a).length;return Math.min(t/n,s)}class on extends Gr{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return Tt(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:r}=this.getUserBounds();let{min:i,max:n}=this;const s=l=>i=e?i:l,o=l=>n=r?n:l;if(t){const l=Ue(i),d=Ue(n);l<0&&d<0?o(0):l>0&&d>0&&s(0)}if(i===n){let l=n===0?1:Math.abs(n*.05);o(n+l),t||s(i-l)}this.min=i,this.max=n}getTickLimit(){const t=this.options.ticks;let{maxTicksLimit:e,stepSize:r}=t,i;return r?(i=Math.ceil(this.max/r)-Math.floor(this.min/r)+1,i>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${r} would result generating up to ${i} ticks. Limiting to 1000.`),i=1e3)):(i=this.computeTickLimit(),e=e||11),e&&(i=Math.min(e,i)),i}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let r=this.getTickLimit();r=Math.max(2,r);const i={maxTicks:r,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},n=this._range||this,s=sb(i,n);return t.bounds==="ticks"&&_c(s,this,"value"),t.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){const t=this.ticks;let e=this.min,r=this.max;if(super.configure(),this.options.offset&&t.length){const i=(r-e)/Math.max(t.length-1,1)/2;e-=i,r+=i}this._startValue=e,this._endValue=r,this._valueRange=r-e}getLabelForValue(t){return Ja(t,this.chart.options.locale,this.options.ticks.format)}}class ob extends on{static id="linear";static defaults={ticks:{callback:pn.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Zt(t)?t:0,this.max=Zt(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,r=Fe(this.options.ticks.minRotation),i=(t?Math.sin(r):Math.cos(r))||.001,n=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,n.lineHeight/i))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const _a=a=>Math.floor(br(a)),Ir=(a,t)=>Math.pow(10,_a(a)+t);function nc(a){return a/Math.pow(10,_a(a))===1}function sc(a,t,e){const r=Math.pow(10,e),i=Math.floor(a/r);return Math.ceil(t/r)-i}function lb(a,t){const e=t-a;let r=_a(e);for(;sc(a,t,r)>10;)r++;for(;sc(a,t,r)<10;)r--;return Math.min(r,_a(a))}function cb(a,{min:t,max:e}){t=ze(a.min,t);const r=[],i=_a(t);let n=lb(t,e),s=n<0?Math.pow(10,Math.abs(n)):1;const o=Math.pow(10,n),l=i>n?Math.pow(10,i):0,d=Math.round((t-l)*s)/s,h=Math.floor((t-l)/o/10)*o*10;let p=Math.floor((d-h)/Math.pow(10,n)),m=ze(a.min,Math.round((l+h+p*Math.pow(10,n))*s)/s);for(;m<e;)r.push({value:m,major:nc(m),significand:p}),p>=10?p=p<15?15:20:p++,p>=20&&(n++,p=2,s=n>=0?1:s),m=Math.round((l+h+p*Math.pow(10,n))*s)/s;const v=ze(a.max,m);return r.push({value:v,major:nc(v),significand:p}),r}class db extends Gr{static id="logarithmic";static defaults={ticks:{callback:pn.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const r=on.prototype.parse.apply(this,[t,e]);if(r===0){this._zero=!0;return}return Zt(r)&&r>0?r:null}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=Zt(t)?Math.max(0,t):null,this.max=Zt(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Zt(this._userMin)&&(this.min=t===Ir(this.min,0)?Ir(this.min,-1):Ir(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let r=this.min,i=this.max;const n=o=>r=t?r:o,s=o=>i=e?i:o;r===i&&(r<=0?(n(1),s(10)):(n(Ir(r,-1)),s(Ir(i,1)))),r<=0&&n(Ir(i,-1)),i<=0&&s(Ir(r,1)),this.min=r,this.max=i}buildTicks(){const t=this.options,e={min:this._userMin,max:this._userMax},r=cb(e,this);return t.bounds==="ticks"&&_c(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}getLabelForValue(t){return t===void 0?"0":Ja(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=br(t),this._valueRange=br(this.max)-br(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(br(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function zs(a){const t=a.ticks;if(t.display&&a.display){const e=ye(t.backdropPadding);return St(t.font&&t.font.size,Qt.font.size)+e.height}return 0}function ub(a,t,e){return e=_t(e)?e:[e],{w:of(a,t.string,e),h:e.length*t.lineHeight}}function oc(a,t,e,r,i){return a===r||a===i?{start:t-e/2,end:t+e/2}:a<r||a>i?{start:t-e,end:t}:{start:t,end:t+e}}function hb(a){const t={l:a.left+a._padding.left,r:a.right-a._padding.right,t:a.top+a._padding.top,b:a.bottom-a._padding.bottom},e=Object.assign({},t),r=[],i=[],n=a._pointLabels.length,s=a.options.pointLabels,o=s.centerPointLabels?Ft/n:0;for(let l=0;l<n;l++){const d=s.setContext(a.getPointLabelContext(l));i[l]=d.padding;const h=a.getPointPosition(l,a.drawingArea+i[l],o),p=ne(d.font),m=ub(a.ctx,p,a._pointLabels[l]);r[l]=m;const v=be(a.getIndexAngle(l)+o),g=Math.round(Ws(v)),k=oc(g,h.x,m.w,0,180),S=oc(g,h.y,m.h,90,270);pb(e,t,v,k,S)}a.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),a._pointLabelItems=mb(a,r,i)}function pb(a,t,e,r,i){const n=Math.abs(Math.sin(e)),s=Math.abs(Math.cos(e));let o=0,l=0;r.start<t.l?(o=(t.l-r.start)/n,a.l=Math.min(a.l,t.l-o)):r.end>t.r&&(o=(r.end-t.r)/n,a.r=Math.max(a.r,t.r+o)),i.start<t.t?(l=(t.t-i.start)/s,a.t=Math.min(a.t,t.t-l)):i.end>t.b&&(l=(i.end-t.b)/s,a.b=Math.max(a.b,t.b+l))}function fb(a,t,e){const r=a.drawingArea,{extra:i,additionalAngle:n,padding:s,size:o}=e,l=a.getPointPosition(t,r+i+s,n),d=Math.round(Ws(be(l.angle+re))),h=xb(l.y,o.h,d),p=bb(d),m=vb(l.x,o.w,p);return{visible:!0,x:l.x,y:h,textAlign:p,left:m,top:h,right:m+o.w,bottom:h+o.h}}function gb(a,t){if(!t)return!0;const{left:e,top:r,right:i,bottom:n}=a;return!(ar({x:e,y:r},t)||ar({x:e,y:n},t)||ar({x:i,y:r},t)||ar({x:i,y:n},t))}function mb(a,t,e){const r=[],i=a._pointLabels.length,n=a.options,{centerPointLabels:s,display:o}=n.pointLabels,l={extra:zs(n)/2,additionalAngle:s?Ft/i:0};let d;for(let h=0;h<i;h++){l.padding=e[h],l.size=t[h];const p=fb(a,h,l);r.push(p),o==="auto"&&(p.visible=gb(p,d),p.visible&&(d=p))}return r}function bb(a){return a===0||a===180?"center":a<180?"left":"right"}function vb(a,t,e){return e==="right"?a-=t:e==="center"&&(a-=t/2),a}function xb(a,t,e){return e===90||e===270?a-=t/2:(e>270||e<90)&&(a-=t),a}function yb(a,t,e){const{left:r,top:i,right:n,bottom:s}=e,{backdropColor:o}=t;if(!Tt(o)){const l=kr(t.borderRadius),d=ye(t.backdropPadding);a.fillStyle=o;const h=r-d.left,p=i-d.top,m=n-r+d.width,v=s-i+d.height;Object.values(l).some(g=>g!==0)?(a.beginPath(),wr(a,{x:h,y:p,w:m,h:v,radius:l}),a.fill()):a.fillRect(h,p,m,v)}}function wb(a,t){const{ctx:e,options:{pointLabels:r}}=a;for(let i=t-1;i>=0;i--){const n=a._pointLabelItems[i];if(!n.visible)continue;const s=r.setContext(a.getPointLabelContext(i));yb(e,s,n);const o=ne(s.font),{x:l,y:d,textAlign:h}=n;Ur(e,a._pointLabels[i],l,d+o.lineHeight/2,o,{color:s.color,textAlign:h,textBaseline:"middle"})}}function qd(a,t,e,r){const{ctx:i}=a;if(e)i.arc(a.xCenter,a.yCenter,t,0,Xt);else{let n=a.getPointPosition(0,t);i.moveTo(n.x,n.y);for(let s=1;s<r;s++)n=a.getPointPosition(s,t),i.lineTo(n.x,n.y)}}function kb(a,t,e,r,i){const n=a.ctx,s=t.circular,{color:o,lineWidth:l}=t;!s&&!r||!o||!l||e<0||(n.save(),n.strokeStyle=o,n.lineWidth=l,n.setLineDash(i.dash||[]),n.lineDashOffset=i.dashOffset,n.beginPath(),qd(a,e,s,r),n.closePath(),n.stroke(),n.restore())}function Cb(a,t,e){return Ar(a,{label:e,index:t,type:"pointLabel"})}class Sb extends on{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:pn.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=ye(zs(this.options)/2),e=this.width=this.maxWidth-t.width,r=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+r/2+t.top),this.drawingArea=Math.floor(Math.min(e,r)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=Zt(t)&&!isNaN(t)?t:0,this.max=Zt(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/zs(this.options))}generateTickLabels(t){on.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,r)=>{const i=Wt(this.options.pointLabels.callback,[e,r],this);return i||i===0?i:""}).filter((e,r)=>this.chart.getDataVisibility(r))}fit(){const t=this.options;t.display&&t.pointLabels.display?hb(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,r,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((r-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,r,i))}getIndexAngle(t){const e=Xt/(this._pointLabels.length||1),r=this.options.startAngle||0;return be(t*e+Fe(r))}getDistanceFromCenterForValue(t){if(Tt(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(Tt(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const r=e[t];return Cb(this.getContext(),t,r)}}getPointPosition(t,e,r=0){const i=this.getIndexAngle(t)-re+r;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:r,right:i,bottom:n}=this._pointLabelItems[t];return{left:e,top:r,right:i,bottom:n}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const r=this.ctx;r.save(),r.beginPath(),qd(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),r.closePath(),r.fillStyle=t,r.fill(),r.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:r,grid:i,border:n}=e,s=this._pointLabels.length;let o,l,d;if(e.pointLabels.display&&wb(this,s),i.display&&this.ticks.forEach((h,p)=>{if(p!==0||p===0&&this.min<0){l=this.getDistanceFromCenterForValue(h.value);const m=this.getContext(p),v=i.setContext(m),g=n.setContext(m);kb(this,v,l,s,g)}}),r.display){for(t.save(),o=s-1;o>=0;o--){const h=r.setContext(this.getPointLabelContext(o)),{color:p,lineWidth:m}=h;!m||!p||(t.lineWidth=m,t.strokeStyle=p,t.setLineDash(h.borderDash),t.lineDashOffset=h.borderDashOffset,l=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),d=this.getPointPosition(o,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(d.x,d.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,r=e.ticks;if(!r.display)return;const i=this.getIndexAngle(0);let n,s;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((o,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;const d=r.setContext(this.getContext(l)),h=ne(d.font);if(n=this.getDistanceFromCenterForValue(this.ticks[l].value),d.showLabelBackdrop){t.font=h.string,s=t.measureText(o.label).width,t.fillStyle=d.backdropColor;const p=ye(d.backdropPadding);t.fillRect(-s/2-p.left,-n-h.size/2-p.top,s+p.width,h.size+p.height)}Ur(t,o.label,0,-n,h,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),t.restore()}drawTitle(){}}const wn={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Se=Object.keys(wn);function lc(a,t){return a-t}function cc(a,t){if(Tt(t))return null;const e=a._adapter,{parser:r,round:i,isoWeekday:n}=a._parseOpts;let s=t;return typeof r=="function"&&(s=r(s)),Zt(s)||(s=typeof r=="string"?e.parse(s,r):e.parse(s)),s===null?null:(i&&(s=i==="week"&&(ua(n)||n===!0)?e.startOf(s,"isoWeek",n):e.startOf(s,i)),+s)}function dc(a,t,e,r){const i=Se.length;for(let n=Se.indexOf(a);n<i-1;++n){const s=wn[Se[n]],o=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((e-t)/(o*s.size))<=r)return Se[n]}return Se[i-1]}function Ab(a,t,e,r,i){for(let n=Se.length-1;n>=Se.indexOf(e);n--){const s=Se[n];if(wn[s].common&&a._adapter.diff(i,r,s)>=t-1)return s}return Se[e?Se.indexOf(e):0]}function Mb(a){for(let t=Se.indexOf(a)+1,e=Se.length;t<e;++t)if(wn[Se[t]].common)return Se[t]}function uc(a,t,e){if(!e)a[t]=!0;else if(e.length){const{lo:r,hi:i}=Ys(e,t),n=e[r]>=t?e[r]:e[i];a[n]=!0}}function Db(a,t,e,r){const i=a._adapter,n=+i.startOf(t[0].value,r),s=t[t.length-1].value;let o,l;for(o=n;o<=s;o=+i.add(o,1,r))l=e[o],l>=0&&(t[l].major=!0);return t}function hc(a,t,e){const r=[],i={},n=t.length;let s,o;for(s=0;s<n;++s)o=t[s],i[o]=s,r.push({value:o,major:!1});return n===0||!e?r:Db(a,r,i,e)}class Ts extends Gr{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const r=t.time||(t.time={}),i=this._adapter=new R0._date(t.adapters.date);i.init(e),Va(r.displayFormats,i.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return t===void 0?null:cc(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,r=t.time.unit||"day";let{min:i,max:n,minDefined:s,maxDefined:o}=this.getUserBounds();function l(d){!s&&!isNaN(d.min)&&(i=Math.min(i,d.min)),!o&&!isNaN(d.max)&&(n=Math.max(n,d.max))}(!s||!o)&&(l(this._getLabelBounds()),(t.bounds!=="ticks"||t.ticks.source!=="labels")&&l(this.getMinMax(!1))),i=Zt(i)&&!isNaN(i)?i:+e.startOf(Date.now(),r),n=Zt(n)&&!isNaN(n)?n:+e.endOf(Date.now(),r)+1,this.min=Math.min(i,n-1),this.max=Math.max(i+1,n)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],r=t[t.length-1]),{min:e,max:r}}buildTicks(){const t=this.options,e=t.time,r=t.ticks,i=r.source==="labels"?this.getLabelTimestamps():this._generate();t.bounds==="ticks"&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const n=this.min,s=this.max,o=Xp(i,n,s);return this._unit=e.unit||(r.autoSkip?dc(e.minUnit,this.min,this.max,this._getLabelCapacity(n)):Ab(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:Mb(this._unit),this.initOffsets(i),t.reverse&&o.reverse(),hc(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(t=>+t.value))}initOffsets(t=[]){let e=0,r=0,i,n;this.options.offset&&t.length&&(i=this.getDecimalForValue(t[0]),t.length===1?e=1-i:e=(this.getDecimalForValue(t[1])-i)/2,n=this.getDecimalForValue(t[t.length-1]),t.length===1?r=n:r=(n-this.getDecimalForValue(t[t.length-2]))/2);const s=t.length<3?.5:.25;e=de(e,0,s),r=de(r,0,s),this._offsets={start:e,end:r,factor:1/(e+1+r)}}_generate(){const t=this._adapter,e=this.min,r=this.max,i=this.options,n=i.time,s=n.unit||dc(n.minUnit,e,r,this._getLabelCapacity(e)),o=St(i.ticks.stepSize,1),l=s==="week"?n.isoWeekday:!1,d=ua(l)||l===!0,h={};let p=e,m,v;if(d&&(p=+t.startOf(p,"isoWeek",l)),p=+t.startOf(p,d?"day":s),t.diff(r,e,s)>1e5*o)throw new Error(e+" and "+r+" are too far apart with stepSize of "+o+" "+s);const g=i.ticks.source==="data"&&this.getDataTimestamps();for(m=p,v=0;m<r;m=+t.add(m,o,s),v++)uc(h,m,g);return(m===r||i.bounds==="ticks"||v===1)&&uc(h,m,g),Object.keys(h).sort(lc).map(k=>+k)}getLabelForValue(t){const e=this._adapter,r=this.options.time;return r.tooltipFormat?e.format(t,r.tooltipFormat):e.format(t,r.displayFormats.datetime)}format(t,e){const i=this.options.time.displayFormats,n=this._unit,s=e||i[n];return this._adapter.format(t,s)}_tickFormatFunction(t,e,r,i){const n=this.options,s=n.ticks.callback;if(s)return Wt(s,[t,e,r],this);const o=n.time.displayFormats,l=this._unit,d=this._majorUnit,h=l&&o[l],p=d&&o[d],m=r[e],v=d&&p&&m&&m.major;return this._adapter.format(t,i||(v?p:h))}generateTickLabels(t){let e,r,i;for(e=0,r=t.length;e<r;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return t===null?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,r=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+r)*e.factor)}getValueForPixel(t){const e=this._offsets,r=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+r*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,r=this.ctx.measureText(t).width,i=Fe(this.isHorizontal()?e.maxRotation:e.minRotation),n=Math.cos(i),s=Math.sin(i),o=this._resolveTickFontOptions(0).size;return{w:r*n+o*s,h:r*s+o*n}}_getLabelCapacity(t){const e=this.options.time,r=e.displayFormats,i=r[e.unit]||r.millisecond,n=this._tickFormatFunction(t,0,hc(this,[t],this._majorUnit),i),s=this._getLabelSize(n),o=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return o>0?o:1}getDataTimestamps(){let t=this._cache.data||[],e,r;if(t.length)return t;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(e=0,r=i.length;e<r;++e)t=t.concat(i[e].controller.getAllParsedValues(this));return this._cache.data=this.normalize(t)}getLabelTimestamps(){const t=this._cache.labels||[];let e,r;if(t.length)return t;const i=this.getLabels();for(e=0,r=i.length;e<r;++e)t.push(cc(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return Zc(t.sort(lc))}}function Ii(a,t,e){let r=0,i=a.length-1,n,s,o,l;e?(t>=a[r].pos&&t<=a[i].pos&&({lo:r,hi:i}=rr(a,"pos",t)),{pos:n,time:o}=a[r],{pos:s,time:l}=a[i]):(t>=a[r].time&&t<=a[i].time&&({lo:r,hi:i}=rr(a,"time",t)),{time:n,pos:o}=a[r],{time:s,pos:l}=a[i]);const d=s-n;return d?o+(l-o)*(t-n)/d:o}class Eb extends Ts{static id="timeseries";static defaults=Ts.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Ii(e,this.min),this._tableRange=Ii(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:r}=this,i=[],n=[];let s,o,l,d,h;for(s=0,o=t.length;s<o;++s)d=t[s],d>=e&&d<=r&&i.push(d);if(i.length<2)return[{time:e,pos:0},{time:r,pos:1}];for(s=0,o=i.length;s<o;++s)h=i[s+1],l=i[s-1],d=i[s],Math.round((h+l)/2)!==d&&n.push({time:d,pos:s/(o-1)});return n}_generate(){const t=this.min,e=this.max;let r=super.getDataTimestamps();return(!r.includes(t)||!r.length)&&r.splice(0,0,t),(!r.includes(e)||r.length===1)&&r.push(e),r.sort((i,n)=>i-n)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),r=this.getLabelTimestamps();return e.length&&r.length?t=this.normalize(e.concat(r)):t=e.length?e:r,t=this._cache.all=t,t}getDecimalForValue(t){return(Ii(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,r=this.getDecimalForPixel(t)/e.factor-e.end;return Ii(this._table,r*this._tableRange+this._minPos,!0)}}var Pb=Object.freeze({__proto__:null,CategoryScale:nb,LinearScale:ob,LogarithmicScale:db,RadialLinearScale:Sb,TimeScale:Ts,TimeSeriesScale:Eb});const Wd=[P0,om,eb,Pb];Ve.register(...Wd);const pc="comparisonState";function fc(a){return a?{...a,terminalValues:Array.from(a.terminalValues)}:null}function gc(a){return a?{...a,terminalValues:new Float64Array(a.terminalValues)}:null}class Rb{state={isComparisonMode:!1,previousResult:null,previousConfig:null,previousPresetName:"",currentResult:null,currentConfig:null,currentPresetName:""};saveToSession(){try{const t={...this.state,previousResult:fc(this.state.previousResult),currentResult:fc(this.state.currentResult)};sessionStorage.setItem(pc,JSON.stringify(t))}catch(t){console.error("Failed to save comparison state to session:",t)}}loadFromSession(){try{const t=sessionStorage.getItem(pc);if(!t)return;const e=JSON.parse(t);this.state={...e,previousResult:gc(e.previousResult),currentResult:gc(e.currentResult)},this.dispatchChange()}catch(t){console.error("Failed to load comparison state from session:",t)}}enterComparisonMode(t,e,r){this.state.previousResult=this.state.currentResult,this.state.previousConfig=this.state.currentConfig,this.state.previousPresetName=this.state.currentPresetName,this.state.currentResult=t,this.state.currentConfig=e,this.state.currentPresetName=r,this.state.isComparisonMode=!0,this.saveToSession(),this.dispatchChange()}exitComparisonMode(){this.state.isComparisonMode=!1,this.state.previousResult=null,this.state.previousConfig=null,this.state.previousPresetName="",this.saveToSession(),this.dispatchChange()}replaceResults(t,e,r){this.state.currentResult=t,this.state.currentConfig=e,this.state.currentPresetName=r,this.state.isComparisonMode=!1,this.state.previousResult=null,this.state.previousConfig=null,this.state.previousPresetName="",this.saveToSession(),this.dispatchChange()}getCurrentResult(){return this.state.currentResult}getPreviousResult(){return this.state.previousResult}getState(){return{...this.state}}dispatchChange(){window.dispatchEvent(new CustomEvent("comparison-state-change",{detail:this.getState()}))}}const zb=new Rb,fr=["#0d9488","#8b5cf6","#f59e0b","#ef4444","#3b82f6","#10b981","#ec4899","#6366f1","#14b8a6","#f97316"];class Tb extends Ct{availableAssets=[];selectedAssets=[];searchQuery="";donutChart=null;_currentPortfolioId=void 0;_currentPortfolioName="";_isDirty=!1;_savedSnapshot="";_pendingComparisonMode=!1;template(){return`
      <div class="portfolio-composition">
        <h3 class="section-title">Portfolio Composition:</h3>
        <p class="section-desc">Build a custom portfolio or load a preset configuration.</p>

        <h4 class="subsection-title">Available Assets:</h4>
        <p class="subsection-desc">Click the + icon or double-click an asset to add to your portfolio</p>

        <input type="search"
               class="search-input"
               placeholder="Search assets..."
               aria-label="Search available assets" />

        <div class="available-assets-list" role="listbox">
          \x3C!-- Populated dynamically -->
        </div>

        <h4 class="subsection-title preset-title">
          Select a Portfolio Preset:
          <span class="modified-badge" style="display: none;">Modified</span>
        </h4>
        <div class="preset-row">
          <select class="preset-select" aria-label="Portfolio preset">
            <option value="">-- Presets --</option>
          </select>
          <button class="preset-btn save-btn" title="Save" aria-label="Save portfolio">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path>
              <polyline points="17 21 17 13 7 13 7 21"></polyline>
              <polyline points="7 3 7 8 15 8"></polyline>
            </svg>
          </button>
          <button class="preset-btn load-btn" title="Load" aria-label="Load portfolio">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path>
            </svg>
          </button>
          <button class="preset-btn import-btn" title="Import from file" aria-label="Import portfolio">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
              <line x1="12" y1="18" x2="12" y2="12"></line>
              <line x1="9" y1="15" x2="12" y2="12"></line>
              <line x1="15" y1="15" x2="12" y2="12"></line>
            </svg>
          </button>
          <button class="preset-btn export-btn" title="Export to file" aria-label="Export portfolio">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path>
              <polyline points="14 2 14 8 20 8"></polyline>
              <line x1="12" y1="12" x2="12" y2="18"></line>
              <line x1="9" y1="15" x2="12" y2="18"></line>
              <line x1="15" y1="15" x2="12" y2="18"></line>
            </svg>
          </button>
          <button class="preset-btn delete-btn" title="Delete" aria-label="Delete portfolio">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="3 6 5 6 21 6"></polyline>
              <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
            </svg>
          </button>
        </div>
        <input type="file" class="import-file-input" accept=".json" hidden />
        <p class="preset-legend">
          <span class="legend-item"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"></path></svg> Save,</span>
          <span class="legend-item"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M22 19a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h5l2 3h9a2 2 0 0 1 2 2z"></path></svg> Load,</span>
          <span class="legend-item"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path></svg> Import,</span>
          <span class="legend-item"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"></path></svg> Export, or</span>
          <span class="legend-item"><svg width="12" height="12" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path></svg> Delete</span>
          portfolio configurations
        </p>

        <div class="portfolio-visualization" style="display: none;">
          <div class="card-header">
            <svg class="header-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="M12 2a10 10 0 0 1 10 10"></path>
            </svg>
            <div class="header-text">
              <span class="header-title">Portfolio Composition</span>
              <span class="header-subtitle">0 Assets</span>
            </div>
          </div>
          <div class="portfolio-content">
            <div class="donut-container">
              <canvas id="portfolio-donut"></canvas>
              <div class="donut-center">0 ASSETS</div>
            </div>
            <div class="asset-bars-list">
              \x3C!-- Horizontal bars for each asset -->
            </div>
          </div>
        </div>

        <div class="selected-assets-list">
          \x3C!-- Weight editing cards populated dynamically -->
        </div>

        <div class="weight-section" style="display: none;">
          <h4 class="subsection-title">Weight Distribution:</h4>
          <div class="weight-bar">
            \x3C!-- Populated dynamically -->
          </div>

          <div class="weight-controls">
            <button class="balance-btn" type="button">BALANCE WEIGHTS</button>
            <button class="clear-btn" type="button">
              <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <polyline points="3 6 5 6 21 6"></polyline>
                <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
              </svg>
              CLEAR ALL
            </button>
          </div>

          <div class="total-row">
            Total: <span class="total-value">0.0</span>%
          </div>
        </div>
      </div>
    `}styles(){return`
      :host {
        display: block;
      }

      .portfolio-composition {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-sm, 8px);
      }

      .section-title {
        margin: 0;
        font-size: var(--font-size-lg, 1.125rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .section-desc {
        margin: 0;
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #64748b);
        font-style: italic;
      }

      .subsection-title {
        margin: var(--spacing-md, 16px) 0 0 0;
        font-size: var(--font-size-md, 1rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .subsection-title.preset-title {
        margin-top: var(--spacing-lg, 24px);
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
      }

      .modified-badge {
        display: inline-block;
        padding: 2px 8px;
        background: var(--color-warning, #f59e0b);
        color: white;
        border-radius: var(--border-radius-sm, 4px);
        font-size: var(--font-size-xs, 0.75rem);
        font-weight: 600;
        text-transform: uppercase;
        animation: pulse 2s ease-in-out infinite;
      }

      @keyframes pulse {
        0%, 100% { opacity: 1; }
        50% { opacity: 0.7; }
      }

      .subsection-desc {
        margin: 0 0 var(--spacing-sm, 8px) 0;
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #64748b);
        font-style: italic;
      }

      .search-input {
        width: 100%;
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--border-radius-md, 8px);
        font-size: var(--font-size-md, 1rem);
        font-family: inherit;
        background: var(--surface-primary, #ffffff);
        color: var(--text-primary, #1e293b);
        box-sizing: border-box;
      }

      .search-input:focus {
        outline: none;
        border-color: var(--color-primary, #0d9488);
        box-shadow: 0 0 0 3px rgba(13, 148, 136, 0.1);
      }

      /* Available Assets List */
      .available-assets-list {
        height: 250px;
        min-height: 120px;
        max-height: 500px;
        overflow-y: auto;
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--border-radius-md, 8px);
        background: var(--surface-secondary, #f8fafc);
        resize: vertical;
      }

      /* Custom scrollbar styling - 30% thinner */
      .available-assets-list::-webkit-scrollbar {
        width: 8px;
      }

      .available-assets-list::-webkit-scrollbar-track {
        background: transparent;
      }

      .available-assets-list::-webkit-scrollbar-thumb {
        background: #b4bcc5;
        border-radius: 4px;
      }

      .available-assets-list::-webkit-scrollbar-thumb:hover {
        background: #8b96a6;
      }

      .available-asset-item {
        display: flex;
        align-items: flex-start;
        justify-content: space-between;
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        border-bottom: 1px solid var(--border-color, #e2e8f0);
        cursor: pointer;
        transition: background 0.15s ease;
      }

      .available-asset-item:last-child {
        border-bottom: none;
      }

      .available-asset-item:hover {
        background: var(--surface-tertiary, #e2e8f0);
      }

      .available-asset-item.disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .asset-info {
        flex: 1;
      }

      .asset-name {
        font-weight: 600;
        color: var(--text-primary, #1e293b);
        font-size: var(--font-size-md, 1rem);
      }

      .asset-badge {
        display: inline-block;
        margin-left: var(--spacing-sm, 8px);
        padding: 2px 8px;
        background: var(--surface-tertiary, #e2e8f0);
        border-radius: var(--border-radius-sm, 4px);
        font-size: var(--font-size-xs, 0.75rem);
        font-weight: 600;
        color: var(--text-secondary, #64748b);
        text-transform: uppercase;
        vertical-align: middle;
      }

      /* Asset type badge colors */
      .asset-badge.type-stock {
        background: #e0f7fa;
        color: #0e7490;
      }

      .asset-badge.type-commodity {
        background: #ffedd5;
        color: #9a3412;
      }

      .asset-badge.type-index {
        background: #f5d0fe;
        color: #86198f;
      }

      .asset-stats {
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #64748b);
        margin-top: 2px;
      }

      .add-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 32px;
        height: 32px;
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--border-radius-sm, 4px);
        background: var(--surface-primary, #ffffff);
        color: var(--text-secondary, #64748b);
        cursor: pointer;
        font-size: 18px;
        font-weight: 300;
        transition: all 0.15s ease;
        flex-shrink: 0;
        margin-left: var(--spacing-sm, 8px);
      }

      .add-btn:hover {
        background: var(--color-primary, #0d9488);
        border-color: var(--color-primary, #0d9488);
        color: white;
      }

      /* Preset Row */
      .preset-row {
        display: flex;
        gap: var(--spacing-xs, 4px);
        align-items: center;
        margin-top: var(--spacing-sm, 8px);
      }

      .preset-select {
        flex: 1;
        padding: var(--spacing-sm, 8px);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--border-radius-md, 8px);
        font-size: var(--font-size-md, 1rem);
        font-family: inherit;
        background: var(--surface-primary, #ffffff);
        color: var(--text-primary, #1e293b);
      }

      .preset-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 40px;
        height: 40px;
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--border-radius-md, 8px);
        background: var(--surface-primary, #ffffff);
        color: var(--color-primary, #0d9488);
        cursor: pointer;
        transition: all 0.15s ease;
      }

      .preset-btn:hover {
        background: var(--color-primary, #0d9488);
        border-color: var(--color-primary, #0d9488);
        color: white;
      }

      .preset-legend {
        margin: var(--spacing-xs, 4px) 0 0 0;
        font-size: var(--font-size-xs, 0.75rem);
        color: var(--text-tertiary, #94a3b8);
        font-style: italic;
      }

      .legend-item {
        white-space: nowrap;
      }

      .legend-item svg {
        vertical-align: middle;
        margin-right: 2px;
      }

      /* Portfolio Visualization */
      @keyframes fadeIn {
        from {
          opacity: 0;
          transform: scale(0.98);
        }
        to {
          opacity: 1;
          transform: scale(1);
        }
      }

      .portfolio-visualization {
        margin-top: var(--spacing-lg, 24px);
        background: #f0fdfa;
        border: 1px solid #99f6e4;
        border-radius: var(--border-radius-lg, 12px);
        padding: var(--spacing-md, 16px);
        animation: fadeIn 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
      }

      .card-header {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
        margin-bottom: var(--spacing-md, 16px);
        padding-bottom: var(--spacing-sm, 8px);
        border-bottom: 1px solid #99f6e4;
      }

      .header-icon {
        color: var(--color-primary, #0d9488);
      }

      .header-text {
        flex: 1;
      }

      .header-title {
        display: block;
        font-weight: 600;
        font-size: var(--font-size-md, 1rem);
        color: #1e293b; /* Force dark text on light accent background */
      }

      .header-subtitle {
        display: block;
        font-size: var(--font-size-sm, 0.875rem);
        color: #64748b; /* Force gray text on light accent background */
      }

      .portfolio-content {
        display: flex;
        gap: var(--spacing-lg, 24px);
        align-items: flex-start;
        min-width: 0; /* Allow flex children to shrink */
        overflow: hidden;
      }

      .donut-container {
        position: relative;
        width: 120px;
        height: 120px;
        flex-shrink: 0;
      }

      #portfolio-donut {
        width: 100%;
        height: 100%;
      }

      @keyframes subtlePulse {
        0% { transform: translate(-50%, -50%) scale(1); }
        50% { transform: translate(-50%, -50%) scale(1.05); }
        100% { transform: translate(-50%, -50%) scale(1); }
      }

      .donut-center {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        font-size: var(--font-size-xs, 0.75rem);
        font-weight: 700;
        color: #64748b; /* Force gray text on light accent background */
        pointer-events: none;
        transition: color 0.3s ease;
      }

      .donut-center.updated {
        animation: subtlePulse 0.4s ease;
      }

      .asset-bars-list {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: var(--spacing-xs, 4px);
        min-width: 0; /* Allow shrinking to prevent overflow */
        overflow: hidden;
      }

      .asset-bar-row {
        position: relative;
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
        height: 28px;
        padding: 0 var(--spacing-sm, 8px);
        border-radius: var(--border-radius-sm, 4px);
        background: white;
        overflow: hidden;
        transition: background-color 0.2s ease, box-shadow 0.2s ease;
        cursor: default;
        min-width: 0; /* Allow flex children to shrink */
      }

      .asset-bar-row:hover {
        background: #fafffe;
        box-shadow: 0 1px 3px rgba(13, 148, 136, 0.1);
      }

      .asset-bar-row::before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: var(--bar-width, 0%);
        background: var(--bar-color, #0d9488);
        opacity: 0.15;
        border-radius: var(--border-radius-sm, 4px);
        z-index: 0;
        transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      }

      /* Entry animation for asset bars */
      @keyframes slideInFromLeft {
        from {
          opacity: 0;
          transform: translateX(-20px);
        }
        to {
          opacity: 1;
          transform: translateX(0);
        }
      }

      .asset-bar-row {
        animation: slideInFromLeft 0.4s cubic-bezier(0.4, 0, 0.2, 1) forwards;
      }

      .asset-bar-row:nth-child(1) { animation-delay: 0ms; }
      .asset-bar-row:nth-child(2) { animation-delay: 50ms; }
      .asset-bar-row:nth-child(3) { animation-delay: 100ms; }
      .asset-bar-row:nth-child(4) { animation-delay: 150ms; }
      .asset-bar-row:nth-child(5) { animation-delay: 200ms; }
      .asset-bar-row:nth-child(6) { animation-delay: 250ms; }
      .asset-bar-row:nth-child(7) { animation-delay: 300ms; }
      .asset-bar-row:nth-child(8) { animation-delay: 350ms; }
      .asset-bar-row:nth-child(9) { animation-delay: 400ms; }
      .asset-bar-row:nth-child(10) { animation-delay: 450ms; }

      .asset-bar-swatch {
        width: 12px;
        height: 12px;
        border-radius: var(--border-radius-xs, 2px);
        flex-shrink: 0;
        z-index: 1;
        transition: transform 0.2s ease;
      }

      .asset-bar-row:hover .asset-bar-swatch {
        transform: scale(1.2);
      }

      .asset-bar-symbol {
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 600;
        color: #1e293b; /* Force dark text on light accent background */
        z-index: 1;
        flex-shrink: 0;
      }

      .asset-bar-name {
        flex: 1;
        font-size: 11px;
        font-weight: 400;
        color: #64748b; /* Muted secondary text */
        z-index: 1;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
        min-width: 0; /* Allow shrinking below content size */
      }

      .asset-bar-percent {
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 600;
        color: #1e293b; /* Force dark text on light accent background */
        z-index: 1;
        transition: transform 0.2s ease;
        flex-shrink: 0;
      }

      .asset-bar-row:hover .asset-bar-percent {
        transform: scale(1.05);
      }

      /* Selected Assets - weight editing cards (compact layout) */
      .selected-assets-list {
        display: flex;
        flex-direction: column;
        gap: 6px;
        margin-top: var(--spacing-md, 16px);
      }

      /* Entry animation for selected asset cards */
      @keyframes fadeInUp {
        from {
          opacity: 0;
          transform: translateY(12px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }

      /* Option D: Badge on second row, full-width layout */
      .selected-asset-card {
        display: flex;
        flex-direction: column;
        gap: 2px;
        padding: 8px 12px;
        background: var(--surface-primary, #ffffff);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--border-radius-md, 8px);
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        animation: fadeInUp 0.35s cubic-bezier(0.4, 0, 0.2, 1) forwards;
        transition: box-shadow 0.2s ease, transform 0.2s ease;
      }

      .selected-asset-card:hover {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        transform: translateY(-1px);
      }

      .selected-asset-card:nth-child(1) { animation-delay: 0ms; }
      .selected-asset-card:nth-child(2) { animation-delay: 40ms; }
      .selected-asset-card:nth-child(3) { animation-delay: 80ms; }
      .selected-asset-card:nth-child(4) { animation-delay: 120ms; }
      .selected-asset-card:nth-child(5) { animation-delay: 160ms; }
      .selected-asset-card:nth-child(6) { animation-delay: 200ms; }
      .selected-asset-card:nth-child(7) { animation-delay: 240ms; }
      .selected-asset-card:nth-child(8) { animation-delay: 280ms; }
      .selected-asset-card:nth-child(9) { animation-delay: 320ms; }
      .selected-asset-card:nth-child(10) { animation-delay: 360ms; }

      .selected-asset-row1 {
        display: flex;
        align-items: center;
        gap: 10px;
        width: 100%;
      }

      .color-swatch {
        width: 16px;
        height: 16px;
        border-radius: var(--border-radius-sm, 4px);
        flex-shrink: 0;
        transition: transform 0.2s ease, box-shadow 0.2s ease;
      }

      .selected-asset-card:hover .color-swatch {
        transform: scale(1.15);
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.15);
      }

      .selected-asset-symbol {
        font-weight: 700;
        color: var(--text-primary, #1e293b);
        font-size: 14px;
        white-space: nowrap;
        flex: 1;
      }

      .selected-asset-row2 {
        display: flex;
        align-items: center;
        gap: 6px;
        padding-left: 26px; /* Align with symbol (16px swatch + 10px gap) */
      }

      .selected-asset-name {
        font-weight: 400;
        color: var(--text-secondary, #64748b);
        font-size: 11px;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .selected-asset-badge {
        display: inline-block;
        padding: 1px 5px;
        background: var(--surface-tertiary, #e2e8f0);
        border-radius: var(--border-radius-sm, 4px);
        font-size: 9px;
        font-weight: 600;
        color: var(--text-secondary, #64748b);
        text-transform: uppercase;
        flex-shrink: 0;
      }

      /* Selected asset type badge colors */
      .selected-asset-badge.type-stock {
        background: #e0f7fa;
        color: #0e7490;
      }

      .selected-asset-badge.type-commodity {
        background: #ffedd5;
        color: #9a3412;
      }

      .selected-asset-badge.type-index {
        background: #f5d0fe;
        color: #86198f;
      }

      .selected-asset-stats {
        font-size: 11px;
        color: var(--text-secondary, #64748b);
        white-space: nowrap;
      }

      .weight-input-group {
        display: flex;
        align-items: center;
        gap: 4px;
        flex-shrink: 0;
      }

      .weight-input {
        width: 52px;
        padding: 5px 8px;
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--border-radius-sm, 4px);
        font-size: 13px;
        font-family: inherit;
        text-align: center;
        background: var(--surface-secondary, #f8fafc);
        color: var(--text-primary, #1e293b);
      }

      .weight-input:focus {
        outline: none;
        border-color: var(--color-primary, #0d9488);
        background: var(--surface-primary, #ffffff);
      }

      .weight-percent {
        color: var(--text-secondary, #64748b);
        font-size: 14px;
      }

      .remove-btn {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 24px;
        height: 24px;
        border: none;
        background: transparent;
        color: var(--text-tertiary, #94a3b8);
        cursor: pointer;
        font-size: 18px;
        transition: color 0.15s ease;
        opacity: 0.6;
        padding: 0;
      }

      .remove-btn:hover {
        color: var(--color-error, #dc2626);
        opacity: 1;
      }

      /* Weight Section */
      .weight-section {
        margin-top: var(--spacing-lg, 24px);
      }

      .weight-bar {
        display: flex;
        height: 36px;
        border-radius: var(--border-radius-md, 8px);
        overflow: hidden;
        margin-top: var(--spacing-sm, 8px);
      }

      .weight-segment {
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 600;
        transition: flex 0.5s cubic-bezier(0.4, 0, 0.2, 1),
                    background-color 0.3s ease;
        min-width: 40px;
      }

      .weight-controls {
        display: flex;
        gap: var(--spacing-sm, 8px);
        margin-top: var(--spacing-md, 16px);
      }

      .balance-btn {
        flex: 1;
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        background: var(--color-primary, #0d9488);
        color: white;
        border: none;
        border-radius: var(--border-radius-md, 8px);
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 600;
        font-family: inherit;
        cursor: pointer;
        transition: background 0.15s ease;
      }

      .balance-btn:hover {
        background: var(--color-primary-hover, #0f766e);
      }

      .clear-btn {
        flex: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        gap: var(--spacing-xs, 4px);
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        background: var(--surface-primary, #ffffff);
        color: var(--color-warning, #f59e0b);
        border: 2px solid var(--color-warning, #f59e0b);
        border-radius: var(--border-radius-md, 8px);
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 600;
        font-family: inherit;
        cursor: pointer;
        transition: all 0.15s ease;
      }

      .clear-btn:hover {
        background: var(--color-warning, #f59e0b);
        color: white;
      }

      .total-row {
        text-align: right;
        font-weight: 600;
        margin-top: var(--spacing-sm, 8px);
        font-size: var(--font-size-md, 1rem);
      }

      .total-value {
        color: var(--color-success, #059669);
      }

      .total-value.invalid {
        color: var(--color-error, #dc2626);
      }

      /* Dark mode styles for portfolio visualization */
      :host-context([data-theme="dark"]) .portfolio-visualization {
        background: #132f2f;
        border-color: #1f4a4a;
      }

      :host-context([data-theme="dark"]) .card-header {
        border-bottom-color: #1f4a4a;
      }

      :host-context([data-theme="dark"]) .header-title {
        color: var(--text-primary, #f1f5f9);
      }

      :host-context([data-theme="dark"]) .header-subtitle {
        color: var(--text-secondary, #94a3b8);
      }

      :host-context([data-theme="dark"]) .donut-center {
        color: var(--text-secondary, #94a3b8);
      }

      :host-context([data-theme="dark"]) .asset-bar-row {
        background: #1a3838;
      }

      :host-context([data-theme="dark"]) .asset-bar-row:hover {
        background: #1f4242;
        box-shadow: 0 1px 3px rgba(20, 184, 166, 0.15);
      }

      :host-context([data-theme="dark"]) .asset-bar-symbol {
        color: var(--text-primary, #f1f5f9);
      }

      :host-context([data-theme="dark"]) .asset-bar-name {
        color: var(--text-secondary, #94a3b8);
      }

      :host-context([data-theme="dark"]) .asset-bar-percent {
        color: var(--color-primary, #14b8a6);
      }
    `}connectedCallback(){this.loadAvailableAssets(),super.connectedCallback(),this.loadInitialPortfolio()}async refreshAvailableAssets(){const t=Nr();this.availableAssets=t.map((e,r)=>{const i=da(e);return this.calculateAssetStats(e,i,r)}),await this.loadEffectiveAssetData(),this.render()}async loadInitialPortfolio(){try{const t=await lp();t&&t.assets.length>0&&(this.populateFromPortfolio(t),setTimeout(()=>{t.name!==Ae?this.showToast(`Restored portfolio: ${t.name}`,"info"):this.showToast("Restored previous session","info")},500))}catch(t){console.warn("Failed to load last portfolio:",t)}}populateFromPortfolio(t){t.name!==Ae?(this._currentPortfolioId=t.id,this._currentPortfolioName=t.name):(this._currentPortfolioId=void 0,this._currentPortfolioName=""),this.selectedAssets=t.assets.map((e,r)=>{const i=this.availableAssets.find(s=>s.symbol===e.symbol),n=fr[r%fr.length];return{symbol:e.symbol,name:e.name,assetClass:i?.assetClass||"STOCK",years:i?.years||0,avgReturn:i?.avgReturn||0,volatility:i?.volatility||0,color:n,weight:e.weight*100}}),this.renderAvailableAssets(),this.renderSelectedAssets(),this.updatePresetSelect(),this.dispatchPortfolioChange(),(t.initialValue!==void 0||t.sblocRate!==void 0)&&this.dispatchEvent(new CustomEvent("set-simulation-params",{bubbles:!0,composed:!0,detail:t})),setTimeout(()=>this.clearDirty(),0)}updatePresetSelect(){const t=this.$(".preset-select");t&&(this._currentPortfolioId!==void 0?t.value=this._currentPortfolioId.toString():t.value="")}disconnectedCallback(){this.donutChart&&(this.donutChart.destroy(),this.donutChart=null),super.disconnectedCallback()}afterRender(){Ve.register(fa,vn),this.renderAvailableAssets(),this.attachEventListeners(),this.initializeDonutChart(),this.refreshPresetDropdown(),this.addEventListener("params-changed",()=>{this.markDirty()})}loadAvailableAssets(){const t=Nr();this.availableAssets=t.map((e,r)=>{const i=da(e);return this.calculateAssetStats(e,i,r)}),this.loadEffectiveAssetData()}async loadEffectiveAssetData(){try{const t=Nr(),e=await qa(),r=new Set(e);let i=!1;for(let o=0;o<t.length;o++){const l=t[o];if(r.has(l)){const d=await Wa(l);d&&(this.availableAssets[o]=this.calculateAssetStats(l,d,o),i=!0)}}const n=new Set(t),s=e.filter(o=>!n.has(o));if(s.length>0){s.sort((l,d)=>l.localeCompare(d));const o=this.availableAssets.length;for(let l=0;l<s.length;l++){const d=s[l],h=await Wa(d);if(h){const p=this.calculateAssetStats(d,h,o+l);this.availableAssets.push(p),i=!0}}}i&&this.render()}catch(t){console.error("Error loading effective asset data:",t)}}async loadCustomOnlyAssets(){await this.loadEffectiveAssetData()}calculateAssetStats(t,e,r){if(!e)return{symbol:t,name:t,assetClass:"unknown",years:0,avgReturn:0,volatility:0,color:fr[r%fr.length]};const i=e.returns.map(m=>m.return),n=i.length,s=i.reduce((m,v)=>m+v,0)/n*100,o=s/100,d=i.map(m=>Math.pow(m-o,2)).reduce((m,v)=>m+v,0)/n,h=Math.sqrt(d)*100,p={equity_stock:"STOCK",equity_index:"INDEX",commodity:"COMMODITY",bond:"BOND"};return{symbol:t,name:e.name||t,assetClass:p[e.assetClass]||"STOCK",years:n,avgReturn:s,volatility:h,color:fr[r%fr.length]}}getFilteredAssets(){const t=this.searchQuery.toLowerCase();let e=this.availableAssets;return t&&(e=this.availableAssets.filter(r=>r.symbol.toLowerCase().includes(t)||r.name.toLowerCase().includes(t))),[...e].sort((r,i)=>r.symbol.localeCompare(i.symbol))}renderAvailableAssets(){const t=this.$(".available-assets-list");if(!t)return;const e=new Set(this.selectedAssets.map(i=>i.symbol)),r=this.getFilteredAssets().filter(i=>!e.has(i.symbol));t.innerHTML=r.map(i=>`
        <div class="available-asset-item"
             data-symbol="${i.symbol}"
             role="option"
             aria-selected="false">
          <div class="asset-info">
            <div>
              <span class="asset-name">${i.symbol}</span>
              <span class="asset-badge type-${i.assetClass.toLowerCase()}">${i.assetClass}</span>
            </div>
            <div class="asset-stats">
              ${i.years} years | Avg: ${i.avgReturn.toFixed(1)}% | Vol: ${i.volatility.toFixed(1)}%
            </div>
          </div>
          <button class="add-btn" aria-label="Add ${i.symbol}">+</button>
        </div>
      `).join(""),this.$$(".available-asset-item").forEach(i=>{const n=i.dataset.symbol;if(!n)return;i.addEventListener("dblclick",()=>this.addAsset(n)),i.querySelector(".add-btn")?.addEventListener("click",o=>{o.stopPropagation(),this.addAsset(n)})})}renderSelectedAssets(){const t=this.$(".portfolio-visualization"),e=this.$(".selected-assets-list"),r=this.$(".weight-section");if(!t||!e)return;if(this.selectedAssets.length===0){t&&(t.style.display="none"),e.innerHTML="",r&&(r.style.display="none");return}t&&(t.style.display="block"),r&&(r.style.display="block");const i=t.querySelector(".header-subtitle");i&&(i.textContent=`${this.selectedAssets.length} Asset${this.selectedAssets.length!==1?"s":""}`);const n=t.querySelector(".donut-center");if(n){const l=`${this.selectedAssets.length} ASSET${this.selectedAssets.length!==1?"S":""}`;n.textContent!==l&&(n.textContent=l,n.classList.add("updated"),setTimeout(()=>n.classList.remove("updated"),400))}const s=[...this.selectedAssets].sort((l,d)=>d.weight-l.weight),o=t.querySelector(".asset-bars-list");if(o){const l=Math.max(...s.map(d=>d.weight),1);o.innerHTML=s.map(d=>`
        <div class="asset-bar-row" style="--bar-width: ${d.weight/l*100}%; --bar-color: ${d.color};">
          <div class="asset-bar-swatch" style="background-color: ${d.color}"></div>
          <span class="asset-bar-symbol">${d.symbol}</span>
          <span class="asset-bar-name">${d.name}</span>
          <span class="asset-bar-percent">${d.weight.toFixed(1)}%</span>
        </div>
      `).join("")}this.updateDonutChart(),e.innerHTML=this.selectedAssets.map((l,d)=>`
      <div class="selected-asset-card" data-symbol="${l.symbol}">
        <div class="selected-asset-row1">
          <div class="color-swatch" style="background-color: ${l.color}"></div>
          <span class="selected-asset-symbol">${l.symbol}</span>
          <span class="selected-asset-stats">${l.avgReturn.toFixed(1)}% | ${l.volatility.toFixed(1)}%</span>
          <div class="weight-input-group">
            <input type="number"
                   class="weight-input"
                   value="${l.weight.toFixed(1)}"
                   min="0"
                   max="100"
                   step="0.1"
                   data-index="${d}"
                   aria-label="Weight for ${l.symbol}" />
            <span class="weight-percent">%</span>
          </div>
          <button class="remove-btn" data-symbol="${l.symbol}" aria-label="Remove ${l.symbol}">&times;</button>
        </div>
        <div class="selected-asset-row2">
          <span class="selected-asset-badge type-${l.assetClass.toLowerCase()}">${l.assetClass}</span>
          <span class="selected-asset-name">${l.name}</span>
        </div>
      </div>
    `).join(""),this.$$(".weight-input").forEach(l=>{l.addEventListener("input",d=>{const h=parseInt(d.target.dataset.index||"0"),p=parseFloat(d.target.value)||0;this.selectedAssets[h]&&(this.selectedAssets[h].weight=p,this.renderVisualizationOnly(),this.renderWeightBar(),this.updateTotal(),this.markDirty(),this.dispatchPortfolioChange())}),l.addEventListener("keydown",d=>{d.key==="Enter"&&(d.preventDefault(),this.dispatchEvent(new CustomEvent("commit",{bubbles:!0,composed:!0,detail:{source:"weight-input"}})))})}),this.$$(".remove-btn").forEach(l=>{l.addEventListener("click",()=>{const d=l.dataset.symbol;d&&this.removeAsset(d)})}),this.renderWeightBar(),this.updateTotal()}renderWeightBar(){const t=this.$(".weight-bar");if(!t)return;const e=this.selectedAssets.reduce((r,i)=>r+i.weight,0);t.innerHTML=this.selectedAssets.map(r=>{e>0&&r.weight/e*100;const i=r.weight;return`
        <div class="weight-segment" style="flex: ${r.weight||.1}; background-color: ${r.color}">
          ${i>=5?i.toFixed(0)+"%":""}
        </div>
      `}).join("")}updateTotal(){const t=this.selectedAssets.reduce((r,i)=>r+i.weight,0),e=this.$(".total-value");e&&(e.textContent=t.toFixed(1),e.className=`total-value ${Math.abs(t-100)<.01?"":"invalid"}`)}attachEventListeners(){const t=this.$(".search-input");t?.addEventListener("input",()=>{this.searchQuery=t.value,this.renderAvailableAssets()}),this.$(".balance-btn")?.addEventListener("click",()=>this.balanceWeights()),this.$(".clear-btn")?.addEventListener("click",()=>this.clearAll()),this.$(".save-btn")?.addEventListener("click",()=>this.savePreset()),this.$(".load-btn")?.addEventListener("click",()=>this.loadPreset()),this.$(".import-btn")?.addEventListener("click",()=>this.importPreset()),this.$(".export-btn")?.addEventListener("click",()=>this.exportPreset()),this.$(".delete-btn")?.addEventListener("click",()=>this.deletePreset()),this.$(".import-file-input")?.addEventListener("change",i=>this.handleFileImport(i)),this.$(".preset-select")?.addEventListener("change",()=>this.handlePresetSelectChange())}async handleFileImport(t){const e=t.target,r=e.files?.[0];if(r){try{const i=await Wc(r);if(i.length>0){const n=i[0];this.populateFromPortfolio(n),this.showToast(`Imported portfolio: ${n.name}`,"success")}}catch(i){this.showToast(`Import failed: ${i instanceof Error?i.message:"Unknown error"}`,"error")}e.value=""}}async handlePresetSelectChange(){const t=this.$(".preset-select"),e=parseInt(t.value),r=this._currentPortfolioId;if(zb.getCurrentResult()!==null){const n=await this.showModal({title:"Simulation Results Exist",subtitle:"Would you like to compare with the new preset or replace the current results?",type:"choice",confirmText:"Replace",cancelText:"Cancel",alternateText:"Compare"});if(n==="cancel"){t.value=r?.toString()||"";return}n==="alternate"&&(this._pendingComparisonMode=!0)}if(this._isDirty&&this._currentPortfolioId!==void 0){const n=await this.showModal({title:"Unsaved Changes",subtitle:`You have unsaved changes to "${this._currentPortfolioName}". What would you like to do?`,type:"choice",confirmText:"Discard Changes",cancelText:"Cancel",alternateText:"Save Changes"});if(n==="cancel"){t.value=r?.toString()||"",this._pendingComparisonMode=!1;return}n==="alternate"&&await this.saveCurrentPortfolio()}if(isNaN(e)){this._currentPortfolioId=void 0,this._currentPortfolioName="",this._isDirty=!1,this.updateDirtyIndicator(),this._pendingComparisonMode=!1;return}try{const s=(await sa()).find(o=>o.id===e);s&&(this.populateFromPortfolio(s),this.dispatchEvent(new CustomEvent("preset-loaded",{bubbles:!0,composed:!0,detail:{presetName:s.name,pendingComparisonMode:this._pendingComparisonMode}})),this._pendingComparisonMode=!1,this.showToast(`Loaded portfolio: ${s.name}`,"info"))}catch{this.showToast("Failed to load portfolio","error"),this._pendingComparisonMode=!1}}showToast(t,e="info"){this.dispatchEvent(new CustomEvent("show-toast",{bubbles:!0,composed:!0,detail:{message:t,type:e}}))}showModal(t){return new Promise(e=>{this.dispatchEvent(new CustomEvent("show-modal",{bubbles:!0,composed:!0,detail:{options:t,callback:r=>e(r)}}))})}markDirty(){if(this._currentPortfolioId===void 0)return;this.getStateSnapshot()!==this._savedSnapshot&&(this._isDirty=!0,this.updateDirtyIndicator())}clearDirty(){this._isDirty=!1,this._savedSnapshot=this.getStateSnapshot(),this.updateDirtyIndicator()}getStateSnapshot(){const t=this.selectedAssets.map(i=>`${i.symbol}:${i.weight.toFixed(2)}`).join(",");let e="";const r=new CustomEvent("get-simulation-params",{bubbles:!0,composed:!0,detail:{callback:i=>{e=JSON.stringify(i)}}});return this.dispatchEvent(r),`${t}|${e}`}updateDirtyIndicator(){const t=this.$(".modified-badge");t&&(t.style.display=this._isDirty?"inline-block":"none")}get isDirty(){return this._isDirty}get hasLoadedPortfolio(){return this._currentPortfolioId!==void 0}addAsset(t){if(this.selectedAssets.find(n=>n.symbol===t))return;const e=this.availableAssets.find(n=>n.symbol===t);if(!e)return;const r=new Set(this.selectedAssets.map(n=>n.color));let i=e.color;for(const n of fr)if(!r.has(n)){i=n;break}this.selectedAssets.push({...e,color:i,weight:0}),this.renderAvailableAssets(),this.renderSelectedAssets(),this.markDirty(),this.dispatchPortfolioChange()}removeAsset(t){this.selectedAssets=this.selectedAssets.filter(e=>e.symbol!==t),this.renderAvailableAssets(),this.renderSelectedAssets(),this.markDirty(),this.dispatchPortfolioChange()}balanceWeights(){if(this.selectedAssets.length===0)return;const t=Math.round(100/this.selectedAssets.length*10)/10;this.selectedAssets.forEach(e=>{e.weight=t}),this.renderSelectedAssets(),this.markDirty(),this.dispatchPortfolioChange()}clearAll(){this.selectedAssets=[],this.renderAvailableAssets(),this.renderSelectedAssets(),this.markDirty(),this.dispatchPortfolioChange()}async saveCurrentPortfolio(){if(!(this._currentPortfolioId===void 0||!this._currentPortfolioName))try{const t=this.buildAssetRecords(),e=new Date().toISOString();let r={};const i=new CustomEvent("get-simulation-params",{bubbles:!0,composed:!0,detail:{callback:n=>{r=n}}});this.dispatchEvent(i),await Zi({id:this._currentPortfolioId,name:this._currentPortfolioName,assets:t,modified:e,version:1,...r}),await Wo(),this.clearDirty(),this.showToast(`Saved portfolio: ${this._currentPortfolioName}`,"success")}catch{this.showToast("Failed to save portfolio","error")}}async savePreset(){if(this.debugLog("savePreset() called"),this.selectedAssets.length===0){this.debugLog("No assets selected - aborting"),this.showToast("Add assets to portfolio before saving","error");return}this.debugLog(`Assets count: ${this.selectedAssets.length}`),this.debugLog("Showing name prompt modal");const t=await this.showModal({title:"Save Portfolio",subtitle:this._currentPortfolioName?`Overwrite "${this._currentPortfolioName}" or enter a new name:`:"Enter a name for this portfolio:",type:"prompt",defaultValue:this._currentPortfolioName||"",confirmText:"Save"});if(this.debugLog(`Modal result: ${JSON.stringify(t)}`),!t||typeof t!="string"||!t.trim()){this.debugLog("Name was empty or cancelled - aborting");return}const e=t.trim();this.debugLog(`Trimmed name: "${e}"`),this.debugLog("Checking for existing portfolio with same name...");const r=await cp(e);if(this.debugLog(`findPortfolioByName result: ${r?`found id=${r.id}`:"not found"}`),r&&r.id!==this._currentPortfolioId){this.debugLog("Name exists and differs from current - showing overwrite prompt");const i=await this.showModal({title:"Name Already Exists",subtitle:`A portfolio named "${r.name}" already exists. What would you like to do?`,type:"confirm",confirmText:"Overwrite",cancelText:"Change Name"});if(this.debugLog(`Overwrite choice: ${i}`),i===!1)return this.debugLog("User chose to change name - restarting save"),this.savePreset()}try{this.debugLog("Building asset records...");const i=this.buildAssetRecords();this.debugLog(`Built ${i.length} asset records`);const n=new Date().toISOString();let s,o=n;r&&r.id!==this._currentPortfolioId?(s=r.id,o=r.created,this.debugLog(`Overwriting existing portfolio id=${s}`)):e===this._currentPortfolioName?(s=this._currentPortfolioId,this.debugLog(`Updating current portfolio id=${s}`)):(s=void 0,this.debugLog("Creating new portfolio (no existing id)")),this.debugLog("Capturing simulation params...");let l={};const d=new CustomEvent("get-simulation-params",{bubbles:!0,composed:!0,detail:{callback:p=>{l=p}}});this.dispatchEvent(d),this.debugLog(`Simulation params: ${JSON.stringify(l)}`),this.debugLog("Calling savePortfolio()...");const h=await Zi({id:s,name:e,assets:i,created:o,modified:n,version:1,...l});this.debugLog(`savePortfolio() returned id=${h}`),this._currentPortfolioId=h,this._currentPortfolioName=e,this.debugLog("Updated current portfolio tracking"),this.debugLog("Deleting temp portfolio..."),await Wo(),this.debugLog("Temp portfolio deleted"),this.clearDirty(),this.debugLog("Cleared dirty state"),this.debugLog("Refreshing preset dropdown..."),await this.refreshPresetDropdown(),this.debugLog("Preset dropdown refreshed"),this.showToast(`Saved portfolio: ${e}`,"success"),this.debugLog("Save complete - success toast shown")}catch(i){const n=i instanceof Error?i.message:String(i);this.debugLog(`ERROR in savePreset: ${n}`),this.debugLog(`Error stack: ${i instanceof Error?i.stack:"N/A"}`),this.showToast(`Failed to save portfolio: ${n}`,"error")}}debugLog(t){if(jc()){const e=new Date().toISOString().split("T")[1].slice(0,12);console.log(`[Portfolio UI ${e}] ${t}`)}}async loadPreset(){await this.refreshPresetDropdown();const t=this.$(".preset-select");if(!t)return;const e=parseInt(t.value);if(!isNaN(e))try{const i=(await sa()).find(n=>n.id===e);if(i){if(this._isDirty&&this._currentPortfolioId!==void 0&&this._currentPortfolioId!==e){const n=await this.showModal({title:"Unsaved Changes",subtitle:`You have unsaved changes to "${this._currentPortfolioName}". What would you like to do?`,type:"choice",confirmText:"Discard Changes",cancelText:"Cancel",alternateText:"Save Changes"});if(n==="cancel")return;n==="alternate"&&await this.saveCurrentPortfolio()}this.populateFromPortfolio(i),this.dispatchEvent(new CustomEvent("preset-loaded",{bubbles:!0,composed:!0,detail:{presetName:i.name,pendingComparisonMode:!1}})),this.showToast(`Loaded portfolio: ${i.name}`,"info");return}}catch{this.showToast("Failed to load portfolio","error");return}t.focus(),t.click()}importPreset(){this.$(".import-file-input")?.click()}exportPreset(){if(this.selectedAssets.length===0){this.showToast("Add assets to portfolio before exporting","error");return}const t=this.buildAssetRecords(),e=new Date().toISOString(),r={name:this._currentPortfolioName||"Exported Portfolio",assets:t,created:e,modified:e,version:1};qc([r]),this.showToast("Portfolio exported","success")}async deletePreset(){if(this._currentPortfolioId===void 0){this.showToast("No saved portfolio selected to delete","error");return}if(await this.showModal({title:"Delete Portfolio",subtitle:`Are you sure you want to delete "${this._currentPortfolioName}"? This cannot be undone.`,type:"confirm",confirmText:"Delete"}))try{await Hc(this._currentPortfolioId);const e=this._currentPortfolioName;this._currentPortfolioId=void 0,this._currentPortfolioName="",this._isDirty=!1,this.updateDirtyIndicator(),await this.refreshPresetDropdown(),this.showToast(`Deleted portfolio: ${e}`,"success")}catch{this.showToast("Failed to delete portfolio","error")}}async refreshPresetDropdown(){const t=this.$(".preset-select");if(t)try{const r=(await sa()).filter(i=>i.name!==Ae);t.innerHTML='<option value="">-- Presets --</option>',r.forEach(i=>{const n=document.createElement("option");n.value=i.id?.toString()||"",n.textContent=i.name,i.id===this._currentPortfolioId&&(n.selected=!0),t.appendChild(n)})}catch(e){console.warn("Failed to refresh preset dropdown:",e)}}dispatchPortfolioChange(){const t=this.selectedAssets.reduce((e,r)=>e+r.weight,0);this.dispatchEvent(new CustomEvent("portfolio-change",{bubbles:!0,composed:!0,detail:{assets:this.selectedAssets.map(e=>({symbol:e.symbol,name:e.name,weight:e.weight,color:e.color})),total:t,valid:Math.abs(t-100)<.01}})),this._currentPortfolioId===void 0&&this.autoSaveToTemp()}async autoSaveToTemp(){try{const t=this.buildAssetRecords();let e={};const r=new CustomEvent("get-simulation-params",{bubbles:!0,composed:!0,detail:{callback:i=>{e=i}}});this.dispatchEvent(r),await sp(t,e)}catch(t){console.warn("Failed to auto-save temp portfolio:",t)}}buildAssetRecords(){return this.selectedAssets.map(t=>({id:t.symbol,symbol:t.symbol,name:t.name,assetClass:t.assetClass.toLowerCase()==="stock"||t.assetClass.toLowerCase()==="index"?"equity":t.assetClass.toLowerCase(),weight:t.weight/100}))}initializeDonutChart(){const t=this.$("#portfolio-donut");t&&(this.donutChart=new Ve(t,{type:"doughnut",data:{labels:[],datasets:[{data:[],backgroundColor:[],borderColor:"#ffffff",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!0,cutout:"70%",animation:{duration:800,easing:"easeOutQuart",animateRotate:!0,animateScale:!1},transitions:{active:{animation:{duration:300}}},plugins:{legend:{display:!1},tooltip:{callbacks:{label:e=>{const r=e.raw;return`${e.label}: ${r.toFixed(1)}%`}}}}}}))}updateDonutChart(){if(!this.donutChart)return;const t=this.selectedAssets.map(i=>i.name),e=this.selectedAssets.map(i=>i.weight),r=this.selectedAssets.map(i=>i.color);this.donutChart.data.labels=t,this.donutChart.data.datasets[0].data=e,this.donutChart.data.datasets[0].backgroundColor=r,this.donutChart.update("default")}renderVisualizationOnly(){const t=this.$(".portfolio-visualization");if(!t)return;const e=t.querySelector(".donut-center");if(e){const n=`${this.selectedAssets.length} ASSET${this.selectedAssets.length!==1?"S":""}`;e.textContent!==n&&(e.textContent=n)}const r=[...this.selectedAssets].sort((n,s)=>s.weight-n.weight),i=t.querySelector(".asset-bars-list");if(i){const n=Math.max(...r.map(s=>s.weight),1);i.innerHTML=r.map(s=>`
        <div class="asset-bar-row" style="--bar-width: ${s.weight/n*100}%; --bar-color: ${s.color};">
          <div class="asset-bar-swatch" style="background-color: ${s.color}"></div>
          <span class="asset-bar-symbol">${s.symbol}</span>
          <span class="asset-bar-name">${s.name}</span>
          <span class="asset-bar-percent">${s.weight.toFixed(1)}%</span>
        </div>
      `).join("")}this.updateDonutChart()}getWeights(){const t={};return this.selectedAssets.forEach(e=>{t[e.symbol]=e.weight}),t}setWeights(t){this.selectedAssets=[];for(const[e,r]of Object.entries(t)){const i=this.availableAssets.find(o=>o.symbol===e);if(!i){console.warn(`Asset ${e} not found in available assets`);continue}const n=new Set(this.selectedAssets.map(o=>o.color));let s=i.color;for(const o of fr)if(!n.has(o)){s=o;break}this.selectedAssets.push({...i,color:s,weight:r})}this.renderAvailableAssets(),this.renderSelectedAssets(),this.markDirty(),this.dispatchPortfolioChange()}getSelected(){return this.selectedAssets.map(t=>t.symbol)}isValid(){const t=this.selectedAssets.reduce((e,r)=>e+r.weight,0);return Math.abs(t-100)<.01&&this.selectedAssets.length>0}}customElements.define("portfolio-composition",Tb);class Lb extends Ct{static get observedAttributes(){return["min","max","step","value","label","show-value","suffix"]}template(){const t=this.getAttribute("label"),e=this.hasAttribute("show-value")||this.hasAttribute("suffix"),r=this.getAttribute("value")??"0",i=this.getAttribute("min")??"0",n=this.getAttribute("max")??"100",s=this.getAttribute("step")??"1",o=this.getAttribute("suffix")??"",l=parseFloat(r),d=parseFloat(i),h=parseFloat(n),p=(l-d)/(h-d)*100;return`
      <div class="range-wrapper">
        ${t?`<label class="label">${t}</label>`:""}
        <div class="input-row">
          <input
            type="range"
            min="${i}"
            max="${n}"
            step="${s}"
            value="${r}"
            style="--fill-percent: ${p}%"
          />
          ${e?`<span class="value-display">${r}${o}</span>`:""}
        </div>
      </div>
    `}styles(){return`
      :host {
        display: block;
        width: 100%;
        max-width: 100%;
      }

      /* Shadow DOM reset - global box-sizing doesn't penetrate */
      *, *::before, *::after {
        box-sizing: border-box;
      }

      .range-wrapper {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-xs, 4px);
      }

      .label {
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #64748b);
      }

      .input-row {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
      }

      input[type="range"] {
        -webkit-appearance: none;
        appearance: none;
        flex: 1;
        height: 8px;
        background: linear-gradient(
          to right,
          var(--color-primary, #0d9488) 0%,
          var(--color-primary, #0d9488) var(--fill-percent, 0%),
          var(--slider-track-bg, #e2e8f0) var(--fill-percent, 0%),
          var(--slider-track-bg, #e2e8f0) 100%
        );
        border-radius: var(--border-radius-sm, 4px);
        outline: none;
        cursor: pointer;
      }

      /* Webkit (Chrome, Safari, Edge) */
      input[type="range"]::-webkit-slider-thumb {
        -webkit-appearance: none;
        appearance: none;
        width: 18px;
        height: 18px;
        margin-top: -5px; /* Center on 8px track: -(18-8)/2 */
        background: var(--color-primary, #0d9488);
        border: 3px solid var(--surface-primary, #ffffff);
        border-radius: 50%;
        cursor: pointer;
        transition: background 0.15s ease, transform 0.15s ease;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
      }

      input[type="range"]::-webkit-slider-thumb:hover {
        background: var(--color-primary-hover, #0f766e);
        transform: scale(1.1);
      }

      input[type="range"]::-webkit-slider-runnable-track {
        height: 8px;
        background: transparent;
        border-radius: var(--border-radius-sm, 4px);
      }

      /* Firefox */
      input[type="range"]::-moz-range-thumb {
        width: 18px;
        height: 18px;
        background: var(--color-primary, #0d9488);
        border: 3px solid var(--surface-primary, #ffffff);
        border-radius: 50%;
        cursor: pointer;
        transition: background 0.15s ease, transform 0.15s ease;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.2);
      }

      input[type="range"]::-moz-range-thumb:hover {
        background: var(--color-primary-hover, #0f766e);
        transform: scale(1.1);
      }

      input[type="range"]::-moz-range-track {
        height: 8px;
        background: transparent;
        border-radius: var(--border-radius-sm, 4px);
      }

      /* Firefox progress fill */
      input[type="range"]::-moz-range-progress {
        height: 8px;
        background: var(--color-primary, #0d9488);
        border-radius: var(--border-radius-sm, 4px) 0 0 var(--border-radius-sm, 4px);
      }

      .value-display {
        min-width: 48px;
        text-align: right;
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-primary, #1e293b);
        font-variant-numeric: tabular-nums;
      }

      /* Focus visible state */
      input[type="range"]:focus-visible {
        outline: 2px solid var(--color-primary, #0d9488);
        outline-offset: 2px;
      }

      /* Disabled state */
      input[type="range"]:disabled {
        cursor: not-allowed;
        opacity: 0.7;
        background: linear-gradient(
          to right,
          var(--border-disabled, #d1d5db) 0%,
          var(--border-disabled, #d1d5db) var(--fill-percent, 0%),
          var(--surface-disabled, #f3f4f6) var(--fill-percent, 0%),
          var(--surface-disabled, #f3f4f6) 100%
        );
      }

      input[type="range"]:disabled::-webkit-slider-thumb {
        background: var(--border-disabled, #d1d5db);
        cursor: not-allowed;
      }

      input[type="range"]:disabled::-moz-range-thumb {
        background: var(--border-disabled, #d1d5db);
        cursor: not-allowed;
      }

      :host([disabled]) .label,
      :host([disabled]) .value-display {
        color: var(--text-disabled, #9ca3af);
      }
    `}afterRender(){const t=this.$("input");t&&(t.addEventListener("input",this.handleInput.bind(this)),t.addEventListener("mouseup",this.handleMouseUp.bind(this)),t.addEventListener("touchend",this.handleMouseUp.bind(this)))}handleMouseUp(t){const e=t.target,r=parseFloat(e.value);this.dispatchEvent(new CustomEvent("commit",{bubbles:!0,composed:!0,detail:{value:r}}))}handleInput(t){const e=t.target,r=parseFloat(e.value),i=this.getAttribute("suffix")??"",n=parseFloat(this.getAttribute("min")??"0"),s=parseFloat(this.getAttribute("max")??"100"),o=(r-n)/(s-n)*100;e.style.setProperty("--fill-percent",`${o}%`);const l=this.$(".value-display");l&&(l.textContent=`${this.formatValue(r)}${i}`),this.dispatchEvent(new CustomEvent("change",{bubbles:!0,composed:!0,detail:{value:r}}))}get value(){const t=this.$("input");return t?parseFloat(t.value):0}set value(t){this.setAttribute("value",String(t));const e=this.$("input");if(e){e.value=String(t);const i=parseFloat(this.getAttribute("min")??"0"),n=parseFloat(this.getAttribute("max")??"100"),s=(t-i)/(n-i)*100;e.style.setProperty("--fill-percent",`${s}%`)}const r=this.$(".value-display");if(r){const i=this.getAttribute("suffix")??"";r.textContent=`${this.formatValue(t)}${i}`}}formatValue(t){const r=parseFloat(this.getAttribute("step")??"1").toString(),i=r.indexOf("."),n=i===-1?0:r.length-i-1,s=t.toFixed(n);return n>0?s.replace(/\.?0+$/,"")||"0":s}}customElements.define("range-slider",Lb);class Ob extends Ct{static get observedAttributes(){return["min","max","step","value","label","suffix"]}template(){const t=this.getAttribute("label"),e=this.getAttribute("suffix"),r=this.getAttribute("value")??"",i=this.getAttribute("min"),n=this.getAttribute("max"),s=this.getAttribute("step")??"1";return`
      <div class="input-wrapper">
        ${t?`<label class="label">${t}</label>`:""}
        <div class="input-row">
          <input
            type="number"
            value="${r}"
            step="${s}"
            ${i!==null?`min="${i}"`:""}
            ${n!==null?`max="${n}"`:""}
          />
          ${e?`<span class="suffix">${e}</span>`:""}
        </div>
      </div>
    `}styles(){return`
      :host {
        display: block;
        max-width: 100%;
      }

      /* Shadow DOM reset - global box-sizing doesn't penetrate */
      *, *::before, *::after {
        box-sizing: border-box;
      }

      .input-wrapper {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-xs, 4px);
      }

      .label {
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #64748b);
      }

      .input-row {
        display: flex;
        align-items: center;
        position: relative;
      }

      input[type="number"] {
        width: 100%;
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        font-size: var(--font-size-md, 1rem);
        font-family: var(--font-family, system-ui, sans-serif);
        color: var(--text-primary, #1e293b);
        background: var(--input-bg, var(--surface-primary, #ffffff));
        border: 1px solid var(--input-border, var(--border-color, #e2e8f0));
        border-radius: var(--border-radius-md, 8px);
        outline: none;
        transition: border-color 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
      }

      input[type="number"]:hover {
        border-color: var(--border-color-hover, #cbd5e1);
      }

      input[type="number"]:focus {
        border-color: var(--color-primary, #0d9488);
        box-shadow: 0 0 0 3px rgba(13, 148, 136, 0.1);
        background: var(--surface-primary, #ffffff);
      }

      input[type="number"]::-webkit-inner-spin-button,
      input[type="number"]::-webkit-outer-spin-button {
        opacity: 1;
      }

      .suffix {
        position: absolute;
        right: var(--spacing-md, 16px);
        color: var(--text-secondary, #64748b);
        font-size: var(--font-size-sm, 0.875rem);
        pointer-events: none;
      }

      /* Add padding to input when suffix is present */
      :host([suffix]) input[type="number"] {
        padding-right: calc(var(--spacing-md, 16px) + 2em);
      }

      /* Focus visible state */
      input[type="number"]:focus-visible {
        outline: 2px solid var(--color-primary, #0d9488);
        outline-offset: 2px;
      }

      /* Disabled state */
      input[type="number"]:disabled {
        background: var(--surface-disabled, #f3f4f6);
        color: var(--text-disabled, #9ca3af);
        border-color: var(--border-disabled, #d1d5db);
        cursor: not-allowed;
        opacity: 0.7;
      }

      :host([disabled]) .label {
        color: var(--text-disabled, #9ca3af);
      }

      :host([disabled]) .suffix {
        color: var(--text-disabled, #9ca3af);
      }
    `}afterRender(){const t=this.$("input");t&&(t.addEventListener("input",this.handleInput.bind(this)),t.addEventListener("change",this.handleChange.bind(this)),t.addEventListener("keydown",this.handleKeydown.bind(this)))}handleKeydown(t){if(t.key==="Enter"){t.preventDefault();const r=t.target.valueAsNumber;this.dispatchEvent(new CustomEvent("commit",{bubbles:!0,composed:!0,detail:{value:isNaN(r)?null:r}}))}}handleInput(t){const r=t.target.valueAsNumber;this.dispatchEvent(new CustomEvent("input",{bubbles:!0,composed:!0,detail:{value:isNaN(r)?null:r}}))}handleChange(t){const r=t.target.valueAsNumber;this.dispatchEvent(new CustomEvent("change",{bubbles:!0,composed:!0,detail:{value:isNaN(r)?null:r}}))}get value(){const t=this.$("input");if(!t)return null;const e=t.valueAsNumber;return isNaN(e)?null:e}set value(t){this.setAttribute("value",t!==null?String(t):"");const e=this.$("input");e&&(e.value=t!==null?String(t):"")}}customElements.define("number-input",Ob);class Bb extends Ct{static get observedAttributes(){return["options","value","label"]}getOptions(){const t=this.getAttribute("options");if(!t)return[];try{return JSON.parse(t)}catch{return console.warn("select-input: Invalid options JSON"),[]}}template(){const t=this.getAttribute("label"),e=this.getAttribute("value")??"",i=this.getOptions().map(n=>`<option value="${n.value}" ${n.value===e?"selected":""}>${n.label}</option>`).join("");return`
      <div class="select-wrapper">
        ${t?`<label class="label">${t}</label>`:""}
        <div class="select-container">
          <select>${i}</select>
          <span class="arrow"></span>
        </div>
      </div>
    `}styles(){return`
      :host {
        display: block;
        max-width: 100%;
      }

      /* Shadow DOM reset - global box-sizing doesn't penetrate */
      *, *::before, *::after {
        box-sizing: border-box;
      }

      .select-wrapper {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-xs, 4px);
      }

      .label {
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #64748b);
      }

      .select-container {
        position: relative;
        display: flex;
        align-items: center;
      }

      select {
        width: 100%;
        padding: var(--spacing-sm, 8px) var(--spacing-xl, 32px) var(--spacing-sm, 8px) var(--spacing-md, 16px);
        font-size: var(--font-size-md, 1rem);
        font-family: var(--font-family, system-ui, sans-serif);
        color: var(--text-primary, #1e293b);
        background: var(--input-bg, var(--surface-primary, #ffffff));
        border: 1px solid var(--input-border, var(--border-color, #e2e8f0));
        border-radius: var(--border-radius-md, 8px);
        outline: none;
        cursor: pointer;
        appearance: none;
        -webkit-appearance: none;
        -moz-appearance: none;
        transition: border-color 0.15s ease, box-shadow 0.15s ease, background 0.15s ease;
      }

      select:hover {
        border-color: var(--border-color-hover, #cbd5e1);
      }

      select:focus {
        border-color: var(--color-primary, #0d9488);
        box-shadow: 0 0 0 3px rgba(13, 148, 136, 0.1);
        background: var(--surface-primary, #ffffff);
      }

      .arrow {
        position: absolute;
        right: var(--spacing-md, 16px);
        width: 0;
        height: 0;
        border-left: 5px solid transparent;
        border-right: 5px solid transparent;
        border-top: 5px solid var(--text-secondary, #64748b);
        pointer-events: none;
      }

      /* Focus visible state */
      select:focus-visible {
        outline: 2px solid var(--color-primary, #0d9488);
        outline-offset: 2px;
      }

      /* Disabled state */
      select:disabled {
        background: var(--surface-disabled, #f3f4f6);
        color: var(--text-disabled, #9ca3af);
        border-color: var(--border-disabled, #d1d5db);
        cursor: not-allowed;
        opacity: 0.7;
      }

      select:disabled + .arrow {
        border-top-color: var(--text-disabled, #9ca3af);
      }

      :host([disabled]) .label {
        color: var(--text-disabled, #9ca3af);
      }
    `}afterRender(){const t=this.$("select");t&&t.addEventListener("change",this.handleChange.bind(this))}handleChange(t){const r=t.target.value;this.dispatchEvent(new CustomEvent("change",{bubbles:!0,composed:!0,detail:{value:r}}))}get value(){return this.$("select")?.value??""}set value(t){this.setAttribute("value",t);const e=this.$("select");e&&(e.value=t)}set options(t){this.setAttribute("options",JSON.stringify(t))}}customElements.define("select-input",Bb);class Ib extends Ct{static get observedAttributes(){return["label","checked","disabled"]}template(){const t=this.getAttribute("label")||"",e=this.hasAttribute("checked"),r=this.hasAttribute("disabled");return`
      <label class="checkbox-wrapper ${r?"disabled":""}">
        <input
          type="checkbox"
          ${e?"checked":""}
          ${r?"disabled":""}
        />
        <span class="checkmark">
          <svg viewBox="0 0 12 10" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M1 5L4.5 8.5L11 1" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </span>
        ${t?`<span class="label-text">${t}</span>`:""}
      </label>
    `}styles(){return`
      :host {
        display: block;
      }

      .checkbox-wrapper {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
        cursor: pointer;
        user-select: none;
      }

      .checkbox-wrapper.disabled {
        cursor: not-allowed;
      }

      .checkbox-wrapper.disabled .checkmark {
        background: var(--surface-disabled, #f3f4f6);
        border-color: var(--border-disabled, #d1d5db);
      }

      .checkbox-wrapper.disabled .label-text {
        color: var(--text-disabled, #9ca3af);
      }

      .checkbox-wrapper.disabled input[type="checkbox"]:checked + .checkmark {
        background: var(--border-disabled, #d1d5db);
        border-color: var(--border-disabled, #d1d5db);
      }

      input[type="checkbox"] {
        position: absolute;
        opacity: 0;
        width: 0;
        height: 0;
      }

      .checkmark {
        display: flex;
        align-items: center;
        justify-content: center;
        width: 20px;
        height: 20px;
        background: var(--surface-primary, #ffffff);
        border: 2px solid var(--border-color, #cbd5e1);
        border-radius: var(--radius-sm, 4px);
        transition: all 0.2s ease;
        flex-shrink: 0;
      }

      .checkmark svg {
        width: 12px;
        height: 12px;
        color: white;
        opacity: 0;
        transform: scale(0.5);
        transition: all 0.2s ease;
      }

      input[type="checkbox"]:checked + .checkmark {
        background: var(--color-primary, #0d9488);
        border-color: var(--color-primary, #0d9488);
      }

      input[type="checkbox"]:checked + .checkmark svg {
        opacity: 1;
        transform: scale(1);
      }

      input[type="checkbox"]:focus-visible + .checkmark {
        outline: 2px solid var(--color-primary, #0d9488);
        outline-offset: 2px;
      }

      .checkbox-wrapper:hover .checkmark {
        border-color: var(--color-primary, #0d9488);
      }

      .label-text {
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-primary, #1e293b);
        line-height: 1.4;
      }
    `}afterRender(){const t=this.$("input");t&&t.addEventListener("change",this.handleChange.bind(this))}handleChange(t){const e=t.target;this.dispatchEvent(new CustomEvent("change",{bubbles:!0,composed:!0,detail:{checked:e.checked}}))}get checked(){return this.$("input")?.checked??!1}set checked(t){t?this.setAttribute("checked",""):this.removeAttribute("checked");const e=this.$("input");e&&(e.checked=t)}}customElements.define("checkbox-input",Ib);class Fb extends Ct{static get observedAttributes(){return["value","indeterminate","label"]}get value(){return parseInt(this.getAttribute("value")||"0",10)}set value(t){const e=Math.min(100,Math.max(0,t));this.setAttribute("value",String(e))}get indeterminate(){return this.hasAttribute("indeterminate")}set indeterminate(t){t?this.setAttribute("indeterminate",""):this.removeAttribute("indeterminate")}get label(){return this.getAttribute("label")||""}set label(t){this.setAttribute("label",t)}attributeChangedCallback(t,e,r){if(e===r)return;const i=this.$(".progress-bar"),n=this.$(".progress-text"),s=this.$(".progress-label");if(t==="value"&&i&&n){const o=parseInt(r||"0",10);i.style.width=`${o}%`,n.textContent=`${o}%`}else t==="label"&&s&&(s.textContent=r||"")}template(){const t=this.indeterminate,e=this.value,r=this.label;return`
      <div class="progress-wrapper">
        ${r?`<span class="progress-label">${r}</span>`:""}
        <div class="progress-container"
             role="progressbar"
             ${t?"":`aria-valuenow="${e}"`}
             aria-valuemin="0"
             aria-valuemax="100"
             ${t?'aria-busy="true"':""}>
          <div class="progress-bar" style="width: ${t?"30%":e+"%"}"></div>
          <span class="progress-text">${t?"Processing...":e+"%"}</span>
        </div>
      </div>
    `}styles(){return`
      :host {
        display: block;
      }

      .progress-wrapper {
        display: flex;
        flex-direction: column;
        gap: 8px;
      }

      .progress-label {
        font-size: 0.875rem;
        color: var(--text-secondary, #666);
      }

      .progress-container {
        position: relative;
        height: 24px;
        background: var(--surface-tertiary, #e5e5e5);
        border-radius: var(--border-radius-lg, 12px);
        overflow: hidden;
      }

      .progress-bar {
        height: 100%;
        background: var(--color-primary, #3b82f6);
        transition: width 0.2s ease;
      }

      .progress-text {
        position: absolute;
        inset: 0;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 12px;
        font-weight: 500;
        color: var(--text-primary, #333);
      }

      :host([indeterminate]) .progress-bar {
        width: 30%;
        animation: indeterminate 1.5s infinite linear;
      }

      @keyframes indeterminate {
        0% { transform: translateX(-100%); }
        100% { transform: translateX(400%); }
      }
    `}}customElements.define("progress-indicator",Fb);class Vb extends Ct{static get observedAttributes(){return["type"]}get type(){return this.getAttribute("type")||"info"}set type(t){this.setAttribute("type",t)}getIcon(){switch(this.type){case"success":return"â";case"error":return"â";case"warning":return"â ";case"info":default:return"â¹"}}template(){return`
      <output class="toast">
        <span class="icon">${this.getIcon()}</span>
        <span class="message"><slot></slot></span>
        <button class="close" aria-label="Dismiss">&times;</button>
      </output>
    `}styles(){return`
      :host {
        display: block;
      }

      .toast {
        display: flex;
        align-items: center;
        gap: 12px;
        padding: 12px 16px;
        background: var(--toast-bg, #333);
        color: var(--toast-color, #fff);
        border-radius: var(--border-radius-md, 8px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        pointer-events: auto;
        animation: slide-in 0.3s ease;
        min-width: 200px;
        max-width: 400px;
      }

      :host([type="success"]) .toast {
        --toast-bg: var(--color-success, #22c55e);
      }

      :host([type="error"]) .toast {
        --toast-bg: var(--color-error, #ef4444);
      }

      :host([type="warning"]) .toast {
        --toast-bg: var(--color-warning, #f59e0b);
      }

      :host([type="info"]) .toast {
        --toast-bg: var(--color-primary, #3b82f6);
      }

      .icon {
        font-size: 1.2em;
      }

      .message {
        flex: 1;
      }

      .close {
        background: transparent;
        border: none;
        color: inherit;
        font-size: 1.2em;
        cursor: pointer;
        padding: 0 4px;
        opacity: 0.7;
        transition: opacity 0.15s ease;
      }

      .close:hover {
        opacity: 1;
      }

      @keyframes slide-in {
        from { transform: translateX(100%); opacity: 0; }
        to { transform: translateX(0); opacity: 1; }
      }

      :host(.removing) .toast {
        animation: fade-out 0.3s ease forwards;
      }

      @keyframes fade-out {
        to { opacity: 0; transform: translateY(10px); }
      }
    `}afterRender(){const t=this.$(".close");t&&t.addEventListener("click",()=>{this.remove()})}}customElements.define("toast-notification",Vb);class jb extends Ct{template(){return`
      <div id="toast-container" role="status" aria-live="polite" aria-atomic="false">
        \x3C!-- Toasts inserted here -->
      </div>
    `}styles(){return`
      :host {
        display: block;
      }

      #toast-container {
        position: fixed;
        bottom: 24px;
        right: 24px;
        display: flex;
        flex-direction: column-reverse;
        gap: 8px;
        z-index: 1000;
        pointer-events: none;
      }

      /* Mobile: center toasts at bottom */
      @media (max-width: 480px) {
        #toast-container {
          left: 16px;
          right: 16px;
        }
      }
    `}show(t,e="info",r=2e3){const i=this.$("#toast-container");if(!i)return;const n=document.createElement("toast-notification");n.setAttribute("type",e),n.textContent=t,i.appendChild(n);const s=i.querySelectorAll("toast-notification");s.length>3&&s[0].remove(),r>0&&setTimeout(()=>{n.classList.add("removing"),setTimeout(()=>n.remove(),300)},r)}success(t,e){this.show(t,"success",e)}error(t,e){this.show(t,"error",e)}info(t,e){this.show(t,"info",e)}warning(t,e){this.show(t,"warning",e)}}customElements.define("toast-container",jb);const Yd="settings",Hb=Tc();async function kn(){return await Ht.settings.get(Yd)??Hb}async function eo(a){const t=await kn(),e={...t,...a,id:Yd,apiKeys:a.apiKeys?{...t.apiKeys,...a.apiKeys}:t.apiKeys};await Ht.settings.put(e)}async function Nb(a,t){const e=await kn(),i={fmp:"fmp",eodhd:"eodhd",alphavantage:"alphavantage",tiingo:"tiingo",yahoo:null}[a];if(i===null)return;const n={...e.apiKeys,[i]:t};await eo({apiKeys:n})}async function qb(a){const t=await kn(),r={fmp:"fmp",eodhd:"eodhd",alphavantage:"alphavantage",tiingo:"tiingo",yahoo:null}[a];if(r===null)return;const i={...t.apiKeys};delete i[r],await eo({apiKeys:i})}async function Wb(a){await eo({corsProxyType:a.type,corsProxyUrl:a.customUrl})}class Yb extends Ct{unsubscribe;template(){return`
      <div class="theme-toggle" role="radiogroup" aria-label="Theme selection">
        <button data-theme="light" role="radio" aria-checked="false" aria-label="Light theme">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <circle cx="8" cy="8" r="3.5" stroke="currentColor" stroke-width="1.5" fill="none"/>
            <line x1="8" y1="1" x2="8" y2="2.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            <line x1="8" y1="13.5" x2="8" y2="15" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            <line x1="15" y1="8" x2="13.5" y2="8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            <line x1="2.5" y1="8" x2="1" y2="8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            <line x1="12.5" y1="3.5" x2="11.5" y2="4.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            <line x1="4.5" y1="11.5" x2="3.5" y2="12.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            <line x1="12.5" y1="12.5" x2="11.5" y2="11.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            <line x1="4.5" y1="4.5" x2="3.5" y2="3.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
          </svg>
          <span>Light</span>
        </button>
        <button data-theme="dark" role="radio" aria-checked="false" aria-label="Dark theme">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <path d="M14 8.5C13.5 11.5 10.5 14 7 14C3.5 14 1 11.5 1 8C1 4.5 3.5 2 7 2C7.5 2 8 2.1 8.5 2.2C7 3 6 4.8 6 7C6 9.8 8.2 12 11 12C12.2 12 13.3 11.5 14 10.5V8.5Z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
          </svg>
          <span>Dark</span>
        </button>
        <button data-theme="system" role="radio" aria-checked="false" aria-label="System theme">
          <svg width="16" height="16" viewBox="0 0 16 16" fill="none" xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            <rect x="2" y="3" width="12" height="8" rx="1" stroke="currentColor" stroke-width="1.5" fill="none"/>
            <line x1="4" y1="13" x2="12" y2="13" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
            <line x1="8" y1="11" x2="8" y2="13" stroke="currentColor" stroke-width="1.5"/>
          </svg>
          <span>System</span>
        </button>
      </div>
    `}styles(){return`
      :host {
        display: block;
      }

      .theme-toggle {
        display: inline-flex;
        border-radius: var(--radius-md, 6px);
        overflow: hidden;
        border: 1px solid var(--border-color, #e2e8f0);
        background: var(--surface-primary, #ffffff);
      }

      button {
        display: flex;
        align-items: center;
        gap: var(--spacing-xs, 4px);
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        border: none;
        background: transparent;
        color: var(--text-secondary, #475569);
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
        border-right: 1px solid var(--border-color, #e2e8f0);
      }

      button:last-child {
        border-right: none;
      }

      button:hover {
        background: var(--surface-hover, rgba(13, 148, 136, 0.05));
      }

      button[aria-checked="true"] {
        background: var(--color-primary, #0d9488);
        color: white;
      }

      button svg {
        flex-shrink: 0;
      }

      button:focus-visible {
        outline: 2px solid var(--color-primary, #0d9488);
        outline-offset: -2px;
        z-index: 1;
        position: relative;
      }
    `}afterRender(){this.updateActiveButton(),this.shadow.querySelectorAll("button[data-theme]").forEach(t=>{t.addEventListener("click",()=>{const e=t.dataset.theme;Oc(e)})}),this.unsubscribe=Bc(()=>{this.updateActiveButton()})}disconnectedCallback(){super.disconnectedCallback(),this.unsubscribe&&this.unsubscribe()}updateActiveButton(){const t=Hu();this.shadow.querySelectorAll("button[data-theme]").forEach(e=>{const i=e.dataset.theme===t;e.setAttribute("aria-checked",String(i))})}}customElements.define("theme-toggle",Yb);var Ki={exports:{}};/* @license
Papa Parse
v5.5.3
https://github.com/mholt/PapaParse
License: MIT
*/var Ub=Ki.exports,mc;function Gb(){return mc||(mc=1,(function(a,t){((e,r)=>{a.exports=r()})(Ub,function e(){var r=typeof self<"u"?self:typeof window<"u"?window:r!==void 0?r:{},i,n=!r.document&&!!r.postMessage,s=r.IS_PAPA_WORKER||!1,o={},l=0,d={};function h(w){this._handle=null,this._finished=!1,this._completed=!1,this._halted=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},function(C){var L=H(C);L.chunkSize=parseInt(L.chunkSize),C.step||C.chunk||(L.chunkSize=null),this._handle=new k(L),(this._handle.streamer=this)._config=L}.call(this,w),this.parseChunk=function(C,L){var Y=parseInt(this._config.skipFirstNLines)||0;if(this.isFirstChunk&&0<Y){let tt=this._config.newline;tt||(K=this._config.quoteChar||'"',tt=this._handle.guessLineEndings(C,K)),C=[...C.split(tt).slice(Y)].join(tt)}this.isFirstChunk&&q(this._config.beforeFirstChunk)&&(K=this._config.beforeFirstChunk(C))!==void 0&&(C=K),this.isFirstChunk=!1,this._halted=!1;var Y=this._partialLine+C,K=(this._partialLine="",this._handle.parse(Y,this._baseIndex,!this._finished));if(!this._handle.paused()&&!this._handle.aborted()){if(C=K.meta.cursor,Y=(this._finished||(this._partialLine=Y.substring(C-this._baseIndex),this._baseIndex=C),K&&K.data&&(this._rowCount+=K.data.length),this._finished||this._config.preview&&this._rowCount>=this._config.preview),s)r.postMessage({results:K,workerId:d.WORKER_ID,finished:Y});else if(q(this._config.chunk)&&!L){if(this._config.chunk(K,this._handle),this._handle.paused()||this._handle.aborted())return void(this._halted=!0);this._completeResults=K=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(K.data),this._completeResults.errors=this._completeResults.errors.concat(K.errors),this._completeResults.meta=K.meta),this._completed||!Y||!q(this._config.complete)||K&&K.meta.aborted||(this._config.complete(this._completeResults,this._input),this._completed=!0),Y||K&&K.meta.paused||this._nextChunk(),K}this._halted=!0},this._sendError=function(C){q(this._config.error)?this._config.error(C):s&&this._config.error&&r.postMessage({workerId:d.WORKER_ID,error:C,finished:!1})}}function p(w){var C;(w=w||{}).chunkSize||(w.chunkSize=d.RemoteChunkSize),h.call(this,w),this._nextChunk=n?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(L){this._input=L,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(C=new XMLHttpRequest,this._config.withCredentials&&(C.withCredentials=this._config.withCredentials),n||(C.onload=X(this._chunkLoaded,this),C.onerror=X(this._chunkError,this)),C.open(this._config.downloadRequestBody?"POST":"GET",this._input,!n),this._config.downloadRequestHeaders){var L,Y=this._config.downloadRequestHeaders;for(L in Y)C.setRequestHeader(L,Y[L])}var K;this._config.chunkSize&&(K=this._start+this._config.chunkSize-1,C.setRequestHeader("Range","bytes="+this._start+"-"+K));try{C.send(this._config.downloadRequestBody)}catch(tt){this._chunkError(tt.message)}n&&C.status===0&&this._chunkError()}},this._chunkLoaded=function(){C.readyState===4&&(C.status<200||400<=C.status?this._chunkError():(this._start+=this._config.chunkSize||C.responseText.length,this._finished=!this._config.chunkSize||this._start>=(L=>(L=L.getResponseHeader("Content-Range"))!==null?parseInt(L.substring(L.lastIndexOf("/")+1)):-1)(C),this.parseChunk(C.responseText)))},this._chunkError=function(L){L=C.statusText||L,this._sendError(new Error(L))}}function m(w){(w=w||{}).chunkSize||(w.chunkSize=d.LocalChunkSize),h.call(this,w);var C,L,Y=typeof FileReader<"u";this.stream=function(K){this._input=K,L=K.slice||K.webkitSlice||K.mozSlice,Y?((C=new FileReader).onload=X(this._chunkLoaded,this),C.onerror=X(this._chunkError,this)):C=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var K=this._input,tt=(this._config.chunkSize&&(tt=Math.min(this._start+this._config.chunkSize,this._input.size),K=L.call(K,this._start,tt)),C.readAsText(K,this._config.encoding));Y||this._chunkLoaded({target:{result:tt}})},this._chunkLoaded=function(K){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(K.target.result)},this._chunkError=function(){this._sendError(C.error)}}function v(w){var C;h.call(this,w=w||{}),this.stream=function(L){return C=L,this._nextChunk()},this._nextChunk=function(){var L,Y;if(!this._finished)return L=this._config.chunkSize,C=L?(Y=C.substring(0,L),C.substring(L)):(Y=C,""),this._finished=!C,this.parseChunk(Y)}}function g(w){h.call(this,w=w||{});var C=[],L=!0,Y=!1;this.pause=function(){h.prototype.pause.apply(this,arguments),this._input.pause()},this.resume=function(){h.prototype.resume.apply(this,arguments),this._input.resume()},this.stream=function(K){this._input=K,this._input.on("data",this._streamData),this._input.on("end",this._streamEnd),this._input.on("error",this._streamError)},this._checkIsFinished=function(){Y&&C.length===1&&(this._finished=!0)},this._nextChunk=function(){this._checkIsFinished(),C.length?this.parseChunk(C.shift()):L=!0},this._streamData=X(function(K){try{C.push(typeof K=="string"?K:K.toString(this._config.encoding)),L&&(L=!1,this._checkIsFinished(),this.parseChunk(C.shift()))}catch(tt){this._streamError(tt)}},this),this._streamError=X(function(K){this._streamCleanUp(),this._sendError(K)},this),this._streamEnd=X(function(){this._streamCleanUp(),Y=!0,this._streamData("")},this),this._streamCleanUp=X(function(){this._input.removeListener("data",this._streamData),this._input.removeListener("end",this._streamEnd),this._input.removeListener("error",this._streamError)},this)}function k(w){var C,L,Y,K,tt=Math.pow(2,53),ht=-tt,pt=/^\s*-?(\d+\.?|\.\d+|\d+\.\d+)([eE][-+]?\d+)?\s*$/,lt=/^((\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z))|(\d{4}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d([+-][0-2]\d:[0-5]\d|Z)))$/,G=this,Z=0,J=0,bt=!1,dt=!1,gt=[],at={data:[],errors:[],meta:{}};function ft(Rt){return w.skipEmptyLines==="greedy"?Rt.join("").trim()==="":Rt.length===1&&Rt[0].length===0}function wt(){if(at&&Y&&(se("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+d.DefaultDelimiter+"'"),Y=!1),w.skipEmptyLines&&(at.data=at.data.filter(function(xt){return!ft(xt)})),kt()){let xt=function(vt,Ut){q(w.transformHeader)&&(vt=w.transformHeader(vt,Ut)),gt.push(vt)};if(at)if(Array.isArray(at.data[0])){for(var Rt=0;kt()&&Rt<at.data.length;Rt++)at.data[Rt].forEach(xt);at.data.splice(0,1)}else at.data.forEach(xt)}function rt(xt,vt){for(var Ut=w.header?{}:[],Vt=0;Vt<xt.length;Vt++){var Bt=Vt,zt=xt[Vt],zt=((Me,Mt)=>(Gt=>(w.dynamicTypingFunction&&w.dynamicTyping[Gt]===void 0&&(w.dynamicTyping[Gt]=w.dynamicTypingFunction(Gt)),(w.dynamicTyping[Gt]||w.dynamicTyping)===!0))(Me)?Mt==="true"||Mt==="TRUE"||Mt!=="false"&&Mt!=="FALSE"&&((Gt=>{if(pt.test(Gt)&&(Gt=parseFloat(Gt),ht<Gt&&Gt<tt))return 1})(Mt)?parseFloat(Mt):lt.test(Mt)?new Date(Mt):Mt===""?null:Mt):Mt)(Bt=w.header?Vt>=gt.length?"__parsed_extra":gt[Vt]:Bt,zt=w.transform?w.transform(zt,Bt):zt);Bt==="__parsed_extra"?(Ut[Bt]=Ut[Bt]||[],Ut[Bt].push(zt)):Ut[Bt]=zt}return w.header&&(Vt>gt.length?se("FieldMismatch","TooManyFields","Too many fields: expected "+gt.length+" fields but parsed "+Vt,J+vt):Vt<gt.length&&se("FieldMismatch","TooFewFields","Too few fields: expected "+gt.length+" fields but parsed "+Vt,J+vt)),Ut}var Yt;at&&(w.header||w.dynamicTyping||w.transform)&&(Yt=1,!at.data.length||Array.isArray(at.data[0])?(at.data=at.data.map(rt),Yt=at.data.length):at.data=rt(at.data,0),w.header&&at.meta&&(at.meta.fields=gt),J+=Yt)}function kt(){return w.header&&gt.length===0}function se(Rt,rt,Yt,xt){Rt={type:Rt,code:rt,message:Yt},xt!==void 0&&(Rt.row=xt),at.errors.push(Rt)}q(w.step)&&(K=w.step,w.step=function(Rt){at=Rt,kt()?wt():(wt(),at.data.length!==0&&(Z+=Rt.data.length,w.preview&&Z>w.preview?L.abort():(at.data=at.data[0],K(at,G))))}),this.parse=function(Rt,rt,Yt){var xt=w.quoteChar||'"',xt=(w.newline||(w.newline=this.guessLineEndings(Rt,xt)),Y=!1,w.delimiter?q(w.delimiter)&&(w.delimiter=w.delimiter(Rt),at.meta.delimiter=w.delimiter):((xt=((vt,Ut,Vt,Bt,zt)=>{var Me,Mt,Gt,Te;zt=zt||[",","	","|",";",d.RECORD_SEP,d.UNIT_SEP];for(var ue=0;ue<zt.length;ue++){for(var De,Be=zt[ue],ae=0,he=0,Nt=0,Jt=(Gt=void 0,new D({comments:Bt,delimiter:Be,newline:Ut,preview:10}).parse(vt)),Ee=0;Ee<Jt.data.length;Ee++)Vt&&ft(Jt.data[Ee])?Nt++:(De=Jt.data[Ee].length,he+=De,Gt===void 0?Gt=De:0<De&&(ae+=Math.abs(De-Gt),Gt=De));0<Jt.data.length&&(he/=Jt.data.length-Nt),(Mt===void 0||ae<=Mt)&&(Te===void 0||Te<he)&&1.99<he&&(Mt=ae,Me=Be,Te=he)}return{successful:!!(w.delimiter=Me),bestDelimiter:Me}})(Rt,w.newline,w.skipEmptyLines,w.comments,w.delimitersToGuess)).successful?w.delimiter=xt.bestDelimiter:(Y=!0,w.delimiter=d.DefaultDelimiter),at.meta.delimiter=w.delimiter),H(w));return w.preview&&w.header&&xt.preview++,C=Rt,L=new D(xt),at=L.parse(C,rt,Yt),wt(),bt?{meta:{paused:!0}}:at||{meta:{paused:!1}}},this.paused=function(){return bt},this.pause=function(){bt=!0,L.abort(),C=q(w.chunk)?"":C.substring(L.getCharIndex())},this.resume=function(){G.streamer._halted?(bt=!1,G.streamer.parseChunk(C,!0)):setTimeout(G.resume,3)},this.aborted=function(){return dt},this.abort=function(){dt=!0,L.abort(),at.meta.aborted=!0,q(w.complete)&&w.complete(at),C=""},this.guessLineEndings=function(vt,xt){vt=vt.substring(0,1048576);var xt=new RegExp(S(xt)+"([^]*?)"+S(xt),"gm"),Yt=(vt=vt.replace(xt,"")).split("\r"),xt=vt.split(`
`),vt=1<xt.length&&xt[0].length<Yt[0].length;if(Yt.length===1||vt)return`
`;for(var Ut=0,Vt=0;Vt<Yt.length;Vt++)Yt[Vt][0]===`
`&&Ut++;return Ut>=Yt.length/2?`\r
`:"\r"}}function S(w){return w.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function D(w){var C=(w=w||{}).delimiter,L=w.newline,Y=w.comments,K=w.step,tt=w.preview,ht=w.fastMode,pt=null,lt=!1,G=w.quoteChar==null?'"':w.quoteChar,Z=G;if(w.escapeChar!==void 0&&(Z=w.escapeChar),(typeof C!="string"||-1<d.BAD_DELIMITERS.indexOf(C))&&(C=","),Y===C)throw new Error("Comment character same as delimiter");Y===!0?Y="#":(typeof Y!="string"||-1<d.BAD_DELIMITERS.indexOf(Y))&&(Y=!1),L!==`
`&&L!=="\r"&&L!==`\r
`&&(L=`
`);var J=0,bt=!1;this.parse=function(dt,gt,at){if(typeof dt!="string")throw new Error("Input must be a string");var ft=dt.length,wt=C.length,kt=L.length,se=Y.length,Rt=q(K),rt=[],Yt=[],xt=[],vt=J=0;if(!dt)return ae();if(ht||ht!==!1&&dt.indexOf(G)===-1){for(var Ut=dt.split(L),Vt=0;Vt<Ut.length;Vt++){if(xt=Ut[Vt],J+=xt.length,Vt!==Ut.length-1)J+=L.length;else if(at)return ae();if(!Y||xt.substring(0,se)!==Y){if(Rt){if(rt=[],Te(xt.split(C)),he(),bt)return ae()}else Te(xt.split(C));if(tt&&tt<=Vt)return rt=rt.slice(0,tt),ae(!0)}}return ae()}for(var Bt=dt.indexOf(C,J),zt=dt.indexOf(L,J),Me=new RegExp(S(Z)+S(G),"g"),Mt=dt.indexOf(G,J);;)if(dt[J]===G)for(Mt=J,J++;;){if((Mt=dt.indexOf(G,Mt+1))===-1)return at||Yt.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:rt.length,index:J}),De();if(Mt===ft-1)return De(dt.substring(J,Mt).replace(Me,G));if(G===Z&&dt[Mt+1]===Z)Mt++;else if(G===Z||Mt===0||dt[Mt-1]!==Z){Bt!==-1&&Bt<Mt+1&&(Bt=dt.indexOf(C,Mt+1));var Gt=ue((zt=zt!==-1&&zt<Mt+1?dt.indexOf(L,Mt+1):zt)===-1?Bt:Math.min(Bt,zt));if(dt.substr(Mt+1+Gt,wt)===C){xt.push(dt.substring(J,Mt).replace(Me,G)),dt[J=Mt+1+Gt+wt]!==G&&(Mt=dt.indexOf(G,J)),Bt=dt.indexOf(C,J),zt=dt.indexOf(L,J);break}if(Gt=ue(zt),dt.substring(Mt+1+Gt,Mt+1+Gt+kt)===L){if(xt.push(dt.substring(J,Mt).replace(Me,G)),Be(Mt+1+Gt+kt),Bt=dt.indexOf(C,J),Mt=dt.indexOf(G,J),Rt&&(he(),bt))return ae();if(tt&&rt.length>=tt)return ae(!0);break}Yt.push({type:"Quotes",code:"InvalidQuotes",message:"Trailing quote on quoted field is malformed",row:rt.length,index:J}),Mt++}}else if(Y&&xt.length===0&&dt.substring(J,J+se)===Y){if(zt===-1)return ae();J=zt+kt,zt=dt.indexOf(L,J),Bt=dt.indexOf(C,J)}else if(Bt!==-1&&(Bt<zt||zt===-1))xt.push(dt.substring(J,Bt)),J=Bt+wt,Bt=dt.indexOf(C,J);else{if(zt===-1)break;if(xt.push(dt.substring(J,zt)),Be(zt+kt),Rt&&(he(),bt))return ae();if(tt&&rt.length>=tt)return ae(!0)}return De();function Te(Nt){rt.push(Nt),vt=J}function ue(Nt){var Jt=0;return Jt=Nt!==-1&&(Nt=dt.substring(Mt+1,Nt))&&Nt.trim()===""?Nt.length:Jt}function De(Nt){return at||(Nt===void 0&&(Nt=dt.substring(J)),xt.push(Nt),J=ft,Te(xt),Rt&&he()),ae()}function Be(Nt){J=Nt,Te(xt),xt=[],zt=dt.indexOf(L,J)}function ae(Nt){if(w.header&&!gt&&rt.length&&!lt){var Jt=rt[0],Ee=Object.create(null),Ke=new Set(Jt);let Xr=!1;for(let Ie=0;Ie<Jt.length;Ie++){let oe=Jt[Ie];if(Ee[oe=q(w.transformHeader)?w.transformHeader(oe,Ie):oe]){let He,Kr=Ee[oe];for(;He=oe+"_"+Kr,Kr++,Ke.has(He););Ke.add(He),Jt[Ie]=He,Ee[oe]++,Xr=!0,(pt=pt===null?{}:pt)[He]=oe}else Ee[oe]=1,Jt[Ie]=oe;Ke.add(oe)}Xr&&console.warn("Duplicate headers found and renamed."),lt=!0}return{data:rt,errors:Yt,meta:{delimiter:C,linebreak:L,aborted:bt,truncated:!!Nt,cursor:vt+(gt||0),renamedHeaders:pt}}}function he(){K(ae()),rt=[],Yt=[]}},this.abort=function(){bt=!0},this.getCharIndex=function(){return J}}function M(w){var C=w.data,L=o[C.workerId],Y=!1;if(C.error)L.userError(C.error,C.file);else if(C.results&&C.results.data){var K={abort:function(){Y=!0,I(C.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:W,resume:W};if(q(L.userStep)){for(var tt=0;tt<C.results.data.length&&(L.userStep({data:C.results.data[tt],errors:C.results.errors,meta:C.results.meta},K),!Y);tt++);delete C.results}else q(L.userChunk)&&(L.userChunk(C.results,K,C.file),delete C.results)}C.finished&&!Y&&I(C.workerId,C.results)}function I(w,C){var L=o[w];q(L.userComplete)&&L.userComplete(C),L.terminate(),delete o[w]}function W(){throw new Error("Not implemented.")}function H(w){if(typeof w!="object"||w===null)return w;var C,L=Array.isArray(w)?[]:{};for(C in w)L[C]=H(w[C]);return L}function X(w,C){return function(){w.apply(C,arguments)}}function q(w){return typeof w=="function"}return d.parse=function(w,C){var L=(C=C||{}).dynamicTyping||!1;if(q(L)&&(C.dynamicTypingFunction=L,L={}),C.dynamicTyping=L,C.transform=!!q(C.transform)&&C.transform,!C.worker||!d.WORKERS_SUPPORTED)return L=null,d.NODE_STREAM_INPUT,typeof w=="string"?(w=(Y=>Y.charCodeAt(0)!==65279?Y:Y.slice(1))(w),L=new(C.download?p:v)(C)):w.readable===!0&&q(w.read)&&q(w.on)?L=new g(C):(r.File&&w instanceof File||w instanceof Object)&&(L=new m(C)),L.stream(w);(L=(()=>{var Y;return!!d.WORKERS_SUPPORTED&&(Y=(()=>{var K=r.URL||r.webkitURL||null,tt=e.toString();return d.BLOB_URL||(d.BLOB_URL=K.createObjectURL(new Blob(["var global = (function() { if (typeof self !== 'undefined') { return self; } if (typeof window !== 'undefined') { return window; } if (typeof global !== 'undefined') { return global; } return {}; })(); global.IS_PAPA_WORKER=true; ","(",tt,")();"],{type:"text/javascript"})))})(),(Y=new r.Worker(Y)).onmessage=M,Y.id=l++,o[Y.id]=Y)})()).userStep=C.step,L.userChunk=C.chunk,L.userComplete=C.complete,L.userError=C.error,C.step=q(C.step),C.chunk=q(C.chunk),C.complete=q(C.complete),C.error=q(C.error),delete C.worker,L.postMessage({input:w,config:C,workerId:L.id})},d.unparse=function(w,C){var L=!1,Y=!0,K=",",tt=`\r
`,ht='"',pt=ht+ht,lt=!1,G=null,Z=!1,J=((()=>{if(typeof C=="object"){if(typeof C.delimiter!="string"||d.BAD_DELIMITERS.filter(function(gt){return C.delimiter.indexOf(gt)!==-1}).length||(K=C.delimiter),typeof C.quotes!="boolean"&&typeof C.quotes!="function"&&!Array.isArray(C.quotes)||(L=C.quotes),typeof C.skipEmptyLines!="boolean"&&typeof C.skipEmptyLines!="string"||(lt=C.skipEmptyLines),typeof C.newline=="string"&&(tt=C.newline),typeof C.quoteChar=="string"&&(ht=C.quoteChar),typeof C.header=="boolean"&&(Y=C.header),Array.isArray(C.columns)){if(C.columns.length===0)throw new Error("Option columns is empty");G=C.columns}C.escapeChar!==void 0&&(pt=C.escapeChar+ht),C.escapeFormulae instanceof RegExp?Z=C.escapeFormulae:typeof C.escapeFormulae=="boolean"&&C.escapeFormulae&&(Z=/^[=+\-@\t\r].*$/)}})(),new RegExp(S(ht),"g"));if(typeof w=="string"&&(w=JSON.parse(w)),Array.isArray(w)){if(!w.length||Array.isArray(w[0]))return bt(null,w,lt);if(typeof w[0]=="object")return bt(G||Object.keys(w[0]),w,lt)}else if(typeof w=="object")return typeof w.data=="string"&&(w.data=JSON.parse(w.data)),Array.isArray(w.data)&&(w.fields||(w.fields=w.meta&&w.meta.fields||G),w.fields||(w.fields=Array.isArray(w.data[0])?w.fields:typeof w.data[0]=="object"?Object.keys(w.data[0]):[]),Array.isArray(w.data[0])||typeof w.data[0]=="object"||(w.data=[w.data])),bt(w.fields||[],w.data||[],lt);throw new Error("Unable to serialize unrecognized input");function bt(gt,at,ft){var wt="",kt=(typeof gt=="string"&&(gt=JSON.parse(gt)),typeof at=="string"&&(at=JSON.parse(at)),Array.isArray(gt)&&0<gt.length),se=!Array.isArray(at[0]);if(kt&&Y){for(var Rt=0;Rt<gt.length;Rt++)0<Rt&&(wt+=K),wt+=dt(gt[Rt],Rt);0<at.length&&(wt+=tt)}for(var rt=0;rt<at.length;rt++){var Yt=(kt?gt:at[rt]).length,xt=!1,vt=kt?Object.keys(at[rt]).length===0:at[rt].length===0;if(ft&&!kt&&(xt=ft==="greedy"?at[rt].join("").trim()==="":at[rt].length===1&&at[rt][0].length===0),ft==="greedy"&&kt){for(var Ut=[],Vt=0;Vt<Yt;Vt++){var Bt=se?gt[Vt]:Vt;Ut.push(at[rt][Bt])}xt=Ut.join("").trim()===""}if(!xt){for(var zt=0;zt<Yt;zt++){0<zt&&!vt&&(wt+=K);var Me=kt&&se?gt[zt]:zt;wt+=dt(at[rt][Me],zt)}rt<at.length-1&&(!ft||0<Yt&&!vt)&&(wt+=tt)}}return wt}function dt(gt,at){var ft,wt;return gt==null?"":gt.constructor===Date?JSON.stringify(gt).slice(1,25):(wt=!1,Z&&typeof gt=="string"&&Z.test(gt)&&(gt="'"+gt,wt=!0),ft=gt.toString().replace(J,pt),(wt=wt||L===!0||typeof L=="function"&&L(gt,at)||Array.isArray(L)&&L[at]||((kt,se)=>{for(var Rt=0;Rt<se.length;Rt++)if(-1<kt.indexOf(se[Rt]))return!0;return!1})(ft,d.BAD_DELIMITERS)||-1<ft.indexOf(K)||ft.charAt(0)===" "||ft.charAt(ft.length-1)===" ")?ht+ft+ht:ft)}},d.RECORD_SEP="",d.UNIT_SEP="",d.BYTE_ORDER_MARK="\uFEFF",d.BAD_DELIMITERS=["\r",`
`,'"',d.BYTE_ORDER_MARK],d.WORKERS_SUPPORTED=!n&&!!r.Worker,d.NODE_STREAM_INPUT=1,d.LocalChunkSize=10485760,d.RemoteChunkSize=5242880,d.DefaultDelimiter=",",d.Parser=D,d.ParserHandle=k,d.NetworkStreamer=p,d.FileStreamer=m,d.StringStreamer=v,d.ReadableStreamStreamer=g,r.jQuery&&((i=r.jQuery).fn.parse=function(w){var C=w.config||{},L=[];return this.each(function(tt){if(!(i(this).prop("tagName").toUpperCase()==="INPUT"&&i(this).attr("type").toLowerCase()==="file"&&r.FileReader)||!this.files||this.files.length===0)return!0;for(var ht=0;ht<this.files.length;ht++)L.push({file:this.files[ht],inputElem:this,instanceConfig:i.extend({},C)})}),Y(),this;function Y(){if(L.length===0)q(w.complete)&&w.complete();else{var tt,ht,pt,lt,G=L[0];if(q(w.before)){var Z=w.before(G.file,G.inputElem);if(typeof Z=="object"){if(Z.action==="abort")return tt="AbortError",ht=G.file,pt=G.inputElem,lt=Z.reason,void(q(w.error)&&w.error({name:tt},ht,pt,lt));if(Z.action==="skip")return void K();typeof Z.config=="object"&&(G.instanceConfig=i.extend(G.instanceConfig,Z.config))}else if(Z==="skip")return void K()}var J=G.instanceConfig.complete;G.instanceConfig.complete=function(bt){q(J)&&J(bt,G.file,G.inputElem),K()},d.parse(G.file,G.instanceConfig)}}function K(){L.splice(0,1),Y()}}),s&&(r.onmessage=function(w){w=w.data,d.WORKER_ID===void 0&&w&&(d.WORKER_ID=w.workerId),typeof w.input=="string"?r.postMessage({workerId:d.WORKER_ID,results:d.parse(w.input,w.config),finished:!0}):(r.File&&w.input instanceof File||w.input instanceof Object)&&(w=d.parse(w.input,w.config))&&r.postMessage({workerId:d.WORKER_ID,results:w,finished:!0})}),(p.prototype=Object.create(h.prototype)).constructor=p,(m.prototype=Object.create(h.prototype)).constructor=m,(v.prototype=Object.create(v.prototype)).constructor=v,(g.prototype=Object.create(h.prototype)).constructor=g,d})})(Ki)),Ki.exports}var Xb=Gb();const ro=zc(Xb);function Ud(a,t,e){const r=[],i=[],n=ro.parse(a,{header:!0,skipEmptyLines:!0,transformHeader:S=>S.trim().toLowerCase().replace(/\s+/g,"_")});n.errors.length>0&&n.errors.forEach(S=>{r.push({type:"format",row:S.row!==void 0?S.row+2:void 0,message:`CSV format error: ${S.message}`})});const s=n.meta.fields||[],o=s.includes("year"),l=s.includes("annual_return");if(!o||!l){const S=[];return o||S.push("year"),l||S.push("annual_return"),r.push({type:"missing_field",message:`Missing required column(s): ${S.join(", ")}. Expected: year, annual_return`}),{valid:!1,errors:r,warnings:i}}const d=[],h=new Set;let p=0,m=0;n.data.forEach((S,D)=>{const M=D+2,I=S.year?.trim();if(!I||!/^\d{4}(-\d{2}-\d{2})?$/.test(I)){r.push({type:"invalid_value",row:M,field:"year",message:`Row ${M}: Invalid year format "${I}". Expected YYYY or YYYY-MM-DD.`});return}if(h.has(I)){r.push({type:"duplicate",row:M,field:"year",message:`Row ${M}: Duplicate year "${I}".`});return}h.add(I);const W=S.annual_return?.trim(),H=parseFloat(W);if(isNaN(H)){r.push({type:"invalid_value",row:M,field:"annual_return",message:`Row ${M}: Invalid return value "${W}". Expected decimal (e.g., 0.10 for 10%).`});return}H>=0?p++:m++,H<-.9?i.push({type:"extreme_value",row:M,message:`Row ${M}: Return of ${(H*100).toFixed(1)}% is unusually extreme (< -90%).`}):H>3&&i.push({type:"extreme_value",row:M,message:`Row ${M}: Return of ${(H*100).toFixed(1)}% is unusually extreme (> 300%).`}),d.push({date:I,return:H})}),d.length<5&&r.length===0&&r.push({type:"insufficient_data",message:`Insufficient data. Found ${d.length} rows, minimum 5 years required for simulation.`});const v=[...h].sort();for(let S=1;S<v.length;S++){const D=parseInt(v[S-1].substring(0,4)),M=parseInt(v[S].substring(0,4));M-D>1&&i.push({type:"gap",message:`Missing data between ${D} and ${M} (${M-D-1} year gap).`})}if(d.length>=5&&(p===d.length?i.push({type:"same_sign",message:"All returns are positive. This is unusual for real market data."}):m===d.length&&i.push({type:"same_sign",message:"All returns are negative. This is unusual for real market data."})),r.length>0)return{valid:!1,errors:r,warnings:i};const g=d.sort((S,D)=>S.date.localeCompare(D.date));return{valid:!0,data:{symbol:t.toUpperCase(),name:e,startDate:g[0].date,endDate:g[g.length-1].date,returns:g},errors:[],warnings:i}}function Gd(a){const t=[],e=[];let r;try{r=JSON.parse(a)}catch(p){return t.push({type:"format",message:`Invalid JSON: ${p instanceof Error?p.message:"Parse error"}`}),{valid:!1,errors:t,warnings:e}}const i=r;if((!i.symbol||typeof i.symbol!="string")&&t.push({type:"missing_field",field:"symbol",message:'Missing or invalid "symbol" field.'}),(!i.name||typeof i.name!="string")&&t.push({type:"missing_field",field:"name",message:'Missing or invalid "name" field.'}),!Array.isArray(i.returns))return t.push({type:"missing_field",field:"returns",message:'Missing or invalid "returns" array.'}),{valid:!1,errors:t,warnings:e};const n=[],s=new Set;let o=0,l=0;if(i.returns.forEach((p,m)=>{const v=m+1;if(!p.date||typeof p.date!="string"){t.push({type:"invalid_value",row:v,field:"date",message:`Return #${v}: Missing or invalid "date" field.`});return}if(typeof p.return!="number"||isNaN(p.return)){t.push({type:"invalid_value",row:v,field:"return",message:`Return #${v}: Missing or invalid "return" value.`});return}if(s.has(p.date)){t.push({type:"duplicate",row:v,message:`Return #${v}: Duplicate date "${p.date}".`});return}s.add(p.date),p.return>=0?o++:l++,(p.return<-.9||p.return>3)&&e.push({type:"extreme_value",row:v,message:`Return #${v}: Value ${(p.return*100).toFixed(1)}% is unusually extreme.`}),n.push({date:p.date,return:p.return})}),n.length<5&&t.length===0&&t.push({type:"insufficient_data",message:`Insufficient data. Found ${n.length} entries, minimum 5 required.`}),n.length>=5&&(o===n.length?e.push({type:"same_sign",message:"All returns are positive."}):l===n.length&&e.push({type:"same_sign",message:"All returns are negative."})),t.length>0)return{valid:!1,errors:t,warnings:e};const d=n.sort((p,m)=>p.date.localeCompare(m.date));return{valid:!0,data:{symbol:i.symbol.toUpperCase(),name:i.name,assetClass:typeof i.assetClass=="string"?i.assetClass:void 0,startDate:d[0].date,endDate:d[d.length-1].date,returns:d},errors:[],warnings:e}}async function Kb(a){const t=[],e=ro.parse(a,{header:!0,skipEmptyLines:!0,transformHeader:m=>m.trim().toLowerCase().replace(/\s+/g,"_")}),r=e.meta.fields||[],i=r.includes("symbol"),n=r.includes("name"),s=r.includes("year"),o=r.includes("annual_return");if(!i||!n||!s||!o)return{valid:!1,assets:[],summary:{total:0,valid:0,warnings:0,errors:1}};const l=new Map;for(const m of e.data){const v=m.symbol?.trim().toUpperCase();v&&(l.has(v)||l.set(v,[]),l.get(v).push(m))}for(const[m,v]of l){const g=v[0].name?.trim()||m,k=v[0].asset_class?.trim(),S=`year,annual_return
`+v.map(I=>`${I.year},${I.annual_return}`).join(`
`),D=Ud(S,m,g);D.valid&&D.data&&k&&(D.data.assetClass=k);let M="skip";D.valid&&(M=await Is(m)?"update":"add"),t.push({symbol:m,name:g,action:M,recordCount:v.length,result:D})}const d=t.filter(m=>m.result.valid).length,h=t.filter(m=>m.result.warnings.length>0).length,p=t.filter(m=>m.result.errors.length>0).length;return{valid:d>0,assets:t,summary:{total:t.length,valid:d,warnings:h,errors:p}}}async function _b(a){const t=[];let e;try{e=JSON.parse(a)}catch{return{valid:!1,assets:[],summary:{total:0,valid:0,warnings:0,errors:1}}}const r=e;if(!Array.isArray(r.assets))return{valid:!1,assets:[],summary:{total:0,valid:0,warnings:0,errors:1}};for(const o of r.assets){const l=JSON.stringify(o),d=Gd(l),h=o,p=(typeof h.symbol=="string"?h.symbol:"").toUpperCase(),m=typeof h.name=="string"?h.name:p,v=Array.isArray(h.returns)?h.returns.length:0;let g="skip";d.valid&&p&&(g=await Is(p)?"update":"add"),t.push({symbol:p,name:m,action:g,recordCount:v,result:d})}const i=t.filter(o=>o.result.valid).length,n=t.filter(o=>o.result.warnings.length>0).length,s=t.filter(o=>o.result.errors.length>0).length;return{valid:i>0,assets:t,summary:{total:t.length,valid:i,warnings:n,errors:s}}}async function Qb(){const a=Nr(),t=await qa(),e=new Set(a),r=t.filter(s=>!e.has(s)),i=[...a,...r].sort((s,o)=>s.localeCompare(o)),n=[];for(const s of i){const o=await Wa(s);if(o)for(const l of o.returns)n.push({symbol:o.symbol,name:o.name,asset_class:o.assetClass||"",year:l.date,annual_return:l.return})}return ro.unparse(n,{header:!0,newline:`
`,escapeFormulae:!0})}async function Jb(){const a=Nr(),t=await qa(),e=new Set(a),r=t.filter(o=>!e.has(o)),i=[...a,...r].sort((o,l)=>o.localeCompare(l)),n=[];for(const o of i){const l=await Wa(o);l&&n.push(l)}const s={version:1,exportedAt:new Date().toISOString(),assets:n};return JSON.stringify(s,null,2)}const Zb=`symbol,name,asset_class,year,annual_return
SPY,S&P 500 ETF Trust,equity_index,1995,0.3758
SPY,S&P 500 ETF Trust,equity_index,1996,0.2296
SPY,S&P 500 ETF Trust,equity_index,1997,0.3336
SPY,S&P 500 ETF Trust,equity_index,1998,0.2858
SPY,S&P 500 ETF Trust,equity_index,1999,0.2104
CUSTOM1,My Custom Asset,equity_stock,2020,0.1250
CUSTOM1,My Custom Asset,equity_stock,2021,-0.0320
CUSTOM1,My Custom Asset,equity_stock,2022,0.0890
CUSTOM1,My Custom Asset,equity_stock,2023,0.2650
CUSTOM1,My Custom Asset,equity_stock,2024,0.1580`,$b={version:1,exportedAt:"(generated on download)",assets:[{symbol:"SPY",name:"S&P 500 ETF Trust",assetClass:"equity_index",returns:[{date:"1995",return:.3758},{date:"1996",return:.2296},{date:"1997",return:.3336},{date:"1998",return:.2858},{date:"1999",return:.2104}]},{symbol:"CUSTOM1",name:"My Custom Asset",assetClass:"equity_stock",returns:[{date:"2020",return:.125},{date:"2021",return:-.032},{date:"2022",return:.089},{date:"2023",return:.265},{date:"2024",return:.158}]}]};function tv(){const a=new Blob([Zb],{type:"text/csv"}),t=URL.createObjectURL(a),e=document.createElement("a");e.href=t,e.download="bulk_import_template.csv",document.body.appendChild(e),e.click(),document.body.removeChild(e),URL.revokeObjectURL(t)}function ev(){const a={...$b,exportedAt:new Date().toISOString()},t=JSON.stringify(a,null,2),e=new Blob([t],{type:"application/json"}),r=URL.createObjectURL(e),i=document.createElement("a");i.href=r,i.download="bulk_import_template.json",document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}class rv extends Ct{_data=[];_visibleRows=15;_rowHeight=40;_scrollTop=0;_scrollHandler=null;set data(t){this._data=t,this.render()}get data(){return this._data}template(){if(this._data.length===0)return`
        <div class="empty-state">
          <p>No data available</p>
        </div>
      `;const t=this._data.length*this._rowHeight,e=Math.floor(this._scrollTop/this._rowHeight),r=Math.min(e+this._visibleRows+2,this._data.length),i=e*this._rowHeight,n=this._data.slice(e,r);return`
      <div class="table-container" style="max-height: ${this._visibleRows*this._rowHeight+44}px;">
        <table>
          <thead>
            <tr>
              <th>Year</th>
              <th>Annual Return</th>
            </tr>
          </thead>
        </table>
        <div class="table-body-scroll">
          <div class="table-spacer" style="height: ${t}px;">
            <table class="table-body" style="transform: translateY(${i}px);">
              <tbody>
                ${n.map(s=>`
                  <tr>
                    <td>${this.formatDate(s.date)}</td>
                    <td class="${s.return>=0?"positive":"negative"}">
                      ${s.return>=0?"+":""}${(s.return*100).toFixed(2)}%
                    </td>
                  </tr>
                `).join("")}
              </tbody>
            </table>
          </div>
        </div>
      </div>
      <div class="table-footer">
        <span>${this._data.length} records</span>
        <span>${this.formatDate(this._data[0]?.date)} - ${this.formatDate(this._data[this._data.length-1]?.date)}</span>
      </div>
    `}formatDate(t){return t?/^\d{4}$/.test(t)?t:t.substring(0,4):""}afterRender(){const t=this.$(".table-body-scroll");t&&!this._scrollHandler&&(this._scrollHandler=e=>{const r=e.target.scrollTop;Math.abs(r-this._scrollTop)>=this._rowHeight&&(this._scrollTop=r,this.updateVisibleRows())},t.addEventListener("scroll",this._scrollHandler,{passive:!0}))}updateVisibleRows(){const t=Math.floor(this._scrollTop/this._rowHeight),e=Math.min(t+this._visibleRows+2,this._data.length),r=t*this._rowHeight,i=this._data.slice(t,e),n=this.$(".table-body tbody"),s=this.$(".table-body");n&&s&&(s.style.transform=`translateY(${r}px)`,n.innerHTML=i.map(o=>`
        <tr>
          <td>${this.formatDate(o.date)}</td>
          <td class="${o.return>=0?"positive":"negative"}">
            ${o.return>=0?"+":""}${(o.return*100).toFixed(2)}%
          </td>
        </tr>
      `).join(""))}disconnectedCallback(){const t=this.$(".table-body-scroll");t&&this._scrollHandler&&(t.removeEventListener("scroll",this._scrollHandler),this._scrollHandler=null),super.disconnectedCallback()}styles(){return`
      :host {
        display: block;
      }

      .table-container {
        border: 1px solid var(--border-color, #e5e7eb);
        border-radius: var(--border-radius-md, 8px);
        overflow: hidden;
        background: var(--surface-primary, #fff);
      }

      .table-body-scroll {
        overflow-y: auto;
        max-height: ${this._visibleRows*this._rowHeight}px;
      }

      .table-spacer {
        position: relative;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        table-layout: fixed;
      }

      thead {
        background: var(--color-primary, #0d9488);
        color: white;
        position: sticky;
        top: 0;
        z-index: 1;
      }

      th, td {
        padding: 10px 16px;
        text-align: left;
        height: ${this._rowHeight}px;
        box-sizing: border-box;
      }

      th {
        font-weight: 600;
        font-size: 0.875rem;
      }

      th:last-child, td:last-child {
        text-align: right;
      }

      tbody tr:nth-child(even) {
        background: var(--surface-secondary, #f9fafb);
      }

      tbody tr:hover {
        background: var(--surface-hover, #f3f4f6);
      }

      td {
        font-family: var(--font-mono, monospace);
        font-size: 0.875rem;
      }

      .positive {
        color: var(--color-success, #059669);
      }

      .negative {
        color: var(--color-danger, #dc2626);
      }

      .table-footer {
        display: flex;
        justify-content: space-between;
        padding: 8px 16px;
        border-top: 1px solid var(--border-color, #e5e7eb);
        font-size: 0.75rem;
        color: var(--text-tertiary, #6b7280);
        background: var(--surface-secondary, #f9fafb);
      }

      .empty-state {
        padding: 32px;
        text-align: center;
        color: var(--text-tertiary, #6b7280);
      }

      /* Dark theme support */
      :host-context([data-theme="dark"]) .table-container {
        border-color: var(--border-color);
        background: var(--surface-primary);
      }

      :host-context([data-theme="dark"]) thead {
        background: var(--color-primary);
      }

      :host-context([data-theme="dark"]) tbody tr:nth-child(even) {
        background: var(--surface-secondary);
      }

      :host-context([data-theme="dark"]) tbody tr:hover {
        background: var(--surface-hover);
      }

      :host-context([data-theme="dark"]) .table-footer {
        background: var(--surface-secondary);
        border-color: var(--border-color);
      }
    `}}customElements.define("data-table",rv);class av extends Ct{_isDragging=!1;_accept=".csv,.json";static get observedAttributes(){return["accept"]}attributeChangedCallback(t,e,r){t==="accept"&&r&&(this._accept=r),super.attributeChangedCallback(t,e,r)}template(){return`
      <div class="drop-zone ${this._isDragging?"dragging":""}">
        <input
          type="file"
          id="file-input"
          accept="${this._accept}"
          hidden
        />
        <label for="file-input" class="drop-label">
          <div class="icon">
            <svg width="48" height="48" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
              <path d="M9 13h6m-3-3v6m5 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"/>
            </svg>
          </div>
          <span class="text">Drop CSV or JSON file here</span>
          <span class="subtext">or click to browse</span>
          <span class="hint">Supported formats: .csv, .json</span>
        </label>
      </div>
    `}afterRender(){const t=this.$(".drop-zone"),e=this.$("#file-input");if(!t||!e)return;const r=i=>{i.preventDefault(),i.stopPropagation()};["dragenter","dragover","dragleave","drop"].forEach(i=>{t.addEventListener(i,r)}),t.addEventListener("dragenter",()=>{this._isDragging=!0,t.classList.add("dragging")}),t.addEventListener("dragleave",i=>{const n=i,s=t.getBoundingClientRect();(n.clientX<s.left||n.clientX>s.right||n.clientY<s.top||n.clientY>s.bottom)&&(this._isDragging=!1,t.classList.remove("dragging"))}),t.addEventListener("drop",i=>{this._isDragging=!1,t.classList.remove("dragging");const s=i.dataTransfer?.files;s?.length&&this.handleFile(s[0])}),e.addEventListener("change",()=>{e.files?.length&&(this.handleFile(e.files[0]),e.value="")})}handleFile(t){const e=["text/csv","application/json","text/plain"],i=[".csv",".json"].some(n=>t.name.toLowerCase().endsWith(n));if(!e.includes(t.type)&&!i){this.dispatchEvent(new CustomEvent("file-error",{detail:{error:"Invalid file type. Please upload a CSV or JSON file."},bubbles:!0,composed:!0}));return}this.dispatchEvent(new CustomEvent("file-selected",{detail:{file:t},bubbles:!0,composed:!0}))}styles(){return`
      :host {
        display: block;
      }

      .drop-zone {
        border: 2px dashed var(--border-color, #d1d5db);
        border-radius: var(--border-radius-lg, 12px);
        padding: 32px;
        text-align: center;
        transition: all 0.2s ease;
        cursor: pointer;
        background: var(--surface-secondary, #f9fafb);
      }

      .drop-zone:hover,
      .drop-zone.dragging {
        border-color: var(--color-primary, #0d9488);
        background: rgba(13, 148, 136, 0.05);
      }

      .drop-zone.dragging {
        border-style: solid;
        transform: scale(1.01);
      }

      .drop-label {
        display: flex;
        flex-direction: column;
        align-items: center;
        gap: 8px;
        cursor: pointer;
      }

      .icon {
        color: var(--color-primary, #0d9488);
        margin-bottom: 8px;
      }

      .text {
        font-size: 1rem;
        font-weight: 500;
        color: var(--text-primary, #111827);
      }

      .subtext {
        font-size: 0.875rem;
        color: var(--text-secondary, #6b7280);
      }

      .hint {
        font-size: 0.75rem;
        color: var(--text-tertiary, #9ca3af);
        margin-top: 8px;
      }

      /* Dark theme */
      :host-context([data-theme="dark"]) .drop-zone {
        border-color: var(--border-color);
        background: var(--surface-secondary);
      }

      :host-context([data-theme="dark"]) .drop-zone:hover,
      :host-context([data-theme="dark"]) .drop-zone.dragging {
        border-color: var(--color-primary);
        background: rgba(13, 148, 136, 0.1);
      }

      :host-context([data-theme="dark"]) .text {
        color: var(--text-primary);
      }

      :host-context([data-theme="dark"]) .subtext {
        color: var(--text-secondary);
      }

      :host-context([data-theme="dark"]) .hint {
        color: var(--text-tertiary);
      }
    `}}customElements.define("file-drop-zone",av);class iv extends Ct{_rows=[];_expandedSymbols=new Set;set rows(t){this._rows=t,this._expandedSymbols.clear(),this.render()}get rows(){return this._rows}template(){if(this._rows.length===0)return`
        <div class="empty-state">
          <p>No assets to preview</p>
        </div>
      `;const t=this._rows.filter(r=>r.status!=="error").length,e=this._rows.length;return`
      <div class="preview-container">
        <div class="summary-section">
          <span class="summary-text">
            <strong>${t}</strong> of <strong>${e}</strong> assets ready to import
          </span>
        </div>

        <table class="preview-table">
          <thead>
            <tr>
              <th class="col-expand"></th>
              <th class="col-symbol">Symbol</th>
              <th class="col-name">Name</th>
              <th class="col-action">Action</th>
              <th class="col-records">Records</th>
              <th class="col-status">Status</th>
            </tr>
          </thead>
          <tbody>
            ${this._rows.map(r=>this.renderRow(r)).join("")}
          </tbody>
        </table>

        <div class="action-buttons">
          <button class="btn btn-secondary" id="cancel-btn">Cancel</button>
          <button class="btn btn-primary" id="confirm-btn" ${t===0?"disabled":""}>
            Import Valid Assets (${t})
          </button>
        </div>
      </div>
    `}renderRow(t){const e=t.errors&&t.errors.length>0||t.warnings&&t.warnings.length>0,r=this._expandedSymbols.has(t.symbol),i=this.getStatusIcon(t.status),n=`action-${t.action}`,s=`status-${t.status}`;let o=`
      <tr class="preview-row ${s}">
        <td class="col-expand">
          ${e?`
            <button class="expand-btn" data-symbol="${t.symbol}" aria-label="${r?"Collapse":"Expand"} details">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="${r?"rotated":""}">
                <polyline points="9 18 15 12 9 6"/>
              </svg>
            </button>
          `:""}
        </td>
        <td class="col-symbol"><code>${t.symbol}</code></td>
        <td class="col-name">${t.name}</td>
        <td class="col-action">
          <span class="action-badge ${n}">${t.action.toUpperCase()}</span>
        </td>
        <td class="col-records">${t.recordCount}</td>
        <td class="col-status">
          <span class="status-indicator ${s}">${i}</span>
        </td>
      </tr>
    `;return e&&r&&(o+=this.renderExpandedDetails(t)),o}renderExpandedDetails(t){const e=t.errors||[],r=t.warnings||[];return`
      <tr class="details-row">
        <td colspan="6">
          <div class="details-content">
            ${e.length>0?`
              <div class="error-section">
                <h4>Errors (${e.length})</h4>
                <ul class="error-list">
                  ${e.map(i=>`
                    <li class="error-item">
                      <span class="item-type">${i.type.replace(/_/g," ")}</span>
                      <span class="item-message">${i.message}</span>
                    </li>
                  `).join("")}
                </ul>
              </div>
            `:""}
            ${r.length>0?`
              <div class="warning-section">
                <h4>Warnings (${r.length})</h4>
                <ul class="warning-list">
                  ${r.map(i=>`
                    <li class="warning-item">
                      <span class="item-type">${i.type.replace(/_/g," ")}</span>
                      <span class="item-message">${i.message}</span>
                    </li>
                  `).join("")}
                </ul>
              </div>
            `:""}
          </div>
        </td>
      </tr>
    `}getStatusIcon(t){switch(t){case"valid":return`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <polyline points="20 6 9 17 4 12"/>
        </svg>`;case"warning":return`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/>
          <line x1="12" y1="9" x2="12" y2="13"/>
          <line x1="12" y1="17" x2="12.01" y2="17"/>
        </svg>`;case"error":return`<svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
          <circle cx="12" cy="12" r="10"/>
          <line x1="15" y1="9" x2="9" y2="15"/>
          <line x1="9" y1="9" x2="15" y2="15"/>
        </svg>`}}afterRender(){this.$$(".expand-btn").forEach(t=>{t.addEventListener("click",e=>{const r=e.currentTarget.dataset.symbol;r&&(this._expandedSymbols.has(r)?this._expandedSymbols.delete(r):this._expandedSymbols.add(r),this.render())})}),this.$("#cancel-btn")?.addEventListener("click",()=>{this.dispatchEvent(new CustomEvent("preview-cancelled",{bubbles:!0,composed:!0}))}),this.$("#confirm-btn")?.addEventListener("click",()=>{const t=this._rows.filter(e=>e.status!=="error");this.dispatchEvent(new CustomEvent("preview-confirmed",{detail:{validRows:t},bubbles:!0,composed:!0}))})}styles(){return`
      :host {
        display: block;
      }

      .empty-state {
        padding: 40px;
        text-align: center;
        color: var(--text-tertiary, #9ca3af);
      }

      .preview-container {
        display: flex;
        flex-direction: column;
        gap: 16px;
      }

      .summary-section {
        padding: 12px 16px;
        background: var(--surface-secondary, #f9fafb);
        border-radius: var(--border-radius-md, 8px);
        text-align: center;
      }

      .summary-text {
        color: var(--text-secondary, #6b7280);
        font-size: 0.9375rem;
      }

      .summary-text strong {
        color: var(--text-primary, #111827);
      }

      /* Table styles */
      .preview-table {
        width: 100%;
        border-collapse: collapse;
        font-size: 0.875rem;
      }

      .preview-table th {
        text-align: left;
        padding: 10px 12px;
        font-weight: 600;
        color: var(--text-secondary, #6b7280);
        border-bottom: 2px solid var(--border-color, #e5e7eb);
        white-space: nowrap;
      }

      .preview-table td {
        padding: 12px;
        border-bottom: 1px solid var(--border-color, #e5e7eb);
        vertical-align: middle;
      }

      .col-expand {
        width: 32px;
        text-align: center;
      }

      .col-symbol {
        width: 100px;
      }

      .col-name {
        min-width: 150px;
      }

      .col-action {
        width: 80px;
        text-align: center;
      }

      .col-records {
        width: 80px;
        text-align: center;
      }

      .col-status {
        width: 60px;
        text-align: center;
      }

      .preview-row code {
        font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
        font-size: 0.8125rem;
        padding: 2px 6px;
        background: var(--surface-secondary, #f3f4f6);
        border-radius: var(--border-radius-sm, 4px);
      }

      /* Expand button */
      .expand-btn {
        background: none;
        border: none;
        padding: 4px;
        cursor: pointer;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--text-tertiary, #9ca3af);
        transition: color 0.2s;
      }

      .expand-btn:hover {
        color: var(--text-primary, #111827);
      }

      .expand-btn svg {
        transition: transform 0.2s;
      }

      .expand-btn svg.rotated {
        transform: rotate(90deg);
      }

      /* Action badges */
      .action-badge {
        display: inline-block;
        padding: 3px 8px;
        border-radius: 9999px;
        font-size: 0.6875rem;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.025em;
      }

      .action-add {
        background: rgba(16, 185, 129, 0.15);
        color: #059669;
      }

      .action-update {
        background: rgba(14, 165, 233, 0.15);
        color: #0284c7;
      }

      .action-skip {
        background: rgba(107, 114, 128, 0.15);
        color: #6b7280;
      }

      /* Status indicators */
      .status-indicator {
        display: inline-flex;
        align-items: center;
        justify-content: center;
      }

      .status-indicator.status-valid {
        color: #059669;
      }

      .status-indicator.status-warning {
        color: #d97706;
      }

      .status-indicator.status-error {
        color: #dc2626;
      }

      /* Row status styling */
      .preview-row.status-error {
        background: rgba(220, 38, 38, 0.05);
      }

      .preview-row.status-warning {
        background: rgba(217, 119, 6, 0.05);
      }

      /* Details row */
      .details-row td {
        padding: 0;
        background: var(--surface-secondary, #f9fafb);
      }

      .details-content {
        padding: 16px 24px;
      }

      .error-section, .warning-section {
        margin-bottom: 12px;
      }

      .error-section:last-child, .warning-section:last-child {
        margin-bottom: 0;
      }

      .error-section h4 {
        margin: 0 0 8px 0;
        font-size: 0.8125rem;
        font-weight: 600;
        color: #dc2626;
      }

      .warning-section h4 {
        margin: 0 0 8px 0;
        font-size: 0.8125rem;
        font-weight: 600;
        color: #d97706;
      }

      .error-list, .warning-list {
        list-style: none;
        margin: 0;
        padding: 0;
      }

      .error-item, .warning-item {
        display: flex;
        flex-direction: column;
        gap: 2px;
        padding: 8px 12px;
        margin-bottom: 6px;
        border-radius: var(--border-radius-sm, 4px);
        font-size: 0.8125rem;
      }

      .error-item {
        background: rgba(220, 38, 38, 0.1);
      }

      .warning-item {
        background: rgba(217, 119, 6, 0.1);
      }

      .error-item:last-child, .warning-item:last-child {
        margin-bottom: 0;
      }

      .item-type {
        font-weight: 600;
        text-transform: capitalize;
      }

      .error-item .item-type {
        color: #dc2626;
      }

      .warning-item .item-type {
        color: #d97706;
      }

      .item-message {
        color: var(--text-secondary, #6b7280);
      }

      /* Action buttons */
      .action-buttons {
        display: flex;
        justify-content: flex-end;
        gap: 12px;
        padding-top: 8px;
      }

      .btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 16px;
        border-radius: var(--border-radius-md, 6px);
        font-size: 0.875rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
        border: none;
      }

      .btn-primary {
        background: var(--color-primary, #0d9488);
        color: white;
      }

      .btn-primary:hover:not(:disabled) {
        background: var(--color-primary-dark, #0f766e);
      }

      .btn-primary:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .btn-secondary {
        background: var(--surface-secondary, #f3f4f6);
        color: var(--text-primary, #111827);
        border: 1px solid var(--border-color, #d1d5db);
      }

      .btn-secondary:hover {
        background: var(--surface-hover, #e5e7eb);
      }

      /* Dark theme */
      :host-context([data-theme="dark"]) .summary-section {
        background: var(--surface-secondary);
      }

      :host-context([data-theme="dark"]) .preview-table th {
        color: var(--text-secondary);
        border-bottom-color: var(--border-color);
      }

      :host-context([data-theme="dark"]) .preview-table td {
        border-bottom-color: var(--border-color);
      }

      :host-context([data-theme="dark"]) .preview-row code {
        background: var(--surface-secondary);
        color: var(--text-primary);
      }

      :host-context([data-theme="dark"]) .expand-btn:hover {
        color: var(--text-primary);
      }

      :host-context([data-theme="dark"]) .action-add {
        background: rgba(16, 185, 129, 0.2);
        color: #34d399;
      }

      :host-context([data-theme="dark"]) .action-update {
        background: rgba(14, 165, 233, 0.2);
        color: #38bdf8;
      }

      :host-context([data-theme="dark"]) .action-skip {
        background: rgba(107, 114, 128, 0.25);
        color: #9ca3af;
      }

      :host-context([data-theme="dark"]) .status-indicator.status-valid {
        color: #34d399;
      }

      :host-context([data-theme="dark"]) .status-indicator.status-warning {
        color: #fbbf24;
      }

      :host-context([data-theme="dark"]) .status-indicator.status-error {
        color: #f87171;
      }

      :host-context([data-theme="dark"]) .preview-row.status-error {
        background: rgba(248, 113, 113, 0.1);
      }

      :host-context([data-theme="dark"]) .preview-row.status-warning {
        background: rgba(251, 191, 36, 0.1);
      }

      :host-context([data-theme="dark"]) .details-row td {
        background: var(--surface-secondary);
      }

      :host-context([data-theme="dark"]) .error-section h4 {
        color: #f87171;
      }

      :host-context([data-theme="dark"]) .warning-section h4 {
        color: #fbbf24;
      }

      :host-context([data-theme="dark"]) .error-item {
        background: rgba(248, 113, 113, 0.15);
      }

      :host-context([data-theme="dark"]) .error-item .item-type {
        color: #f87171;
      }

      :host-context([data-theme="dark"]) .warning-item {
        background: rgba(251, 191, 36, 0.15);
      }

      :host-context([data-theme="dark"]) .warning-item .item-type {
        color: #fbbf24;
      }

      :host-context([data-theme="dark"]) .btn-secondary {
        background: var(--surface-secondary);
        border-color: var(--border-color);
        color: var(--text-primary);
      }

      :host-context([data-theme="dark"]) .btn-secondary:hover {
        background: var(--surface-hover);
      }
    `}}customElements.define("bulk-preview-table",iv);class nv extends Ct{_isOpen=!1;_currentSymbol="SPY";_currentData=null;_viewMode="view";_operationMode="single";_validationResult=null;_bulkValidationResult=null;_isCustomData=!1;_showHelp=!1;_isLoading=!1;_showResetAllConfirm=!1;_resetAllCheckbox=!1;_customSymbolCount=0;_allSymbols=[];async show(t){t&&(this._currentSymbol=t.toUpperCase()),this._isOpen=!0,this._viewMode="view",this._operationMode="single",this._validationResult=null,this._bulkValidationResult=null,this._showHelp=!1,this._showResetAllConfirm=!1,this._resetAllCheckbox=!1,await this.loadAllSymbols(),await this.loadData()}async loadAllSymbols(){const t=Nr(),e=await qa(),r=new Set(t),i=e.filter(n=>!r.has(n));this._allSymbols=[...t,...i]}hide(){this._isOpen=!1,this._validationResult=null,this._bulkValidationResult=null,this._showResetAllConfirm=!1,this._resetAllCheckbox=!1,this.render()}async loadData(){if(this._isLoading=!0,this.render(),this._isCustomData=await Is(this._currentSymbol),this._isCustomData){const e=await Ic(this._currentSymbol);e&&(this._currentData={symbol:e.symbol,name:e.name,assetClass:e.assetClass,startDate:e.startDate,endDate:e.endDate,returns:e.returns})}else this._currentData=da(this._currentSymbol)||null;const t=await qa();this._customSymbolCount=t.length,this._isLoading=!1,this.render()}template(){return this._isOpen?`
      <div class="modal-overlay">
        <div class="modal-container">
          <header class="modal-header">
            <h2>Historical Return Data</h2>
            <button class="close-btn" aria-label="Close">&times;</button>
          </header>

          <div class="modal-content">
            ${this.renderModeToggle()}

            ${this._isLoading?this.renderLoading():""}
            ${!this._isLoading&&this._operationMode==="single"?this.renderSingleMode():""}
            ${!this._isLoading&&this._operationMode==="bulk"?this.renderBulkMode():""}

            ${this._showHelp?this.renderHelp():""}
          </div>

          <footer class="modal-footer">
            ${this.renderFooterButtons()}
          </footer>
        </div>
        ${this._showResetAllConfirm?this.renderResetAllConfirmation():""}
      </div>
    `:'<div class="hidden"></div>'}renderModeToggle(){return`
      <div class="mode-toggle">
        <button
          class="mode-btn ${this._operationMode==="single"?"active":""}"
          data-mode="single"
        >
          Single Asset
        </button>
        <button
          class="mode-btn ${this._operationMode==="bulk"?"active":""}"
          data-mode="bulk"
        >
          Bulk Operations
        </button>
      </div>
    `}renderSingleMode(){return`
      ${this.renderSymbolSelector()}

      ${this._viewMode==="view"?this.renderViewMode():""}
      ${this._viewMode==="import"?this.renderImportMode():""}
    `}renderBulkMode(){return`
      <div class="bulk-operations">
        ${this._bulkValidationResult?this.renderBulkPreview():this.renderBulkOptions()}
      </div>
    `}renderBulkOptions(){return`
      <div class="bulk-section">
        <h3>Bulk Export</h3>
        <p class="bulk-description">
          Export all assets to a single file for backup or editing.
          Custom data takes precedence over bundled data.
        </p>
        <div class="bulk-buttons">
          <button class="btn btn-secondary" id="bulk-export-csv">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"/>
            </svg>
            Export All as CSV
          </button>
          <button class="btn btn-secondary" id="bulk-export-json">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"/>
            </svg>
            Export All as JSON
          </button>
        </div>
      </div>

      <div class="bulk-section">
        <h3>Bulk Import</h3>
        <p class="bulk-description">
          Import multiple assets at once from a single file.
          You'll see a preview before any data is saved.
        </p>
        <div class="template-downloads">
          <span class="template-label">Download template:</span>
          <button class="btn btn-text" id="download-csv-template">CSV Template</button>
          <button class="btn btn-text" id="download-json-template">JSON Template</button>
        </div>
        <file-drop-zone id="bulk-file-drop"></file-drop-zone>
      </div>

      <div class="bulk-section ai-generation-section">
        <h3>AI-Assisted Data Generation</h3>
        <p class="bulk-description">
          Use AI assistants (ChatGPT, Gemini, Claude) to generate properly formatted CSV data for bulk import.
          Copy the prompt template below and paste it into any AI assistant.
        </p>
        <div class="prompt-container">
          <details>
            <summary>View Prompt Template</summary>
            <pre class="prompt-template">System/User Role: You are a financial data specialist.

Task: I will provide a list of ticker symbols. Generate a CSV export (in a code block) following the exact schema of the provided "Bulk Import Template."

The Schema:

symbol: The ticker symbol.
name: The full legal company/fund name.
asset_class: Categorize as equity_stock, equity_index, fixed_income, or crypto.
year: The calendar year.
annual_return: The total annual return as a decimal (e.g., 0.125).

Data Requirements:

Contiguous 31-Year Span: Provide data for exactly 31 years, starting from 1995 through 2025.

Handling Young Companies (Proxy Backfilling): If a company has not been in business/public for the full 31 years:
- For the years before the company existed, use the annual returns of the S&P 500 (SPY) as a proxy.
- Keep the symbol and name columns consistent with the requested ticker, even for the proxy years.
- This ensures every ticker has a full, unbroken 31-year history.

These are the only supported values for asset_class:
equity_stock, equity_index, commodity

Make sure you make your best judgement to properly classify the assets.

Formatting Rules:

Output in standard CSV format.
Header: symbol,name,asset_class,year,annual_return
Ensure high accuracy for the historical return percentages.

Input Tickers:
[INSERT TICKERS HERE]</pre>
          </details>
          <button class="btn btn-secondary copy-prompt-btn" id="copy-prompt-btn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="9" y="9" width="13" height="13" rx="2" ry="2"/>
              <path d="M5 15H4a2 2 0 01-2-2V4a2 2 0 012-2h9a2 2 0 012 2v1"/>
            </svg>
            <span class="copy-prompt-text">Copy Prompt</span>
          </button>
        </div>
      </div>

      <div class="bulk-section reset-section">
        <h3>Reset to Defaults</h3>
        <p class="bulk-description">
          Delete all custom data and restore bundled defaults for all assets.
        </p>
        ${this._customSymbolCount===0?`
          <p class="no-custom-data">No custom data to reset</p>
        `:`
          <p class="custom-data-count">
            <strong>${this._customSymbolCount}</strong> asset${this._customSymbolCount!==1?"s":""} with custom data
          </p>
          <button class="btn btn-danger" id="reset-all-btn">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline points="1 4 1 10 7 10"/>
              <path d="M3.51 15a9 9 0 102.13-9.36L1 10"/>
            </svg>
            Reset All to Defaults
          </button>
        `}
      </div>
    `}renderBulkPreview(){const t=this._bulkValidationResult;return this.convertToPreviewRows(t.assets),`
      <div class="bulk-preview">
        <h3>Import Preview</h3>
        <p class="bulk-description">
          Review the assets below. Only valid assets will be imported.
        </p>
        <bulk-preview-table id="preview-table"></bulk-preview-table>
      </div>
    `}convertToPreviewRows(t){return t.map(e=>({symbol:e.symbol,name:e.name,action:e.action,recordCount:e.recordCount,status:e.result.errors.length>0?"error":e.result.warnings.length>0?"warning":"valid",errors:e.result.errors,warnings:e.result.warnings}))}renderResetAllConfirmation(){return`
      <div class="confirmation-overlay">
        <div class="confirmation-modal">
          <div class="confirmation-header">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="warning-icon">
              <path d="M10.29 3.86L1.82 18a2 2 0 001.71 3h16.94a2 2 0 001.71-3L13.71 3.86a2 2 0 00-3.42 0z"/>
              <line x1="12" y1="9" x2="12" y2="13"/>
              <line x1="12" y1="17" x2="12.01" y2="17"/>
            </svg>
            <h3>Reset All to Defaults</h3>
          </div>
          <div class="confirmation-body">
            <p>This will permanently delete custom data for <strong>${this._customSymbolCount}</strong> asset${this._customSymbolCount!==1?"s":""}.</p>
            <p>Bundled preset data will be restored.</p>
            <label class="confirmation-checkbox">
              <input type="checkbox" id="reset-all-confirm-checkbox" />
              <span>I understand this cannot be undone</span>
            </label>
          </div>
          <div class="confirmation-actions">
            <button class="btn btn-secondary" id="reset-all-cancel">Cancel</button>
            <button class="btn btn-danger" id="reset-all-confirm" disabled>
              Confirm Reset
            </button>
          </div>
        </div>
      </div>
    `}renderSymbolSelector(){const t=this._allSymbols.length>0?this._allSymbols:Nr(),e=this.groupSymbolsByClass(t);return`
      <div class="symbol-selector">
        <label for="symbol-select">Asset:</label>
        <select id="symbol-select">
          ${Object.entries(e).map(([r,i])=>`
            <optgroup label="${r}">
              ${i.map(n=>`
                <option value="${n}" ${n===this._currentSymbol?"selected":""}>
                  ${n}${this._currentSymbol===n&&this._isCustomData?" (Custom)":""}
                </option>
              `).join("")}
            </optgroup>
          `).join("")}
        </select>
        ${this._isCustomData?'<span class="custom-badge">Using Custom Data</span>':""}
      </div>
    `}groupSymbolsByClass(t){const e={"Index ETFs":[],Bonds:[],"Individual Stocks":[]};return t.forEach(r=>{const i=da(r);if(!i){e["Individual Stocks"].push(r);return}const n=i.assetClass?.toLowerCase()||"";n.includes("bond")||r==="AGG"?e.Bonds.push(r):n.includes("index")||["SPY","QQQ","IWM","VOO","VTI"].includes(r)?e["Index ETFs"].push(r):e["Individual Stocks"].push(r)}),Object.keys(e).forEach(r=>{e[r].sort((i,n)=>i.localeCompare(n))}),Object.keys(e).forEach(r=>{e[r].length===0&&delete e[r]}),e}renderLoading(){return`
      <div class="loading-state">
        <div class="spinner"></div>
        <p>Loading data...</p>
      </div>
    `}renderViewMode(){return this._currentData?`
      <div class="data-info">
        <div class="info-row">
          <span class="label">Name:</span>
          <span class="value">${this._currentData.name}</span>
        </div>
        <div class="info-row">
          <span class="label">Date Range:</span>
          <span class="value">${this._currentData.startDate} - ${this._currentData.endDate}</span>
        </div>
        <div class="info-row">
          <span class="label">Records:</span>
          <span class="value">${this._currentData.returns.length} years</span>
        </div>
      </div>

      <data-table id="return-table"></data-table>

      <div class="export-buttons">
        <button class="btn btn-secondary" id="export-csv">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"/>
          </svg>
          Export CSV
        </button>
        <button class="btn btn-secondary" id="export-json">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <path d="M21 15v4a2 2 0 01-2 2H5a2 2 0 01-2-2v-4M7 10l5 5 5-5M12 15V3"/>
          </svg>
          Export JSON
        </button>
      </div>
    `:`
        <div class="empty-state">
          <p>No data available for ${this._currentSymbol}</p>
        </div>
      `}renderImportMode(){return`
      <div class="import-section">
        <h3>Import Custom Data for ${this._currentSymbol}</h3>
        <p class="import-instructions">
          Upload a CSV or JSON file with historical return data.
          This will replace the bundled data for this asset.
        </p>

        <file-drop-zone id="file-drop"></file-drop-zone>

        ${this._validationResult?this.renderValidationResult():""}
      </div>
    `}renderValidationResult(){const t=this._validationResult;return t.valid?`
        <div class="validation-success">
          <div class="success-header">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 11.08V12a10 10 0 11-5.93-9.14"/>
              <polyline points="22 4 12 14.01 9 11.01"/>
            </svg>
            <span>Validation Passed</span>
          </div>
          <div class="validation-summary">
            <p><strong>${t.data.returns.length}</strong> records found</p>
            <p>Date range: ${t.data.startDate} - ${t.data.endDate}</p>
          </div>
          ${t.warnings.length>0?this.renderWarnings(t.warnings):""}
          <div class="import-actions">
            <button class="btn btn-primary" id="confirm-import">Import Data</button>
            <button class="btn btn-secondary" id="cancel-import">Cancel</button>
          </div>
        </div>
      `:`
      <div class="validation-error">
        <div class="error-header">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <line x1="15" y1="9" x2="9" y2="15"/>
            <line x1="9" y1="9" x2="15" y2="15"/>
          </svg>
          <span>Validation Failed</span>
        </div>
        ${this.renderErrors(t.errors)}
        ${t.warnings.length>0?this.renderWarnings(t.warnings):""}
        <button class="btn btn-secondary" id="try-again">Try Again</button>
      </div>
    `}renderErrors(t){return`
      <div class="error-list">
        <h4>Errors (${t.length})</h4>
        <ul>
          ${t.map(e=>`
            <li class="error-item">
              <span class="error-type">${e.type.replace("_"," ")}</span>
              <span class="error-message">${e.message}</span>
            </li>
          `).join("")}
        </ul>
      </div>
    `}renderWarnings(t){return`
      <div class="warning-list">
        <h4>Warnings (${t.length})</h4>
        <ul>
          ${t.map(e=>`
            <li class="warning-item">
              <span class="warning-type">${e.type.replace("_"," ")}</span>
              <span class="warning-message">${e.message}</span>
            </li>
          `).join("")}
        </ul>
      </div>
    `}renderHelp(){return`
      <div class="help-section">
        <h3>Data Format Requirements</h3>

        <div class="help-block">
          <h4>CSV Format</h4>
          <p>Required columns: <code>year</code>, <code>annual_return</code></p>
          <pre>year,annual_return
1995,0.3758
1996,0.2296
1997,0.3336
1998,0.2858
1999,0.2104</pre>
          <p class="note">Returns should be in decimal form (0.10 = 10%)</p>
        </div>

        <div class="help-block">
          <h4>JSON Format</h4>
          <pre>{
  "symbol": "SPY",
  "name": "S&P 500 ETF Trust",
  "returns": [
    { "date": "1995", "return": 0.3758 },
    { "date": "1996", "return": 0.2296 }
  ]
}</pre>
        </div>

        <div class="help-block">
          <h4>Requirements</h4>
          <ul>
            <li>Minimum 5 years of data</li>
            <li>No duplicate years</li>
            <li>Returns as decimals (0.10 for 10%)</li>
            <li>Consecutive years recommended (gaps allowed)</li>
          </ul>
        </div>

        <button class="btn btn-secondary" id="close-help">Close Help</button>
      </div>
    `}renderFooterButtons(){return this._operationMode==="bulk"?`
        <div class="footer-left">
          <button class="btn btn-text" id="show-help">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/>
              <line x1="12" y1="17" x2="12.01" y2="17"/>
            </svg>
            Help
          </button>
        </div>
        <div class="footer-right">
          <button class="btn btn-primary" id="close-modal">Done</button>
        </div>
      `:this._viewMode==="view"?`
        <div class="footer-left">
          <button class="btn btn-text" id="show-help">
            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/>
              <line x1="12" y1="17" x2="12.01" y2="17"/>
            </svg>
            Help
          </button>
          ${this._isCustomData?`
            <button class="btn btn-text btn-danger" id="reset-defaults">
              Reset to Defaults
            </button>
          `:""}
        </div>
        <div class="footer-right">
          <button class="btn btn-secondary" id="import-mode">Import Custom Data</button>
          <button class="btn btn-primary" id="close-modal">Done</button>
        </div>
      `:`
      <div class="footer-left">
        <button class="btn btn-text" id="show-help">
          <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"/>
            <path d="M9.09 9a3 3 0 015.83 1c0 2-3 3-3 3"/>
            <line x1="12" y1="17" x2="12.01" y2="17"/>
          </svg>
          Help
        </button>
      </div>
      <div class="footer-right">
        <button class="btn btn-secondary" id="back-to-view">Back</button>
      </div>
    `}afterRender(){if(!this._isOpen)return;this.$(".close-btn")?.addEventListener("click",()=>this.hide()),this.$(".modal-overlay")?.addEventListener("click",n=>{n.target.classList.contains("modal-overlay")&&this.hide()}),this.$$(".mode-btn").forEach(n=>{n.addEventListener("click",s=>{const o=s.target.dataset.mode;o&&o!==this._operationMode&&(this._operationMode=o,this._bulkValidationResult=null,this._validationResult=null,this.render())})}),this.$("#symbol-select")?.addEventListener("change",async n=>{this._currentSymbol=n.target.value,this._validationResult=null,await this.loadData()}),this.$("#export-csv")?.addEventListener("click",()=>this.exportCsv()),this.$("#export-json")?.addEventListener("click",()=>this.exportJson()),this.$("#import-mode")?.addEventListener("click",()=>{this._viewMode="import",this._validationResult=null,this.render()}),this.$("#close-modal")?.addEventListener("click",()=>this.hide()),this.$("#reset-defaults")?.addEventListener("click",()=>this.resetToDefaultsSingle()),this.$("#back-to-view")?.addEventListener("click",()=>{this._viewMode="view",this._validationResult=null,this.render()}),this.$("#confirm-import")?.addEventListener("click",()=>this.confirmImport()),this.$("#cancel-import")?.addEventListener("click",()=>{this._validationResult=null,this.render()}),this.$("#try-again")?.addEventListener("click",()=>{this._validationResult=null,this.render()});const t=this.$("#file-drop");t?.addEventListener("file-selected",(n=>{this.handleFileSelected(n.detail.file)})),t?.addEventListener("file-error",(n=>{this._validationResult={valid:!1,errors:[{type:"format",message:n.detail.error}],warnings:[]},this.render()})),this.$("#bulk-export-csv")?.addEventListener("click",()=>this.handleBulkExportCsv()),this.$("#bulk-export-json")?.addEventListener("click",()=>this.handleBulkExportJson()),this.$("#download-csv-template")?.addEventListener("click",()=>tv()),this.$("#download-json-template")?.addEventListener("click",()=>ev()),this.$("#copy-prompt-btn")?.addEventListener("click",()=>this.handleCopyPrompt());const e=this.$("#bulk-file-drop");e?.addEventListener("file-selected",(n=>{this.handleBulkFileSelected(n.detail.file)})),e?.addEventListener("file-error",(n=>{console.error("Bulk file error:",n.detail.error)}));const r=this.$("#preview-table");r&&this._bulkValidationResult&&(r.rows=this.convertToPreviewRows(this._bulkValidationResult.assets)),this.$("#preview-table")?.addEventListener("preview-cancelled",()=>{this._bulkValidationResult=null,this.render()}),this.$("#preview-table")?.addEventListener("preview-confirmed",(n=>{this.handleBulkPreviewConfirmed(n.detail.validRows)})),this.$("#reset-all-btn")?.addEventListener("click",()=>{this._showResetAllConfirm=!0,this._resetAllCheckbox=!1,this.render()}),this.$("#reset-all-cancel")?.addEventListener("click",()=>{this._showResetAllConfirm=!1,this._resetAllCheckbox=!1,this.render()}),this.$("#reset-all-confirm-checkbox")?.addEventListener("change",n=>{this._resetAllCheckbox=n.target.checked;const s=this.$("#reset-all-confirm");s&&(s.disabled=!this._resetAllCheckbox)}),this.$("#reset-all-confirm")?.addEventListener("click",()=>{this._resetAllCheckbox&&this.handleResetAll()}),this.$("#show-help")?.addEventListener("click",()=>{this._showHelp=!0,this.render()}),this.$("#close-help")?.addEventListener("click",()=>{this._showHelp=!1,this.render()});const i=this.$("#return-table");i&&this._currentData&&(i.data=this._currentData.returns)}async handleFileSelected(t){const e=await t.text();if(t.name.toLowerCase().endsWith(".json"))this._validationResult=Gd(e);else{const i=this._currentData?.name||this._currentSymbol;this._validationResult=Ud(e,this._currentSymbol,i)}this.render()}async handleBulkFileSelected(t){const e=await t.text();t.name.toLowerCase().endsWith(".json")?this._bulkValidationResult=await _b(e):this._bulkValidationResult=await Kb(e),this.render()}async handleBulkExportCsv(){const t=await Qb(),e=new Blob([t],{type:"text/csv"});this.downloadBlob(e,`all_assets_${this.getDateStamp()}.csv`)}async handleBulkExportJson(){const t=await Jb(),e=new Blob([t],{type:"application/json"});this.downloadBlob(e,`all_assets_${this.getDateStamp()}.json`)}getDateStamp(){const t=new Date;return`${t.getFullYear()}${String(t.getMonth()+1).padStart(2,"0")}${String(t.getDate()).padStart(2,"0")}`}async handleBulkPreviewConfirmed(t){const e=[];for(const r of t){const i=this._bulkValidationResult?.assets.find(n=>n.symbol===r.symbol&&n.result.valid);i?.result.data&&e.push(i.result.data)}e.length>0&&(await Wh(e,"user-import"),this.dispatchEvent(new CustomEvent("bulk-data-imported",{detail:{count:e.length},bubbles:!0,composed:!0}))),this._bulkValidationResult=null,await this.loadAllSymbols(),await this.loadData()}async handleResetAll(){const t=await Yh();this._showResetAllConfirm=!1,this._resetAllCheckbox=!1,this.dispatchEvent(new CustomEvent("all-data-reset",{detail:{count:t},bubbles:!0,composed:!0})),await this.loadAllSymbols(),await this.loadData()}async confirmImport(){!this._validationResult?.valid||!this._validationResult.data||(await Nh(this._validationResult.data,"user-import"),this._viewMode="view",this._validationResult=null,await this.loadData(),this.dispatchEvent(new CustomEvent("data-imported",{detail:{symbol:this._currentSymbol},bubbles:!0,composed:!0})))}async resetToDefaultsSingle(){await qh(this._currentSymbol),await this.loadData(),this.dispatchEvent(new CustomEvent("data-reset",{detail:{symbol:this._currentSymbol},bubbles:!0,composed:!0}))}exportCsv(){if(!this._currentData)return;const t=`year,annual_return
`,e=this._currentData.returns.map(i=>`${i.date},${i.return}`).join(`
`),r=new Blob([t+e],{type:"text/csv"});this.downloadBlob(r,`${this._currentSymbol}_returns.csv`)}exportJson(){if(!this._currentData)return;const t=JSON.stringify(this._currentData,null,2),e=new Blob([t],{type:"application/json"});this.downloadBlob(e,`${this._currentSymbol}_returns.json`)}downloadBlob(t,e){const r=URL.createObjectURL(t),i=document.createElement("a");i.href=r,i.download=e,document.body.appendChild(i),i.click(),document.body.removeChild(i),URL.revokeObjectURL(r)}async handleCopyPrompt(){const t=`System/User Role: You are a financial data specialist.

Task: I will provide a list of ticker symbols. Generate a CSV export (in a code block) following the exact schema of the provided "Bulk Import Template."

The Schema:

symbol: The ticker symbol.
name: The full legal company/fund name.
asset_class: Categorize as equity_stock, equity_index, fixed_income, or crypto.
year: The calendar year.
annual_return: The total annual return as a decimal (e.g., 0.125).

Data Requirements:

Contiguous 31-Year Span: Provide data for exactly 31 years, starting from 1995 through 2025.

Handling Young Companies (Proxy Backfilling): If a company has not been in business/public for the full 31 years:
- For the years before the company existed, use the annual returns of the S&P 500 (SPY) as a proxy.
- Keep the symbol and name columns consistent with the requested ticker, even for the proxy years.
- This ensures every ticker has a full, unbroken 31-year history.

These are the only supported values for asset_class:
equity_stock, equity_index, commodity

Make sure you make your best judgement to properly classify the assets.

Formatting Rules:

Output in standard CSV format.
Header: symbol,name,asset_class,year,annual_return
Ensure high accuracy for the historical return percentages.

Input Tickers:
[INSERT TICKERS HERE]`;try{await navigator.clipboard.writeText(t);const e=this.$("#copy-prompt-btn"),r=this.$(".copy-prompt-text");e&&r&&(e.classList.add("copy-success"),r.textContent="Copied!",setTimeout(()=>{e.classList.remove("copy-success"),r.textContent="Copy Prompt"},2e3))}catch(e){console.error("Failed to copy prompt:",e)}}styles(){return`
      :host {
        display: block;
      }

      .hidden {
        display: none;
      }

      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        padding: 20px;
      }

      .modal-container {
        background: var(--surface-primary, #fff);
        border-radius: var(--border-radius-lg, 12px);
        max-width: 800px;
        width: 100%;
        max-height: 90vh;
        display: flex;
        flex-direction: column;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 16px 24px;
        border-bottom: 1px solid var(--border-color, #e5e7eb);
      }

      .modal-header h2 {
        margin: 0;
        font-size: 1.25rem;
        font-weight: 600;
        color: var(--text-primary, #111827);
      }

      .close-btn {
        background: none;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: var(--text-tertiary, #9ca3af);
        padding: 4px 8px;
        line-height: 1;
        transition: color 0.2s;
      }

      .close-btn:hover {
        color: var(--text-primary, #111827);
      }

      .modal-content {
        padding: 24px;
        overflow-y: auto;
        flex: 1;
      }

      .modal-footer {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 16px 24px;
        border-top: 1px solid var(--border-color, #e5e7eb);
        gap: 12px;
      }

      .footer-left, .footer-right {
        display: flex;
        gap: 12px;
        align-items: center;
      }

      /* Mode toggle */
      .mode-toggle {
        display: flex;
        gap: 4px;
        padding: 4px;
        background: var(--surface-secondary, #f3f4f6);
        border-radius: var(--border-radius-md, 8px);
        margin-bottom: 20px;
      }

      .mode-btn {
        flex: 1;
        padding: 10px 16px;
        border: none;
        background: transparent;
        color: var(--text-secondary, #6b7280);
        font-size: 0.875rem;
        font-weight: 500;
        border-radius: var(--border-radius-sm, 6px);
        cursor: pointer;
        transition: all 0.2s;
      }

      .mode-btn:hover {
        color: var(--text-primary, #111827);
      }

      .mode-btn.active {
        background: var(--surface-primary, #fff);
        color: var(--text-primary, #111827);
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.1);
      }

      /* Symbol selector */
      .symbol-selector {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 20px;
      }

      .symbol-selector label {
        font-weight: 500;
        color: var(--text-secondary, #6b7280);
      }

      .symbol-selector select {
        padding: 8px 12px;
        border: 1px solid var(--border-color, #d1d5db);
        border-radius: var(--border-radius-md, 6px);
        font-size: 1rem;
        background: var(--surface-primary, #fff);
        color: var(--text-primary, #111827);
        cursor: pointer;
        min-width: 120px;
      }

      .custom-badge {
        background: var(--color-primary, #0d9488);
        color: white;
        font-size: 0.75rem;
        padding: 4px 8px;
        border-radius: 9999px;
        font-weight: 500;
      }

      /* Bulk operations */
      .bulk-operations {
        display: flex;
        flex-direction: column;
        gap: 24px;
      }

      .bulk-section {
        padding: 20px;
        background: var(--surface-secondary, #f9fafb);
        border-radius: var(--border-radius-md, 8px);
      }

      .bulk-section h3 {
        margin: 0 0 8px 0;
        font-size: 1rem;
        font-weight: 600;
        color: var(--text-primary, #111827);
      }

      .bulk-description {
        margin: 0 0 16px 0;
        color: var(--text-secondary, #6b7280);
        font-size: 0.875rem;
        line-height: 1.5;
      }

      .bulk-buttons {
        display: flex;
        gap: 12px;
        flex-wrap: wrap;
      }

      .template-downloads {
        display: flex;
        align-items: center;
        gap: 8px;
        margin-bottom: 16px;
      }

      .template-label {
        font-size: 0.875rem;
        color: var(--text-secondary, #6b7280);
      }

      /* Reset section */
      .reset-section {
        background: rgba(220, 38, 38, 0.05);
        border: 1px solid rgba(220, 38, 38, 0.2);
      }

      .no-custom-data {
        color: var(--text-tertiary, #9ca3af);
        font-style: italic;
        margin: 0;
      }

      .custom-data-count {
        color: var(--text-secondary, #6b7280);
        margin: 0 0 12px 0;
      }

      /* Bulk preview */
      .bulk-preview h3 {
        margin: 0 0 8px 0;
        font-size: 1rem;
        font-weight: 600;
        color: var(--text-primary, #111827);
      }

      /* Confirmation modal */
      .confirmation-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: rgba(0, 0, 0, 0.5);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1100;
      }

      .confirmation-modal {
        background: var(--surface-primary, #fff);
        border-radius: var(--border-radius-lg, 12px);
        max-width: 400px;
        width: 90%;
        padding: 24px;
        box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
      }

      .confirmation-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 16px;
      }

      .confirmation-header .warning-icon {
        color: #d97706;
        flex-shrink: 0;
      }

      .confirmation-header h3 {
        margin: 0;
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--text-primary, #111827);
      }

      .confirmation-body {
        margin-bottom: 20px;
      }

      .confirmation-body p {
        margin: 0 0 12px 0;
        color: var(--text-secondary, #6b7280);
        font-size: 0.9375rem;
        line-height: 1.5;
      }

      .confirmation-checkbox {
        display: flex;
        align-items: center;
        gap: 10px;
        cursor: pointer;
        padding: 12px;
        background: var(--surface-secondary, #f9fafb);
        border-radius: var(--border-radius-sm, 6px);
        margin-top: 16px;
      }

      .confirmation-checkbox input[type="checkbox"] {
        width: 18px;
        height: 18px;
        cursor: pointer;
      }

      .confirmation-checkbox span {
        color: var(--text-primary, #111827);
        font-size: 0.875rem;
        font-weight: 500;
      }

      .confirmation-actions {
        display: flex;
        gap: 12px;
        justify-content: flex-end;
      }

      /* Data info */
      .data-info {
        background: var(--surface-secondary, #f9fafb);
        border-radius: var(--border-radius-md, 8px);
        padding: 16px;
        margin-bottom: 20px;
      }

      .info-row {
        display: flex;
        gap: 8px;
        margin-bottom: 8px;
      }

      .info-row:last-child {
        margin-bottom: 0;
      }

      .info-row .label {
        font-weight: 500;
        color: var(--text-secondary, #6b7280);
        min-width: 100px;
      }

      .info-row .value {
        color: var(--text-primary, #111827);
      }

      /* Export buttons */
      .export-buttons {
        display: flex;
        gap: 12px;
        margin-top: 20px;
      }

      /* Buttons */
      .btn {
        display: inline-flex;
        align-items: center;
        gap: 8px;
        padding: 10px 16px;
        border-radius: var(--border-radius-md, 6px);
        font-size: 0.875rem;
        font-weight: 500;
        cursor: pointer;
        transition: all 0.2s;
        border: none;
      }

      .btn-primary {
        background: var(--color-primary, #0d9488);
        color: white;
      }

      .btn-primary:hover {
        background: var(--color-primary-dark, #0f766e);
      }

      .btn-secondary {
        background: var(--surface-secondary, #f3f4f6);
        color: var(--text-primary, #111827);
        border: 1px solid var(--border-color, #d1d5db);
      }

      .btn-secondary:hover {
        background: var(--surface-hover, #e5e7eb);
      }

      .btn-text {
        background: transparent;
        color: var(--text-secondary, #6b7280);
        padding: 8px 12px;
      }

      .btn-text:hover {
        color: var(--text-primary, #111827);
        background: var(--surface-secondary, #f3f4f6);
      }

      .btn-danger {
        background: #dc2626;
        color: white;
        border: none;
      }

      .btn-danger:hover {
        background: #b91c1c;
      }

      .btn-danger:disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .btn-text.btn-danger {
        background: transparent;
        color: var(--color-danger, #dc2626);
      }

      .btn-text.btn-danger:hover {
        background: rgba(220, 38, 38, 0.1);
      }

      /* Loading state */
      .loading-state {
        display: flex;
        flex-direction: column;
        align-items: center;
        padding: 40px;
        gap: 16px;
        color: var(--text-secondary, #6b7280);
      }

      .spinner {
        width: 32px;
        height: 32px;
        border: 3px solid var(--border-color, #e5e7eb);
        border-top-color: var(--color-primary, #0d9488);
        border-radius: 50%;
        animation: spin 1s linear infinite;
      }

      @keyframes spin {
        to { transform: rotate(360deg); }
      }

      /* Empty state */
      .empty-state {
        padding: 40px;
        text-align: center;
        color: var(--text-tertiary, #9ca3af);
      }

      /* Import section */
      .import-section {
        text-align: center;
      }

      .import-section h3 {
        margin: 0 0 8px 0;
        color: var(--text-primary, #111827);
      }

      .import-instructions {
        color: var(--text-secondary, #6b7280);
        margin-bottom: 20px;
      }

      /* Validation results */
      .validation-success, .validation-error {
        margin-top: 20px;
        padding: 20px;
        border-radius: var(--border-radius-md, 8px);
        text-align: left;
      }

      .validation-success {
        background: rgba(5, 150, 105, 0.1);
        border: 1px solid var(--color-success, #059669);
      }

      .validation-error {
        background: rgba(220, 38, 38, 0.1);
        border: 1px solid var(--color-danger, #dc2626);
      }

      .success-header, .error-header {
        display: flex;
        align-items: center;
        gap: 8px;
        font-weight: 600;
        margin-bottom: 12px;
      }

      .success-header {
        color: var(--color-success, #059669);
      }

      .error-header {
        color: var(--color-danger, #dc2626);
      }

      .validation-summary p {
        margin: 4px 0;
        color: var(--text-primary, #111827);
      }

      .error-list, .warning-list {
        margin-top: 16px;
      }

      .error-list h4 {
        color: var(--color-danger, #dc2626);
        margin: 0 0 8px 0;
        font-size: 0.875rem;
      }

      .warning-list h4 {
        color: #d97706;
        margin: 0 0 8px 0;
        font-size: 0.875rem;
      }

      .error-list ul, .warning-list ul {
        margin: 0;
        padding-left: 20px;
      }

      .error-item, .warning-item {
        margin-bottom: 8px;
        font-size: 0.875rem;
      }

      .error-type, .warning-type {
        font-weight: 500;
        text-transform: capitalize;
      }

      .error-type {
        color: var(--color-danger, #dc2626);
      }

      .warning-type {
        color: #d97706;
      }

      .error-message, .warning-message {
        color: var(--text-secondary, #6b7280);
        margin-left: 4px;
      }

      .import-actions {
        display: flex;
        gap: 12px;
        margin-top: 16px;
      }

      /* Help section */
      .help-section {
        background: var(--surface-secondary, #f9fafb);
        border-radius: var(--border-radius-md, 8px);
        padding: 20px;
        margin-top: 20px;
        text-align: left;
      }

      .help-section h3 {
        margin: 0 0 16px 0;
        color: var(--text-primary, #111827);
      }

      .help-block {
        margin-bottom: 16px;
      }

      .help-block h4 {
        margin: 0 0 8px 0;
        color: var(--text-secondary, #6b7280);
        font-size: 0.875rem;
      }

      .help-block pre {
        background: var(--surface-primary, #fff);
        border: 1px solid var(--border-color, #e5e7eb);
        border-radius: var(--border-radius-sm, 4px);
        padding: 12px;
        font-size: 0.75rem;
        overflow-x: auto;
        color: var(--text-primary, #111827);
      }

      .help-block code {
        background: var(--surface-primary, #fff);
        border: 1px solid var(--border-color, #e5e7eb);
        border-radius: var(--border-radius-sm, 4px);
        padding: 2px 6px;
        font-size: 0.875rem;
      }

      .help-block .note {
        font-size: 0.75rem;
        color: var(--text-tertiary, #9ca3af);
        margin-top: 8px;
      }

      .help-block ul {
        margin: 0;
        padding-left: 20px;
        color: var(--text-secondary, #6b7280);
        font-size: 0.875rem;
      }

      .help-block li {
        margin-bottom: 4px;
      }

      /* AI Generation Section */
      .ai-generation-section {
        background: rgba(13, 148, 136, 0.05);
        border: 1px solid rgba(13, 148, 136, 0.2);
      }

      .prompt-container {
        margin-top: 16px;
      }

      .prompt-container details {
        background: var(--surface-primary, #fff);
        border: 1px solid var(--border-color, #e5e7eb);
        border-radius: var(--border-radius-sm, 6px);
        padding: 12px;
        margin-bottom: 12px;
      }

      .prompt-container summary {
        cursor: pointer;
        font-weight: 500;
        color: var(--text-secondary, #6b7280);
        font-size: 0.875rem;
        user-select: none;
        list-style: none;
        display: flex;
        align-items: center;
        gap: 6px;
      }

      .prompt-container summary::-webkit-details-marker {
        display: none;
      }

      .prompt-container summary::before {
        content: 'â¶';
        display: inline-block;
        width: 12px;
        transition: transform 0.2s;
        color: var(--color-primary, #0d9488);
      }

      .prompt-container details[open] summary::before {
        transform: rotate(90deg);
      }

      .prompt-template {
        margin: 12px 0 0 0;
        background: var(--surface-secondary, #f9fafb);
        border: 1px solid var(--border-color, #e5e7eb);
        border-radius: var(--border-radius-sm, 4px);
        padding: 12px;
        font-size: 0.75rem;
        line-height: 1.6;
        overflow-x: auto;
        color: var(--text-primary, #111827);
        white-space: pre-wrap;
        word-wrap: break-word;
      }

      .copy-prompt-btn {
        width: 100%;
        justify-content: center;
      }

      .copy-prompt-btn.copy-success {
        background: var(--color-success, #059669);
        color: white;
        border-color: var(--color-success, #059669);
      }

      .copy-prompt-btn.copy-success svg {
        stroke: white;
      }

      /* Dark theme */
      :host-context([data-theme="dark"]) .modal-container {
        background: var(--surface-primary);
        border: 1px solid var(--border-color);
      }

      :host-context([data-theme="dark"]) .modal-header,
      :host-context([data-theme="dark"]) .modal-footer {
        border-color: var(--border-color);
      }

      :host-context([data-theme="dark"]) .modal-header h2 {
        color: var(--text-primary);
      }

      :host-context([data-theme="dark"]) .mode-toggle {
        background: var(--surface-secondary);
      }

      :host-context([data-theme="dark"]) .mode-btn {
        color: var(--text-secondary);
      }

      :host-context([data-theme="dark"]) .mode-btn:hover {
        color: var(--text-primary);
      }

      :host-context([data-theme="dark"]) .mode-btn.active {
        background: var(--surface-primary);
        color: var(--text-primary);
      }

      :host-context([data-theme="dark"]) .symbol-selector select {
        background: var(--surface-secondary);
        border-color: var(--border-color);
        color: var(--text-primary);
      }

      :host-context([data-theme="dark"]) .data-info {
        background: var(--surface-secondary);
      }

      :host-context([data-theme="dark"]) .bulk-section {
        background: var(--surface-secondary);
      }

      :host-context([data-theme="dark"]) .reset-section {
        background: rgba(248, 113, 113, 0.1);
        border-color: rgba(248, 113, 113, 0.3);
      }

      :host-context([data-theme="dark"]) .confirmation-modal {
        background: var(--surface-primary);
        border: 1px solid var(--border-color);
      }

      :host-context([data-theme="dark"]) .confirmation-header h3 {
        color: var(--text-primary);
      }

      :host-context([data-theme="dark"]) .confirmation-header .warning-icon {
        color: #fbbf24;
      }

      :host-context([data-theme="dark"]) .confirmation-checkbox {
        background: var(--surface-secondary);
      }

      :host-context([data-theme="dark"]) .confirmation-checkbox span {
        color: var(--text-primary);
      }

      :host-context([data-theme="dark"]) .btn-secondary {
        background: var(--surface-secondary);
        border-color: var(--border-color);
        color: var(--text-primary);
      }

      :host-context([data-theme="dark"]) .btn-secondary:hover {
        background: var(--surface-hover);
      }

      :host-context([data-theme="dark"]) .help-section {
        background: var(--surface-secondary);
      }

      :host-context([data-theme="dark"]) .help-block pre {
        background: var(--surface-primary);
        border-color: var(--border-color);
        color: var(--text-primary);
      }

      :host-context([data-theme="dark"]) .help-block code {
        background: var(--surface-primary);
        border-color: var(--border-color);
      }

      :host-context([data-theme="dark"]) .ai-generation-section {
        background: rgba(13, 148, 136, 0.1);
        border-color: rgba(13, 148, 136, 0.3);
      }

      :host-context([data-theme="dark"]) .prompt-container details {
        background: var(--surface-secondary);
        border-color: var(--border-color);
      }

      :host-context([data-theme="dark"]) .prompt-container summary {
        color: var(--text-secondary);
      }

      :host-context([data-theme="dark"]) .prompt-template {
        background: var(--surface-primary);
        border-color: var(--border-color);
        color: var(--text-primary);
      }
    `}}customElements.define("historical-data-viewer",nv);const Fi=[{source:"fmp",name:"Financial Modeling Prep",description:"Free tier: 250 requests/day",signupUrl:"https://site.financialmodelingprep.com/developer/docs"},{source:"eodhd",name:"EOD Historical Data",description:"Free tier: 20 requests/day",signupUrl:"https://eodhistoricaldata.com/register"},{source:"alphavantage",name:"Alpha Vantage",description:"Free tier: 25 requests/day",signupUrl:"https://www.alphavantage.co/support/#api-key"},{source:"tiingo",name:"Tiingo",description:"Free tier: 500 symbols, 1000 requests/day",signupUrl:"https://api.tiingo.com/"}],sv=[{type:"none",name:"None",description:"Direct requests (localhost/same-origin only)"},{type:"allorigins",name:"AllOrigins",description:"Public proxy (may be slow)"},{type:"corsproxy",name:"CORS Proxy",description:"Alternative public proxy"},{type:"custom",name:"Custom",description:"Your own proxy URL"}];class ov extends Ct{_visible=!1;show(){this._visible=!0,this.loadCurrentSettings(),this.updateVisibility()}hide(){this._visible=!1,this.updateVisibility()}toggle(){this._visible?this.hide():this.show()}template(){const t=Fi.map(r=>`
      <div class="api-provider">
        <label>${r.name}</label>
        <p class="description">${r.description}</p>
        <div class="input-row">
          <input type="password"
                 id="api-${r.source}"
                 placeholder="Enter API key"
                 autocomplete="off" />
          <button class="btn-clear" data-source="${r.source}">Clear</button>
        </div>
        <a href="${r.signupUrl}" target="_blank" rel="noopener">Get API key</a>
      </div>
    `).join(""),e=sv.map(r=>`
      <label class="radio-option">
        <input type="radio" name="cors-proxy" value="${r.type}" />
        <span class="option-name">${r.name}</span>
        <span class="option-desc">${r.description}</span>
      </label>
    `).join("");return`
      <div class="settings-overlay" id="overlay">
        <div class="settings-modal">
          <header>
            <h2>Settings</h2>
            <button id="btn-close" aria-label="Close">&times;</button>
          </header>

          <section class="theme-section">
            <h3>Appearance</h3>
            <p class="section-info">Choose your preferred color theme.</p>
            <theme-toggle></theme-toggle>
          </section>

          <section class="api-keys-section">
            <h3>API Keys</h3>
            <p class="section-info">Configure API keys for fetching historical market data.
               At least one is needed for non-bundled assets.</p>
            ${t}
          </section>

          <section class="cors-section">
            <h3>CORS Proxy</h3>
            <p class="section-info">Required for fetching data from external APIs in browser.</p>
            <div class="cors-options">
              ${e}
            </div>
            <div class="custom-url-row" id="custom-url-row" style="display: none;">
              <label>Custom Proxy URL</label>
              <input type="text" id="cors-custom-url" placeholder="https://your-proxy.com/" />
            </div>
          </section>

          <section class="historical-data-section">
            <h3>Historical Data</h3>
            <p class="section-info">
              View, export, or import custom historical asset data used by the simulation.
            </p>
            <button class="btn btn-secondary" id="manage-data-btn">
              Manage Historical Data
            </button>
          </section>

          <historical-data-viewer></historical-data-viewer>

          <footer>
            <button id="btn-save" class="btn-primary">Save Settings</button>
          </footer>
        </div>
      </div>
    `}styles(){return`
      :host {
        display: block;
      }

      .settings-overlay {
        display: none;
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.5);
        z-index: 1000;
        justify-content: center;
        align-items: center;
        padding: var(--spacing-lg, 24px);
      }

      .settings-modal {
        background: var(--surface-primary, #ffffff);
        border-radius: var(--radius-lg, 8px);
        box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1),
                    0 10px 10px -5px rgba(0, 0, 0, 0.04);
        max-width: 500px;
        width: 100%;
        max-height: 90vh;
        overflow-y: auto;
      }

      header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: var(--spacing-md, 16px) var(--spacing-lg, 24px);
        border-bottom: 1px solid var(--border-color, #e2e8f0);
      }

      header h2 {
        margin: 0;
        font-size: var(--font-size-lg, 1.125rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      #btn-close {
        background: transparent;
        border: none;
        font-size: 1.5rem;
        cursor: pointer;
        color: var(--text-secondary, #475569);
        padding: var(--spacing-xs, 4px);
        line-height: 1;
        border-radius: var(--radius-sm, 4px);
      }

      #btn-close:hover {
        background: var(--surface-hover, rgba(0, 0, 0, 0.05));
      }

      section {
        padding: var(--spacing-lg, 24px);
        border-bottom: 1px solid var(--border-color, #e2e8f0);
      }

      section:last-of-type {
        border-bottom: none;
      }

      h3 {
        margin: 0 0 var(--spacing-xs, 4px) 0;
        font-size: var(--font-size-base, 1rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .section-info {
        margin: 0 0 var(--spacing-md, 16px) 0;
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #475569);
      }

      .api-provider {
        margin-bottom: var(--spacing-lg, 24px);
      }

      .api-provider:last-child {
        margin-bottom: 0;
      }

      .api-provider > label {
        display: block;
        font-weight: 500;
        color: var(--text-primary, #1e293b);
        margin-bottom: var(--spacing-xs, 4px);
      }

      .api-provider .description {
        margin: 0 0 var(--spacing-sm, 8px) 0;
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #475569);
      }

      .input-row {
        display: flex;
        gap: var(--spacing-sm, 8px);
        margin-bottom: var(--spacing-xs, 4px);
      }

      .input-row input {
        flex: 1;
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--radius-md, 6px);
        font-size: var(--font-size-sm, 0.875rem);
        background: var(--surface-primary, #ffffff);
        color: var(--text-primary, #1e293b);
      }

      .input-row input:focus {
        outline: none;
        border-color: var(--color-primary, #0d9488);
        box-shadow: 0 0 0 3px rgba(13, 148, 136, 0.1);
      }

      .btn-clear {
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--radius-md, 6px);
        background: var(--surface-primary, #ffffff);
        color: var(--text-secondary, #475569);
        cursor: pointer;
        font-size: var(--font-size-sm, 0.875rem);
      }

      .btn-clear:hover {
        background: var(--surface-hover, #f8fafc);
        border-color: var(--color-error, #ef4444);
        color: var(--color-error, #ef4444);
      }

      .api-provider a {
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--color-primary, #0d9488);
        text-decoration: none;
      }

      .api-provider a:hover {
        text-decoration: underline;
      }

      .cors-options {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-sm, 8px);
      }

      .radio-option {
        display: flex;
        align-items: flex-start;
        gap: var(--spacing-sm, 8px);
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--radius-md, 6px);
        cursor: pointer;
        transition: border-color 0.2s, background 0.2s;
      }

      .radio-option:hover {
        border-color: var(--color-primary, #0d9488);
        background: var(--surface-hover, rgba(13, 148, 136, 0.05));
      }

      .radio-option:has(input:checked) {
        border-color: var(--color-primary, #0d9488);
        background: rgba(13, 148, 136, 0.05);
      }

      .radio-option input[type="radio"] {
        margin-top: 2px;
        accent-color: var(--color-primary, #0d9488);
      }

      .option-name {
        font-weight: 500;
        color: var(--text-primary, #1e293b);
        display: block;
      }

      .option-desc {
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #475569);
        display: block;
      }

      .custom-url-row {
        margin-top: var(--spacing-md, 16px);
      }

      .custom-url-row label {
        display: block;
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 500;
        color: var(--text-primary, #1e293b);
        margin-bottom: var(--spacing-xs, 4px);
      }

      .custom-url-row input {
        width: 100%;
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--radius-md, 6px);
        font-size: var(--font-size-sm, 0.875rem);
        background: var(--surface-primary, #ffffff);
        color: var(--text-primary, #1e293b);
        box-sizing: border-box;
      }

      .custom-url-row input:focus {
        outline: none;
        border-color: var(--color-primary, #0d9488);
        box-shadow: 0 0 0 3px rgba(13, 148, 136, 0.1);
      }

      footer {
        padding: var(--spacing-md, 16px) var(--spacing-lg, 24px);
        display: flex;
        justify-content: flex-end;
      }

      .btn-primary {
        background: var(--color-primary, #0d9488);
        color: white;
        border: none;
        padding: var(--spacing-sm, 8px) var(--spacing-lg, 24px);
        border-radius: var(--radius-md, 6px);
        font-size: var(--font-size-base, 1rem);
        font-weight: 500;
        cursor: pointer;
        transition: background 0.2s;
      }

      .btn-primary:hover {
        background: var(--color-primary-dark, #0f766e);
      }

      .btn-primary:focus-visible {
        outline: 2px solid var(--color-primary, #0d9488);
        outline-offset: 2px;
      }

      /* Historical data section */
      .btn-secondary {
        background: var(--surface-primary, #ffffff);
        color: var(--text-primary, #1e293b);
        border: 1px solid var(--border-color, #e2e8f0);
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        border-radius: var(--radius-md, 6px);
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 500;
        cursor: pointer;
        transition: background 0.2s, border-color 0.2s;
      }

      .btn-secondary:hover {
        background: var(--surface-hover, #f8fafc);
        border-color: var(--color-primary, #0d9488);
      }

      .btn-secondary:focus-visible {
        outline: 2px solid var(--color-primary, #0d9488);
        outline-offset: 2px;
      }

      /* Toast styling */
      .toast {
        position: fixed;
        bottom: 20px;
        right: 20px;
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        border-radius: var(--radius-md, 6px);
        color: white;
        font-size: var(--font-size-sm, 0.875rem);
        z-index: 1001;
        animation: slideIn 0.3s ease-out;
      }

      .toast.success {
        background: var(--color-success, #10b981);
      }

      .toast.error {
        background: var(--color-error, #ef4444);
      }

      @keyframes slideIn {
        from {
          transform: translateY(20px);
          opacity: 0;
        }
        to {
          transform: translateY(0);
          opacity: 1;
        }
      }
    `}updateVisibility(){const t=this.$("#overlay");t&&(t.style.display=this._visible?"flex":"none")}async loadCurrentSettings(){const t=await kn();for(const n of Fi){const s=this.$(`#api-${n.source}`),o=t.apiKeys[n.source];s&&(o?(s.value="â¢â¢â¢â¢â¢â¢â¢â¢",s.dataset.hasKey="true"):(s.value="",s.dataset.hasKey="false"))}const e=this.$(`input[name="cors-proxy"][value="${t.corsProxyType}"]`);e&&(e.checked=!0);const r=this.$("#custom-url-row");r&&(r.style.display=t.corsProxyType==="custom"?"block":"none");const i=this.$("#cors-custom-url");i&&t.corsProxyUrl&&(i.value=t.corsProxyUrl)}afterRender(){this.$("#btn-close")?.addEventListener("click",()=>this.hide()),this.$("#overlay")?.addEventListener("click",t=>{t.target.id==="overlay"&&this.hide()}),this.shadow.querySelectorAll(".btn-clear").forEach(t=>{t.addEventListener("click",async e=>{const r=e.target.dataset.source;await qb(r);const i=this.$(`#api-${r}`);i&&(i.value="",i.dataset.hasKey="false"),this.showToast(`${r.toUpperCase()} API key cleared`,"success")})}),this.shadow.querySelectorAll('input[name="cors-proxy"]').forEach(t=>{t.addEventListener("change",()=>{const e=this.$("#custom-url-row"),r=this.$('input[name="cors-proxy"]:checked')?.value;e&&(e.style.display=r==="custom"?"block":"none")})}),this.$("#btn-save")?.addEventListener("click",async()=>{await this.saveSettings(),this.showToast("Settings saved","success"),this.hide()});for(const t of Fi){const e=this.$(`#api-${t.source}`);e?.addEventListener("focus",()=>{e.dataset.hasKey==="true"&&(e.value="")})}this.$("#manage-data-btn")?.addEventListener("click",()=>{this.$("historical-data-viewer")?.show()})}async saveSettings(){for(const r of Fi){const i=this.$(`#api-${r.source}`);i&&i.value&&i.value!=="â¢â¢â¢â¢â¢â¢â¢â¢"&&await Nb(r.source,i.value)}const t=this.$('input[name="cors-proxy"]:checked')?.value,e=this.$("#cors-custom-url")?.value;await Wb({type:t||"none",customUrl:t==="custom"?e:void 0})}showToast(t,e){const r=this.$(".toast");r&&r.remove();const i=document.createElement("div");i.className=`toast ${e}`,i.textContent=t,this.shadow.appendChild(i),setTimeout(()=>i.remove(),3e3)}}customElements.define("settings-panel",ov);class lv extends Ct{tooltipId=`tooltip-${Math.random().toString(36).substr(2,9)}`;hideTimeout=null;static get observedAttributes(){return["content","position"]}template(){const t=this.getAttribute("content")||"",e=this.getAttribute("position")||"top";return`
      <button class="help-trigger"
              aria-describedby="${this.tooltipId}"
              type="button"
              aria-label="Help">
        <svg width="14" height="14" viewBox="0 0 14 14" aria-hidden="true">
          <circle cx="7" cy="7" r="6" fill="none" stroke="currentColor" stroke-width="1.5"/>
          <text x="7" y="10" text-anchor="middle" font-size="9" fill="currentColor">?</text>
        </svg>
      </button>
      <div role="tooltip"
           id="${this.tooltipId}"
           class="tooltip-content ${e}"
           aria-hidden="true">
        ${t}
      </div>
    `}styles(){const t="#0d9488",e="#14b8a6";return`
      :host {
        display: inline-flex;
        position: relative;
        vertical-align: middle;
      }

      .help-trigger {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        width: 16px;
        height: 16px;
        padding: 0;
        border: none;
        background: transparent;
        color: var(--color-primary, #0d9488);
        cursor: help;
        transition: color 0.15s ease, transform 0.15s ease;
      }

      .help-trigger:hover {
        color: var(--color-primary-hover, #0f766e);
        transform: scale(1.1);
      }

      .help-trigger:focus-visible {
        outline: 2px solid var(--color-primary, #0d9488);
        outline-offset: 2px;
        border-radius: 50%;
      }

      .tooltip-content {
        position: fixed;
        min-width: 200px;
        max-width: 300px;
        padding: 12px 16px;
        background: ${t};
        color: #ffffff;
        font-size: 13px;
        font-weight: 450;
        line-height: 1.6;
        letter-spacing: 0.01em;
        border-radius: 8px;
        box-shadow: 0 4px 16px rgba(13, 148, 136, 0.3), 0 2px 4px rgba(0, 0, 0, 0.1);
        z-index: 10000;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.2s ease, visibility 0.2s ease;
        pointer-events: none;
        white-space: normal;
        overflow-wrap: break-word;
        word-wrap: break-word;
        text-align: left;
      }

      .tooltip-content.visible {
        opacity: 1;
        visibility: visible;
        pointer-events: auto;
      }

      /* Dynamic positioning - set via JavaScript */
      .tooltip-content {
        /* Position will be set dynamically */
      }

      /* Tooltip arrow - positioned dynamically via --arrow-left */
      .tooltip-content::before {
        content: '';
        position: absolute;
        width: 0;
        height: 0;
        border: 8px solid transparent;
        left: var(--arrow-left, 16px);
      }

      /* Arrow position for top/bottom placement */
      .tooltip-content.pos-top::before {
        top: 100%;
        border-top-color: ${t};
      }

      .tooltip-content.pos-bottom::before {
        bottom: 100%;
        border-bottom-color: ${t};
      }

      /* Dark theme - use :host-context to detect theme outside shadow DOM */
      :host-context([data-theme="dark"]) .tooltip-content {
        background: ${e};
        box-shadow: 0 4px 16px rgba(20, 184, 166, 0.4), 0 2px 4px rgba(0, 0, 0, 0.2);
      }

      :host-context([data-theme="dark"]) .tooltip-content.pos-top::before {
        border-top-color: ${e};
      }

      :host-context([data-theme="dark"]) .tooltip-content.pos-bottom::before {
        border-bottom-color: ${e};
      }
    `}afterRender(){const t=this.$(".help-trigger"),e=this.$(".tooltip-content");if(!t||!e)return;const r=12,i=10,n=()=>{const d=t.getBoundingClientRect(),h=e.getBoundingClientRect(),p=window.innerWidth,m=window.innerHeight;e.style.top="",e.style.bottom="",e.style.left="",e.style.right="",e.classList.remove("pos-top","pos-bottom");const v=m-d.bottom-i-r,g=d.top-i-r,k=p-d.right-r,S=h.height||80;v<S&&g>v?(e.style.bottom=`${m-d.top+i}px`,e.classList.add("pos-top")):(e.style.top=`${d.bottom+i}px`,e.classList.add("pos-bottom"));const M=h.width||280;if(k>=M)e.style.left=`${d.left}px`,e.style.setProperty("--arrow-left","16px");else{const I=Math.max(0,M-k+r);e.style.left=`${d.left-I}px`,e.style.setProperty("--arrow-left",`${I+8}px`)}},s=()=>{this.hideTimeout&&(clearTimeout(this.hideTimeout),this.hideTimeout=null),e.classList.add("visible"),e.setAttribute("aria-hidden","false"),requestAnimationFrame(()=>n())},o=()=>{e.classList.remove("visible"),e.setAttribute("aria-hidden","true")},l=()=>{this.hideTimeout=window.setTimeout(o,100)};t.addEventListener("mouseenter",s),t.addEventListener("focus",s),e.addEventListener("mouseenter",s),t.addEventListener("mouseleave",l),t.addEventListener("blur",o),e.addEventListener("mouseleave",o),t.addEventListener("keydown",d=>{d.key==="Escape"&&(o(),t.blur())})}disconnectedCallback(){this.hideTimeout&&clearTimeout(this.hideTimeout)}}customElements.define("help-tooltip",lv);class cv extends Ct{_isOpen=!1;_options={};_resolve=null;static get observedAttributes(){return["title","subtitle","confirm-text","cancel-text"]}template(){const t=this._options.title||this.getAttribute("title")||"",e=this._options.subtitle||this.getAttribute("subtitle")||"",r=this._options.confirmText||this.getAttribute("confirm-text")||"OK",i=this._options.cancelText||this.getAttribute("cancel-text")||"Cancel",n=this._options.alternateText||"",s=this._options.type==="prompt",o=this._options.type==="choice",l=this._options.defaultValue||"";return`
      <div class="modal-overlay ${this._isOpen?"open":""}" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div class="modal-card">
          ${t?`<h2 id="modal-title" class="modal-title">${t}</h2>`:""}
          ${e?`<p class="modal-subtitle">${e}</p>`:""}
          ${s?`
            <input type="text"
                   class="modal-input"
                   value="${this.escapeHtml(l)}"
                   aria-label="${t||"Input"}" />
          `:""}
          <div class="modal-buttons ${o?"three-buttons":""}">
            <button type="button" class="modal-btn cancel-btn">${i}</button>
            ${o&&n?`<button type="button" class="modal-btn alternate-btn">${n}</button>`:""}
            <button type="button" class="modal-btn confirm-btn">${r}</button>
          </div>
        </div>
      </div>
    `}styles(){return`
      :host {
        display: contents;
      }

      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: var(--modal-backdrop, rgba(0, 0, 0, 0.3));
        backdrop-filter: blur(var(--modal-backdrop-blur, 4px));
        -webkit-backdrop-filter: blur(var(--modal-backdrop-blur, 4px));
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.15s ease, visibility 0.15s ease;
      }

      .modal-overlay.open {
        opacity: 1;
        visibility: visible;
      }

      .modal-card {
        background: var(--surface-primary, #ffffff);
        border-radius: var(--border-radius-lg, 12px);
        padding: var(--spacing-lg, 24px);
        max-width: var(--modal-max-width, 360px);
        width: 90%;
        box-shadow: var(--modal-shadow, 0 10px 25px rgba(0, 0, 0, 0.15));
        transform: scale(0.95);
        transition: transform 0.15s ease;
      }

      .modal-overlay.open .modal-card {
        transform: scale(1);
      }

      .modal-title {
        margin: 0 0 var(--spacing-sm, 8px) 0;
        font-size: 1.125rem;
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .modal-subtitle {
        margin: 0 0 var(--spacing-md, 16px) 0;
        font-size: 0.875rem;
        color: var(--text-secondary, #64748b);
        line-height: 1.5;
      }

      .modal-input {
        width: 100%;
        padding: var(--spacing-sm, 8px);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--border-radius-sm, 6px);
        font-size: 0.875rem;
        color: var(--text-primary, #1e293b);
        background: var(--surface-primary, #ffffff);
        box-sizing: border-box;
        margin-bottom: var(--spacing-md, 16px);
      }

      .modal-input:focus {
        outline: none;
        border-color: var(--color-primary, #0d9488);
        box-shadow: 0 0 0 2px rgba(13, 148, 136, 0.15);
      }

      .modal-buttons {
        display: flex;
        gap: var(--spacing-sm, 8px);
        justify-content: flex-end;
        margin-top: var(--spacing-md, 20px);
      }

      .modal-btn {
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        border-radius: var(--border-radius-sm, 6px);
        font-size: 0.875rem;
        font-weight: 500;
        cursor: pointer;
        transition: background-color 0.15s ease, border-color 0.15s ease;
      }

      .cancel-btn {
        background: var(--surface-primary, #ffffff);
        border: 1px solid var(--border-color, #e2e8f0);
        color: var(--text-primary, #1e293b);
      }

      .cancel-btn:hover {
        background: var(--surface-secondary, #f8fafc);
        border-color: var(--text-secondary, #64748b);
      }

      .confirm-btn {
        background: var(--color-primary, #0d9488);
        border: 1px solid var(--color-primary, #0d9488);
        color: var(--text-inverse, #ffffff);
      }

      .confirm-btn:hover {
        background: var(--color-primary-hover, #0f766e);
        border-color: var(--color-primary-hover, #0f766e);
      }

      .alternate-btn {
        background: var(--color-success, #059669);
        border: 1px solid var(--color-success, #059669);
        color: var(--text-inverse, #ffffff);
      }

      .alternate-btn:hover {
        background: var(--color-success-hover, #047857);
        border-color: var(--color-success-hover, #047857);
      }

      .modal-buttons.three-buttons {
        flex-wrap: wrap;
        gap: var(--spacing-sm, 8px);
      }

      .modal-buttons.three-buttons .cancel-btn {
        order: 1;
      }

      .modal-buttons.three-buttons .alternate-btn {
        order: 2;
      }

      .modal-buttons.three-buttons .confirm-btn {
        order: 3;
      }
    `}afterRender(){const t=this.$(".modal-overlay"),e=this.$(".cancel-btn"),r=this.$(".confirm-btn"),i=this.$(".alternate-btn"),n=this.$(".modal-input");t?.addEventListener("click",s=>{s.target===t&&this.cancel()}),e?.addEventListener("click",()=>{this.cancel()}),r?.addEventListener("click",()=>{this.confirm()}),i?.addEventListener("click",()=>{this.alternate()}),n&&n.addEventListener("keydown",s=>{s.key==="Enter"?(s.preventDefault(),this.confirm()):s.key==="Escape"&&(s.preventDefault(),this.cancel())}),this._isOpen&&(this.handleEscape=this.handleEscape.bind(this),document.addEventListener("keydown",this.handleEscape)),this._isOpen&&n&&requestAnimationFrame(()=>{n.focus(),n.select()})}handleEscape(t){t.key==="Escape"&&this._isOpen&&(t.preventDefault(),this.cancel())}show(t={}){return new Promise(e=>{this._options=t,this._resolve=e,this._isOpen=!0,this.render()})}hide(){this._isOpen=!1,document.removeEventListener("keydown",this.handleEscape),this.render()}cancel(){let t;this._options.type==="choice"?t="cancel":this._options.type==="confirm"?t=!1:t=null,this.hide(),this._resolve?.(t),this._resolve=null}confirm(){let t;this._options.type==="prompt"?t=this.$(".modal-input")?.value||"":this._options.type==="choice"?t="confirm":t=!0,this.hide(),this._resolve?.(t),this._resolve=null}alternate(){this.hide(),this._resolve?.("alternate"),this._resolve=null}escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}}customElements.define("modal-dialog",cv);class dv extends Ct{_portfolios=[];async connectedCallback(){super.connectedCallback(),await this.refresh()}async refresh(){this._portfolios=await sa(),this.renderList()}template(){return`
      <div class="portfolio-list" id="list">
        <p class="empty-message">No saved portfolios</p>
      </div>
    `}styles(){return`
      :host {
        display: block;
      }

      .portfolio-list {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-sm, 8px);
      }

      .empty-message {
        color: var(--text-tertiary, #94a3b8);
        font-size: var(--font-size-sm, 0.875rem);
        text-align: center;
        padding: var(--spacing-md, 16px);
        margin: 0;
      }

      .portfolio-item {
        display: flex;
        align-items: center;
        justify-content: space-between;
        gap: var(--spacing-md, 16px);
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        background: var(--surface-secondary, #f8fafc);
        border-radius: var(--radius-md, 6px);
        transition: background 0.2s;
      }

      .portfolio-item:hover {
        background: var(--surface-tertiary, #f1f5f9);
      }

      .portfolio-info {
        display: flex;
        flex-direction: column;
        gap: 2px;
        min-width: 0;
        flex: 1;
      }

      .portfolio-name {
        font-weight: 500;
        color: var(--text-primary, #1e293b);
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .portfolio-meta {
        font-size: var(--font-size-xs, 0.75rem);
        color: var(--text-tertiary, #94a3b8);
      }

      .portfolio-actions {
        display: flex;
        gap: var(--spacing-xs, 4px);
        flex-shrink: 0;
      }

      .btn-load,
      .btn-delete {
        padding: var(--spacing-xs, 4px) var(--spacing-sm, 8px);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--radius-sm, 4px);
        font-size: var(--font-size-xs, 0.75rem);
        font-family: inherit;
        cursor: pointer;
        transition: background 0.2s, border-color 0.2s;
        background: var(--surface-primary, #ffffff);
        color: var(--text-primary, #1e293b);
      }

      .btn-load:hover {
        background: var(--color-primary, #0d9488);
        color: var(--text-inverse, #ffffff);
        border-color: var(--color-primary, #0d9488);
      }

      .btn-delete {
        color: var(--color-error, #dc2626);
        border-color: var(--color-error-light, #fecaca);
      }

      .btn-delete:hover {
        background: var(--color-error, #dc2626);
        color: var(--text-inverse, #ffffff);
        border-color: var(--color-error, #dc2626);
      }

      .btn-load:focus-visible,
      .btn-delete:focus-visible {
        outline: 2px solid var(--color-primary, #0d9488);
        outline-offset: 2px;
      }
    `}afterRender(){this.$("#list")?.addEventListener("click",async e=>{const r=e.target,i=parseInt(r.dataset.id||"",10);r.classList.contains("btn-load")&&!isNaN(i)&&this.dispatchEvent(new CustomEvent("load-portfolio",{detail:{id:i},bubbles:!0,composed:!0})),r.classList.contains("btn-delete")&&!isNaN(i)&&confirm("Delete this portfolio?")&&(await Hc(i),await this.refresh())})}renderList(){const t=this.$("#list");if(t){if(this._portfolios.length===0){t.innerHTML='<p class="empty-message">No saved portfolios</p>';return}t.innerHTML=this._portfolios.map(e=>`
      <div class="portfolio-item" data-id="${e.id}">
        <div class="portfolio-info">
          <span class="portfolio-name">${this.escapeHtml(e.name)}</span>
          <span class="portfolio-meta">${e.assets.length} assets Â· ${this.formatDate(e.modified)}</span>
        </div>
        <div class="portfolio-actions">
          <button class="btn-load" data-id="${e.id}">Load</button>
          <button class="btn-delete" data-id="${e.id}">Delete</button>
        </div>
      </div>
    `).join("")}}escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}formatDate(t){try{const e=new Date(t),i=new Date().getTime()-e.getTime(),n=Math.floor(i/(1e3*60*60*24));return n===0?"Today":n===1?"Yesterday":n<7?`${n} days ago`:e.toLocaleDateString()}catch{return"Unknown"}}}customElements.define("portfolio-list",dv);class uv extends Ct{_currentPortfolioId;get currentPortfolioId(){return this._currentPortfolioId}template(){return`
      <div class="portfolio-manager">
        <section class="save-section">
          <h4>Save Current Portfolio</h4>
          <div class="save-form">
            <input type="text" id="portfolio-name" placeholder="Portfolio name" />
            <button id="btn-save" class="btn-primary">Save</button>
          </div>
        </section>

        <section class="list-section">
          <h4>Saved Portfolios</h4>
          <portfolio-list id="portfolio-list"></portfolio-list>
        </section>

        <section class="import-export-section">
          <h4>Import / Export</h4>
          <div class="ie-buttons">
            <button id="btn-export">Export All</button>
            <button id="btn-import">Import</button>
            <input type="file" id="import-file" accept=".json" hidden />
          </div>
        </section>
      </div>
    `}styles(){return`
      :host {
        display: block;
      }

      .portfolio-manager {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-lg, 24px);
      }

      section {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-sm, 8px);
      }

      h4 {
        margin: 0;
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 600;
        color: var(--text-secondary, #475569);
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      .save-form {
        display: flex;
        gap: var(--spacing-sm, 8px);
      }

      .save-form input {
        flex: 1;
        min-width: 0;
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--radius-md, 6px);
        font-size: var(--font-size-sm, 0.875rem);
        font-family: inherit;
        background: var(--surface-primary, #ffffff);
        color: var(--text-primary, #1e293b);
        transition: border-color 0.2s, box-shadow 0.2s;
      }

      .save-form input:focus {
        outline: none;
        border-color: var(--color-primary, #0d9488);
        box-shadow: 0 0 0 3px rgba(13, 148, 136, 0.1);
      }

      .save-form input::placeholder {
        color: var(--text-tertiary, #94a3b8);
      }

      .btn-primary {
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        background: var(--color-primary, #0d9488);
        color: var(--text-inverse, #ffffff);
        border: none;
        border-radius: var(--radius-md, 6px);
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 500;
        font-family: inherit;
        cursor: pointer;
        transition: background 0.2s;
        white-space: nowrap;
      }

      .btn-primary:hover {
        background: var(--color-primary-dark, #0f766e);
      }

      .btn-primary:focus-visible {
        outline: 2px solid var(--color-primary, #0d9488);
        outline-offset: 2px;
      }

      .ie-buttons {
        display: flex;
        gap: var(--spacing-sm, 8px);
      }

      .ie-buttons button {
        flex: 1;
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        background: var(--surface-secondary, #f8fafc);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--radius-md, 6px);
        font-size: var(--font-size-sm, 0.875rem);
        font-family: inherit;
        cursor: pointer;
        transition: background 0.2s, border-color 0.2s;
        color: var(--text-primary, #1e293b);
      }

      .ie-buttons button:hover {
        background: var(--surface-tertiary, #f1f5f9);
        border-color: var(--color-primary, #0d9488);
      }

      .ie-buttons button:focus-visible {
        outline: 2px solid var(--color-primary, #0d9488);
        outline-offset: 2px;
      }

      #btn-export {
        background: var(--color-success-light, #dcfce7);
        border-color: var(--color-success, #22c55e);
        color: var(--color-success-dark, #166534);
      }

      #btn-export:hover {
        background: var(--color-success, #22c55e);
        color: var(--text-inverse, #ffffff);
      }
    `}afterRender(){const t=this.$("#btn-save"),e=this.$("#portfolio-name"),r=this.$("#btn-export"),i=this.$("#btn-import"),n=this.$("#import-file"),s=this.$("#portfolio-list");t?.addEventListener("click",async()=>{const o=e?.value.trim();if(!o){this.showToast("Please enter a portfolio name","error");return}await this.saveCurrentPortfolio(o),e.value="",await s?.refresh(),this.showToast("Portfolio saved","success")}),r?.addEventListener("click",async()=>{const o=await sa();if(o.length===0){this.showToast("No portfolios to export","warning");return}qc(o),this.showToast(`Exported ${o.length} portfolios`,"success")}),i?.addEventListener("click",()=>{n?.click()}),n?.addEventListener("change",async()=>{const o=n.files?.[0];if(o){try{const l=await Wc(o);await np(l),await s?.refresh(),this.showToast(`Imported ${l.length} portfolios`,"success")}catch(l){this.showToast(l.message,"error")}n.value=""}}),this.addEventListener("load-portfolio",async o=>{const{id:l}=o.detail,d=await Zh(l);d&&(this._currentPortfolioId=l,this.dispatchEvent(new CustomEvent("portfolio-loaded",{detail:{portfolio:d},bubbles:!0,composed:!0})))})}async saveCurrentPortfolio(t){const e=new CustomEvent("request-portfolio-state",{bubbles:!0,composed:!0,detail:{}});this.dispatchEvent(e);const r=e.detail.assets;if(!r||r.length===0){this.showToast("No assets to save","warning");return}const i={name:t,assets:r,created:new Date().toISOString(),modified:new Date().toISOString(),version:1};this._currentPortfolioId?await Zi({...i,id:this._currentPortfolioId}):this._currentPortfolioId=await Zi(i)}showToast(t,e="success"){document.querySelector("toast-container")?.show(t,e)}async refresh(){await this.$("#portfolio-list")?.refresh()}clearCurrentPortfolio(){this._currentPortfolioId=void 0}}customElements.define("portfolio-manager",uv);function Za(a,t){const e=Math.pow(10,t);return Math.round(a*e)/e}function la(a){if(a.length===0)return 0;let t=0,e=0;for(let r=0;r<a.length;r++){const i=a[r]-e,n=t+i;e=n-t-i,t=n}return t}const Cn=6;function hv(a){return a.length===0?0:Za(la(a)/a.length,Cn)}function pv(a,t=!1){const e=a.length;if(e===0||!t&&e<2)return 0;const r=la(a)/e,i=[];for(let o=0;o<e;o++){const l=a[o]-r;i.push(l*l)}const n=la(i),s=t?e:e-1;return Za(n/s,Cn)}function ln(a,t=!1){return Za(Math.sqrt(pv(a,t)),Cn)}function ee(a,t){const e=a.length;if(e===0)return 0;if(e===1)return a[0];const r=[...a].sort((h,p)=>h-p),n=Math.max(0,Math.min(100,t))/100*(e-1),s=Math.floor(n),o=Math.ceil(n);if(s===o)return r[s];const l=n-s,d=r[s]+l*(r[o]-r[s]);return Za(d,Cn)}const fv=6;function gv(a,t){const e=a.length;if(e!==t.length||e<2)return NaN;const r=la(a)/e,i=la(t)/e,n=ln(a),s=ln(t);if(n===0||s===0)return NaN;const o=[];for(let p=0;p<e;p++)o.push((a[p]-r)*(t[p]-i));const d=la(o)/((e-1)*n*s),h=Math.max(-1,Math.min(1,d));return Za(h,fv)}function mv(a){const t=a.length;if(t===0)return[];const e=Array(t).fill(null).map(()=>Array(t).fill(0));for(let r=0;r<t;r++){e[r][r]=1;for(let i=r+1;i<t;i++){const n=gv(a[r],a[i]);e[r][i]=n,e[i][r]=n}}return e}function bv(a,t,e){if(e<=0)return NaN;if(a<=0)return NaN;if(t<=0)return-1;const r=t/a;return Math.pow(r,1/e)-1}function vv(a){if(a.length===0||a.length===1)return 0;const t=a instanceof Float64Array?Array.from(a):a;return ln(t)}function xv(a,t,e){return(a instanceof Float64Array?Array.from(a):a).map(i=>{const n=(i-t)/t;return 1+n<=0?-1:Math.pow(1+n,1/e)-1})}function yv(a,t){return a<=0?NaN:(t-a)/a}function wv(a){if(a.length===0)return 0;let t=1;for(const e of a)t*=1+e;return t-1}function kv(a,t){return t<=0?NaN:a<=-1?-1:Math.pow(1+a,1/t)-1}function Cv(a){if(a.length===0)return{twrr:0,periodReturns:[],cumulativeReturn:0};if(a.length===1)return{twrr:0,periodReturns:[],cumulativeReturn:0};const t=[...a].sort((n,s)=>n.year-s.year),e=[];for(let n=1;n<t.length;n++){const s=t[n-1].p50,o=t[n].p50,l=yv(s,o);if(isNaN(l))break;e.push(l)}if(e.length===0)return{twrr:0,periodReturns:[],cumulativeReturn:0};const r=wv(e),i=kv(r,e.length);return{twrr:isNaN(i)?0:i,periodReturns:e,cumulativeReturn:r}}function bc(a,t){if(a<=0)return{annualWithdrawal:0,salaryEquivalent:0,effectiveTaxRate:t,taxSavings:0};if(t<=0)return{annualWithdrawal:a,salaryEquivalent:a,effectiveTaxRate:0,taxSavings:0};if(t>=1)return{annualWithdrawal:a,salaryEquivalent:1/0,effectiveTaxRate:t,taxSavings:1/0};const e=a/(1-t),r=e-a;return{annualWithdrawal:a,salaryEquivalent:e,effectiveTaxRate:t,taxSavings:r}}const Vi={costBasisRatio:.4,dividendYield:.02,dividendTaxRate:.238,capitalGainsRate:.238};function Ra(a,t){const{initialValue:e,annualWithdrawal:r,withdrawalGrowth:i,timeHorizon:n,capitalGainsRate:s=Vi.capitalGainsRate,costBasisRatio:o=Vi.costBasisRatio}=a,l=a.dividendYield??Vi.dividendYield,d=a.dividendTaxRate??Vi.dividendTaxRate;Ev(t);const h=Sv(e,r,i,n,s,o,t,l,d),m=h.filter(Y=>Y.terminalValue>e).length/h.length*100,g=h.filter(Y=>Y.depleted).length/h.length*100,k=h.map(Y=>Y.terminalValue),S=ee(k,10),D=ee(k,50),M=ee(k,90),I=h.map(Y=>Y.totalTaxes),W=ee(I,50),H=h.map(Y=>Y.totalDividendTaxes),X=ee(H,50),q=g>0?`Portfolio Depletion (${g.toFixed(1)}%)`:"Low (0% depletion)",w=Pv(h),C=Rv(h,n),L=zv(h,n);return{terminalNetWorth:D,successRate:m,lifetimeTaxes:W,lifetimeDividendTaxes:X,totalLifetimeTaxes:W+X,primaryRisk:q,terminalP10:S,terminalP90:M,yearlyValues:w,depletionProbability:g,yearlyPercentiles:C,cumulativeTaxes:L}}function Sv(a,t,e,r,i,n,s,o,l){const d=[],h=["p10","p25","p50","p75","p90"];for(const m of h){const v=Av(a,t,e,r,i,n,s,m,o,l);d.push(v)}const p=Mv(a,t,e,r,i,n,s,o,l);return d.push(...p),d}function Av(a,t,e,r,i,n,s,o,l,d){let h=a,p=a*n,m=t,v=0,g=0,k=!1;const S=[a];for(let D=1;D<=r;D++){if(h<=0){k=!0,S.push(0);continue}if(l>0){const K=h*l*d;if(g+=K,h-=K,h<=0){k=!0,S.push(0);continue}}const M=m;if(m*=1+e,M>=h){v+=Xd(h,h*(p/h),i),h=0,k=!0,S.push(0);continue}const I=M,W=p*(I/h),H=I-W,X=H>0?H*i:0;v+=X;const q=I+X;if(q>=h){h=0,k=!0,S.push(0);continue}const w=q/h;h-=q,p*=1-w;const C=s[D],L=s[D-1];if(!C||!L)h*=1.07;else{const Y=L[o],K=C[o],tt=Y>0?(K-Y)/Y:0;h*=1+tt}S.push(h)}return{terminalValue:h,totalTaxes:v,totalDividendTaxes:g,depleted:k,yearlyValues:S}}function Mv(a,t,e,r,i,n,s,o,l){const d=[],h=[{lower:"p10",upper:"p25",weight:.5},{lower:"p25",upper:"p50",weight:.5},{lower:"p50",upper:"p75",weight:.5},{lower:"p75",upper:"p90",weight:.5}];for(const p of h){const m=Dv(a,t,e,r,i,n,s,p.lower,p.upper,p.weight,o,l);d.push(m)}return d}function Dv(a,t,e,r,i,n,s,o,l,d,h,p){let m=a,v=a*n,g=t,k=0,S=0,D=!1;const M=[a];for(let I=1;I<=r;I++){if(m<=0){D=!0,M.push(0);continue}if(h>0){const ht=m*h*p;if(S+=ht,m-=ht,m<=0){D=!0,M.push(0);continue}}const W=g;if(g*=1+e,W>=m){k+=Xd(m,m*(v/m),i),m=0,D=!0,M.push(0);continue}const H=W,X=v*(H/m),q=H-X,w=q>0?q*i:0;k+=w;const C=H+w;if(C>=m){m=0,D=!0,M.push(0);continue}const L=C/m;m-=C,v*=1-L;const Y=s[I],K=s[I-1];if(!Y||!K)m*=1.07;else{const tt=K[o],ht=Y[o],pt=K[l],lt=Y[l],G=tt+(pt-tt)*d,Z=ht+(lt-ht)*d,J=G>0?(Z-G)/G:0;m*=1+J}M.push(m)}return{terminalValue:m,totalTaxes:k,totalDividendTaxes:S,depleted:D,yearlyValues:M}}function Xd(a,t,e){const r=a-t;return r>0?r*e:0}function Ev(a){const t=[];for(let e=1;e<a.length;e++){const r=a[e-1].p50,i=a[e].p50,n=r>0?(i-r)/r:0;t.push(n)}return t}function Pv(a){if(a.length===0)return[];const t=Math.max(...a.map(r=>r.yearlyValues.length)),e=[];for(let r=0;r<t;r++){const i=a.map(n=>n.yearlyValues[r]).filter(n=>n!==void 0);e.push(ee(i,50))}return e}function Rv(a,t){if(a.length===0)return[];const e=[];for(let r=0;r<=t;r++){const i=a.map(n=>n.yearlyValues[r]).filter(n=>n!==void 0&&!isNaN(n));i.length===0?e.push({year:r,p10:0,p25:0,p50:0,p75:0,p90:0}):e.push({year:r,p10:ee(i,10),p25:ee(i,25),p50:ee(i,50),p75:ee(i,75),p90:ee(i,90)})}return e}function zv(a,t){if(a.length===0)return[];const e=a.map(n=>n.totalTaxes+n.totalDividendTaxes),r=ee(e,50),i=[];for(let n=0;n<=t;n++)if(n===0)i.push(0);else{const s=n/t,o=Math.pow(s,1.2);i.push(r*o)}return i}const Tv=[0,.025,.05,.075,.1,.125],Kd=[1,3,5,10,15],Lv=.025;function Ov(a,t,e,r=Tv,i=Kd){const n=Array.isArray(a)?a:Array.from(a),s=n.length;if(s===0||t<=0)return{thresholds:r,timeHorizons:i,probabilities:r.map(()=>i.map(()=>0))};const o=i.filter(h=>h<=e),l=n.map(h=>h<=0?-1:Math.pow(h/t,1/e)-1),d=r.map(h=>o.map(p=>l.filter(v=>v>=h).length/s*100));return{thresholds:r,timeHorizons:o,probabilities:d}}function Bv(a,t,e,r=Kd){const i=Array.isArray(a)?a:Array.from(a),n=i.length,s=["10th","25th","50th","75th","90th"],o=[10,25,50,75,90];if(n===0||t<=0)return{percentiles:s,timeHorizons:r,values:s.map(()=>r.map(()=>0))};const l=[...i].sort((m,v)=>m-v),d=m=>{const v=Math.floor(m/100*(n-1));return l[v]},h=r.filter(m=>m<=e),p=o.map(m=>{const v=d(m),g=v>0?Math.pow(v/t,1/e)-1:-1;return h.map(k=>{if(k>=e)return g;const S=Math.sqrt(e/k),D=d(50),M=D>0?Math.pow(D/t,1/e)-1:0,W=(g-M)*S;return M+W})});return{percentiles:s,timeHorizons:h,values:p}}function Iv(a,t,e,r=Lv){const i=Array.isArray(a)?a:Array.from(a);i.length;const n=(M,I)=>{if(M.length===0)return 0;const W=Math.floor(I/100*(M.length-1));return M[W]},s=i.map(M=>M<=0||t<=0?-1:Math.pow(M/t,1/e)-1),o=[...s].sort((M,I)=>M-I),l=Math.pow(1+r,e),h=[...i.map(M=>{if(M<=0||t<=0)return-1;const I=M/l;return Math.pow(I/t,1/e)-1})].sort((M,I)=>M-I),p=[...i].sort((M,I)=>M-I),v=[...i.map(M=>M/l)].sort((M,I)=>M-I),k=[...i.map(M=>M<=0||t<=0?-1:(M-t)/t/e)].sort((M,I)=>M-I),D=[...s.map((M,I)=>{const W=n(o,50);return Math.abs(M-W)*Math.sqrt(e)})].sort((M,I)=>M-I);return{twrrNominal:{label:"Time Weighted Rate of Return (nominal)",p10:n(o,10),p25:n(o,25),p50:n(o,50),p75:n(o,75),p90:n(o,90),format:"percent"},twrrReal:{label:"Time Weighted Rate of Return (real)",p10:n(h,10),p25:n(h,25),p50:n(h,50),p75:n(h,75),p90:n(h,90),format:"percent"},portfolioNominal:{label:"Portfolio End Balance (nominal)",p10:n(p,10),p25:n(p,25),p50:n(p,50),p75:n(p,75),p90:n(p,90),format:"currency"},portfolioReal:{label:"Portfolio End Balance (real)",p10:n(v,10),p25:n(v,25),p50:n(v,50),p75:n(v,75),p90:n(v,90),format:"currency"},meanReturn:{label:"Annual Mean Return (nominal)",p10:n(k,10),p25:n(k,25),p50:n(k,50),p75:n(k,75),p90:n(k,90),format:"percent"},volatility:{label:"Annualized Volatility",p10:n(D,10),p25:n(D,25),p50:n(D,50),p75:n(D,75),p90:n(D,90),format:"percent"}}}function vc(a,t,e){const r=[],i=[];let n=a,s=0;for(let o=0;o<e;o++)o>0&&(n=n*(1+t)),r.push(n),s+=n,i.push(s);return{annual:r,cumulative:i}}class Fv extends Ct{_data=null;set data(t){this._data=t,this.updateTable()}get data(){return this._data}template(){return`
      <div class="table-container">
        <div class="table-header">
          <span class="table-icon">&#x1F4CA;</span>
          <h3>Year-by-Year Percentile Analysis</h3>
        </div>
        <div class="scroll-container">
          <div class="scroll-indicator-left" aria-hidden="true"></div>
          <div class="table-wrapper">
            <table class="analysis-table" id="analysis-table">
              <thead>
                <tr>
                  <th rowspan="2" class="sticky-col">Year</th>
                  <th colspan="2" class="withdrawal-header">Withdrawals</th>
                  <th colspan="5" class="percentile-header">Net Worth by Percentile</th>
                </tr>
                <tr>
                  <th>Annual</th>
                  <th id="cumulative-header">Cumulative</th>
                  <th class="p10">10th %ile</th>
                  <th class="p25">25th %ile</th>
                  <th class="p50">50th %ile</th>
                  <th class="p75">75th %ile</th>
                  <th class="p90">90th %ile</th>
                </tr>
              </thead>
              <tbody id="table-body">
                \x3C!-- Rows inserted dynamically -->
              </tbody>
            </table>
          </div>
          <div class="scroll-indicator-right" aria-hidden="true"></div>
        </div>
      </div>
    `}styles(){return`
      :host {
        display: block;
        max-width: 100%;
      }

      /* Shadow DOM reset - global box-sizing doesn't penetrate */
      *, *::before, *::after {
        box-sizing: border-box;
      }

      .table-container {
        background: var(--surface-primary, #ffffff);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--radius-lg, 8px);
        overflow: hidden;
        transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
      }

      .table-container:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-hover, 0 8px 32px rgba(26, 36, 36, 0.12));
        border-color: var(--color-primary, #0d9488);
      }

      .table-header {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
        padding: var(--spacing-lg, 24px);
        border-bottom: 1px solid var(--border-color, #e2e8f0);
        background: var(--surface-secondary, #f8fafc);
      }

      .table-icon {
        font-size: 1.25rem;
        line-height: 1;
      }

      .table-header h3 {
        margin: 0;
        font-size: var(--font-size-lg, 1.125rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .scroll-container {
        position: relative;
      }

      .scroll-indicator-left,
      .scroll-indicator-right {
        display: none;  /* Hidden by default */
      }

      .table-wrapper {
        overflow-x: auto;
      }

      .analysis-table {
        width: 100%;
        border-collapse: collapse;
        font-size: var(--font-size-sm, 0.875rem);
        min-width: 800px;
      }

      .analysis-table thead {
        position: sticky;
        top: 0;
        z-index: 10;
        background: var(--surface-secondary, #f8fafc);
      }

      .analysis-table th {
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        text-align: right;
        font-weight: 600;
        color: var(--text-secondary, #475569);
        border-bottom: 2px solid var(--border-color, #e2e8f0);
        white-space: nowrap;
      }

      .analysis-table th:first-child {
        text-align: left;
      }

      .analysis-table th.withdrawal-header {
        background: var(--surface-secondary, #f8fafc);
        color: var(--text-secondary, #475569);
        text-align: center;
      }

      .analysis-table th.percentile-header {
        background: rgba(13, 148, 136, 0.1);
        color: var(--color-primary, #0d9488);
        text-align: center;
      }

      .analysis-table th.p10 {
        color: #dc2626;
      }

      .analysis-table th.p25 {
        color: #ea580c;
      }

      .analysis-table th.p50 {
        color: var(--color-primary, #0d9488);
        background: rgba(13, 148, 136, 0.15);
      }

      .analysis-table th.p75 {
        color: #16a34a;
      }

      .analysis-table th.p90 {
        color: #15803d;
      }

      .sticky-col {
        position: sticky;
        left: 0;
        background: var(--surface-secondary, #f8fafc);
        z-index: 5;
      }

      .analysis-table tbody tr {
        transition: background-color 0.15s ease;
      }

      .analysis-table tbody tr:nth-child(odd) {
        background: var(--surface-primary, #ffffff);
      }

      .analysis-table tbody tr:nth-child(even) {
        background: var(--surface-secondary, #f8fafc);
      }

      .analysis-table tbody tr:hover {
        background: rgba(13, 148, 136, 0.05);
      }

      .analysis-table td {
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        text-align: right;
        color: var(--text-primary, #1e293b);
        border-bottom: 1px solid var(--border-color, #e2e8f0);
        white-space: nowrap;
      }

      .analysis-table td:first-child {
        text-align: left;
        font-weight: 500;
        position: sticky;
        left: 0;
        background: inherit;
        z-index: 5;
      }

      /* Color coding for values */
      .value-positive {
        color: #16a34a;
      }

      .value-negative {
        color: #dc2626;
      }

      /* Median column highlight */
      .median-col {
        background: rgba(13, 148, 136, 0.08);
        font-weight: 600;
        color: var(--color-primary, #0d9488);
      }

      /* Withdrawal columns styling */
      .withdrawal-col {
        color: var(--text-secondary, #475569);
      }

      /* Empty state */
      .empty-state {
        padding: var(--spacing-2xl, 48px);
        text-align: center;
        color: var(--text-secondary, #475569);
      }

      /* Mobile responsive */
      @media (max-width: 768px) {
        .table-header {
          padding: var(--spacing-md, 16px);
        }

        .table-header h3 {
          font-size: var(--font-size-base, 1rem);
        }

        .scroll-indicator-left,
        .scroll-indicator-right {
          display: block;
          position: absolute;
          top: 0;
          bottom: 0;
          width: 20px;
          pointer-events: none;
          z-index: 15;
          opacity: 0;
          transition: opacity 0.2s ease;
        }

        .scroll-indicator-left {
          left: 0;
          background: linear-gradient(to right, var(--surface-primary, #ffffff) 0%, transparent 100%);
        }

        .scroll-indicator-right {
          right: 0;
          background: linear-gradient(to left, var(--surface-primary, #ffffff) 0%, transparent 100%);
        }

        /* Show indicators based on scroll position */
        .scroll-container.can-scroll-left .scroll-indicator-left {
          opacity: 1;
        }

        .scroll-container.can-scroll-right .scroll-indicator-right {
          opacity: 1;
        }

        .table-wrapper {
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
          scroll-behavior: smooth;
          overscroll-behavior-x: contain;
          touch-action: pan-x pan-y;
        }

        .analysis-table {
          min-width: 600px;
        }

        .analysis-table th,
        .analysis-table td {
          padding: var(--spacing-xs, 4px) var(--spacing-sm, 8px);
          font-size: var(--font-size-xs, 0.75rem);
        }
      }

      @media (max-width: 480px) {
        .table-header {
          padding: var(--spacing-sm, 8px);
        }

        .table-icon {
          font-size: 1rem;
        }

        .table-header h3 {
          font-size: var(--font-size-sm, 0.875rem);
        }

        .analysis-table th,
        .analysis-table td {
          padding: 3px 4px;
          font-size: 0.65rem;
        }
      }
    `}afterRender(){this.updateTable(),this.setupScrollIndicators()}setupScrollIndicators(){const t=this.$(".table-wrapper"),e=this.$(".scroll-container");if(!t||!e)return;const r=()=>{const i=t.scrollLeft>0,n=t.scrollLeft<t.scrollWidth-t.clientWidth-1;e.classList.toggle("can-scroll-left",i),e.classList.toggle("can-scroll-right",n)};t.addEventListener("scroll",r,{passive:!0}),setTimeout(r,100)}formatCurrency(t){return Math.abs(t)>=1e6?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(t):new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(t)}getValueClass(t){return t>0?"value-positive":t<0?"value-negative":""}updateTable(){const t=this.$("#table-body");if(!t)return;const e=this.$("#cumulative-header");if(e&&(e.textContent=this._data?.isSBLOCLoanBalance?"Loan Balance":"Cumulative"),!this._data||this._data.percentiles.length===0){t.innerHTML=`
        <tr>
          <td colspan="8" class="empty-state">No data available</td>
        </tr>
      `;return}const{startYear:r,withdrawals:i,percentiles:n}=this._data,s=n.map((o,l)=>{const d=r+l,h=i.annual[l]||0,p=i.cumulative[l]||0;return`
        <tr>
          <td>${d}</td>
          <td class="withdrawal-col">${this.formatCurrency(h)}</td>
          <td class="withdrawal-col">${this.formatCurrency(p)}</td>
          <td class="${this.getValueClass(o.p10)}">${this.formatCurrency(o.p10)}</td>
          <td class="${this.getValueClass(o.p25)}">${this.formatCurrency(o.p25)}</td>
          <td class="median-col ${this.getValueClass(o.p50)}">${this.formatCurrency(o.p50)}</td>
          <td class="${this.getValueClass(o.p75)}">${this.formatCurrency(o.p75)}</td>
          <td class="${this.getValueClass(o.p90)}">${this.formatCurrency(o.p90)}</td>
        </tr>
      `});t.innerHTML=s.join("")}}customElements.define("yearly-analysis-table",Fv);const Vv={marginCallWarningThreshold:15,highGrowthThreshold:.1,successRateWarningThreshold:80,highUtilizationThreshold:70,utilizationYearsThreshold:20};function jv(a,t={}){const e={...Vv,...t},r=[];if(a.marginCallStats&&a.marginCallStats.length>0){const n=a.marginCallStats[a.marginCallStats.length-1].cumulativeProbability;if(n>e.marginCallWarningThreshold){const s=Math.ceil(n/5)*5,o=Math.ceil(a.config.initialValue*.1/1e4)*1e4;r.push({type:"warning",icon:"warning",title:"Elevated Leverage Risk",message:`Your ${n.toFixed(1)}% margin call probability exceeds the typical comfort threshold of ${e.marginCallWarningThreshold}%.`,action:`Build $${(o/1e3).toFixed(0)}K cash buffer or reduce withdrawals by ${s}%`})}}if(a.cagr!==void 0&&a.cagr>e.highGrowthThreshold&&r.push({type:"note",icon:"trending_up",title:"Above-Average Growth Assumption",message:`Your expected ${(a.cagr*100).toFixed(1)}% CAGR exceeds the historical long-term average of ~10%.`,action:"Consider using Conservative regime mode for more realistic projections"}),a.statistics.successRate<e.successRateWarningThreshold&&r.push({type:"warning",icon:"error_outline",title:"Success Probability Concern",message:`${a.statistics.successRate.toFixed(1)}% of simulations maintained positive net worth, which is below the ${e.successRateWarningThreshold}% threshold.`,action:"Review withdrawal rate or extend time horizon"}),a.sblocTrajectory){const s=Hv(a.sblocTrajectory,a.statistics,e.highUtilizationThreshold)/a.config.timeHorizon*100;s>e.utilizationYearsThreshold&&r.push({type:"warning",icon:"account_balance",title:"High Credit Utilization",message:`Your portfolio spends ${s.toFixed(0)}% of years above ${e.highUtilizationThreshold}% LTV in the median scenario.`,action:"Consider lower withdrawal or higher starting value"})}a.config.resamplingMethod==="regime"&&r.push({type:"info",icon:"analytics",title:"Regime-Switching Returns",message:"This simulation uses regime-switching return model which captures bull, bear, and crash market cycles."});const i={warning:0,action:1,note:2,info:3};return r.sort((n,s)=>i[n.type]-i[s.type])}function Hv(a,t,e){let r=0;const i=Math.pow(t.median/(a.loanBalance.p50[0]||1),1/a.years.length);for(let n=0;n<a.years.length;n++){const s=a.loanBalance.p50[n]||0,o=(a.loanBalance.p50[0]||t.mean)*Math.pow(i,n);(o>0?s/o*100:0)>e&&r++}return r}function Nv(a=0,t=.07){return[{type:"warning",icon:"warning",title:"Margin Call Risk",message:a>0?`${a.toFixed(1)}% cumulative probability over the simulation period.`:"No margin calls projected in this scenario.",value:`${a.toFixed(1)}%`},{type:"warning",icon:"swap_vert",title:"Sequence of Returns Risk",message:"Poor returns early in retirement can significantly impact long-term outcomes even if average returns meet expectations."},{type:"note",icon:"trending_up",title:"Interest Rate Sensitivity",message:`Current model assumes ${(t*100).toFixed(1)}% interest rate. A 1% increase could add significant costs over the horizon.`},{type:"note",icon:"psychology",title:"Behavioral Factors",message:"Market volatility may trigger emotional decisions that deviate from the optimal strategy, impacting actual returns."},{type:"note",icon:"gavel",title:"Regulatory Risk",message:"Tax laws and SBLOC regulations may change over time. The stepped-up basis benefit could be modified or eliminated."},{type:"action",icon:"water_drop",title:"Liquidity Constraints",message:"SBLOC availability may be restricted during market stress when you need it most.",action:"Maintain 6-12 months of expenses in accessible cash reserve"}]}function qv(a){switch(a){case"warning":return"var(--color-warning, #f59e0b)";case"note":return"var(--color-info, #3b82f6)";case"action":return"var(--color-success, #22c55e)";case"info":return"var(--text-secondary, #6b7280)"}}const Wv={primary:"#2563eb",secondary:"#64748b",accent:"#8b5cf6",percentiles:{p90:"#22c55e",p75:"#86efac",p50:"#3b82f6",p25:"#fdba74",p10:"#ef4444"},positive:"#16a34a",negative:"#dc2626",background:"#ffffff",grid:"#e2e8f0",text:"#1e293b"},cn={bandFill:.3};/*!
 * chartjs-chart-matrix v0.0.0-development
 * https://chartjs-chart-matrix.pages.dev/
 * (c) 2025 Jukka Kurkela
 * Released under the MIT license
 */var Yv="0.0.0-development";class $a extends sr{initialize(){this.enableOptionSharing=!0,super.initialize()}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,r,i){const n=i==="reset",{xScale:s,yScale:o}=this._cachedMeta,l=this.resolveDataElementOptions(e,i),d=this.getSharedOptions(l);for(let h=e;h<e+r;h++){const p=!n&&this.getParsed(h),m=n?s.getBasePixel():s.getPixelForValue(p.x),v=n?o.getBasePixel():o.getPixelForValue(p.y),g=this.resolveDataElementOptions(h,i),{width:k,height:S,anchorX:D,anchorY:M}=g,I={x:Uv(D,m,k),y:Gv(M,v,S),width:k,height:S,options:g};this.updateElement(t[h],h,I,i)}this.updateSharedOptions(d,i,l)}draw(){const t=this.chart.ctx,e=this.getMeta().data||[];let r,i;for(r=0,i=e.length;r<i;++r)e[r].draw(t)}}$a.id="matrix";$a.version=Yv;$a.defaults={dataElementType:"matrix",animations:{numbers:{type:"number",properties:["x","y","width","height"]}}};$a.overrides={interaction:{mode:"nearest",intersect:!0},scales:{x:{type:"linear",offset:!0},y:{type:"linear",reverse:!0}}};function Uv(a,t,e){return a==="left"||a==="start"?t:a==="right"||a==="end"?t-e:t-e/2}function Gv(a,t,e){return a==="top"||a==="start"?t:a==="bottom"||a==="end"?t-e:t-e/2}function _d(a,t){const{x:e,y:r,width:i,height:n}=a.getProps(["x","y","width","height"],t);return{left:e,top:r,right:e+i,bottom:r+n}}function ji(a,t,e){return Math.max(Math.min(a,e),t)}function Xv(a,t,e){const r=a.borderWidth;let i,n,s,o;return Lt(r)?(i=+r.top||0,n=+r.right||0,s=+r.bottom||0,o=+r.left||0):i=n=s=o=+r||0,{t:ji(i,0,e),r:ji(n,0,t),b:ji(s,0,e),l:ji(o,0,t)}}function Kv(a){const t=_d(a,!1),e=t.right-t.left,r=t.bottom-t.top,i=Xv(a.options,e/2,r/2);return{outer:{x:t.left,y:t.top,w:e,h:r},inner:{x:t.left+i.l,y:t.top+i.t,w:e-i.l-i.r,h:r-i.t-i.b}}}function ms(a,t,e,r){const i=t===null,n=e===null,s=!a||i&&n?!1:_d(a,r);return s&&(i||t>=s.left&&t<=s.right)&&(n||e>=s.top&&e<=s.bottom)}class ao extends Ge{draw(t){const e=this.options,{inner:r,outer:i}=Kv(this),n=kr(e.borderRadius);t.save(),i.w!==r.w||i.h!==r.h?(t.beginPath(),wr(t,{x:i.x,y:i.y,w:i.w,h:i.h,radius:n}),wr(t,{x:r.x,y:r.y,w:r.w,h:r.h,radius:n}),t.fillStyle=e.backgroundColor,t.fill(),t.fillStyle=e.borderColor,t.fill("evenodd")):(t.beginPath(),wr(t,{x:r.x,y:r.y,w:r.w,h:r.h,radius:n}),t.fillStyle=e.backgroundColor,t.fill()),t.restore()}inRange(t,e,r){return ms(this,t,e,r)}inXRange(t,e){return ms(this,t,null,e)}inYRange(t,e){return ms(this,null,t,e)}getCenterPoint(t){const{x:e,y:r,width:i,height:n}=this.getProps(["x","y","width","height"],t);return{x:e+i/2,y:r+n/2}}tooltipPosition(){return this.getCenterPoint()}getRange(t){return t==="x"?this.width/2:this.height/2}constructor(t){super(),t&&Object.assign(this,t)}}ao.id="matrix";ao.defaults={backgroundColor:void 0,borderColor:void 0,borderWidth:void 0,borderRadius:0,anchorX:"center",anchorY:"center",width:20,height:20};const _v=Wv,Qv={primary:"#60a5fa",secondary:"#94a3b8",accent:"#a78bfa",percentiles:{p90:"#4ade80",p75:"#a7f3d0",p50:"#60a5fa",p25:"#fcd34d",p10:"#f87171"},positive:"#22c55e",negative:"#f87171",background:"#0f172a",grid:"#334155",text:"#f1f5f9"};function ve(){return document.documentElement.getAttribute("data-theme")==="dark"?Qv:_v}Ve.register(...Wd);Ve.register($a,ao);class Xe extends Ct{chart=null;template(){return`
      <div class="chart-container">
        <canvas id="chart-canvas"></canvas>
      </div>
    `}styles(){return`
      :host {
        display: block;
      }

      .chart-container {
        position: relative;
        width: 100%;
        height: 100%;
      }

      canvas {
        width: 100% !important;
        height: 100% !important;
      }
    `}connectedCallback(){super.connectedCallback(),window.addEventListener("theme-change",this.handleThemeChange)}afterRender(){const t=this.$("#chart-canvas");if(!t){console.error("BaseChart: canvas element not found");return}const e=t.getContext("2d");if(!e){console.error("BaseChart: could not get 2D context");return}const r=this.getChartConfig();this.chart=new Ve(e,r)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("theme-change",this.handleThemeChange),this.chart&&(this.chart.destroy(),this.chart=null)}updateData(t,e=!0){if(!this.chart){console.warn("BaseChart.updateData: chart not initialized");return}this.chart.data=t,this.chart.update(e?"default":"none")}updateOptions(t){if(!this.chart){console.warn("BaseChart.updateOptions: chart not initialized");return}Object.assign(this.chart.options,t),this.chart.update()}resize(){this.chart&&this.chart.resize()}handleThemeChange=()=>{if(!this.chart)return;const t=ve(),e=this.chart.options;if(e.scales){const r=e.scales.x,i=e.scales.y;r&&(r.grid&&(r.grid.color=t.grid),r.ticks&&(r.ticks.color=t.text),"title"in r&&r.title&&(r.title.color=t.text)),i&&(i.grid&&(i.grid.color=t.grid),i.ticks&&(i.ticks.color=t.text),"title"in i&&i.title&&(i.title.color=t.text))}e.plugins?.legend?.labels&&(e.plugins.legend.labels.color=t.text),this.updateDatasetColors(t),this.chart.update("none")};updateDatasetColors(t){}}class Jv extends Xe{_data=null;set data(t){this._data=t,this.chart&&t&&this.updateData(this.buildChartData(t))}get data(){return this._data}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(t)}withAlpha(t,e){const r=Math.round(e*255).toString(16).padStart(2,"0");return t+r}buildChartData(t){const{years:e,bands:r}=t,i=e.map(o=>`Year ${o}`),n=cn.bandFill,s=ve();return{labels:i,datasets:[{label:"P90 (Optimistic)",data:r.p90,borderColor:s.percentiles.p90,backgroundColor:"transparent",borderWidth:2,borderDash:[5,5],fill:!1,tension:.1,pointRadius:0,pointHoverRadius:4},{label:"P75-P90 Range",data:r.p75,borderColor:s.percentiles.p75,backgroundColor:this.withAlpha(s.percentiles.p90,n),borderWidth:1,fill:"-1",tension:.1,pointRadius:0,pointHoverRadius:4},{label:"P50-P75 Range",data:r.p50,borderColor:s.percentiles.p50,backgroundColor:this.withAlpha(s.percentiles.p75,n),borderWidth:2,fill:"-1",tension:.1,pointRadius:0,pointHoverRadius:4},{label:"P25-P50 Range",data:r.p25,borderColor:s.percentiles.p25,backgroundColor:this.withAlpha(s.percentiles.p25,n),borderWidth:1,fill:"-1",tension:.1,pointRadius:0,pointHoverRadius:4},{label:"P10-P25 Range",data:r.p10,borderColor:s.percentiles.p10,backgroundColor:this.withAlpha(s.percentiles.p10,n),borderWidth:2,borderDash:[5,5],fill:"-1",tension:.1,pointRadius:0,pointHoverRadius:4}]}}updateDatasetColors(t){if(!this.chart)return;const e=cn.bandFill;this.chart.data.datasets.forEach(r=>{const i=r.label||"";i.includes("P90")?r.borderColor=t.percentiles.p90:i.includes("P75-P90")?(r.borderColor=t.percentiles.p75,r.backgroundColor=this.withAlpha(t.percentiles.p90,e)):i.includes("P50-P75")?(r.borderColor=t.percentiles.p50,r.backgroundColor=this.withAlpha(t.percentiles.p75,e)):i.includes("P25-P50")?(r.borderColor=t.percentiles.p25,r.backgroundColor=this.withAlpha(t.percentiles.p25,e)):i.includes("P10-P25")&&(r.borderColor=t.percentiles.p10,r.backgroundColor=this.withAlpha(t.percentiles.p10,e))})}getChartConfig(){const t=ve(),e={labels:[],datasets:[]};return{type:"line",data:this._data?this.buildChartData(this._data):e,options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"top",labels:{color:t.text,filter:i=>!(i.text||"").includes("Range")}},tooltip:{callbacks:{label:i=>{const n=i.dataset.label||"",s=i.parsed.y;return`${n}: ${this.formatCurrency(s)}`}}}},scales:{x:{title:{display:!0,text:"Year",color:t.text},grid:{color:t.grid},ticks:{color:t.text}},y:{title:{display:!0,text:"Portfolio Value",color:t.text},grid:{color:t.grid},ticks:{color:t.text,callback:i=>this.formatCurrency(i)}}}}}}}customElements.define("probability-cone-chart",Jv);const bs={solid:[],dashed:[8,4],dotted:[2,4]},xc=["#2563eb","#16a34a","#dc2626","#9333ea","#ea580c"];class Zv extends Xe{_data=null;set data(t){this._data=t,this.chart&&t&&this.updateData(this.buildChartData(t))}get data(){return this._data}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(t)}getLineStyle(t){return t===0?bs.solid:t===1?bs.dashed:bs.dotted}getLineColor(t,e){return e||xc[t%xc.length]}buildChartData(t){const{labels:e,datasets:r}=t;return{labels:e,datasets:r.map((i,n)=>({label:i.label,data:i.data,borderColor:this.getLineColor(n,i.color),backgroundColor:"transparent",borderWidth:2,borderDash:this.getLineStyle(n),tension:.1,pointRadius:3,pointHoverRadius:5,pointBackgroundColor:this.getLineColor(n,i.color),fill:!1}))}}updateDatasetColors(t){}getChartConfig(){const t=ve(),e={labels:[],datasets:[]};return{type:"line",data:this._data?this.buildChartData(this._data):e,options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"top",labels:{color:t.text,usePointStyle:!0}},tooltip:{callbacks:{label:i=>{const n=i.dataset.label||"",s=i.parsed.y;return`${n}: ${this.formatCurrency(s)}`}}}},scales:{x:{title:{display:!0,text:"Year",color:t.text},grid:{color:t.grid},ticks:{color:t.text}},y:{title:{display:!0,text:"Amount ($)",color:t.text},grid:{color:t.grid},ticks:{color:t.text,callback:i=>this.formatCurrency(i)},beginAtZero:!0}}}}}}customElements.define("sbloc-balance-chart",Zv);function Hi(a){const t=Math.abs(a),e=a<0?"-":"";return t>=1e9?`${e}$${(t/1e9).toFixed(1)}B`:t>=1e6?`${e}$${(t/1e6).toFixed(1)}M`:t>=1e3?`${e}$${(t/1e3).toFixed(0)}K`:`${e}$${t.toFixed(0)}`}function yc(a,t){const e=t>1?a/(t-1):.5;if(e<.5)return`rgb(239, ${Math.round(68+166*(e*2))}, 68)`;{const r=Math.round(234-200*((e-.5)*2)),i=Math.round(179+18*((e-.5)*2)),n=8+Math.round(86*((e-.5)*2));return`rgb(${r}, ${i}, ${n})`}}class $v extends Xe{data=null;getChartConfig(){const t=this.data?.bins??[],e=t.length,r=t.map(s=>`${Hi(s.min)} - ${Hi(s.max)}`),i=t.map((s,o)=>yc(o,e)),n=t.map(s=>s.count);return{type:"bar",data:{labels:r,datasets:[{label:"Frequency",data:n,backgroundColor:i,borderColor:i.map(s=>s.replace("rgb","rgba").replace(")",", 0.8)")),borderWidth:1,barPercentage:1,categoryPercentage:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{title:s=>{const o=s[0].dataIndex,l=t[o];return l?`${Hi(l.min)} - ${Hi(l.max)}`:""},label:s=>`Count: ${s.raw} iterations`}}},scales:{x:{title:{display:!0,text:"Terminal Net Worth",color:ve().text},ticks:{maxRotation:45,minRotation:45,color:ve().text},grid:{display:!1}},y:{title:{display:!0,text:"Iterations",color:ve().text},ticks:{stepSize:1,color:ve().text},grid:{color:ve().grid},beginAtZero:!0}}}}}updateDatasetColors(t){if(!this.chart||!this.data)return;const e=this.data.bins.length,r=this.data.bins.map((n,s)=>yc(s,e)),i=this.chart.data.datasets[0];i&&(i.backgroundColor=r,i.borderColor=r.map(n=>n.replace("rgb","rgba").replace(")",", 0.8)")))}setData(t){if(this.data=t,this.chart){const e=this.getChartConfig();this.updateData(e.data)}else this.render()}}customElements.define("histogram-chart",$v);const Ni={low:"#22c55e",moderate:"#eab308",elevated:"#f97316",high:"#ef4444"};function tx(a){return a<5?Ni.low:a<15?Ni.moderate:a<30?Ni.elevated:Ni.high}class ex extends Xe{data=null;cumulativeData;getChartConfig(){const t=this.data,e=t?.labels??[],r=t?.values??[],i=this.cumulativeData,n=e.length>0?e:r.map((d,h)=>`Year ${h+1}`),s=r.map(d=>tx(d)),o=[{type:"bar",label:"Annual Probability",data:r,backgroundColor:s,borderColor:s.map(d=>d),borderWidth:1,order:2}],l=ve();return i&&i.length>0&&o.push({type:"line",label:"Cumulative Probability",data:i,borderColor:l.primary,backgroundColor:"transparent",borderWidth:2,pointRadius:3,pointBackgroundColor:l.primary,tension:.1,order:1}),{type:"bar",data:{labels:n,datasets:o},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:i!==void 0&&i.length>0,position:"top"},tooltip:{callbacks:{label:d=>{const h=d.raw;if(d.dataset.label==="Cumulative Probability")return`Cumulative: ${h.toFixed(1)}%`;const m=d.dataIndex,v=i?.[m],g=`Annual: ${h.toFixed(1)}%`;return v!==void 0?[g,`Cumulative: ${v.toFixed(1)}%`]:g}}}},scales:{x:{title:{display:!0,text:"Year",color:l.text},ticks:{color:l.text},grid:{display:!1}},y:{title:{display:!0,text:"Probability (%)",color:l.text},ticks:{callback:d=>`${d}%`,color:l.text},grid:{color:l.grid},beginAtZero:!0,max:this.calculateYAxisMax(r,i)}}}}}calculateYAxisMax(t,e){const r=[...t,...e??[]];if(Math.max(...r,0)>80)return 100}updateDatasetColors(t){if(!this.chart)return;const e=this.chart.data.datasets.find(r=>r.label==="Cumulative Probability");e&&(e.borderColor=t.primary,e.pointBackgroundColor=t.primary)}setData(t,e){if(this.data=t,this.cumulativeData=e,this.chart){const r=this.getChartConfig();this.updateData(r.data)}else this.render()}}customElements.define("margin-call-chart",ex);function wc(){const a=ve();return{bbd:a.primary,sell:"#6b7280",advantage:a.positive,negative:a.negative,text:a.text,secondary:a.secondary,grid:a.grid}}function rx(a){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(a)}function za(a){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(a)}class ax extends Xe{data=null;updateDatasetColors(t){if(!this.chart)return;const e=this.chart.data.datasets[0];e&&(e.backgroundColor=[t.primary,"#6b7280"],e.borderColor=[t.primary,"#6b7280"])}getChartConfig(){const t=this.data,e=t?.bbdNetEstate??0,r=t?.sellNetEstate??0,i=t?.bbdAdvantage??0,n=wc(),s=["BBD Strategy","Sell Strategy"],o=[e,r],l=[n.bbd,n.sell],d=i,h=za(Math.abs(i)),p=i>=0?"+":"-",m=i>=0?"BBD Advantage":"Sell Advantage";return{type:"bar",data:{labels:s,datasets:[{label:"Net Estate Value",data:o,backgroundColor:l,borderColor:l,borderWidth:1,barPercentage:.6,categoryPercentage:.8}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1},tooltip:{callbacks:{label:v=>{const g=v.raw,k=v.label,S=[`Net Estate: ${za(g)}`];return t?.breakdown&&k==="BBD Strategy"&&(S.push(`Loan Balance: ${za(t.breakdown.loan)}`),S.push(`Taxes Avoided: ${za(t.breakdown.taxes)}`)),k==="Sell Strategy"&&t?.breakdown&&S.push(`Taxes Paid: ${za(t.breakdown.taxes)}`),S}}}},scales:{x:{grid:{display:!1},ticks:{color:n.text,font:{weight:"bold"}}},y:{title:{display:!0,text:"Net Estate Value",color:n.text},ticks:{callback:v=>rx(v),color:n.text},grid:{color:n.grid},beginAtZero:!0}}},plugins:[{id:"advantageAnnotation",afterDraw:v=>{if(d===0)return;const{ctx:g,chartArea:k,scales:S}=v;if(!k||!S.x||!S.y)return;const D=v.getDatasetMeta(0);if(!D.data||D.data.length<2)return;const M=D.data[0],I=D.data[1],W=M.y,H=I.y,X=Math.min(W,H);g.save();const q=(M.x+I.x)/2,w=X-30,C=wc();g.textAlign="center",g.textBaseline="middle",g.font="bold 14px sans-serif",g.fillStyle=i>=0?C.advantage:C.negative,g.fillText(`${p}${h}`,q,w),g.font="11px sans-serif",g.fillStyle=C.text,g.fillText(m,q,w+16),g.beginPath(),g.strokeStyle=C.secondary,g.lineWidth=1,g.setLineDash([4,4]);const L=X-10;g.moveTo(M.x,W),g.lineTo(M.x,L),g.lineTo(I.x,L),g.lineTo(I.x,H),g.stroke(),g.restore()}}]}}setData(t){this.data=t,this.chart?(this.chart.destroy(),this.chart=null,this.render()):this.render()}}customElements.define("bbd-comparison-chart",ax);const Ls=["#2563eb","#16a34a","#dc2626","#9333ea","#ea580c"];function ix(a){return`hsl(${(a-Ls.length)*137.5%360}, 65%, 50%)`}function kc(a,t){return t||(a<Ls.length?Ls[a]:ix(a))}class nx extends Xe{_data=null;_centerText="Portfolio";get data(){return this._data}set data(t){this._data=t,this.chart&&t?this.updateChartData():t&&this.render()}get centerText(){return this._centerText}set centerText(t){this._centerText=t,this.chart&&this.chart.update()}updateChartData(){if(!this.chart||!this._data)return;const t=this._data.segments.map(i=>i.label),e=this._data.segments.map(i=>i.value),r=this._data.segments.map((i,n)=>kc(n,i.color));this.updateData({labels:t,datasets:[{data:e,backgroundColor:r,borderColor:"#ffffff",borderWidth:2}]})}getChartConfig(){const t=this._data,e=t?.segments.map(s=>s.label)??[],r=t?.segments.map(s=>s.value)??[],i=t?.segments.map((s,o)=>kc(o,s.color))??[];r.reduce((s,o)=>s+o,0);const n=this._centerText;return{type:"doughnut",data:{labels:e,datasets:[{data:r,backgroundColor:i,borderColor:"#ffffff",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!0,cutout:"60%",plugins:{legend:{position:"bottom",labels:{usePointStyle:!0,padding:20,generateLabels:s=>{const o=s.data;if(!o.labels||!o.datasets[0])return[];const l=o.datasets[0].data,d=l.reduce((h,p)=>h+p,0);return o.labels.map((h,p)=>{const m=l[p],v=d>0?(m/d*100).toFixed(1):"0.0",g=o.datasets[0].backgroundColor;return{text:`${h}: ${v}%`,fillStyle:g[p],strokeStyle:"#ffffff",lineWidth:1,hidden:!1,index:p}})}}},tooltip:{callbacks:{label:s=>{const o=s.raw,l=s.dataset.data.reduce((h,p)=>h+p,0),d=l>0?(o/l*100).toFixed(1):"0.0";return`${s.label}: ${d}%`}}}}},plugins:[{id:"centerText",afterDraw:s=>{const{ctx:o,width:l,height:d}=s;o.save();const h=l/2,p=d/2;o.textAlign="center",o.textBaseline="middle",o.font="bold 16px sans-serif",o.fillStyle="#1e293b",o.fillText(n,h,p),o.restore()}}]}}}customElements.define("donut-chart",nx);const gr={negativeStrong:"#dc2626",negativeLight:"#fca5a5",neutral:"#ffffff",positiveLight:"#93c5fd",positiveStrong:"#2563eb"};function qi(a,t,e){const r=parseInt(a.slice(1,3),16),i=parseInt(a.slice(3,5),16),n=parseInt(a.slice(5,7),16),s=parseInt(t.slice(1,3),16),o=parseInt(t.slice(3,5),16),l=parseInt(t.slice(5,7),16),d=Math.round(r+(s-r)*e),h=Math.round(i+(o-i)*e),p=Math.round(n+(l-n)*e);return`#${d.toString(16).padStart(2,"0")}${h.toString(16).padStart(2,"0")}${p.toString(16).padStart(2,"0")}`}function sx(a,t=!1){if(t||a===1)return"#0d9488";const e=Math.max(-1,Math.min(1,a));if(e<-.5){const r=(e+1)/.5;return qi(gr.negativeStrong,gr.negativeLight,r)}else if(e<0){const r=(e+.5)/.5;return qi(gr.negativeLight,gr.neutral,r)}else if(e<.5){const r=e/.5;return qi(gr.neutral,gr.positiveLight,r)}else{const r=(e-.5)/.5;return qi(gr.positiveLight,gr.positiveStrong,r)}}function ox(a){return parseInt(a.slice(1,3),16)*.299+parseInt(a.slice(3,5),16)*.587+parseInt(a.slice(5,7),16)*.114>186?"#1e293b":"#ffffff"}class lx extends Ct{_data=null;get data(){return this._data}set data(t){this._data=t,this.updateDisplay()}template(){return`
      <div class="heatmap-wrapper">
        <div class="table-container">
          <table class="correlation-table" id="correlation-table">
            <thead id="table-head"></thead>
            <tbody id="table-body"></tbody>
          </table>
        </div>
        <div class="note-section" id="note-section"></div>
      </div>
    `}styles(){return`
      :host {
        display: block;
        width: 100%;
        height: 100%;
        max-width: 100%;
      }

      /* Shadow DOM reset - global box-sizing doesn't penetrate */
      *, *::before, *::after {
        box-sizing: border-box;
      }

      .heatmap-wrapper {
        display: flex;
        flex-direction: column;
        height: 100%;
        gap: var(--spacing-md, 16px);
      }

      .table-container {
        flex: 1;
        overflow-x: auto;
        overflow-y: auto;
        -webkit-overflow-scrolling: touch;
        max-width: 100%;
      }

      .correlation-table {
        width: 100%;
        border-collapse: collapse;
        font-size: var(--font-size-sm, 0.875rem);
        min-width: 400px;
      }

      .correlation-table th,
      .correlation-table td {
        padding: var(--spacing-sm, 8px) var(--spacing-xs, 4px);
        text-align: center;
        border: 1px solid var(--border-color, #e2e8f0);
        min-width: 70px;
      }

      .correlation-table th {
        background: #0d9488;
        font-weight: 600;
        color: white;
        white-space: nowrap;
      }

      .correlation-table th.stats-header {
        background: #4A90D9;
        color: white;
        border-left: 2px solid var(--border-color, #e2e8f0);
        min-width: 90px;
      }

      .correlation-table tbody tr:nth-child(odd) td.row-label {
        background: #f8fafc;
      }

      .correlation-table tbody tr:nth-child(even) td.row-label {
        background: #ffffff;
      }

      .correlation-table td.row-label {
        font-weight: 500;
        color: #1e293b; /* Force dark text on light row backgrounds */
        text-align: left;
        padding-left: var(--spacing-md, 16px);
      }

      .correlation-table td.correlation-cell {
        font-weight: 600;
        min-width: 60px;
      }

      .correlation-table tbody tr:nth-child(odd) td.return-cell,
      .correlation-table tbody tr:nth-child(odd) td.volatility-cell {
        background: #f8fafc;
      }

      .correlation-table tbody tr:nth-child(even) td.return-cell,
      .correlation-table tbody tr:nth-child(even) td.volatility-cell {
        background: #ffffff;
      }

      .correlation-table td.return-cell {
        color: #0d9488;
        font-weight: 600;
        border-left: 2px solid var(--border-color, #e2e8f0);
      }

      .correlation-table td.volatility-cell {
        color: #475569; /* Force gray text on light row backgrounds */
        font-weight: 500;
      }

      .correlation-table td.estimated {
        font-style: italic;
        opacity: 0.85;
      }

      .correlation-table .est-suffix {
        font-size: 0.75em;
        opacity: 0.7;
        margin-left: 2px;
      }

      .note-section {
        background: var(--surface-secondary, #f8fafc);
        border: 1px solid var(--border-color, #e2e8f0);
        border-left: 4px solid var(--color-primary, #0d9488);
        border-radius: var(--radius-md, 6px);
        padding: var(--spacing-md, 16px);
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #475569);
        overflow-wrap: break-word;
        word-wrap: break-word;
      }

      .note-section p {
        margin: 0 0 var(--spacing-sm, 8px) 0;
      }

      .note-section p:last-child {
        margin-bottom: 0;
      }

      .note-section strong {
        color: var(--text-primary, #1e293b);
      }

      .note-section .note-highlight {
        color: #0d9488;
        font-weight: 600;
      }

      /* Mobile responsive */
      @media (max-width: 768px) {
        .heatmap-wrapper {
          gap: var(--spacing-sm, 8px);
        }

        .table-container {
          /* Allow horizontal scrolling on mobile */
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
          margin: 0 calc(-1 * var(--spacing-sm, 8px));
          padding: 0 var(--spacing-sm, 8px);
        }

        .correlation-table {
          font-size: var(--font-size-xs, 0.75rem);
          min-width: max-content;
        }

        .correlation-table th,
        .correlation-table td {
          padding: var(--spacing-xs, 4px) var(--spacing-xs, 4px);
          min-width: 48px;
          white-space: nowrap;
        }

        .correlation-table th.stats-header {
          min-width: 60px;
          font-size: 0.65rem;
        }

        .correlation-table td.row-label {
          padding-left: var(--spacing-sm, 8px);
          min-width: 60px;
        }

        .note-section {
          padding: var(--spacing-sm, 8px);
          font-size: 0.75rem;
          line-height: 1.5;
        }

        .note-section p {
          margin-bottom: var(--spacing-xs, 4px);
        }
      }

      @media (max-width: 480px) {
        .correlation-table {
          font-size: 0.65rem;
        }

        .correlation-table th,
        .correlation-table td {
          padding: 3px 2px;
          min-width: 40px;
        }

        .correlation-table th.stats-header {
          min-width: 50px;
          font-size: 0.6rem;
        }

        .correlation-table td.row-label {
          min-width: 50px;
        }
      }
    `}afterRender(){this.updateDisplay()}updateDisplay(){const t=this.$("#table-head"),e=this.$("#table-body"),r=this.$("#note-section");if(!t||!e||!r)return;if(!this._data||this._data.labels.length===0){t.innerHTML="",e.innerHTML='<tr><td colspan="99">No data available</td></tr>',r.innerHTML="";return}const{labels:i,matrix:n,expectedReturns:s,volatilities:o,isEstimate:l}=this._data,d=s&&o&&s.length===i.length&&o.length===i.length;let h="<tr><th>Name</th>";for(const v of i)h+=`<th>${this.escapeHtml(v)}</th>`;d&&(h+='<th class="stats-header">Expected Annual<br>Return</th>',h+='<th class="stats-header">Annualized<br>Volatility</th>'),h+="</tr>",t.innerHTML=h;let p="";for(let v=0;v<i.length;v++){p+="<tr>",p+=`<td class="row-label">${this.escapeHtml(i[v])}</td>`;for(let g=0;g<n[v].length;g++){const k=n[v][g],D=sx(k,v===g),M=ox(D);p+=`<td class="correlation-cell" style="background-color: ${D}; color: ${M};">${k.toFixed(2)}</td>`}if(d){const g=s[v],k=o[v],S=l?.[v]??!1,D=S?" estimated":"",M=S?'<span class="est-suffix">(est)</span>':"";p+=`<td class="return-cell${D}">${(g*100).toFixed(2)}%${M}</td>`,p+=`<td class="volatility-cell${D}">${(k*100).toFixed(2)}%${M}</td>`}p+="</tr>"}e.innerHTML=p;const m=l?.some(v=>v)??!1;r.innerHTML=`
      <p><strong>Correlation Matrix:</strong> Calculated using Pearson correlation coefficient on year-aligned historical returns. Values range from -1.0 (perfect negative correlation) to +1.0 (perfect positive correlation). Diagonal cells (1.00) represent each asset correlated with itself.</p>
      <p><strong class="note-highlight">Expected Annual Return:</strong> Arithmetic mean of all year-over-year returns from historical data. Formula: <em>mu = (sum r_i) / n</em> where r_i represents each annual return and n is the number of years of data.</p>
      <p><strong>Annualized Volatility:</strong> Standard deviation of annual returns, measuring return dispersion. Formula: <em>sigma = sqrt(sum(r_i - mu)^2 / n)</em>. Higher volatility indicates greater price fluctuation and risk. Used in modern portfolio theory to assess risk-adjusted returns.</p>
      <p><strong class="note-highlight">Diversification Insight:</strong> Lower correlations (closer to 0 or negative) provide better diversification benefits. Assets with correlations above 0.90 move very similarly and offer limited diversification value.</p>
      ${m?"<p><strong>(est)</strong> indicates estimated values using market average assumptions (8% return, 16% volatility) because historical data is unavailable for that asset.</p>":""}
    `}escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}}customElements.define("correlation-heatmap",lx);class cx extends Xe{_data=null;set data(t){this._data=t,this.chart&&t&&this.updateData(this.buildChartData(t))}get data(){return this._data}setData(t){this.data=t}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(t)}buildChartData(t){const{labels:e,bbdValues:r,sellValues:i}=t,n=cn.bandFill,s="#0d9488",o="#3b82f6";return{labels:e,datasets:[{label:"Buy Borrow Die",data:r,borderColor:s,backgroundColor:((d,h)=>{const p=Math.round(h*255).toString(16).padStart(2,"0");return d+p})(s,n),borderWidth:3,fill:"1",tension:.4,pointRadius:0,pointHoverRadius:6,pointHoverBackgroundColor:s,pointHoverBorderColor:"#ffffff",pointHoverBorderWidth:2},{label:"Sell Assets",data:i,borderColor:o,backgroundColor:"transparent",borderWidth:3,fill:!1,tension:.4,pointRadius:0,pointHoverRadius:6,pointHoverBackgroundColor:o,pointHoverBorderColor:"#ffffff",pointHoverBorderWidth:2}]}}updateDatasetColors(t){}getChartConfig(){const t=ve(),e={labels:[],datasets:[]};return{type:"line",data:this._data?this.buildChartData(this._data):e,options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"top",labels:{color:t.text,usePointStyle:!0,pointStyle:"circle"}},tooltip:{callbacks:{label:i=>{const n=i.dataset.label||"",s=i.parsed.y;return`${n}: ${this.formatCurrency(s)}`},afterBody:i=>{if(i.length>=2){const n=i[0].parsed.y,s=i[1].parsed.y,o=n-s;return`Difference: ${o>=0?"+":""}${this.formatCurrency(o)}`}return""}}}},scales:{x:{title:{display:!0,text:"Year",color:t.text},grid:{color:t.grid},ticks:{color:t.text}},y:{title:{display:!0,text:"Net Worth",color:t.text},grid:{color:t.grid},ticks:{color:t.text,callback:i=>this.formatCurrency(i)}}}}}}}customElements.define("comparison-line-chart",cx);class dx extends Xe{_data=null;set data(t){this._data=t,this.chart&&t&&this.updateData(this.buildChartData(t))}get data(){return this._data}setData(t){this.data=t}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(t)}buildChartData(t){const{labels:e,taxes:r,interest:i}=t,n=.5,s="#ef4444",o="#0d9488",l=(d,h)=>{const p=Math.round(h*255).toString(16).padStart(2,"0");return d+p};return{labels:e,datasets:[{label:"Capital Gains Taxes (Sell)",data:r,borderColor:s,backgroundColor:l(s,n),borderWidth:2,fill:"origin",tension:.4,pointRadius:0,pointHoverRadius:5,pointHoverBackgroundColor:s,pointHoverBorderColor:"#ffffff",pointHoverBorderWidth:2},{label:"Cumulative Interest (BBD)",data:i,borderColor:o,backgroundColor:l(o,n),borderWidth:2,fill:"origin",tension:.4,pointRadius:0,pointHoverRadius:5,pointHoverBackgroundColor:o,pointHoverBorderColor:"#ffffff",pointHoverBorderWidth:2}]}}updateDatasetColors(t){}getChartConfig(){const t=ve(),e={labels:[],datasets:[]};return{type:"line",data:this._data?this.buildChartData(this._data):e,options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"top",labels:{color:t.text,usePointStyle:!0,pointStyle:"rect"}},tooltip:{callbacks:{label:i=>{const n=i.dataset.label||"",s=i.parsed.y;return`${n}: ${this.formatCurrency(s)}`},afterBody:i=>{if(i.length>=2){const n=i[0].parsed.y,s=i[1].parsed.y,o=n-s;return o>0?`BBD Saves: ${this.formatCurrency(o)}`:o<0?`Sell Saves: ${this.formatCurrency(Math.abs(o))}`:"Cost Equal"}return""}}}},scales:{x:{title:{display:!0,text:"Year",color:t.text},grid:{color:t.grid},ticks:{color:t.text}},y:{title:{display:!0,text:"Cumulative Cost",color:t.text},grid:{color:t.grid},ticks:{color:t.text,callback:i=>this.formatCurrency(i)},beginAtZero:!0}}}}}}customElements.define("cumulative-costs-chart",dx);class ux extends Xe{_data=null;set data(t){this._data=t,this.chart&&t&&this.updateData(this.buildChartData(t))}get data(){return this._data}setData(t){this.data=t}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(t)}buildChartData(t){const{percentiles:e,bbdValues:r,sellValues:i}=t,n="#0d9488",s="#3b82f6";return{labels:e,datasets:[{label:"Buy Borrow Die",data:r,backgroundColor:n,borderColor:n,borderWidth:0,borderRadius:4,borderSkipped:!1},{label:"Sell Assets",data:i,backgroundColor:s,borderColor:s,borderWidth:0,borderRadius:4,borderSkipped:!1}]}}updateDatasetColors(t){}getChartConfig(){const t=ve(),e={labels:[],datasets:[]};return{type:"bar",data:this._data?this.buildChartData(this._data):e,options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:{legend:{display:!0,position:"top",labels:{color:t.text,usePointStyle:!0,pointStyle:"rect"}},tooltip:{callbacks:{label:i=>{const n=i.dataset.label||"",s=i.parsed.y;return`${n}: ${this.formatCurrency(s)}`},afterBody:i=>{if(i.length>=2){const n=i[0].parsed.y,s=i[1].parsed.y,o=n-s,l=s>0?(o/s*100).toFixed(0):0,d=o>=0?"+":"";return["",`BBD Advantage: ${d}${this.formatCurrency(o)}`,`(${d}${l}%)`]}return""}}}},scales:{x:{title:{display:!0,text:"Percentile",color:t.text},grid:{display:!1},ticks:{color:t.text}},y:{title:{display:!0,text:"Terminal Value",color:t.text},grid:{color:t.grid},ticks:{color:t.text,callback:i=>this.formatCurrency(i)},beginAtZero:!0}}}}}}customElements.define("terminal-comparison-chart",ux);class hx extends Xe{_data=null;set data(t){this._data=t,this.chart&&t&&(this.updateData(this.buildChartData(t)),this.chart.options.plugins=this.buildPluginOptions(t.maxBorrowing),this.chart.update())}get data(){return this._data}setData(t){this.data=t}formatPercent(t){return`${t.toFixed(0)}%`}buildChartData(t){const{labels:e,p10:r,p25:i,p50:n,p75:s,p90:o}=t,l=cn.bandFill,d={p10:"#22c55e",p25:"#84cc16",p50:"#eab308",p75:"#f97316",p90:"#ef4444"},h=(p,m)=>{const v=Math.round(m*255).toString(16).padStart(2,"0");return p+v};return{labels:e,datasets:[{label:"P90 (High Risk)",data:o,borderColor:d.p90,backgroundColor:"transparent",borderWidth:2,borderDash:[5,5],fill:!1,tension:.3,pointRadius:0,pointHoverRadius:4},{label:"P75-P90 Range",data:s,borderColor:d.p75,backgroundColor:h(d.p90,l),borderWidth:1,fill:"-1",tension:.3,pointRadius:0,pointHoverRadius:4},{label:"P50 (Median)",data:n,borderColor:d.p50,backgroundColor:h(d.p75,l),borderWidth:2,fill:"-1",tension:.3,pointRadius:0,pointHoverRadius:4},{label:"P25-P50 Range",data:i,borderColor:d.p25,backgroundColor:h(d.p50,l),borderWidth:1,fill:"-1",tension:.3,pointRadius:0,pointHoverRadius:4},{label:"P10 (Low Risk)",data:r,borderColor:d.p10,backgroundColor:h(d.p25,l),borderWidth:2,borderDash:[5,5],fill:"-1",tension:.3,pointRadius:0,pointHoverRadius:4}]}}buildPluginOptions(t){return{legend:{display:!0,position:"top",labels:{color:ve().text,filter:r=>!(r.text||"").includes("Range")}},tooltip:{callbacks:{label:r=>{const i=r.dataset.label||"",n=r.parsed.y;return`${i}: ${this.formatPercent(n)}`}}}}}createAnnotationPlugin(){const t=this._data?.maxBorrowing||65;return{id:"maxBorrowingLine",beforeDraw:e=>{const r=e.ctx,i=e.scales.y,n=e.scales.x;if(!i||!n)return;const s=i.getPixelForValue(t);r.save(),r.beginPath(),r.strokeStyle="#dc2626",r.lineWidth=2,r.setLineDash([10,5]),r.moveTo(n.left,s),r.lineTo(n.right,s),r.stroke(),r.fillStyle="#dc2626",r.font="bold 12px sans-serif",r.textAlign="left",r.fillText(`Max Borrowing (${t}%)`,n.left+5,s-5),r.restore()}}}updateDatasetColors(t){}getChartConfig(){const t=ve(),e={labels:[],datasets:[]},r=this._data?this.buildChartData(this._data):e,i=this._data?.maxBorrowing||65,s=(this._data?Math.max(...this._data.p10,...this._data.p25,...this._data.p50,...this._data.p75,...this._data.p90,this._data.maxBorrowing):65)*1.15,o=Math.ceil(s/5)*5;return{type:"line",data:r,options:{responsive:!0,maintainAspectRatio:!1,interaction:{mode:"index",intersect:!1},plugins:this.buildPluginOptions(i),scales:{x:{title:{display:!0,text:"Year",color:t.text},grid:{color:t.grid},ticks:{color:t.text}},y:{title:{display:!0,text:"Utilization (%)",color:t.text},grid:{color:t.grid},ticks:{color:t.text,callback:l=>this.formatPercent(l)},min:0,suggestedMax:o}}},plugins:[this.createAnnotationPlugin()]}}}customElements.define("sbloc-utilization-chart",hx);class px extends Ct{_title="DISTRIBUTION";_p10=0;_p50=0;_p90=0;_formatter="currency";set title(t){this._title=t,this.updateDisplay()}get title(){return this._title}set p10(t){this._p10=t,this.updateDisplay()}get p10(){return this._p10}set p50(t){this._p50=t,this.updateDisplay()}get p50(){return this._p50}set p90(t){this._p90=t,this.updateDisplay()}get p90(){return this._p90}set formatter(t){this._formatter=t,this.updateDisplay()}get formatter(){return this._formatter}template(){return`
      <div class="spectrum-container">
        <h4 class="spectrum-title" id="title">${this._title}</h4>

        <div class="spectrum-bar-container">
          \x3C!-- Labels above the bar -->
          <div class="label-row">
            <div class="label left">
              <span class="label-text">10TH PERCENTILE</span>
              <span class="label-subtext">(WORST CASE)</span>
            </div>
            <div class="label center">
              <span class="label-text teal">MEDIAN</span>
              <span class="label-subtext">(50TH PERCENTILE)</span>
            </div>
            <div class="label right">
              <span class="label-text">90TH PERCENTILE</span>
              <span class="label-subtext">(BEST CASE)</span>
            </div>
          </div>

          \x3C!-- Gradient bar -->
          <div class="gradient-bar"></div>

          \x3C!-- Value boxes -->
          <div class="value-row">
            <div class="value-box p10" id="p10-box">
              <span id="p10-value">$0</span>
            </div>
            <div class="value-box p50" id="p50-box">
              <span id="p50-value">$0</span>
            </div>
            <div class="value-box p90" id="p90-box">
              <span id="p90-value">$0</span>
            </div>
          </div>
        </div>
      </div>
    `}styles(){return`
      :host {
        display: block;
        max-width: 100%;
      }

      /* Shadow DOM reset - global box-sizing doesn't penetrate */
      *, *::before, *::after {
        box-sizing: border-box;
      }

      .spectrum-container {
        background: var(--surface-primary, #ffffff);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--radius-lg, 8px);
        padding: var(--spacing-lg, 24px);
        transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
      }

      .spectrum-container:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-hover, 0 8px 32px rgba(26, 36, 36, 0.12));
        border-color: var(--color-primary, #0d9488);
      }

      .spectrum-title {
        margin: 0 0 var(--spacing-lg, 24px) 0;
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
        text-align: center;
        letter-spacing: 0.05em;
      }

      .spectrum-bar-container {
        position: relative;
      }

      .label-row {
        display: flex;
        justify-content: space-between;
        margin-bottom: var(--spacing-sm, 8px);
      }

      .label {
        display: flex;
        flex-direction: column;
        align-items: center;
        flex: 1;
      }

      .label.left {
        align-items: flex-start;
      }

      .label.center {
        align-items: center;
      }

      .label.right {
        align-items: flex-end;
      }

      .label-text {
        font-size: var(--font-size-xs, 0.75rem);
        font-weight: 600;
        color: var(--text-secondary, #475569);
        letter-spacing: 0.02em;
      }

      .label-text.teal {
        color: var(--color-primary, #0d9488);
      }

      .label-subtext {
        font-size: var(--font-size-xs, 0.75rem);
        color: var(--text-tertiary, #94a3b8);
        font-weight: 400;
      }

      .gradient-bar {
        height: 8px;
        border-radius: 4px;
        background: linear-gradient(
          to right,
          #f87171 0%,
          #fb923c 25%,
          #fbbf24 50%,
          #a3e635 75%,
          #22c55e 100%
        );
        margin: var(--spacing-md, 16px) 0;
      }

      .value-row {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        position: relative;
      }

      .value-box {
        display: flex;
        align-items: center;
        justify-content: center;
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        border-radius: var(--radius-md, 6px);
        font-weight: 600;
        min-width: 100px;
      }

      .value-box.p10 {
        background: #fecaca;
        color: #dc2626;
      }

      .value-box.p50 {
        background: #ffffff;
        border: 2px solid var(--color-primary, #0d9488);
        color: var(--color-primary, #0d9488);
        padding: var(--spacing-md, 16px) var(--spacing-lg, 24px);
        font-size: var(--font-size-xl, 1.25rem);
        min-width: 140px;
      }

      .value-box.p90 {
        background: #bbf7d0;
        color: #16a34a;
      }

      /* Mobile responsive */
      @media (max-width: 768px) {
        .spectrum-container,
        .spectrum-bar-wrapper,
        .spectrum-values {
          max-width: 100%;
        }

        .spectrum-container {
          padding: var(--spacing-md, 16px);
        }

        .spectrum-title {
          font-size: var(--font-size-xs, 0.75rem);
          margin-bottom: var(--spacing-md, 16px);
        }

        .label-text {
          font-size: 0.6rem;
        }

        .label-subtext {
          font-size: 0.55rem;
        }

        .gradient-bar {
          height: 6px;
          margin: var(--spacing-sm, 8px) 0;
        }

        .value-row {
          flex-wrap: wrap;
          gap: var(--spacing-xs, 4px);
        }

        .value-box {
          min-width: 60px;
          flex: 1;
          padding: var(--spacing-xs, 4px) var(--spacing-sm, 8px);
          font-size: var(--font-size-xs, 0.75rem);
        }

        .value-box.p50 {
          min-width: 80px;
          flex: 1.5;
          padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
          font-size: var(--font-size-base, 1rem);
        }
      }

      @media (max-width: 480px) {
        .spectrum-container {
          padding: var(--spacing-sm, 8px);
        }

        .label-row {
          display: none;
        }

        .value-row {
          flex-direction: column;
          gap: var(--spacing-xs, 4px);
          align-items: stretch;
        }

        .value-box {
          width: 100%;
          min-width: unset;
          font-size: var(--font-size-xs, 0.75rem);
        }

        .value-box.p50 {
          min-width: unset;
          font-size: var(--font-size-sm, 0.875rem);
          order: -1;
        }

        .value-box::before {
          font-size: 0.6rem;
          margin-right: var(--spacing-sm, 8px);
        }

        .value-box.p10::before {
          content: "10th %ile: ";
          font-weight: normal;
        }

        .value-box.p50::before {
          content: "Median: ";
          font-weight: normal;
        }

        .value-box.p90::before {
          content: "90th %ile: ";
          font-weight: normal;
        }
      }
    `}afterRender(){this.updateDisplay()}formatValue(t){return this._formatter==="percent"?`${(t*100).toFixed(1)}%`:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:t>=1e6?"compact":"standard",maximumFractionDigits:t>=1e6?1:0}).format(t)}updateDisplay(){const t=this.$("#title"),e=this.$("#p10-value"),r=this.$("#p50-value"),i=this.$("#p90-value");t&&(t.textContent=this._title),e&&(e.textContent=this.formatValue(this._p10)),r&&(r.textContent=this.formatValue(this._p50)),i&&(i.textContent=this.formatValue(this._p90))}}customElements.define("percentile-spectrum",px);const Cc=80,fx=20;class gx extends Ct{_data=null;set data(t){this._data=t,this.updateDisplay()}get data(){return this._data}template(){return`
      \x3C!-- Hero Header Banner -->
      <div class="hero-banner" id="hero-banner">
        <img src="${ca}" alt="" class="hero-watermark" aria-hidden="true" />
        <div class="hero-icon" id="hero-icon">
          <img src="${ca}" alt="" class="hero-logo" id="hero-logo" />
          <span class="hero-emoji" id="hero-emoji" style="display: none;">ðª</span>
        </div>
        <span class="hero-title" id="hero-title">Analyzing...</span>
      </div>

      \x3C!-- Alert Card -->
      <div class="alert-card" id="alert-card">
        <div class="alert-icon" id="alert-icon"></div>
        <div class="alert-content">
          <div class="alert-title" id="alert-title">Loading...</div>
          <div class="alert-description" id="alert-description"></div>
        </div>
      </div>

      <div class="banner-grid">
        \x3C!-- Strategy Success Card -->
        <div class="metric-card" id="strategy-card">
          <div class="card-accent" id="strategy-accent"></div>
          <div class="card-body">
            <div class="card-header">
              <div class="card-title">
                <span class="title-text">Strategy Success</span>
                <span class="subtitle">BBD SUCCESS RATE</span>
              </div>
              <div class="status-badge" id="strategy-badge">
                <span class="badge-icon" id="strategy-badge-icon"></span>
              </div>
            </div>
            <div class="hero-metric">
              <span class="hero-value" id="bbd-success">--</span>
              <span class="hero-unit" id="bbd-success-unit">%</span>
            </div>
            <div class="hero-label">PROBABILITY OF SUCCESS</div>
            <div class="metrics-grid">
              <div class="metric-item highlight-negative">
                <span class="metric-value" id="vs-sell-success">--</span>
                <span class="metric-label">vs Sell Assets</span>
              </div>
              <div class="metric-item">
                <span class="metric-value" id="sell-success-rate">--</span>
                <span class="metric-label">Sell Success Rate</span>
              </div>
              <div class="metric-item">
                <span class="metric-value" id="median-utilization">--</span>
                <span class="metric-label">Median Utilization</span>
              </div>
              <div class="metric-item">
                <span class="metric-value" id="years-above-70">--</span>
                <span class="metric-label">Years Above 70%</span>
              </div>
            </div>
            <div class="card-footer" id="strategy-footer">
              <span class="footer-icon" id="strategy-footer-icon"></span>
              <span class="footer-text" id="strategy-footer-text">Target: 80%</span>
            </div>
          </div>
        </div>

        \x3C!-- Portfolio Growth Card -->
        <div class="metric-card" id="growth-card">
          <div class="card-accent accent-blue"></div>
          <div class="card-body">
            <div class="card-header">
              <div class="card-title">
                <span class="title-text">Portfolio Growth</span>
                <span class="subtitle">IMPLIED CAGR (MEDIAN)</span>
              </div>
              <div class="status-badge badge-blue">
                <span class="badge-icon icon-chart"></span>
              </div>
            </div>
            <div class="hero-metric">
              <span class="hero-value value-blue" id="cagr">--</span>
              <span class="hero-unit unit-blue" id="cagr-unit">%</span>
            </div>
            <div class="hero-label">COMPOUND ANNUAL GROWTH RATE</div>
            <div class="metrics-grid">
              <div class="metric-item">
                <span class="metric-value" id="starting-value">--</span>
                <span class="metric-label">Starting Value</span>
              </div>
              <div class="metric-item">
                <span class="metric-value" id="median-terminal">--</span>
                <span class="metric-label">Median Terminal</span>
              </div>
              <div class="metric-item highlight-positive">
                <span class="metric-value" id="vs-sell-terminal">--</span>
                <span class="metric-label">vs Sell Assets</span>
              </div>
              <div class="metric-item">
                <span class="metric-value" id="sell-terminal">--</span>
                <span class="metric-label">Sell Terminal</span>
              </div>
            </div>
            <div class="card-footer">
              <span class="footer-icon icon-chart-small"></span>
              <span class="footer-text">P10 outcome: <span id="p10-outcome" class="p10-value">--</span></span>
            </div>
          </div>
        </div>

        \x3C!-- Leverage Safety Card -->
        <div class="metric-card" id="safety-card">
          <div class="card-accent" id="safety-accent"></div>
          <div class="card-body">
            <div class="card-header">
              <div class="card-title">
                <span class="title-text">Leverage Safety</span>
                <span class="subtitle">MARGIN CALL RISK</span>
              </div>
              <div class="status-badge" id="safety-badge">
                <span class="badge-icon" id="safety-badge-icon"></span>
              </div>
            </div>
            <div class="hero-metric">
              <span class="hero-value" id="margin-call-prob">--</span>
              <span class="hero-unit" id="margin-call-unit">%</span>
            </div>
            <div class="hero-label">MARGIN CALL PROBABILITY</div>
            <div class="metrics-grid">
              <div class="metric-item">
                <span class="metric-value" id="peak-utilization">--</span>
                <span class="metric-label">Peak Utilization (P90)</span>
              </div>
              <div class="metric-item">
                <span class="metric-value" id="safety-buffer">--</span>
                <span class="metric-label">Safety Buffer (P10)</span>
              </div>
              <div class="metric-item">
                <span class="metric-value" id="median-util-safety">--</span>
                <span class="metric-label">Median Utilization</span>
              </div>
              <div class="metric-item">
                <span class="metric-value" id="years-above-70-safety">--</span>
                <span class="metric-label">Years Above 70%</span>
              </div>
            </div>
            <div class="card-footer">
              <span class="footer-icon icon-calendar"></span>
              <span class="footer-text">Most dangerous year: <span id="dangerous-year" class="danger-value">--</span></span>
            </div>
          </div>
        </div>
      </div>
    `}styles(){return`
      :host {
        display: block;
        max-width: 100%;
      }

      /* Shadow DOM reset - global box-sizing doesn't penetrate */
      *, *::before, *::after {
        box-sizing: border-box;
      }

      /* ============================================
         Hero Banner Styles
         ============================================ */
      .hero-banner {
        border-radius: var(--radius-lg, 12px);
        padding: var(--spacing-xl, 32px) var(--spacing-lg, 24px);
        display: flex;
        align-items: center;
        justify-content: center;
        gap: var(--spacing-md, 16px);
        margin-bottom: var(--spacing-lg, 24px);
        transition: background-color 0.3s ease;
        position: relative;
        overflow: hidden;
      }

      /* Shimmer effect overlay */
      .hero-banner::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.12), transparent);
        animation: shimmerGlow 2s infinite;
      }

      @keyframes shimmerGlow {
        0% { transform: translateX(-100%); }
        50% { transform: translateX(0); }
        100% { transform: translateX(100%); }
      }

      .hero-banner.status-success {
        background: linear-gradient(135deg, #2D9B8A 0%, #247A6D 100%);
      }

      .hero-banner.status-warning {
        background: linear-gradient(135deg, #F5A623 0%, #E09000 100%);
      }

      .hero-icon {
        position: relative;
        z-index: 2;
        width: 48px;
        height: 48px;
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .hero-logo {
        width: 48px;
        height: 48px;
        filter: brightness(0) invert(1);
      }

      .hero-emoji {
        font-size: 48px;
        line-height: 1;
      }

      .hero-watermark {
        position: absolute;
        right: -40px;
        top: 50%;
        transform: translateY(-50%);
        width: 200px;
        height: 200px;
        opacity: 0.08;
        filter: brightness(0) invert(1);
        z-index: 0;
        pointer-events: none;
      }

      /* Rocket animation - simple vertical bounce */
      @keyframes rocketBounce {
        0%, 100% { transform: translateY(0); }
        50% { transform: translateY(-8px); }
      }

      /* Flexing arm animation - scale and rotate */
      @keyframes flexBounce {
        0%, 100% { transform: scale(1) rotate(0deg); }
        50% { transform: scale(1.15) rotate(-5deg); }
      }

      .hero-banner.status-success .hero-icon {
        animation: rocketBounce 1.5s ease-in-out infinite;
      }

      .hero-banner.status-warning .hero-icon {
        animation: flexBounce 1.5s ease-in-out infinite;
      }

      .hero-title {
        font-size: 1.75rem;
        font-weight: 700;
        color: white;
        text-shadow: 0 1px 2px rgba(0, 0, 0, 0.1);
        position: relative;
        z-index: 1;
      }

      .hero-title .brand {
        font-weight: 800;
      }

      .hero-title .suffix {
        font-weight: 500;
        opacity: 0.7;
      }

      /* ============================================
         Alert Card Styles
         ============================================ */
      .alert-card {
        background: var(--surface-primary, #ffffff);
        border-radius: var(--radius-lg, 8px);
        padding: var(--spacing-md, 16px) var(--spacing-lg, 24px);
        display: flex;
        align-items: center;
        gap: var(--spacing-md, 16px);
        margin-bottom: var(--spacing-lg, 24px);
        border-left: 4px solid transparent;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.08);
        border: 1px solid var(--border-color, #e2e8f0);
        border-left-width: 4px;
        transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
      }

      .alert-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-hover, 0 8px 32px rgba(26, 36, 36, 0.12));
      }

      .alert-card.alert-success {
        border-left-color: #22c55e;
      }

      .alert-card.alert-warning {
        border-left-color: #F5A623;
      }

      .alert-icon {
        width: 40px;
        height: 40px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
      }

      .alert-icon.icon-success {
        background: #dcfce7;
      }

      .alert-icon.icon-success::after {
        content: '';
        width: 16px;
        height: 16px;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2322c55e'%3E%3Cpath d='M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z'/%3E%3C/svg%3E");
        background-size: contain;
      }

      .alert-icon.icon-warning {
        background: #fef3c7;
      }

      .alert-icon.icon-warning::after {
        content: '';
        width: 16px;
        height: 16px;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23F5A623'%3E%3Cpath d='M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z'/%3E%3C/svg%3E");
        background-size: contain;
      }

      .alert-content {
        flex: 1;
      }

      .alert-title {
        font-size: var(--font-size-lg, 1.125rem);
        font-weight: 600;
        margin-bottom: 2px;
      }

      .alert-title.title-success {
        color: #22c55e;
      }

      .alert-title.title-warning {
        color: #F5A623;
      }

      .alert-description {
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #475569);
        line-height: 1.4;
      }

      /* ============================================
         Card Grid Styles
         ============================================ */
      .banner-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: var(--spacing-lg, 24px);
      }

      .metric-card {
        background: var(--surface-primary, #ffffff);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--radius-lg, 8px);
        overflow: hidden;
        display: flex;
        flex-direction: column;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
        transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
      }

      .metric-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-hover, 0 8px 32px rgba(26, 36, 36, 0.12));
        border-color: var(--color-primary, #0d9488);
      }

      .card-accent {
        height: 4px;
        width: 100%;
      }

      .card-accent.accent-success {
        background: #22c55e;
      }

      .card-accent.accent-warning {
        background: #F5A623;
      }

      .card-accent.accent-blue {
        background: #4A90D9;
      }

      .card-body {
        padding: var(--spacing-lg, 24px);
        display: flex;
        flex-direction: column;
        flex: 1;
      }

      .card-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: var(--spacing-md, 16px);
      }

      .card-title {
        display: flex;
        flex-direction: column;
      }

      .title-text {
        font-size: var(--font-size-lg, 1.125rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .subtitle {
        font-size: var(--font-size-xs, 0.75rem);
        color: var(--text-tertiary, #94a3b8);
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-top: 2px;
      }

      /* ============================================
         Status Badge Styles
         ============================================ */
      .status-badge {
        width: 32px;
        height: 32px;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        flex-shrink: 0;
      }

      .status-badge.badge-success {
        background: #dcfce7;
      }

      .status-badge.badge-warning {
        background: #fef3c7;
      }

      .status-badge.badge-blue {
        background: #dbeafe;
      }

      .badge-icon {
        width: 16px;
        height: 16px;
        display: block;
      }

      .badge-icon.icon-check::after {
        content: '';
        display: block;
        width: 16px;
        height: 16px;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2322c55e'%3E%3Cpath d='M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z'/%3E%3C/svg%3E");
        background-size: contain;
      }

      .badge-icon.icon-warning::after {
        content: '';
        display: block;
        width: 16px;
        height: 16px;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%23F5A623'%3E%3Cpath d='M1 21h22L12 2 1 21zm12-3h-2v-2h2v2zm0-4h-2v-4h2v4z'/%3E%3C/svg%3E");
        background-size: contain;
      }

      .badge-icon.icon-chart::after {
        content: '';
        display: block;
        width: 16px;
        height: 16px;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%234A90D9'%3E%3Cpath d='M3.5 18.5l6-6 4 4L22 6.92V10h2V4h-6v2h3.08l-7.58 7.58-4-4L2 17.5z'/%3E%3C/svg%3E");
        background-size: contain;
      }

      /* ============================================
         Hero Metric Styles
         ============================================ */
      .hero-metric {
        display: flex;
        align-items: baseline;
        margin-bottom: var(--spacing-xs, 4px);
      }

      .hero-value {
        font-size: 2.5rem;
        font-weight: 700;
        color: var(--text-primary, #1e293b);
        word-break: break-word;
        line-height: 1;
      }

      .hero-unit {
        font-size: var(--font-size-lg, 1.125rem);
        font-weight: 500;
        color: var(--text-secondary, #475569);
        margin-left: 2px;
      }

      /* Hero value color modifiers */
      .hero-value.value-success,
      .hero-unit.unit-success {
        color: #22c55e;
      }

      .hero-value.value-warning,
      .hero-unit.unit-warning {
        color: #F5A623;
      }

      .hero-value.value-blue,
      .hero-unit.unit-blue {
        color: #4A90D9;
      }

      .hero-label {
        font-size: var(--font-size-xs, 0.75rem);
        color: var(--text-tertiary, #94a3b8);
        text-transform: uppercase;
        letter-spacing: 0.05em;
        margin-bottom: var(--spacing-md, 16px);
      }

      /* ============================================
         Metrics Grid Styles
         ============================================ */
      .metrics-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        padding-top: var(--spacing-md, 16px);
        border-top: 1px solid var(--border-color-light, #f1f5f9);
      }

      .metric-item {
        display: flex;
        flex-direction: column;
      }

      .metric-value {
        font-size: var(--font-size-base, 1rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .metric-label {
        font-size: var(--font-size-xs, 0.75rem);
        color: var(--text-tertiary, #94a3b8);
      }

      .highlight-negative .metric-value {
        color: var(--color-danger, #ef4444);
      }

      .highlight-positive .metric-value {
        color: var(--color-success, #22c55e);
      }

      /* ============================================
         Card Footer Styles
         ============================================ */
      .card-footer {
        margin-top: var(--spacing-md, 16px);
        padding: var(--spacing-sm, 8px) var(--spacing-md, 12px);
        background: var(--surface-secondary, #f8fafc);
        border-radius: var(--radius-md, 6px);
        display: flex;
        align-items: center;
        gap: var(--spacing-xs, 4px);
      }

      .footer-icon {
        width: 14px;
        height: 14px;
        flex-shrink: 0;
      }

      .footer-icon.icon-clock::after {
        content: '';
        display: block;
        width: 14px;
        height: 14px;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2394a3b8'%3E%3Cpath d='M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8zm.5-13H11v6l5.25 3.15.75-1.23-4.5-2.67z'/%3E%3C/svg%3E");
        background-size: contain;
      }

      .footer-icon.icon-arrow-up::after {
        content: '';
        display: block;
        width: 14px;
        height: 14px;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2322c55e'%3E%3Cpath d='M7 14l5-5 5 5z'/%3E%3C/svg%3E");
        background-size: contain;
      }

      .footer-icon.icon-chart-small::after {
        content: '';
        display: block;
        width: 14px;
        height: 14px;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2394a3b8'%3E%3Cpath d='M3.5 18.5l6-6 4 4L22 6.92V10h2V4h-6v2h3.08l-7.58 7.58-4-4L2 17.5z'/%3E%3C/svg%3E");
        background-size: contain;
      }

      .footer-icon.icon-calendar::after {
        content: '';
        display: block;
        width: 14px;
        height: 14px;
        background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='%2394a3b8'%3E%3Cpath d='M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM9 10H7v2h2v-2zm4 0h-2v2h2v-2zm4 0h-2v2h2v-2z'/%3E%3C/svg%3E");
        background-size: contain;
      }

      .footer-text {
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-tertiary, #94a3b8);
      }

      .footer-text .gap-value {
        color: var(--color-danger, #ef4444);
        font-weight: 600;
      }

      .footer-text .success-value {
        color: var(--color-success, #22c55e);
        font-weight: 600;
      }

      .p10-value {
        color: var(--color-success, #22c55e);
        font-weight: 600;
      }

      .p10-value.negative {
        color: var(--color-danger, #ef4444);
      }

      .danger-value {
        color: var(--color-danger, #ef4444);
        font-weight: 600;
      }

      /* ============================================
         Mobile Responsive Styles
         ============================================ */
      @media (max-width: 1024px) {
        .banner-grid {
          grid-template-columns: 1fr;
          gap: var(--spacing-md, 16px);
        }

        .hero-banner {
          padding: var(--spacing-lg, 24px);
        }

        .hero-icon {
          width: 40px;
          height: 40px;
        }

        .hero-logo {
          width: 40px;
          height: 40px;
        }

        .hero-emoji {
          font-size: 40px;
        }

        .hero-watermark {
          width: 160px;
          height: 160px;
          right: -30px;
        }

        .hero-title {
          font-size: 1.5rem;
        }
      }

      @media (max-width: 768px) {
        .banner-container,
        .hero-banner,
        .banner-grid,
        .hero-card {
          max-width: 100%;
          overflow-x: hidden;
        }

        .banner-grid {
          gap: var(--spacing-sm, 8px);
        }

        .hero-banner {
          padding: var(--spacing-md, 16px);
          margin-bottom: var(--spacing-md, 16px);
        }

        .hero-icon {
          width: 36px;
          height: 36px;
        }

        .hero-logo {
          width: 36px;
          height: 36px;
        }

        .hero-emoji {
          font-size: 36px;
        }

        .hero-watermark {
          width: 120px;
          height: 120px;
          right: -20px;
          opacity: 0.06;
        }

        .hero-title {
          font-size: 1.25rem;
        }

        .alert-card {
          padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
          margin-bottom: var(--spacing-md, 16px);
        }

        .alert-icon {
          width: 32px;
          height: 32px;
        }

        .alert-title {
          font-size: var(--font-size-base, 1rem);
        }

        .alert-description {
          font-size: var(--font-size-xs, 0.75rem);
        }

        .card-body {
          padding: var(--spacing-md, 16px);
        }

        .card-header {
          margin-bottom: var(--spacing-sm, 8px);
        }

        .title-text {
          font-size: var(--font-size-base, 1rem);
        }

        .subtitle {
          font-size: 0.65rem;
        }

        .hero-value {
          font-size: 2rem;
        }

        .hero-label {
          font-size: 0.65rem;
          margin-bottom: var(--spacing-sm, 8px);
        }

        .metrics-grid {
          padding-top: var(--spacing-sm, 8px);
          gap: var(--spacing-xs, 4px) var(--spacing-sm, 8px);
        }

        .metric-value {
          font-size: var(--font-size-sm, 0.875rem);
        }

        .metric-label {
          font-size: 0.65rem;
        }

        .card-footer {
          margin-top: var(--spacing-sm, 8px);
          padding: var(--spacing-xs, 4px) var(--spacing-sm, 8px);
        }

        .footer-text {
          font-size: var(--font-size-xs, 0.75rem);
        }
      }

      @media (max-width: 480px) {
        .hero-banner {
          flex-direction: column;
          gap: var(--spacing-sm, 8px);
          text-align: center;
        }

        .hero-icon {
          width: 32px;
          height: 32px;
        }

        .hero-logo {
          width: 32px;
          height: 32px;
        }

        .hero-emoji {
          font-size: 32px;
        }

        .hero-watermark {
          display: none;
        }

        .hero-value {
          font-size: 1.75rem;
        }

        .metrics-grid {
          grid-template-columns: 1fr 1fr;
        }
      }

      /* ============================================
         Widescreen Responsive Styles
         ============================================ */

      /* Large desktop (1440px+) - enhanced spacing */
      @media (min-width: 1440px) {
        .banner-grid {
          gap: var(--spacing-fluid-lg, clamp(24px, 3vw, 40px));
        }

        .metric-card {
          padding: var(--spacing-fluid-lg, clamp(24px, 3vw, 40px));
        }

        .hero-value {
          font-size: var(--font-size-fluid-hero, clamp(2rem, 1.5rem + 2vw, 3.5rem));
        }
      }

      /* Full HD widescreen (1920px+) - max-width for content */
      @media (min-width: 1920px) {
        .banner-grid {
          max-width: var(--content-max-width-xl, 2340px);
          margin-left: auto;
          margin-right: auto;
        }

        .metric-card {
          padding: var(--spacing-xl, 32px);
        }

        .hero-value {
          font-size: 3rem;
        }

        .metric-label {
          font-size: var(--font-size-lg, 1.25rem);
        }
      }

      /* Ultrawide/4K (2560px+) - stricter constraints */
      @media (min-width: 2560px) {
        .banner-grid {
          max-width: 1600px;
        }
      }
    `}afterRender(){this.updateDisplay()}updateDisplay(){if(!this._data)return;const t=ft=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(ft),e=(ft,wt=1)=>`${ft.toFixed(wt)}%`,r=this._data.bbdSuccessRate>=Cc,i=this._data.marginCallProbability<=fx,n=this.$("#hero-banner"),s=this.$("#hero-title"),o=this.$("#hero-logo"),l=this.$("#hero-emoji");n&&(n.classList.remove("status-success","status-warning"),n.classList.add(r?"status-success":"status-warning")),s&&(s.innerHTML=r?'<span class="brand">eVelo</span><span class="suffix">city</span> Unlocked!':"Not ready yet, but keep it going!"),o&&(o.style.display=r?"block":"none"),l&&(l.style.display=r?"none":"block");const d=this.$("#alert-card"),h=this.$("#alert-icon"),p=this.$("#alert-title"),m=this.$("#alert-description");if(d&&(d.classList.remove("alert-success","alert-warning"),d.classList.add(r?"alert-success":"alert-warning")),h&&(h.classList.remove("icon-success","icon-warning"),h.classList.add(r?"icon-success":"icon-warning")),p&&(p.classList.remove("title-success","title-warning"),p.classList.add(r?"title-success":"title-warning"),p.textContent=r?"Strategy On Track":"Monitor Closely"),m){const ft=this._data.timeHorizon||30;if(r){const wt=this._data.marginCallProbability>10?` Note: ${this._data.marginCallProbability.toFixed(1)}% margin call probability - consider a cash buffer.`:"";m.textContent=`Your ${ft}-year strategy shows strong fundamentals with ${this._data.bbdSuccessRate.toFixed(1)}% success rate.${wt}`}else m.textContent=`${this._data.bbdSuccessRate.toFixed(1)}% success rate is below 80% target. ${this._data.marginCallProbability.toFixed(1)}% margin call probability adds risk. Consider reducing withdrawals or adjusting leverage.`}const v=this.$("#strategy-accent"),g=this.$("#strategy-badge"),k=this.$("#strategy-badge-icon");this.$("#strategy-footer");const S=this.$("#strategy-footer-icon"),D=this.$("#strategy-footer-text");if(v&&(v.classList.remove("accent-success","accent-warning"),v.classList.add(r?"accent-success":"accent-warning")),g&&(g.classList.remove("badge-success","badge-warning"),g.classList.add(r?"badge-success":"badge-warning")),k&&(k.classList.remove("icon-check","icon-warning"),k.classList.add(r?"icon-check":"icon-warning")),S&&(S.classList.remove("icon-clock","icon-arrow-up"),S.classList.add(r?"icon-arrow-up":"icon-clock")),D)if(r)D.innerHTML='Target: <span class="success-value">80% exceeded</span>';else{const ft=(Cc-this._data.bbdSuccessRate).toFixed(1);D.innerHTML=`Target: 80% Â· Gap: <span class="gap-value">${ft}%</span>`}const M=this.$("#bbd-success"),I=this.$("#bbd-success-unit"),W=this.$("#vs-sell-success"),H=this.$("#sell-success-rate"),X=this.$("#median-utilization"),q=this.$("#years-above-70");if(M&&(M.textContent=this._data.bbdSuccessRate.toFixed(1),M.classList.remove("value-success","value-warning"),M.classList.add(r?"value-success":"value-warning")),I&&(I.classList.remove("unit-success","unit-warning"),I.classList.add(r?"unit-success":"unit-warning")),W){const ft=this._data.bbdSuccessRate-this._data.sellSuccessRate;W.textContent=ft>=0?`+${ft.toFixed(1)}`:ft.toFixed(1)}H&&(H.textContent=e(this._data.sellSuccessRate)),X&&(X.textContent=e(this._data.medianUtilization)),q&&(q.textContent=this._data.yearsAbove70Pct.toFixed(1));const w=this.$("#cagr"),C=this.$("#starting-value"),L=this.$("#median-terminal"),Y=this.$("#vs-sell-terminal"),K=this.$("#sell-terminal"),tt=this.$("#p10-outcome");if(w&&(w.textContent=(this._data.cagr*100).toFixed(1)),C&&(C.textContent=t(this._data.startingValue)),L&&(L.textContent=t(this._data.medianTerminal)),Y){const ft=this._data.medianTerminal-this._data.sellTerminal,wt=(ft/this._data.sellTerminal*100).toFixed(1);Y.textContent=`+${t(ft)} (${wt}%)`}K&&(K.textContent=t(this._data.sellTerminal)),tt&&(tt.textContent=t(this._data.p10Outcome),tt.classList.toggle("negative",this._data.p10Outcome<0));const ht=this.$("#safety-accent"),pt=this.$("#safety-badge"),lt=this.$("#safety-badge-icon");ht&&(ht.classList.remove("accent-success","accent-warning"),ht.classList.add(i?"accent-success":"accent-warning")),pt&&(pt.classList.remove("badge-success","badge-warning"),pt.classList.add(i?"badge-success":"badge-warning")),lt&&(lt.classList.remove("icon-check","icon-warning"),lt.classList.add(i?"icon-check":"icon-warning"));const G=this.$("#margin-call-prob"),Z=this.$("#margin-call-unit"),J=this.$("#peak-utilization"),bt=this.$("#safety-buffer"),dt=this.$("#median-util-safety"),gt=this.$("#years-above-70-safety"),at=this.$("#dangerous-year");G&&(G.textContent=this._data.marginCallProbability.toFixed(1),G.classList.remove("value-success","value-warning"),G.classList.add(i?"value-success":"value-warning")),Z&&(Z.classList.remove("unit-success","unit-warning"),Z.classList.add(i?"unit-success":"unit-warning")),J&&(J.textContent=e(this._data.peakUtilizationP90)),bt&&(bt.textContent=e(this._data.safetyBufferP10)),dt&&(dt.textContent=e(this._data.medianUtilization)),gt&&(gt.textContent=this._data.yearsAbove70Pct.toFixed(1)),at&&(at.textContent=this._data.mostDangerousYear.toString())}}customElements.define("key-metrics-banner",gx);class mx extends Ct{_data=null;_portfolioAssets=[];donutChart=null;set data(t){this._data=t,this.updateDisplay()}get data(){return this._data}set portfolioAssets(t){this._portfolioAssets=t,this.updatePortfolioVisualization()}get portfolioAssets(){return this._portfolioAssets}template(){return`
      <div class="summary-card">
        \x3C!-- Portfolio Composition Section -->
        <div class="portfolio-section">
          <div class="card-header">
            <svg class="header-icon" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"></circle>
              <path d="M12 2a10 10 0 0 1 10 10"></path>
            </svg>
            <div class="header-text">
              <span class="header-title">Portfolio Composition</span>
              <span class="header-subtitle" id="asset-count">0 Assets</span>
            </div>
          </div>

          <div class="portfolio-content">
            <div class="donut-container">
              <canvas id="summary-donut"></canvas>
              <div class="donut-center" id="donut-center">0<br><span>ASSETS</span></div>
            </div>
            <div class="asset-bars-list" id="asset-bars">
              \x3C!-- Populated dynamically -->
            </div>
          </div>
        </div>

        \x3C!-- Parameter Summary Section -->
        <div class="param-section">
          <div class="param-grid">
            <div class="param-item">
              <span class="param-label">STARTING PORTFOLIO</span>
              <span class="param-value" id="starting-portfolio">--</span>
            </div>
            <div class="param-item">
              <span class="param-label">TIME HORIZON</span>
              <span class="param-value" id="time-horizon">--</span>
            </div>
            <div class="param-item">
              <span class="param-label">ANNUAL WITHDRAWAL</span>
              <span class="param-value" id="annual-withdrawal">--</span>
            </div>
            <div class="param-item">
              <span class="param-label">WITHDRAWAL GROWTH</span>
              <span class="param-value" id="withdrawal-growth">--</span>
            </div>
            <div class="param-item">
              <span class="param-label">SBLOC INTEREST RATE</span>
              <span class="param-value" id="sbloc-interest">--</span>
            </div>
            <div class="param-item">
              <span class="param-label">MAX BORROWING</span>
              <span class="param-value" id="max-borrowing">--</span>
            </div>
            <div class="param-item">
              <span class="param-label">MAINTENANCE MARGIN</span>
              <span class="param-value" id="maintenance-margin">--</span>
            </div>
            <div class="param-item">
              <span class="param-label">SIMULATIONS RUN</span>
              <span class="param-value" id="simulations-run">--</span>
            </div>
          </div>
        </div>
      </div>
    `}styles(){return`
      :host {
        display: block;
        max-width: 100%;
      }

      /* Shadow DOM reset - global box-sizing doesn't penetrate */
      *, *::before, *::after {
        box-sizing: border-box;
      }

      .summary-card {
        background: var(--surface-primary, #ffffff);
        border: 1px solid #99f6e4;
        border-radius: var(--radius-lg, 12px);
        overflow: hidden;
        transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
      }

      .summary-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-hover, 0 8px 32px rgba(26, 36, 36, 0.12));
        border-color: var(--color-primary, #0d9488);
      }

      /* Portfolio Section */
      .portfolio-section {
        background: #f0fdfa;
        padding: var(--spacing-lg, 24px);
        padding-bottom: var(--spacing-md, 16px);
      }

      .card-header {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
        margin-bottom: var(--spacing-lg, 24px);
      }

      .header-icon {
        width: 32px;
        height: 32px;
        padding: 6px;
        background: var(--color-primary, #0d9488);
        border-radius: var(--radius-md, 8px);
        color: white;
      }

      .header-text {
        flex: 1;
      }

      .header-title {
        display: block;
        font-weight: 600;
        font-size: var(--font-size-lg, 1.125rem);
        color: #1e293b; /* Force dark text on light accent background */
      }

      .header-subtitle {
        display: block;
        font-size: var(--font-size-sm, 0.875rem);
        color: #64748b; /* Force gray text on light accent background */
      }

      .portfolio-content {
        display: flex;
        gap: var(--spacing-xl, 32px);
        align-items: flex-start;
      }

      .donut-container {
        position: relative;
        width: 120px;
        height: 120px;
        flex-shrink: 0;
      }

      #summary-donut {
        width: 100%;
        height: 100%;
      }

      .donut-center {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        font-size: var(--font-size-lg, 1.125rem);
        font-weight: 700;
        color: #0d9488; /* Force teal on light accent background */
        line-height: 1.2;
        pointer-events: none;
      }

      .donut-center span {
        display: block;
        font-size: var(--font-size-xs, 0.75rem);
        font-weight: 600;
        color: #64748b; /* Force gray text on light accent background */
        letter-spacing: 0.05em;
      }

      .asset-bars-list {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: var(--spacing-xs, 4px);
      }

      .asset-bar-row {
        position: relative;
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
        height: 32px;
        padding: 0 var(--spacing-md, 16px);
        border-radius: var(--radius-sm, 4px);
        overflow: hidden;
        background: white;
      }

      .asset-bar-row::before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: var(--bar-width, 0%);
        background: var(--bar-color, #0d9488);
        opacity: 0.2;
        border-radius: var(--radius-sm, 4px);
        z-index: 0;
        transition: width 0.6s cubic-bezier(0.4, 0, 0.2, 1);
      }

      .asset-bar-swatch {
        width: 14px;
        height: 14px;
        border-radius: var(--radius-xs, 2px);
        flex-shrink: 0;
        z-index: 1;
      }

      .asset-bar-name {
        flex: 1;
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 500;
        color: #1e293b; /* Force dark text on light accent background */
        z-index: 1;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .asset-bar-percent {
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 600;
        color: #0d9488; /* Force teal on light accent background */
        z-index: 1;
        min-width: 50px;
        text-align: right;
      }

      /* Parameter Section */
      .param-section {
        background: var(--surface-primary, #ffffff);
        padding: var(--spacing-lg, 24px);
        border-top: 1px solid #e2f8f5;
      }

      .param-grid {
        display: grid;
        grid-template-columns: repeat(2, 1fr);
        gap: var(--spacing-md, 16px) var(--spacing-xl, 32px);
      }

      .param-item {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-left: var(--spacing-sm, 8px);
        border-left: 3px solid var(--color-primary, #0d9488);
        min-width: 0; /* Allow flex item to shrink below content size */
        gap: var(--spacing-xs, 4px);
      }

      .param-label {
        font-size: var(--font-size-xs, 0.75rem);
        font-weight: 500;
        color: var(--text-secondary, #475569);
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      .param-value {
        font-size: var(--font-size-lg, 1.125rem);
        font-weight: 600;
        color: var(--color-primary, #0d9488);
        text-align: right;
        word-break: break-word;
        flex-shrink: 0;
      }

      /* Empty state for portfolio */
      .portfolio-empty {
        display: flex;
        align-items: center;
        justify-content: center;
        height: 120px;
        color: var(--text-tertiary, #94a3b8);
        font-size: var(--font-size-sm, 0.875rem);
        font-style: italic;
      }

      /* Mobile responsive */
      @media (max-width: 768px) {
        .portfolio-section,
        .portfolio-content,
        .params-section {
          max-width: 100%;
          overflow-x: hidden;
        }

        .portfolio-section {
          padding: var(--spacing-md, 16px);
        }

        .card-header {
          margin-bottom: var(--spacing-md, 16px);
        }

        .header-title {
          font-size: var(--font-size-base, 1rem);
        }

        .portfolio-content {
          flex-direction: row;
          align-items: flex-start;
          gap: var(--spacing-md, 16px);
        }

        .donut-container {
          width: 80px;
          height: 80px;
        }

        .donut-center {
          font-size: var(--font-size-sm, 0.875rem);
        }

        .donut-center span {
          font-size: 0.6rem;
        }

        .asset-bars-list {
          flex: 1;
        }

        .asset-bar-row {
          height: 26px;
          padding: 0 var(--spacing-sm, 8px);
        }

        .asset-bar-swatch {
          width: 10px;
          height: 10px;
        }

        .asset-bar-name {
          font-size: var(--font-size-xs, 0.75rem);
        }

        .asset-bar-percent {
          font-size: var(--font-size-xs, 0.75rem);
          min-width: 40px;
        }

        .param-section {
          padding: var(--spacing-md, 16px);
        }

        .param-grid {
          grid-template-columns: 1fr 1fr;
          gap: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        }

        .param-item {
          padding: var(--spacing-xs, 4px);
          padding-left: var(--spacing-xs, 4px);
          border-left-width: 2px;
        }

        .param-label {
          font-size: 0.6rem;
        }

        .param-value {
          font-size: var(--font-size-sm, 0.875rem);
        }
      }

      @media (max-width: 480px) {
        .portfolio-content {
          flex-direction: column;
          align-items: center;
        }

        .donut-container {
          width: 100px;
          height: 100px;
          margin-bottom: var(--spacing-sm, 8px);
        }

        .donut-center {
          font-size: var(--font-size-base, 1rem);
        }

        .asset-bars-list {
          width: 100%;
        }

        .param-grid {
          grid-template-columns: 1fr;
          gap: var(--spacing-xs, 4px);
        }
      }

      /* Print styles */
      @media print {
        .summary-card {
          break-inside: avoid;
        }
      }

      /* Dark mode styles */
      :host-context([data-theme="dark"]) .summary-card {
        background: var(--surface-secondary, #1e293b);
        border-color: #1f4a4a;
      }

      :host-context([data-theme="dark"]) .portfolio-section {
        background: #132f2f;
      }

      :host-context([data-theme="dark"]) .header-title {
        color: var(--text-primary, #f1f5f9);
      }

      :host-context([data-theme="dark"]) .header-subtitle {
        color: var(--text-secondary, #94a3b8);
      }

      :host-context([data-theme="dark"]) .donut-center {
        color: var(--color-primary, #14b8a6);
      }

      :host-context([data-theme="dark"]) .donut-center span {
        color: var(--text-secondary, #94a3b8);
      }

      :host-context([data-theme="dark"]) .asset-bar-row {
        background: #1a3838;
      }

      :host-context([data-theme="dark"]) .asset-bar-name {
        color: var(--text-primary, #f1f5f9);
      }

      :host-context([data-theme="dark"]) .asset-bar-percent {
        color: var(--color-primary, #14b8a6);
      }

      :host-context([data-theme="dark"]) .param-section {
        background: var(--surface-secondary, #1e293b);
        border-top-color: #1f4a4a;
      }
    `}disconnectedCallback(){this.donutChart&&(this.donutChart.destroy(),this.donutChart=null),super.disconnectedCallback()}afterRender(){Ve.register(fa,vn),this.initializeDonutChart(),this.updateDisplay(),this.updatePortfolioVisualization()}initializeDonutChart(){const t=this.$("#summary-donut");t&&(this.donutChart=new Ve(t,{type:"doughnut",data:{labels:[],datasets:[{data:[],backgroundColor:[],borderColor:"#ffffff",borderWidth:3}]},options:{responsive:!0,maintainAspectRatio:!0,cutout:"65%",animation:{duration:800,easing:"easeOutQuart"},plugins:{legend:{display:!1},tooltip:{callbacks:{label:e=>{const r=e.raw;return`${e.label}: ${r.toFixed(1)}%`}}}}}}))}updatePortfolioVisualization(){const t=this.$("#asset-bars"),e=this.$("#asset-count"),r=this.$("#donut-center");if(!t)return;const i=this._portfolioAssets,n=i.length;if(e&&(e.textContent=`${n} Asset${n!==1?"s":""}`),r&&(r.innerHTML=`${n}<br><span>ASSETS</span>`),n===0){t.innerHTML='<div class="portfolio-empty">No assets selected</div>',this.donutChart&&(this.donutChart.data.labels=[],this.donutChart.data.datasets[0].data=[],this.donutChart.data.datasets[0].backgroundColor=[],this.donutChart.update());return}const s=[...i].sort((l,d)=>d.weight-l.weight),o=s.length>0?s[0].weight:100;t.innerHTML=s.map(l=>`
        <div class="asset-bar-row" style="--bar-width: ${l.weight/o*100}%; --bar-color: ${l.color};">
          <div class="asset-bar-swatch" style="background-color: ${l.color}"></div>
          <span class="asset-bar-name">${l.name}</span>
          <span class="asset-bar-percent">${l.weight.toFixed(1)}%</span>
        </div>
      `).join(""),this.donutChart&&(this.donutChart.data.labels=s.map(l=>l.name),this.donutChart.data.datasets[0].data=s.map(l=>l.weight),this.donutChart.data.datasets[0].backgroundColor=s.map(l=>l.color),this.donutChart.update())}updateDisplay(){if(!this._data)return;const t=m=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(m),e=(m,v="")=>`${m.toFixed(m%1===0?0:2)}%${v}`,r=m=>new Intl.NumberFormat("en-US").format(m),i=this.$("#starting-portfolio"),n=this.$("#time-horizon"),s=this.$("#annual-withdrawal"),o=this.$("#withdrawal-growth"),l=this.$("#sbloc-interest"),d=this.$("#max-borrowing"),h=this.$("#maintenance-margin"),p=this.$("#simulations-run");i&&(i.textContent=t(this._data.startingPortfolio)),n&&(n.textContent=`${this._data.timeHorizon} years`),s&&(s.textContent=t(this._data.annualWithdrawal)),o&&(o.textContent=e(this._data.withdrawalGrowth," / year")),l&&(l.textContent=e(this._data.sblocInterestRate)),d&&(d.textContent=e(this._data.maxBorrowing)),h&&(h.textContent=e(this._data.maintenanceMargin)),p&&(p.textContent=r(this._data.simulationsRun))}}customElements.define("param-summary",mx);class bx extends Ct{_withdrawal=0;_taxableEquivalent=0;_taxSavings=0;_taxRate=.37;set withdrawal(t){this._withdrawal=t,this.updateDisplay()}get withdrawal(){return this._withdrawal}set taxableEquivalent(t){this._taxableEquivalent=t,this.updateDisplay()}get taxableEquivalent(){return this._taxableEquivalent}set taxSavings(t){this._taxSavings=t,this.updateDisplay()}get taxSavings(){return this._taxSavings}set taxRate(t){this._taxRate=t,this.updateDisplay()}get taxRate(){return this._taxRate}set data(t){t?(this._withdrawal=t.withdrawal,this._taxableEquivalent=t.taxableEquivalent,this._taxSavings=t.taxSavings,this._taxRate=t.taxRate):(this._withdrawal=0,this._taxableEquivalent=0,this._taxSavings=0,this._taxRate=.37),this.updateDisplay()}template(){return`
      <div class="salary-banner">
        <div class="banner-content">
          <p class="banner-header">Your Annual Withdrawal Tax-Free</p>
          <p class="withdrawal-amount" id="withdrawal-amount">$0</p>
          <p class="equivalent-text">Is equivalent to earning a taxable salary of:</p>
          <p class="equivalent-amount" id="equivalent-amount">$0</p>
          <p class="explanation" id="explanation">
            Based on your withdrawal plan, you save approximately $0 in annual taxes
            by using the Buy Borrow Die strategy (based on 2024 federal tax rates for single filer)
          </p>
        </div>
      </div>
    `}styles(){return`
      :host {
        display: block;
        max-width: 100%;
      }

      /* Shadow DOM reset - global box-sizing doesn't penetrate */
      *, *::before, *::after {
        box-sizing: border-box;
      }

      .salary-banner {
        background: linear-gradient(135deg, #0d9488 0%, #0f766e 50%, #115e59 100%);
        border-radius: var(--radius-lg, 12px);
        padding: var(--spacing-xl, 32px) var(--spacing-lg, 24px);
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
      }

      .salary-banner:hover {
        transform: translateY(-4px);
        box-shadow: 0 12px 24px -4px rgba(13, 148, 136, 0.3), 0 8px 16px -4px rgba(0, 0, 0, 0.15);
      }

      .banner-content {
        text-align: center;
        color: white;
      }

      .banner-header {
        font-size: var(--font-size-base, 1rem);
        font-weight: 500;
        margin: 0 0 var(--spacing-sm, 8px) 0;
        opacity: 0.9;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      .withdrawal-amount {
        font-size: clamp(2rem, 5vw, 3rem);
        font-weight: 700;
        margin: 0 0 var(--spacing-md, 16px) 0;
        letter-spacing: -0.02em;
      }

      .equivalent-text {
        font-size: var(--font-size-sm, 0.875rem);
        margin: 0 0 var(--spacing-sm, 8px) 0;
        opacity: 0.85;
      }

      .equivalent-amount {
        font-size: clamp(1.5rem, 4vw, 2.25rem);
        font-weight: 600;
        margin: 0 0 var(--spacing-lg, 24px) 0;
        letter-spacing: -0.01em;
      }

      .explanation {
        font-size: var(--font-size-sm, 0.875rem);
        margin: 0;
        opacity: 0.8;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
        line-height: 1.5;
        overflow-wrap: break-word;
        word-wrap: break-word;
      }

      /* Mobile responsive */
      @media (max-width: 768px) {
        .salary-banner {
          padding: var(--spacing-lg, 24px) var(--spacing-md, 16px);
          border-radius: var(--radius-md, 8px);
          max-width: 100%;
          overflow-x: hidden;
        }

        .banner-header {
          font-size: var(--font-size-sm, 0.875rem);
        }

        .withdrawal-amount {
          margin-bottom: var(--spacing-sm, 8px);
          word-break: break-word;
        }

        .equivalent-amount {
          margin-bottom: var(--spacing-md, 16px);
          word-break: break-word;
        }

        .explanation {
          font-size: var(--font-size-xs, 0.75rem);
          max-width: 100%;
        }
      }

      @media (max-width: 480px) {
        .salary-banner {
          padding: var(--spacing-md, 16px);
        }

        .banner-header {
          font-size: 0.75rem;
        }

        .equivalent-text {
          font-size: 0.75rem;
        }

        .explanation {
          font-size: 0.65rem;
          line-height: 1.4;
        }
      }
    `}afterRender(){this.updateDisplay()}updateDisplay(){const t=this.$("#withdrawal-amount"),e=this.$("#equivalent-amount"),r=this.$("#explanation");if(!t||!e||!r)return;const i=s=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(s);t.textContent=i(this._withdrawal),e.textContent=i(this._taxableEquivalent);const n=Math.round(this._taxRate*100);r.textContent=`Based on your withdrawal plan, you save approximately ${i(this._taxSavings)} in annual taxes by using the Buy Borrow Die strategy (based on ${n}% effective tax rate)`}}customElements.define("salary-equivalent-section",bx);class vx extends Ct{_data=null;set data(t){this._data=t,this.updateDisplay()}get data(){return this._data}template(){return`
      <div class="strategy-analysis">
        \x3C!-- Header -->
        <header class="analysis-header">
          <div class="header-content">
            <span class="header-icon">&#x2696;</span>
            <div class="header-text">
              <h2>Strategy Analysis</h2>
              <p class="header-subtitle" id="header-subtitle">
                Based on <span id="sim-count">10,000</span> Monte Carlo simulations over <span id="time-horizon">30</span> years
              </p>
            </div>
          </div>
          <span class="disclaimer-badge">Educational purposes only</span>
        </header>

        \x3C!-- Verdict Banner -->
        <div class="verdict-banner" id="verdict-banner">
          <div class="verdict-content">
            <div class="verdict-icon" id="verdict-icon">&#x2714;</div>
            <div class="verdict-text">
              <h3 id="verdict-headline">BBD Recommended</h3>
              <p id="verdict-rationale">Based on simulation results, the BBD strategy provides higher terminal wealth.</p>
            </div>
          </div>
          <div class="success-dial" id="success-dial">
            <svg viewBox="0 0 100 100" class="dial-svg">
              <circle class="dial-bg" cx="50" cy="50" r="45"/>
              <circle class="dial-progress" cx="50" cy="50" r="45" id="dial-progress"/>
              <text class="dial-text" x="44" y="50" transform="rotate(90 44 50)" id="dial-text">87%</text>
              <text class="dial-label" x="70" y="50" transform="rotate(90 70 50)">Success</text>
            </svg>
          </div>
        </div>

        \x3C!-- Side-by-Side Comparison -->
        <div class="comparison-grid">
          <div class="comparison-card bbd-card">
            <h4 class="card-title">
              <span class="card-icon">&#x1F3E6;</span>
              BBD Strategy
            </h4>
            <div class="metrics-list">
              <div class="metric-row">
                <span class="metric-label">Terminal Net Worth</span>
                <span class="metric-value" id="bbd-terminal">-</span>
              </div>
              <div class="metric-row">
                <span class="metric-label">Success Rate</span>
                <span class="metric-value" id="bbd-success">-</span>
              </div>
              <div class="metric-row">
                <span class="metric-label">Lifetime Interest Paid</span>
                <span class="metric-value" id="bbd-cost">-</span>
              </div>
              <div class="metric-row">
                <span class="metric-label">Dividend Taxes</span>
                <span class="metric-value" id="bbd-dividends">-</span>
              </div>
              <div class="metric-row risk-row">
                <span class="metric-label">Primary Risk</span>
                <span class="metric-value risk-value" id="bbd-risk">-</span>
              </div>
            </div>
          </div>

          <div class="comparison-card sell-card">
            <h4 class="card-title">
              <span class="card-icon">&#x1F4B0;</span>
              Sell Assets
            </h4>
            <div class="metrics-list">
              <div class="metric-row">
                <span class="metric-label">Terminal Net Worth</span>
                <span class="metric-value" id="sell-terminal">-</span>
              </div>
              <div class="metric-row">
                <span class="metric-label">Success Rate</span>
                <span class="metric-value" id="sell-success">-</span>
              </div>
              <div class="metric-row">
                <span class="metric-label">Lifetime Taxes Paid</span>
                <span class="metric-value" id="sell-cost">-</span>
              </div>
              <div class="metric-row">
                <span class="metric-label">&nbsp;</span>
                <span class="metric-value">&nbsp;</span>
              </div>
              <div class="metric-row risk-row">
                <span class="metric-label">Primary Risk</span>
                <span class="metric-value risk-value" id="sell-risk">-</span>
              </div>
            </div>
          </div>
        </div>

        \x3C!-- Wealth Differential -->
        <div class="differential-section">
          <h4 class="section-title">Wealth Differential</h4>
          <div class="differential-grid">
            <div class="differential-card" id="diff-advantage-card">
              <span class="diff-icon">&#x1F4C8;</span>
              <div class="diff-content">
                <span class="diff-label">BBD vs Sell</span>
                <span class="diff-value positive" id="diff-advantage">+$0</span>
              </div>
            </div>
            <div class="differential-card">
              <span class="diff-icon">&#x1F4B5;</span>
              <div class="diff-content">
                <span class="diff-label">Tax Savings</span>
                <span class="diff-value" id="diff-tax-savings">$0</span>
              </div>
            </div>
            <div class="differential-card">
              <span class="diff-icon">&#x1F3E0;</span>
              <div class="diff-content">
                <span class="diff-label">Estate Value (BBD)</span>
                <span class="diff-value" id="diff-estate">$0</span>
              </div>
            </div>
          </div>
        </div>

        \x3C!-- Why Strategy Performs Well -->
        <div class="insights-section" id="insights-section">
          <h4 class="section-title">Why <span id="winning-strategy">BBD</span> Performs Well</h4>
          <blockquote class="insight-quote" id="insight-quote">
            "BBD leverages tax deferral and compounding to build greater terminal wealth."
          </blockquote>
          <p class="insight-explanation" id="insight-explanation">
            By borrowing against assets instead of selling, you avoid capital gains taxes and keep more money invested.
          </p>
          <div class="benefit-cards">
            <div class="benefit-card">
              <span class="benefit-icon">&#x23F3;</span>
              <div class="benefit-content">
                <span class="benefit-label">Tax Deferral Benefit</span>
                <span class="benefit-value" id="benefit-tax">$0</span>
              </div>
            </div>
            <div class="benefit-card">
              <span class="benefit-icon">&#x1F4C8;</span>
              <div class="benefit-content">
                <span class="benefit-label">Compounding Advantage</span>
                <span class="benefit-value" id="benefit-compound">$0</span>
              </div>
            </div>
          </div>
        </div>
      </div>
    `}styles(){return`
      :host {
        display: block;
        max-width: 100%;
      }

      /* Shadow DOM reset - global box-sizing doesn't penetrate */
      *, *::before, *::after {
        box-sizing: border-box;
      }

      .strategy-analysis {
        background: var(--surface-primary, #ffffff);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--radius-lg, 8px);
        padding: var(--spacing-lg, 24px);
        transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
      }

      .strategy-analysis:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-hover, 0 8px 32px rgba(26, 36, 36, 0.12));
        border-color: var(--color-primary, #0d9488);
      }

      /* Header */
      .analysis-header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: var(--spacing-lg, 24px);
        flex-wrap: wrap;
        gap: var(--spacing-md, 16px);
      }

      .header-content {
        display: flex;
        align-items: flex-start;
        gap: var(--spacing-md, 16px);
      }

      .header-icon {
        font-size: 2rem;
        line-height: 1;
      }

      .header-text h2 {
        margin: 0;
        font-size: var(--font-size-xl, 1.25rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .header-subtitle {
        margin: var(--spacing-xs, 4px) 0 0 0;
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #475569);
      }

      .disclaimer-badge {
        background: var(--color-warning-light, #fef3c7);
        color: var(--color-warning-dark, #92400e);
        padding: var(--spacing-xs, 4px) var(--spacing-sm, 8px);
        border-radius: var(--radius-sm, 4px);
        font-size: var(--font-size-xs, 0.75rem);
        font-weight: 500;
      }

      /* Verdict Banner */
      .verdict-banner {
        display: flex;
        justify-content: space-between;
        align-items: center;
        background: linear-gradient(135deg, var(--color-success-light, #dcfce7) 0%, var(--color-success-lighter, #f0fdf4) 100%);
        border: 1px solid var(--color-success, #22c55e);
        border-radius: var(--radius-lg, 8px);
        padding: var(--spacing-lg, 24px);
        margin-bottom: var(--spacing-lg, 24px);
        flex-wrap: wrap;
        gap: var(--spacing-md, 16px);
      }

      .verdict-banner.sell-recommended {
        background: linear-gradient(135deg, var(--color-warning-light, #fef3c7) 0%, var(--color-warning-lighter, #fffbeb) 100%);
        border-color: var(--color-warning, #f59e0b);
      }

      .verdict-content {
        display: flex;
        align-items: center;
        gap: var(--spacing-md, 16px);
      }

      .verdict-icon {
        width: 48px;
        height: 48px;
        background: var(--color-success, #22c55e);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.5rem;
        color: white;
      }

      .verdict-banner.sell-recommended .verdict-icon {
        background: var(--color-warning, #f59e0b);
      }

      .verdict-text h3 {
        margin: 0;
        font-size: var(--font-size-lg, 1.125rem);
        font-weight: 700;
        color: #1e293b; /* Force dark text on light accent banner */
      }

      .verdict-text p {
        margin: var(--spacing-xs, 4px) 0 0 0;
        font-size: var(--font-size-sm, 0.875rem);
        color: #475569; /* Force gray text on light accent banner */
        max-width: 500px;
      }

      /* Success Dial */
      .success-dial {
        width: 100px;
        height: 100px;
        flex-shrink: 0;
      }

      .dial-svg {
        width: 100%;
        height: 100%;
        transform: rotate(-90deg);
      }

      .dial-bg {
        fill: none;
        stroke: var(--surface-secondary, #f1f5f9);
        stroke-width: 8;
      }

      .dial-progress {
        fill: none;
        stroke: var(--color-success, #22c55e);
        stroke-width: 8;
        stroke-linecap: round;
        stroke-dasharray: 283;
        stroke-dashoffset: 283;
        transition: stroke-dashoffset 0.5s ease;
      }

      .verdict-banner.sell-recommended .dial-progress {
        stroke: var(--color-warning, #f59e0b);
      }

      .dial-text {
        fill: #1e293b; /* Force dark text on light accent banner */
        font-size: 1.2rem;
        font-weight: 700;
        text-anchor: middle;
        dominant-baseline: middle;
      }

      .dial-label {
        fill: #475569; /* Force gray text on light accent banner */
        font-size: 0.6rem;
        font-weight: 600;
        text-anchor: middle;
        dominant-baseline: middle;
      }

      /* Comparison Grid */
      .comparison-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--spacing-md, 16px);
        margin-bottom: var(--spacing-lg, 24px);
      }

      .comparison-card {
        background: var(--surface-secondary, #f8fafc);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--radius-md, 6px);
        padding: var(--spacing-md, 16px);
        transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
      }

      .comparison-card:hover {
        transform: translateY(-2px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
      }

      .bbd-card {
        border-left: 4px solid var(--color-primary, #0d9488);
      }

      .sell-card {
        border-left: 4px solid var(--color-secondary, #6366f1);
      }

      .card-title {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
        margin: 0 0 var(--spacing-md, 16px) 0;
        font-size: var(--font-size-base, 1rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .card-icon {
        font-size: 1.25rem;
      }

      .metrics-list {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-sm, 8px);
      }

      .metric-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: var(--spacing-xs, 4px) 0;
        border-bottom: 1px dashed var(--border-color, #e2e8f0);
      }

      .metric-row:last-child {
        border-bottom: none;
      }

      .metric-label {
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #475569);
      }

      .metric-value {
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .risk-row .risk-value {
        color: var(--color-warning-dark, #92400e);
        font-size: var(--font-size-xs, 0.75rem);
      }

      /* Differential Section */
      .differential-section {
        margin-bottom: var(--spacing-lg, 24px);
      }

      .section-title {
        margin: 0 0 var(--spacing-md, 16px) 0;
        font-size: var(--font-size-base, 1rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .differential-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: var(--spacing-md, 16px);
      }

      .differential-card {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
        background: var(--surface-secondary, #f8fafc);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--radius-md, 6px);
        padding: var(--spacing-md, 16px);
      }

      .diff-icon {
        font-size: 1.5rem;
      }

      .diff-content {
        display: flex;
        flex-direction: column;
      }

      .diff-label {
        font-size: var(--font-size-xs, 0.75rem);
        color: var(--text-secondary, #475569);
      }

      .diff-value {
        font-size: var(--font-size-lg, 1.125rem);
        font-weight: 700;
        color: var(--text-primary, #1e293b);
      }

      .diff-value.positive {
        color: var(--color-success, #22c55e);
      }

      .diff-value.negative {
        color: var(--color-error, #ef4444);
      }

      /* Insights Section */
      .insights-section {
        background: var(--surface-secondary, #f8fafc);
        border-radius: var(--radius-md, 6px);
        padding: var(--spacing-lg, 24px);
      }

      .insight-quote {
        margin: 0 0 var(--spacing-md, 16px) 0;
        padding: var(--spacing-md, 16px);
        border-left: 4px solid var(--color-primary, #0d9488);
        font-style: italic;
        color: var(--text-secondary, #475569);
        background: var(--surface-primary, #ffffff);
        border-radius: 0 var(--radius-md, 6px) var(--radius-md, 6px) 0;
      }

      .insight-explanation {
        margin: 0 0 var(--spacing-lg, 24px) 0;
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #475569);
        line-height: 1.6;
      }

      .benefit-cards {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--spacing-md, 16px);
      }

      .benefit-card {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
        background: var(--surface-primary, #ffffff);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--radius-md, 6px);
        padding: var(--spacing-md, 16px);
      }

      .benefit-icon {
        font-size: 1.5rem;
      }

      .benefit-content {
        display: flex;
        flex-direction: column;
      }

      .benefit-label {
        font-size: var(--font-size-xs, 0.75rem);
        color: var(--text-secondary, #475569);
      }

      .benefit-value {
        font-size: var(--font-size-base, 1rem);
        font-weight: 600;
        color: var(--color-success, #22c55e);
      }

      /* Mobile responsive */
      @media (max-width: 768px) {
        .strategy-analysis {
          padding: var(--spacing-md, 16px);
          max-width: 100%;
          overflow-x: hidden;
        }

        .analysis-header {
          margin-bottom: var(--spacing-md, 16px);
          gap: var(--spacing-sm, 8px);
        }

        .header-icon {
          font-size: 1.5rem;
        }

        .header-text h2 {
          font-size: var(--font-size-base, 1rem);
        }

        .header-subtitle {
          font-size: var(--font-size-xs, 0.75rem);
        }

        .disclaimer-badge {
          font-size: 0.65rem;
          padding: 2px var(--spacing-xs, 4px);
        }

        .verdict-banner {
          padding: var(--spacing-md, 16px);
          margin-bottom: var(--spacing-md, 16px);
          flex-direction: column;
          align-items: flex-start;
          max-width: 100%;
          overflow-x: hidden;
        }

        .verdict-icon {
          width: 36px;
          height: 36px;
          font-size: 1.2rem;
        }

        .verdict-text h3 {
          font-size: var(--font-size-base, 1rem);
        }

        .verdict-text p {
          font-size: var(--font-size-xs, 0.75rem);
        }

        .success-dial {
          width: 80px;
          height: 80px;
          align-self: center;
        }

        .dial-text {
          font-size: 1rem;
        }

        .comparison-grid {
          grid-template-columns: 1fr;
          gap: var(--spacing-sm, 8px);
          margin-bottom: var(--spacing-md, 16px);
          max-width: 100%;
        }

        .comparison-card {
          padding: var(--spacing-sm, 8px);
          max-width: 100%;
          width: 100%;
        }

        .card-title {
          font-size: var(--font-size-sm, 0.875rem);
          margin-bottom: var(--spacing-sm, 8px);
        }

        .card-icon {
          font-size: 1rem;
        }

        .metric-row {
          padding: 2px 0;
        }

        .metric-label,
        .metric-value {
          font-size: var(--font-size-xs, 0.75rem);
        }

        /* Break long text in metrics */
        .metric-value {
          word-break: break-word;
        }

        .differential-section {
          margin-bottom: var(--spacing-md, 16px);
        }

        .section-title {
          font-size: var(--font-size-sm, 0.875rem);
          margin-bottom: var(--spacing-sm, 8px);
        }

        .differential-grid {
          grid-template-columns: 1fr;
          gap: var(--spacing-sm, 8px);
          max-width: 100%;
        }

        .differential-card {
          padding: var(--spacing-sm, 8px);
          max-width: 100%;
        }

        .diff-icon {
          font-size: 1.25rem;
        }

        .diff-label {
          font-size: 0.65rem;
        }

        .diff-value {
          font-size: var(--font-size-base, 1rem);
        }

        .insights-section {
          padding: var(--spacing-md, 16px);
        }

        .insight-quote {
          padding: var(--spacing-sm, 8px);
          font-size: var(--font-size-xs, 0.75rem);
          margin-bottom: var(--spacing-sm, 8px);
        }

        .insight-explanation {
          font-size: var(--font-size-xs, 0.75rem);
          margin-bottom: var(--spacing-md, 16px);
        }

        .benefit-cards {
          grid-template-columns: 1fr;
          gap: var(--spacing-sm, 8px);
        }

        .benefit-card {
          padding: var(--spacing-sm, 8px);
        }

        .benefit-icon {
          font-size: 1.25rem;
        }

        .benefit-label {
          font-size: 0.65rem;
        }

        .benefit-value {
          font-size: var(--font-size-sm, 0.875rem);
        }
      }
    `}afterRender(){this.updateDisplay()}updateDisplay(){if(!this._data)return;const{bbdData:t,sellData:e,verdict:r,differential:i,insights:n,simulationsRun:s,timeHorizon:o}=this._data,l=G=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:G>=1e6?"compact":"standard",maximumFractionDigits:G>=1e6?1:0}).format(G),d=G=>`${G.toFixed(1)}%`,h=this.$("#sim-count"),p=this.$("#time-horizon");h&&(h.textContent=s.toLocaleString()),p&&(p.textContent=String(o));const m=this.$("#verdict-banner"),v=this.$("#verdict-headline"),g=this.$("#verdict-rationale"),k=this.$("#verdict-icon");r.recommendation==="sell"?(m?.classList.add("sell-recommended"),k&&(k.innerHTML="&#x26A0;")):(m?.classList.remove("sell-recommended"),k&&(k.innerHTML="&#x2714;")),v&&(v.textContent=r.headline),g&&(g.textContent=r.rationale),this.updateSuccessDial(r.confidence);const S=this.$("#bbd-terminal"),D=this.$("#bbd-success"),M=this.$("#bbd-cost"),I=this.$("#bbd-dividends"),W=this.$("#bbd-risk");S&&(S.textContent=l(t.terminalNetWorth)),D&&(D.textContent=d(t.successRate)),M&&(M.textContent=l(t.lifetimeCost)),I&&(I.textContent=l(t.dividendTaxes)),W&&(W.textContent=t.primaryRisk);const H=this.$("#sell-terminal"),X=this.$("#sell-success"),q=this.$("#sell-cost"),w=this.$("#sell-risk");H&&(H.textContent=l(e.terminalNetWorth)),X&&(X.textContent=d(e.successRate)),q&&(q.textContent=l(e.lifetimeCost)),w&&(w.textContent=e.primaryRisk);const C=this.$("#diff-advantage");this.$("#diff-advantage-card");const L=this.$("#diff-tax-savings"),Y=this.$("#diff-estate");if(C){const G=i.bbdVsSell>=0?"+":"";C.textContent=`${G}${l(i.bbdVsSell)}`,C.classList.toggle("positive",i.bbdVsSell>=0),C.classList.toggle("negative",i.bbdVsSell<0)}L&&(L.textContent=l(i.taxSavings)),Y&&(Y.textContent=l(i.estateValue));const K=this.$("#winning-strategy"),tt=this.$("#insight-quote"),ht=this.$("#insight-explanation"),pt=this.$("#benefit-tax"),lt=this.$("#benefit-compound");K&&(K.textContent=r.recommendation==="bbd"?"BBD":"Sell Assets"),tt&&(tt.textContent=`"${n.quote}"`),ht&&(ht.textContent=n.explanation),pt&&(pt.textContent=l(n.taxDeferralBenefit)),lt&&(lt.textContent=l(n.compoundingAdvantage))}updateSuccessDial(t){const e=this.$("#dial-progress"),r=this.$("#dial-text");if(e){const n=283-t/100*283;e.style.strokeDashoffset=String(n)}r&&(r.textContent=`${Math.round(t)}%`)}}customElements.define("strategy-analysis",vx);class xx extends Ct{_data=null;set data(t){this._data=t,this.updateTable()}get data(){return this._data}template(){return`
      <div class="table-container">
        <div class="table-header">
          <span class="table-icon">&#x1F4B0;</span>
          <h3>Sell Strategy Year-by-Year Analysis</h3>
        </div>
        <div class="scroll-container">
          <div class="scroll-indicator-left" aria-hidden="true"></div>
          <div class="table-wrapper">
            <table class="analysis-table" id="analysis-table">
              <thead>
                <tr>
                  <th rowspan="2" class="sticky-col">Year</th>
                  <th colspan="2" class="withdrawal-header">Withdrawals</th>
                  <th class="tax-header">Taxes</th>
                  <th colspan="5" class="percentile-header">Portfolio Value by Percentile</th>
                </tr>
                <tr>
                  <th>Annual</th>
                  <th>Cumulative</th>
                  <th class="tax-col-header">Cumulative</th>
                  <th class="p10">10th %ile</th>
                  <th class="p25">25th %ile</th>
                  <th class="p50">50th %ile</th>
                  <th class="p75">75th %ile</th>
                  <th class="p90">90th %ile</th>
                </tr>
              </thead>
              <tbody id="table-body">
                \x3C!-- Rows inserted dynamically -->
              </tbody>
            </table>
          </div>
          <div class="scroll-indicator-right" aria-hidden="true"></div>
        </div>
      </div>
    `}styles(){return`
      :host {
        display: block;
      }

      .table-container {
        background: var(--surface-primary, #ffffff);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--radius-lg, 8px);
        overflow: hidden;
        transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
      }

      .table-container:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-hover, 0 8px 32px rgba(26, 36, 36, 0.12));
        border-color: var(--color-primary, #0d9488);
      }

      .table-header {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
        padding: var(--spacing-lg, 24px);
        border-bottom: 1px solid var(--border-color, #e2e8f0);
        background: var(--surface-secondary, #f8fafc);
      }

      .table-icon {
        font-size: 1.25rem;
        line-height: 1;
      }

      .table-header h3 {
        margin: 0;
        font-size: var(--font-size-lg, 1.125rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .scroll-container {
        position: relative;
      }

      .scroll-indicator-left,
      .scroll-indicator-right {
        display: none;  /* Hidden by default */
      }

      .table-wrapper {
        overflow-x: auto;
      }

      .analysis-table {
        width: 100%;
        border-collapse: collapse;
        font-size: var(--font-size-sm, 0.875rem);
        min-width: 900px;
      }

      .analysis-table thead {
        position: sticky;
        top: 0;
        z-index: 10;
        background: var(--surface-secondary, #f8fafc);
      }

      .analysis-table th {
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        text-align: right;
        font-weight: 600;
        color: var(--text-secondary, #475569);
        border-bottom: 2px solid var(--border-color, #e2e8f0);
        white-space: nowrap;
      }

      .analysis-table th:first-child {
        text-align: left;
      }

      .analysis-table th.withdrawal-header {
        background: var(--surface-secondary, #f8fafc);
        color: var(--text-secondary, #475569);
        text-align: center;
      }

      /* Tax header styling - orange/amber to indicate cost */
      .analysis-table th.tax-header {
        background: rgba(245, 158, 11, 0.15);
        color: #d97706;
        text-align: center;
      }

      .tax-col-header {
        color: #d97706;
        background: rgba(245, 158, 11, 0.1);
      }

      .analysis-table th.percentile-header {
        background: rgba(13, 148, 136, 0.1);
        color: var(--color-primary, #0d9488);
        text-align: center;
      }

      .analysis-table th.p10 {
        color: #dc2626;
      }

      .analysis-table th.p25 {
        color: #ea580c;
      }

      .analysis-table th.p50 {
        color: var(--color-primary, #0d9488);
        background: rgba(13, 148, 136, 0.15);
      }

      .analysis-table th.p75 {
        color: #16a34a;
      }

      .analysis-table th.p90 {
        color: #15803d;
      }

      .sticky-col {
        position: sticky;
        left: 0;
        background: var(--surface-secondary, #f8fafc);
        z-index: 5;
      }

      .analysis-table tbody tr {
        transition: background-color 0.15s ease;
      }

      .analysis-table tbody tr:nth-child(odd) {
        background: var(--surface-primary, #ffffff);
      }

      .analysis-table tbody tr:nth-child(even) {
        background: var(--surface-secondary, #f8fafc);
      }

      .analysis-table tbody tr:hover {
        background: rgba(13, 148, 136, 0.05);
      }

      .analysis-table td {
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        text-align: right;
        color: var(--text-primary, #1e293b);
        border-bottom: 1px solid var(--border-color, #e2e8f0);
        white-space: nowrap;
      }

      .analysis-table td:first-child {
        text-align: left;
        font-weight: 500;
        position: sticky;
        left: 0;
        background: inherit;
        z-index: 5;
      }

      /* Color coding for values */
      .value-positive {
        color: #16a34a;
      }

      .value-negative {
        color: #dc2626;
      }

      /* Median column highlight */
      .median-col {
        background: rgba(13, 148, 136, 0.08);
        font-weight: 600;
        color: var(--color-primary, #0d9488);
      }

      /* Withdrawal columns styling */
      .withdrawal-col {
        color: var(--text-secondary, #475569);
      }

      /* Tax column styling - orange/amber for cost emphasis */
      .tax-col {
        color: #d97706;
        font-weight: 500;
        background: rgba(245, 158, 11, 0.05);
      }

      /* Empty state */
      .empty-state {
        padding: var(--spacing-2xl, 48px);
        text-align: center;
        color: var(--text-secondary, #475569);
      }

      /* Mobile responsive */
      @media (max-width: 768px) {
        .table-header {
          padding: var(--spacing-md, 16px);
        }

        .scroll-indicator-left,
        .scroll-indicator-right {
          display: block;
          position: absolute;
          top: 0;
          bottom: 0;
          width: 20px;
          pointer-events: none;
          z-index: 15;
          opacity: 0;
          transition: opacity 0.2s ease;
        }

        .scroll-indicator-left {
          left: 0;
          background: linear-gradient(to right, var(--surface-primary, #ffffff) 0%, transparent 100%);
        }

        .scroll-indicator-right {
          right: 0;
          background: linear-gradient(to left, var(--surface-primary, #ffffff) 0%, transparent 100%);
        }

        /* Show indicators based on scroll position */
        .scroll-container.can-scroll-left .scroll-indicator-left {
          opacity: 1;
        }

        .scroll-container.can-scroll-right .scroll-indicator-right {
          opacity: 1;
        }

        .table-wrapper {
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
          scroll-behavior: smooth;
          overscroll-behavior-x: contain;
          touch-action: pan-x pan-y;
        }

        .analysis-table th,
        .analysis-table td {
          padding: var(--spacing-xs, 4px) var(--spacing-sm, 8px);
          font-size: var(--font-size-xs, 0.75rem);
        }
      }
    `}afterRender(){this.updateTable(),this.setupScrollIndicators()}setupScrollIndicators(){const t=this.$(".table-wrapper"),e=this.$(".scroll-container");if(!t||!e)return;const r=()=>{const i=t.scrollLeft>0,n=t.scrollLeft<t.scrollWidth-t.clientWidth-1;e.classList.toggle("can-scroll-left",i),e.classList.toggle("can-scroll-right",n)};t.addEventListener("scroll",r,{passive:!0}),setTimeout(r,100)}formatCurrency(t){return Math.abs(t)>=1e6?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(t):new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(t)}getValueClass(t){return t>0?"value-positive":t<0?"value-negative":""}updateTable(){const t=this.$("#table-body");if(!t)return;if(!this._data||this._data.percentiles.length===0){t.innerHTML=`
        <tr>
          <td colspan="9" class="empty-state">No data available</td>
        </tr>
      `;return}const{startYear:e,withdrawals:r,cumulativeTaxes:i,percentiles:n}=this._data,s=n.map((o,l)=>{const d=e+l,h=r.annual[l]||0,p=r.cumulative[l]||0,m=i[l]||0;return`
        <tr>
          <td>${d}</td>
          <td class="withdrawal-col">${this.formatCurrency(h)}</td>
          <td class="withdrawal-col">${this.formatCurrency(p)}</td>
          <td class="tax-col">${this.formatCurrency(m)}</td>
          <td class="${this.getValueClass(o.p10)}">${this.formatCurrency(o.p10)}</td>
          <td class="${this.getValueClass(o.p25)}">${this.formatCurrency(o.p25)}</td>
          <td class="median-col ${this.getValueClass(o.p50)}">${this.formatCurrency(o.p50)}</td>
          <td class="${this.getValueClass(o.p75)}">${this.formatCurrency(o.p75)}</td>
          <td class="${this.getValueClass(o.p90)}">${this.formatCurrency(o.p90)}</td>
        </tr>
      `});t.innerHTML=s.join("")}}customElements.define("sell-yearly-analysis-table",xx);class yx extends Ct{_data=null;set data(t){this._data=t,this.render()}get data(){return this._data}template(){return this._data?`
      <div class="table-section">
        <h3><span class="icon">&#x1F4CA;</span> Performance Summary</h3>
        <div class="scroll-container">
          <div class="scroll-indicator-left" aria-hidden="true"></div>
          <div class="table-container">
            <table>
              <thead>
                <tr>
                  <th class="metric-col">Metric</th>
                  <th class="percentile-col">10th<br>Percentile</th>
                  <th class="percentile-col">25th<br>Percentile</th>
                  <th class="percentile-col">50th<br>Percentile</th>
                  <th class="percentile-col">75th<br>Percentile</th>
                  <th class="percentile-col">90th<br>Percentile</th>
                </tr>
              </thead>
              <tbody>
                ${[this._data.twrrNominal,this._data.twrrReal,this._data.portfolioNominal,this._data.portfolioReal,this._data.meanReturn,this._data.volatility].map((e,r)=>this.renderRow(e,r)).join("")}
              </tbody>
            </table>
          </div>
          <div class="scroll-indicator-right" aria-hidden="true"></div>
        </div>
        <p class="note">
          <strong>Note:</strong> Real values are adjusted for 2.5% annual inflation.
          TWRR (Time-Weighted Rate of Return) represents the geometric mean return
          across the simulation period, which is the industry-standard metric for
          measuring investment performance.
        </p>
      </div>
    `:`
        <div class="no-data">
          <p>Run a simulation to see performance data</p>
        </div>
      `}renderRow(t,e){return`
      <tr class="${e%2===0?"even":"odd"}">
        <td class="metric-cell">${t.label}</td>
        <td class="value-cell ${this.getValueClass(t.p10,t.format)}">${this.formatValue(t.p10,t.format)}</td>
        <td class="value-cell ${this.getValueClass(t.p25,t.format)}">${this.formatValue(t.p25,t.format)}</td>
        <td class="value-cell ${this.getValueClass(t.p50,t.format)}">${this.formatValue(t.p50,t.format)}</td>
        <td class="value-cell ${this.getValueClass(t.p75,t.format)}">${this.formatValue(t.p75,t.format)}</td>
        <td class="value-cell ${this.getValueClass(t.p90,t.format)}">${this.formatValue(t.p90,t.format)}</td>
      </tr>
    `}formatValue(t,e){return e==="percent"?`${(t*100).toFixed(2)}%`:new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(t)}getValueClass(t,e){if(e==="percent"){if(t>0)return"positive";if(t<0)return"negative"}return""}afterRender(){this.setupScrollIndicators()}setupScrollIndicators(){const t=this.$(".table-container"),e=this.$(".scroll-container");if(!t||!e)return;const r=()=>{const i=t.scrollLeft>0,n=t.scrollLeft<t.scrollWidth-t.clientWidth-1;e.classList.toggle("can-scroll-left",i),e.classList.toggle("can-scroll-right",n)};t.addEventListener("scroll",r,{passive:!0}),setTimeout(r,100)}styles(){return`
      :host {
        display: block;
      }

      .table-section {
        background: var(--surface-primary, #ffffff);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--radius-lg, 8px);
        padding: var(--spacing-lg, 24px);
        transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
      }

      .table-section:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-hover, 0 8px 32px rgba(26, 36, 36, 0.12));
        border-color: var(--color-primary, #0d9488);
      }

      h3 {
        margin: 0 0 var(--spacing-md, 16px) 0;
        font-size: var(--font-size-lg, 1.125rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
      }

      .icon {
        font-size: 1.25rem;
      }

      .scroll-container {
        position: relative;
      }

      .scroll-indicator-left,
      .scroll-indicator-right {
        display: none;  /* Hidden by default */
      }

      .table-container {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        min-width: 600px;
      }

      thead {
        background: var(--surface-secondary, #f8fafc);
      }

      th {
        padding: var(--spacing-md, 16px) var(--spacing-sm, 8px);
        text-align: right;
        font-weight: 600;
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #475569);
        border-bottom: 2px solid var(--border-color, #e2e8f0);
      }

      th.metric-col {
        text-align: left;
        width: 30%;
      }

      th.percentile-col {
        width: 14%;
      }

      td {
        padding: var(--spacing-md, 16px) var(--spacing-sm, 8px);
        border-bottom: 1px solid var(--border-color, #e2e8f0);
      }

      tr.even {
        background: var(--surface-primary, #ffffff);
      }

      tr.odd {
        background: var(--surface-secondary, #f8fafc);
      }

      tr:hover {
        background: var(--color-primary-50, #f0fdfa);
      }

      .metric-cell {
        font-weight: 500;
        color: var(--text-primary, #1e293b);
        text-align: left;
      }

      .value-cell {
        text-align: right;
        font-family: var(--font-mono, ui-monospace, monospace);
        font-size: var(--font-size-sm, 0.875rem);
      }

      .value-cell.positive {
        color: var(--color-success, #16a34a);
      }

      .value-cell.negative {
        color: var(--color-error, #dc2626);
      }

      .note {
        margin: var(--spacing-md, 16px) 0 0 0;
        padding: var(--spacing-md, 16px);
        background: var(--surface-secondary, #f8fafc);
        border-radius: var(--radius-md, 6px);
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #475569);
        line-height: 1.6;
      }

      .note strong {
        color: var(--text-primary, #1e293b);
      }

      .no-data {
        background: var(--surface-secondary, #f8fafc);
        border: 2px dashed var(--border-color, #e2e8f0);
        border-radius: var(--radius-lg, 8px);
        padding: var(--spacing-2xl, 48px);
        text-align: center;
        color: var(--text-secondary, #475569);
      }

      .no-data p {
        margin: 0;
      }

      /* Mobile responsive */
      @media (max-width: 768px) {
        .table-section {
          padding: var(--spacing-md, 16px);
        }

        .scroll-indicator-left,
        .scroll-indicator-right {
          display: block;
          position: absolute;
          top: 0;
          bottom: 0;
          width: 20px;
          pointer-events: none;
          z-index: 15;
          opacity: 0;
          transition: opacity 0.2s ease;
        }

        .scroll-indicator-left {
          left: 0;
          background: linear-gradient(to right, var(--surface-primary, #ffffff) 0%, transparent 100%);
        }

        .scroll-indicator-right {
          right: 0;
          background: linear-gradient(to left, var(--surface-primary, #ffffff) 0%, transparent 100%);
        }

        /* Show indicators based on scroll position */
        .scroll-container.can-scroll-left .scroll-indicator-left {
          opacity: 1;
        }

        .scroll-container.can-scroll-right .scroll-indicator-right {
          opacity: 1;
        }

        .table-container {
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
          scroll-behavior: smooth;
          overscroll-behavior-x: contain;
          touch-action: pan-x pan-y;
        }

        th, td {
          padding: var(--spacing-sm, 8px);
        }

        .metric-cell {
          font-size: var(--font-size-sm, 0.875rem);
        }
      }
    `}}customElements.define("performance-table",yx);class wx extends Ct{_expectedReturns=null;_probabilities=null;set expectedReturns(t){this._expectedReturns=t,this.render()}get expectedReturns(){return this._expectedReturns}set probabilities(t){this._probabilities=t,this.render()}get probabilities(){return this._probabilities}template(){const t=this._expectedReturns&&this._expectedReturns.values.length>0,e=this._probabilities&&this._probabilities.probabilities.length>0;return!t&&!e?`
        <div class="no-data">
          <p>Run a simulation to see return probability data</p>
        </div>
      `:`
      <div class="tables-container">
        ${t?this.renderExpectedReturnsTable():""}
        ${e?this.renderProbabilitiesTable():""}
      </div>
    `}renderExpectedReturnsTable(){if(!this._expectedReturns)return"";const{percentiles:t,timeHorizons:e,values:r}=this._expectedReturns;return`
      <div class="table-section">
        <h3><span class="icon">&#x1F4C8;</span> Expected Annual Return</h3>
        <div class="scroll-container expected-returns-scroll">
          <div class="scroll-indicator-left" aria-hidden="true"></div>
          <div class="table-container expected-returns-wrapper">
            <table>
              <thead>
                <tr>
                  <th class="label-col">Percentile</th>
                  ${e.map(i=>`<th class="value-col">${i} Year${i>1?"s":""}</th>`).join("")}
                </tr>
              </thead>
              <tbody>
                ${t.map((i,n)=>`
                  <tr class="${n%2===0?"even":"odd"}">
                    <td class="label-cell">${i} Percentile</td>
                    ${r[n].map(s=>`
                      <td class="value-cell ${this.getReturnClass(s)}">${this.formatPercent(s)}</td>
                    `).join("")}
                  </tr>
                `).join("")}
              </tbody>
            </table>
          </div>
          <div class="scroll-indicator-right" aria-hidden="true"></div>
        </div>
        <p class="note">
          <strong>Note:</strong> Expected annual returns represent the compound annual
          growth rate (CAGR) over each time horizon, showing how your portfolio is
          projected to perform over different investment periods.
        </p>
      </div>
    `}renderProbabilitiesTable(){if(!this._probabilities)return"";const{thresholds:t,timeHorizons:e,probabilities:r}=this._probabilities;return`
      <div class="table-section">
        <h3><span class="icon">&#x1F3AF;</span> Annual Return Probabilities</h3>
        <div class="scroll-container return-probabilities-scroll">
          <div class="scroll-indicator-left" aria-hidden="true"></div>
          <div class="table-container return-probabilities-wrapper">
            <table>
              <thead>
                <tr>
                  <th class="label-col">Return</th>
                  ${e.map(i=>`<th class="value-col">${i} Year${i>1?"s":""}</th>`).join("")}
                </tr>
              </thead>
              <tbody>
                ${t.map((i,n)=>`
                  <tr class="${n%2===0?"even":"odd"}">
                    <td class="label-cell">>= ${this.formatPercent(i)}</td>
                    ${r[n].map(s=>`
                      <td class="value-cell probability ${this.getProbabilityClass(s)}">${s.toFixed(2)}%</td>
                    `).join("")}
                  </tr>
                `).join("")}
              </tbody>
            </table>
          </div>
          <div class="scroll-indicator-right" aria-hidden="true"></div>
        </div>
        <p class="note">
          <strong>Note:</strong> Probabilities show the likelihood of achieving or
          exceeding each return threshold over different time horizons. Higher
          probabilities (green) indicate more confidence in achieving that return level.
        </p>
      </div>
    `}formatPercent(t){return`${(t*100).toFixed(2)}%`}getReturnClass(t){return t>.15?"very-positive":t>.05?"positive":t>0?"slightly-positive":t<-.05?"negative":t<0?"slightly-negative":""}getProbabilityClass(t){return t>=90?"prob-very-high":t>=75?"prob-high":t>=60?"prob-medium":t>=40?"prob-low":"prob-very-low"}afterRender(){this.setupScrollIndicators()}setupScrollIndicators(){const t=this.$(".expected-returns-wrapper"),e=this.$(".expected-returns-scroll");if(t&&e){const n=()=>{const s=t.scrollLeft>0,o=t.scrollLeft<t.scrollWidth-t.clientWidth-1;e.classList.toggle("can-scroll-left",s),e.classList.toggle("can-scroll-right",o)};t.addEventListener("scroll",n,{passive:!0}),setTimeout(n,100)}const r=this.$(".return-probabilities-wrapper"),i=this.$(".return-probabilities-scroll");if(r&&i){const n=()=>{const s=r.scrollLeft>0,o=r.scrollLeft<r.scrollWidth-r.clientWidth-1;i.classList.toggle("can-scroll-left",s),i.classList.toggle("can-scroll-right",o)};r.addEventListener("scroll",n,{passive:!0}),setTimeout(n,100)}}styles(){return`
      :host {
        display: block;
      }

      .tables-container {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-lg, 24px);
      }

      .table-section {
        background: var(--surface-primary, #ffffff);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--radius-lg, 8px);
        padding: var(--spacing-lg, 24px);
        transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
      }

      .table-section:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-hover, 0 8px 32px rgba(26, 36, 36, 0.12));
        border-color: var(--color-primary, #0d9488);
      }

      h3 {
        margin: 0 0 var(--spacing-md, 16px) 0;
        font-size: var(--font-size-lg, 1.125rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
      }

      .icon {
        font-size: 1.25rem;
      }

      .scroll-container {
        position: relative;
      }

      .scroll-indicator-left,
      .scroll-indicator-right {
        display: none;  /* Hidden by default */
      }

      .table-container {
        overflow-x: auto;
        -webkit-overflow-scrolling: touch;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        min-width: 500px;
      }

      thead {
        background: var(--surface-secondary, #f8fafc);
      }

      th {
        padding: var(--spacing-md, 16px) var(--spacing-sm, 8px);
        text-align: right;
        font-weight: 600;
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #475569);
        border-bottom: 2px solid var(--border-color, #e2e8f0);
      }

      th.label-col {
        text-align: left;
        width: 25%;
      }

      th.value-col {
        width: 15%;
      }

      td {
        padding: var(--spacing-md, 16px) var(--spacing-sm, 8px);
        border-bottom: 1px solid var(--border-color, #e2e8f0);
      }

      tr.even {
        background: var(--surface-primary, #ffffff);
      }

      tr.odd {
        background: var(--surface-secondary, #f8fafc);
      }

      tr:hover {
        background: var(--color-primary-50, #f0fdfa);
      }

      .label-cell {
        font-weight: 500;
        color: var(--text-primary, #1e293b);
        text-align: left;
      }

      .value-cell {
        text-align: right;
        font-family: var(--font-mono, ui-monospace, monospace);
        font-size: var(--font-size-sm, 0.875rem);
      }

      /* Return value colors (positive/negative) */
      .value-cell.very-positive {
        color: #059669;
        font-weight: 600;
      }

      .value-cell.positive {
        color: #16a34a;
      }

      .value-cell.slightly-positive {
        color: #22c55e;
      }

      .value-cell.slightly-negative {
        color: #f97316;
      }

      .value-cell.negative {
        color: #dc2626;
      }

      /* Probability colors (all green, varying intensity) */
      .value-cell.probability {
        color: #16a34a;
      }

      .value-cell.prob-very-high {
        color: #059669;
        font-weight: 600;
      }

      .value-cell.prob-high {
        color: #16a34a;
        font-weight: 500;
      }

      .value-cell.prob-medium {
        color: #22c55e;
      }

      .value-cell.prob-low {
        color: #4ade80;
      }

      .value-cell.prob-very-low {
        color: #86efac;
      }

      .note {
        margin: var(--spacing-md, 16px) 0 0 0;
        padding: var(--spacing-md, 16px);
        background: var(--surface-secondary, #f8fafc);
        border-radius: var(--radius-md, 6px);
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #475569);
        line-height: 1.6;
      }

      .note strong {
        color: var(--text-primary, #1e293b);
      }

      .no-data {
        background: var(--surface-secondary, #f8fafc);
        border: 2px dashed var(--border-color, #e2e8f0);
        border-radius: var(--radius-lg, 8px);
        padding: var(--spacing-2xl, 48px);
        text-align: center;
        color: var(--text-secondary, #475569);
      }

      .no-data p {
        margin: 0;
      }

      /* Mobile responsive */
      @media (max-width: 768px) {
        .table-section {
          padding: var(--spacing-md, 16px);
        }

        .scroll-indicator-left,
        .scroll-indicator-right {
          display: block;
          position: absolute;
          top: 0;
          bottom: 0;
          width: 20px;
          pointer-events: none;
          z-index: 15;
          opacity: 0;
          transition: opacity 0.2s ease;
        }

        .scroll-indicator-left {
          left: 0;
          background: linear-gradient(to right, var(--surface-primary, #ffffff) 0%, transparent 100%);
        }

        .scroll-indicator-right {
          right: 0;
          background: linear-gradient(to left, var(--surface-primary, #ffffff) 0%, transparent 100%);
        }

        /* Show indicators based on scroll position */
        .scroll-container.can-scroll-left .scroll-indicator-left {
          opacity: 1;
        }

        .scroll-container.can-scroll-right .scroll-indicator-right {
          opacity: 1;
        }

        .expected-returns-wrapper,
        .return-probabilities-wrapper {
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
          scroll-behavior: smooth;
          overscroll-behavior-x: contain;
          touch-action: pan-x pan-y;
        }

        th, td {
          padding: var(--spacing-sm, 8px);
        }

        .label-cell {
          font-size: var(--font-size-sm, 0.875rem);
        }
      }
    `}}customElements.define("return-probability-table",wx);class kx extends Ct{_insights=[];_considerations=[];_considerationsExpanded=!0;set data(t){t?(this._insights=t.insights,this._considerations=t.considerations):(this._insights=[],this._considerations=[]),this.updateDisplay()}set insights(t){this._insights=t,this.updateDisplay()}get insights(){return this._insights}set considerations(t){this._considerations=t,this.updateDisplay()}get considerations(){return this._considerations}template(){return`
      <div class="recommendations-wrapper">
        <div class="recommendations-header">
          <h3>Recommendations</h3>
        </div>

        <div class="insights-section">
          <div class="section-header">
            <h4>Actionable Insights</h4>
            <span class="count-badge" id="insights-count">0</span>
          </div>
          <div class="insights-list" id="insights-list">
            <p class="empty-state">No specific insights for this scenario.</p>
          </div>
        </div>

        <div class="considerations-section">
          <button class="section-toggle" id="considerations-toggle" aria-expanded="true">
            <h4>Important Considerations</h4>
            <span class="toggle-icon">&#x25BC;</span>
          </button>
          <div class="considerations-list" id="considerations-list">
            \x3C!-- Considerations rendered here -->
          </div>
        </div>
      </div>
    `}styles(){return`
      :host {
        display: block;
        max-width: 100%;
      }

      /* Shadow DOM reset - global box-sizing doesn't penetrate */
      *, *::before, *::after {
        box-sizing: border-box;
      }

      .recommendations-wrapper {
        background: var(--surface-primary, #ffffff);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--radius-lg, 8px);
        overflow: hidden;
        transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
        max-width: 100%;
      }

      .recommendations-wrapper:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-hover, 0 8px 32px rgba(26, 36, 36, 0.12));
        border-color: var(--color-primary, #0d9488);
      }

      .recommendations-header {
        padding: var(--spacing-lg, 24px);
        padding-bottom: 0;
      }

      .recommendations-header h3 {
        margin: 0;
        font-size: var(--font-size-xl, 1.25rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      /* Insights Section */
      .insights-section {
        padding: var(--spacing-lg, 24px);
        border-bottom: 1px solid var(--border-color, #e2e8f0);
      }

      .section-header {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
        margin-bottom: var(--spacing-md, 16px);
      }

      .section-header h4 {
        margin: 0;
        font-size: var(--font-size-base, 1rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .count-badge {
        display: inline-flex;
        align-items: center;
        justify-content: center;
        min-width: 24px;
        height: 24px;
        padding: 0 var(--spacing-xs, 4px);
        font-size: var(--font-size-xs, 0.75rem);
        font-weight: 600;
        color: white;
        background: var(--color-primary, #0d9488);
        border-radius: 12px;
      }

      .insights-list {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-md, 16px);
      }

      .empty-state {
        margin: 0;
        padding: var(--spacing-md, 16px);
        text-align: center;
        color: var(--text-secondary, #475569);
        font-size: var(--font-size-sm, 0.875rem);
        background: var(--surface-secondary, #f8fafc);
        border-radius: var(--radius-md, 6px);
      }

      /* Insight Card */
      .insight-card {
        display: flex;
        gap: var(--spacing-md, 16px);
        padding: var(--spacing-md, 16px);
        background: var(--surface-secondary, #f8fafc);
        border-radius: var(--radius-md, 6px);
        border-left: 4px solid var(--card-accent-color, #e2e8f0);
      }

      .insight-icon {
        flex-shrink: 0;
        width: 24px;
        height: 24px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.25rem;
      }

      .insight-content {
        flex: 1;
        min-width: 0;
      }

      .insight-title {
        margin: 0 0 var(--spacing-xs, 4px) 0;
        font-size: var(--font-size-base, 1rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .insight-message {
        margin: 0;
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #475569);
        line-height: 1.5;
      }

      .insight-action {
        margin: var(--spacing-sm, 8px) 0 0 0;
        padding: var(--spacing-sm, 8px);
        background: rgba(13, 148, 136, 0.1);
        border-radius: var(--radius-sm, 4px);
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--color-primary, #0d9488);
      }

      .insight-action strong {
        font-weight: 600;
      }

      /* Considerations Section */
      .considerations-section {
        padding: var(--spacing-lg, 24px);
      }

      .section-toggle {
        display: flex;
        align-items: center;
        justify-content: space-between;
        width: 100%;
        padding: 0;
        margin-bottom: var(--spacing-md, 16px);
        background: none;
        border: none;
        cursor: pointer;
        text-align: left;
      }

      .section-toggle h4 {
        margin: 0;
        font-size: var(--font-size-base, 1rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .toggle-icon {
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #475569);
        transition: transform 0.2s ease;
      }

      .section-toggle[aria-expanded="false"] .toggle-icon {
        transform: rotate(-90deg);
      }

      .considerations-list {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-sm, 8px);
      }

      .considerations-list.collapsed {
        display: none;
      }

      /* Consideration Item */
      .consideration-item {
        display: flex;
        gap: var(--spacing-md, 16px);
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        background: var(--surface-secondary, #f8fafc);
        border-radius: var(--radius-md, 6px);
      }

      .consideration-icon {
        flex-shrink: 0;
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1rem;
      }

      .consideration-content {
        flex: 1;
        min-width: 0;
      }

      .consideration-title {
        margin: 0;
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .consideration-title .value {
        margin-left: var(--spacing-sm, 8px);
        padding: 2px var(--spacing-xs, 4px);
        font-size: var(--font-size-xs, 0.75rem);
        background: var(--surface-tertiary, #e2e8f0);
        border-radius: var(--radius-sm, 4px);
      }

      .consideration-message {
        margin: var(--spacing-xs, 4px) 0 0 0;
        font-size: var(--font-size-xs, 0.75rem);
        color: var(--text-secondary, #475569);
        line-height: 1.4;
      }

      .consideration-action {
        margin: var(--spacing-xs, 4px) 0 0 0;
        font-size: var(--font-size-xs, 0.75rem);
        color: var(--color-primary, #0d9488);
        font-weight: 500;
      }

      /* Icon Colors by Type */
      .type-warning {
        color: var(--color-warning, #f59e0b);
      }

      .type-note {
        color: var(--color-info, #3b82f6);
      }

      .type-action {
        color: var(--color-success, #22c55e);
      }

      .type-info {
        color: var(--text-secondary, #6b7280);
      }

      /* Mobile Responsive */
      @media (max-width: 768px) {
        .recommendations-wrapper {
          max-width: 100%;
          overflow-x: hidden;
        }

        .recommendations-header {
          padding: var(--spacing-md, 16px);
          padding-bottom: 0;
        }

        .recommendations-header h3 {
          font-size: var(--font-size-base, 1rem);
        }

        .insights-section,
        .considerations-section {
          padding: var(--spacing-md, 16px);
          max-width: 100%;
        }

        .insights-list {
          max-width: 100%;
        }

        .section-header h4,
        .section-toggle h4 {
          font-size: var(--font-size-sm, 0.875rem);
        }

        .count-badge {
          min-width: 20px;
          height: 20px;
          font-size: 0.65rem;
        }

        .insight-card {
          padding: var(--spacing-sm, 8px);
          gap: var(--spacing-sm, 8px);
          max-width: 100%;
        }

        .insight-title {
          font-size: var(--font-size-sm, 0.875rem);
        }

        .insight-message {
          font-size: var(--font-size-xs, 0.75rem);
        }

        .insight-action {
          font-size: var(--font-size-xs, 0.75rem);
          padding: var(--spacing-xs, 4px);
        }

        .consideration-item {
          padding: var(--spacing-xs, 4px) var(--spacing-sm, 8px);
          max-width: 100%;
        }

        .considerations-list {
          max-width: 100%;
        }

        .consideration-title {
          font-size: var(--font-size-xs, 0.75rem);
        }

        .consideration-message,
        .consideration-action {
          font-size: 0.65rem;
        }
      }

      @media (max-width: 480px) {
        .recommendations-wrapper {
          border-radius: 0;
          border-left: none;
          border-right: none;
        }

        .insight-card {
          flex-direction: column;
          gap: var(--spacing-xs, 4px);
        }

        .insight-icon {
          align-self: flex-start;
        }

        .consideration-item {
          flex-direction: column;
          gap: 2px;
        }

        .consideration-icon {
          align-self: flex-start;
        }
      }
    `}afterRender(){const t=this.$("#considerations-toggle");t?.addEventListener("click",()=>{this._considerationsExpanded=!this._considerationsExpanded,t.setAttribute("aria-expanded",String(this._considerationsExpanded)),this.$("#considerations-list")?.classList.toggle("collapsed",!this._considerationsExpanded)}),this.updateDisplay()}updateDisplay(){this.renderInsights(),this.renderConsiderations()}renderInsights(){const t=this.$("#insights-list"),e=this.$("#insights-count");if(t){if(e&&(e.textContent=String(this._insights.length)),this._insights.length===0){t.innerHTML=`
        <p class="empty-state">No specific insights for this scenario. Your parameters appear well-balanced.</p>
      `;return}t.innerHTML=this._insights.map(r=>this.renderInsightCard(r)).join("")}}renderInsightCard(t){const e=`type-${t.type}`,r=qv(t.type),i=this.getIconEmoji(t.type);return`
      <div class="insight-card" style="--card-accent-color: ${r}">
        <div class="insight-icon ${e}">${i}</div>
        <div class="insight-content">
          <h5 class="insight-title">${this.escapeHtml(t.title)}</h5>
          <p class="insight-message">${this.escapeHtml(t.message)}</p>
          ${t.action?`
            <p class="insight-action">
              <strong>Action:</strong> ${this.escapeHtml(t.action)}
            </p>
          `:""}
        </div>
      </div>
    `}renderConsiderations(){const t=this.$("#considerations-list");if(t){if(this._considerations.length===0){t.innerHTML="";return}t.innerHTML=this._considerations.map(e=>this.renderConsiderationItem(e)).join(""),t.classList.toggle("collapsed",!this._considerationsExpanded)}}renderConsiderationItem(t){const e=`type-${t.type}`,r=this.getConsiderationIcon(t.type);return`
      <div class="consideration-item">
        <div class="consideration-icon ${e}">${r}</div>
        <div class="consideration-content">
          <h6 class="consideration-title">
            ${this.escapeHtml(t.title)}
            ${t.value?`<span class="value">${this.escapeHtml(t.value)}</span>`:""}
          </h6>
          <p class="consideration-message">${this.escapeHtml(t.message)}</p>
          ${t.action?`
            <p class="consideration-action">${this.escapeHtml(t.action)}</p>
          `:""}
        </div>
      </div>
    `}getIconEmoji(t){switch(t){case"warning":return"&#x26A0;";case"note":return"&#x1F4DD;";case"action":return"&#x2705;";case"info":return"&#x1F4A1;"}}getConsiderationIcon(t){switch(t){case"warning":return"&#x26A0;";case"note":return"&#x2139;";case"action":return"&#x1F3AF;"}}escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}}customElements.define("recommendations-section",kx);class Cx extends Ct{_data=null;donutChart=null;set data(t){this._data=t,this.updateVisualization()}get data(){return this._data}template(){return`
      <div class="portfolio-viz-card">
        <div class="card-header">
          <svg class="header-icon" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M12 2a10 10 0 0 1 10 10"></path>
          </svg>
          <div class="header-text">
            <span class="header-title">Portfolio Composition</span>
            <span class="header-subtitle" id="asset-count">0 Assets</span>
          </div>
        </div>
        <div class="portfolio-content">
          <div class="donut-container">
            <canvas id="viz-donut"></canvas>
            <div class="donut-center" id="donut-center">0 ASSETS</div>
          </div>
          <div class="asset-bars-list" id="asset-bars">
            \x3C!-- Horizontal bars populated dynamically -->
          </div>
        </div>
      </div>
    `}styles(){return`
      :host {
        display: block;
      }

      .portfolio-viz-card {
        background: #f0fdfa;
        border: 1px solid #99f6e4;
        border-radius: var(--radius-lg, 12px);
        padding: var(--spacing-md, 16px);
      }

      .card-header {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
        margin-bottom: var(--spacing-md, 16px);
        padding-bottom: var(--spacing-sm, 8px);
        border-bottom: 1px solid #99f6e4;
      }

      .header-icon {
        color: var(--color-primary, #0d9488);
      }

      .header-text {
        flex: 1;
      }

      .header-title {
        display: block;
        font-weight: 600;
        font-size: var(--font-size-md, 1rem);
        color: #1e293b; /* Force dark text on light accent background */
      }

      .header-subtitle {
        display: block;
        font-size: var(--font-size-sm, 0.875rem);
        color: #64748b; /* Force gray text on light accent background */
      }

      .portfolio-content {
        display: flex;
        gap: var(--spacing-lg, 24px);
        align-items: flex-start;
      }

      .donut-container {
        position: relative;
        width: 120px;
        height: 120px;
        flex-shrink: 0;
      }

      #viz-donut {
        width: 100%;
        height: 100%;
      }

      .donut-center {
        position: absolute;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        text-align: center;
        font-size: var(--font-size-xs, 0.75rem);
        font-weight: 700;
        color: #64748b; /* Force gray text on light accent background */
        pointer-events: none;
      }

      .asset-bars-list {
        flex: 1;
        display: flex;
        flex-direction: column;
        gap: var(--spacing-xs, 4px);
        min-width: 0;
      }

      .asset-bar-row {
        position: relative;
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
        height: 28px;
        padding: 0 var(--spacing-sm, 8px);
        border-radius: var(--radius-sm, 4px);
        background: white;
        overflow: hidden;
      }

      .asset-bar-row::before {
        content: '';
        position: absolute;
        left: 0;
        top: 0;
        bottom: 0;
        width: var(--bar-width, 0%);
        background: var(--bar-color, #0d9488);
        opacity: 0.15;
        border-radius: var(--radius-sm, 4px);
        z-index: 0;
      }

      .asset-bar-swatch {
        width: 12px;
        height: 12px;
        border-radius: var(--radius-xs, 2px);
        flex-shrink: 0;
        z-index: 1;
      }

      .asset-bar-name {
        flex: 1;
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 500;
        color: #1e293b; /* Force dark text on light accent background */
        z-index: 1;
        white-space: nowrap;
        overflow: hidden;
        text-overflow: ellipsis;
      }

      .asset-bar-percent {
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 600;
        color: #1e293b; /* Force dark text on light accent background */
        z-index: 1;
        flex-shrink: 0;
      }

      /* Responsive: stack on narrow widths */
      @media (max-width: 400px) {
        .portfolio-content {
          flex-direction: column;
          align-items: center;
        }

        .asset-bars-list {
          width: 100%;
        }
      }

      /* Dark mode styles */
      :host-context([data-theme="dark"]) .portfolio-viz-card {
        background: #132f2f;
        border-color: #1f4a4a;
      }

      :host-context([data-theme="dark"]) .card-header {
        border-bottom-color: #1f4a4a;
      }

      :host-context([data-theme="dark"]) .header-title {
        color: var(--text-primary, #f1f5f9);
      }

      :host-context([data-theme="dark"]) .header-subtitle {
        color: var(--text-secondary, #94a3b8);
      }

      :host-context([data-theme="dark"]) .donut-center {
        color: var(--text-secondary, #94a3b8);
      }

      :host-context([data-theme="dark"]) .asset-bar-row {
        background: #1a3838;
      }

      :host-context([data-theme="dark"]) .asset-bar-name {
        color: var(--text-primary, #f1f5f9);
      }

      :host-context([data-theme="dark"]) .asset-bar-percent {
        color: var(--color-primary, #14b8a6);
      }
    `}connectedCallback(){super.connectedCallback()}disconnectedCallback(){this.donutChart&&(this.donutChart.destroy(),this.donutChart=null),super.disconnectedCallback()}afterRender(){Ve.register(fa,vn,Nd),this.initializeDonutChart(),this.updateVisualization()}initializeDonutChart(){const t=this.$("#viz-donut");t&&(this.donutChart=new Ve(t,{type:"doughnut",data:{labels:[],datasets:[{data:[],backgroundColor:[],borderColor:"#ffffff",borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!0,cutout:"70%",plugins:{legend:{display:!1},tooltip:{callbacks:{label:e=>{const r=e.raw;return`${e.label}: ${r.toFixed(1)}%`}}}}}}))}updateVisualization(){if(!this._data)return;const t=this._data.assets,e=t.length,r=this.$("#asset-count");r&&(r.textContent=`${e} Asset${e!==1?"s":""}`);const i=this.$("#donut-center");if(i&&(i.textContent=`${e} ASSET${e!==1?"S":""}`),this.donutChart){const o=t.map(h=>h.name),l=t.map(h=>h.weight),d=t.map(h=>h.color);this.donutChart.data.labels=o,this.donutChart.data.datasets[0].data=l,this.donutChart.data.datasets[0].backgroundColor=d,this.donutChart.update()}const n=[...t].sort((o,l)=>l.weight-o.weight),s=this.$("#asset-bars");s&&(s.innerHTML=n.map(o=>`
        <div class="asset-bar-row" style="--bar-width: ${o.weight}%; --bar-color: ${o.color};">
          <div class="asset-bar-swatch" style="background-color: ${o.color}"></div>
          <span class="asset-bar-name">${o.name}</span>
          <span class="asset-bar-percent">${o.weight.toFixed(1)}%</span>
        </div>
      `).join(""))}}customElements.define("portfolio-viz-card",Cx);class Sx extends Ct{_isOpen=!1;_isVisible=!1;_boundDocumentClick=null;navSections=[{id:"key-metrics-section",label:"Key Metrics"},{id:"param-summary-section",label:"Parameters"},{id:"net-worth-spectrum-section",label:"Portfolio Outlook"},{id:"strategy-analysis-section",label:"Strategy Analysis"},{id:"visual-comparison-section",label:"Visual Comparison"},{id:"recommendations-section",label:"Recommendations"},{id:"performance-table-section",label:"Performance Tables"},{id:"yearly-analysis-section",label:"Yearly Analysis"}];static get observedAttributes(){return["visible"]}template(){const t=this.navSections.map(e=>`
        <li role="none">
          <a href="#${e.id}"
             role="menuitem"
             tabindex="-1"
             data-section="${e.id}">${e.label}</a>
        </li>
      `).join("");return`
      <div class="fab-container" aria-hidden="${!this._isVisible}">
        <button class="fab-button"
                id="fab-trigger"
                type="button"
                aria-haspopup="menu"
                aria-expanded="${this._isOpen}"
                aria-controls="fab-menu"
                aria-label="Jump to section">
          <svg width="24" height="24" viewBox="0 0 24 24" fill="none"
               xmlns="http://www.w3.org/2000/svg" aria-hidden="true">
            \x3C!-- Navigation list icon with dots -->
            <circle cx="6" cy="6" r="1.5" fill="currentColor"/>
            <line x1="10" y1="6" x2="20" y2="6" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <circle cx="6" cy="12" r="1.5" fill="currentColor"/>
            <line x1="10" y1="12" x2="20" y2="12" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            <circle cx="6" cy="18" r="1.5" fill="currentColor"/>
            <line x1="10" y1="18" x2="20" y2="18" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
          </svg>
        </button>
        <ul class="fab-menu ${this._isOpen?"open":""}"
            id="fab-menu"
            role="menu"
            aria-labelledby="fab-trigger">
          ${t}
        </ul>
      </div>
    `}styles(){return`
      :host {
        display: contents;
      }

      /* FAB Container - Fixed position at bottom-right */
      .fab-container {
        position: fixed;
        bottom: calc(24px + env(safe-area-inset-bottom, 0px));
        right: calc(24px + env(safe-area-inset-right, 0px));
        z-index: 999;
      }

      .fab-container[aria-hidden="true"] {
        display: none;
      }

      /* FAB Button - 56px circular button */
      .fab-button {
        width: 56px;
        height: 56px;
        border-radius: 50%;
        border: none;
        background: var(--color-primary, #0d9488);
        color: var(--text-inverse, #ffffff);
        cursor: pointer;
        box-shadow: var(--shadow-lg, 0 8px 32px rgba(26, 36, 36, 0.12));
        transition: transform 0.2s ease, box-shadow 0.2s ease, background-color 0.2s ease;
        display: flex;
        align-items: center;
        justify-content: center;
        padding: 0;
        touch-action: manipulation;
        -webkit-tap-highlight-color: rgba(13, 148, 136, 0.2);
      }

      .fab-button:hover {
        transform: scale(1.05);
        box-shadow: var(--shadow-hover, 0 12px 40px rgba(26, 36, 36, 0.15));
        background: var(--color-primary-hover, #0f766e);
      }

      .fab-button:active {
        transform: scale(0.98);
      }

      .fab-button:focus-visible {
        outline: 2px solid var(--color-primary, #0d9488);
        outline-offset: 3px;
      }

      .fab-button svg {
        width: 24px;
        height: 24px;
        flex-shrink: 0;
      }

      /* FAB Menu - Popup above button */
      .fab-menu {
        position: absolute;
        bottom: calc(100% + 8px);
        right: 0;
        background: var(--surface-primary, #ffffff);
        border-radius: var(--border-radius-lg, 12px);
        box-shadow: var(--shadow-lg, 0 8px 32px rgba(26, 36, 36, 0.12));
        padding: var(--spacing-sm, 8px) 0;
        min-width: 200px;
        opacity: 0;
        visibility: hidden;
        transform: translateY(8px) scale(0.95);
        transform-origin: bottom right;
        transition: opacity 0.15s ease, transform 0.15s ease, visibility 0.15s;
        list-style: none;
        margin: 0;
        border: 1px solid var(--border-color, #e2e8f0);
      }

      .fab-menu.open {
        opacity: 1;
        visibility: visible;
        transform: translateY(0) scale(1);
      }

      /* Menu Items */
      .fab-menu li {
        margin: 0;
        padding: 0;
      }

      .fab-menu a {
        display: block;
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        color: var(--text-primary, #1e293b);
        text-decoration: none;
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 500;
        white-space: nowrap;
        transition: background-color 0.1s ease, color 0.1s ease;
      }

      .fab-menu a:hover {
        background: var(--surface-secondary, #f8fafc);
        color: var(--color-primary, #0d9488);
      }

      .fab-menu a:focus {
        background: var(--surface-secondary, #f8fafc);
        color: var(--color-primary, #0d9488);
        outline: none;
      }

      .fab-menu a:focus-visible {
        outline: 2px solid var(--color-primary, #0d9488);
        outline-offset: -2px;
      }

      /* Reduced motion support */
      @media (prefers-reduced-motion: reduce) {
        .fab-button,
        .fab-menu,
        .fab-menu a {
          transition: none;
        }

        .fab-button:hover {
          transform: none;
        }
      }

      /* Mobile optimization - larger touch target */
      @media (max-width: 768px) {
        .fab-container {
          bottom: calc(80px + env(safe-area-inset-bottom, 0px));
        }

        .fab-button {
          width: 60px;
          height: 60px;
        }

        .fab-menu {
          min-width: 220px;
        }

        .fab-menu a {
          padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
          min-height: 44px;
          display: flex;
          align-items: center;
        }
      }
    `}afterRender(){const t=this.$(".fab-button"),e=this.$(".fab-menu"),r=this.$$(".fab-menu a");!t||!e||(t.addEventListener("click",i=>{i.stopPropagation(),this.toggle()}),r.forEach(i=>{i.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation();const s=i.dataset.section;s&&this.scrollToSection(s)})}),t.addEventListener("keydown",i=>{this.handleButtonKeydown(i)}),e.addEventListener("keydown",i=>{this.handleMenuKeydown(i,t)}),this._isOpen&&!this._boundDocumentClick&&(this._boundDocumentClick=i=>this.handleDocumentClick(i),document.addEventListener("click",this._boundDocumentClick)),this._isOpen&&r.length>0&&requestAnimationFrame(()=>{r[0]?.focus()}))}disconnectedCallback(){super.disconnectedCallback(),this._boundDocumentClick&&(document.removeEventListener("click",this._boundDocumentClick),this._boundDocumentClick=null)}handleDocumentClick(t){t.composedPath().includes(this)||this.close()}handleButtonKeydown(t){switch(t.key){case"Enter":case" ":t.preventDefault(),this.open(),this.focusItem(0);break;case"ArrowDown":t.preventDefault(),this.open(),this.focusItem(0);break;case"ArrowUp":t.preventDefault(),this.open(),this.focusItem(-1);break}}handleMenuKeydown(t,e){const r=this.$$(".fab-menu a"),i=Array.from(r).indexOf(this.shadow.activeElement);switch(t.key){case"Escape":t.preventDefault(),this.close(),e?.focus();break;case"ArrowDown":t.preventDefault(),this.focusItem((i+1)%r.length);break;case"ArrowUp":t.preventDefault(),this.focusItem((i-1+r.length)%r.length);break;case"Home":t.preventDefault(),this.focusItem(0);break;case"End":t.preventDefault(),this.focusItem(r.length-1);break;case"Tab":this.close();break}}focusItem(t){const e=this.$$(".fab-menu a");if(e.length===0)return;const r=t<0?e.length-1:t;e[r]?.focus()}scrollToSection(t){const e=document.querySelector("app-root");if(!e?.shadowRoot){console.warn("[FAB] app-root not found");return}const r=e.shadowRoot.querySelector("comparison-dashboard")||e.shadowRoot.querySelector("results-dashboard");if(!r?.shadowRoot){console.warn("[FAB] dashboard not found");return}let i=null;if(r.tagName.toLowerCase()==="comparison-dashboard"){const n=r.shadowRoot.querySelectorAll("results-dashboard");for(const s of n)if(i=s.shadowRoot?.querySelector(`#${t}`)??null,i)break}else i=r.shadowRoot.querySelector(`#${t}`);i?(i.scrollIntoView({behavior:"smooth",block:"start"}),this.close()):console.warn(`[FAB] Section #${t} not found`)}show(){this._isVisible=!0,this.setAttribute("visible",""),this.render()}hide(){this._isVisible=!1,this.removeAttribute("visible"),this._isOpen=!1,this._boundDocumentClick&&(document.removeEventListener("click",this._boundDocumentClick),this._boundDocumentClick=null),this.render()}open(){this._isOpen||(this._isOpen=!0,this.render())}close(){this._isOpen&&(this._isOpen=!1,this._boundDocumentClick&&(document.removeEventListener("click",this._boundDocumentClick),this._boundDocumentClick=null),this.render())}toggle(){this._isOpen?this.close():this.open()}}customElements.define("fab-navigation",Sx);const Sc=["#0d9488","#8b5cf6","#f59e0b","#ef4444","#3b82f6","#10b981","#ec4899","#6366f1","#14b8a6","#f97316"];class Ax extends Ct{_data=null;_portfolioWeights=null;_correlationMatrix=null;_initialValue=1e6;_timeHorizon=30;_annualWithdrawal=5e4;_effectiveTaxRate=.37;_simulationConfig=null;_simulationsRun=1e4;set data(t){this._data=t,this.updateCharts()}get data(){return this._data}set portfolioWeights(t){this._portfolioWeights=t,this.updateCharts()}get portfolioWeights(){return this._portfolioWeights}set correlationMatrix(t){this._correlationMatrix=t,this.updateCharts()}get correlationMatrix(){return this._correlationMatrix}set initialValue(t){this._initialValue=t}set timeHorizon(t){this._timeHorizon=t}set annualWithdrawal(t){this._annualWithdrawal=t}set effectiveTaxRate(t){this._effectiveTaxRate=t}set simulationConfig(t){this._simulationConfig=t,this.updateCharts()}get simulationConfig(){return this._simulationConfig}set simulationsRun(t){this._simulationsRun=t}template(){return`
      <div class="dashboard-grid">
        \x3C!-- Executive Summary Section -->
        <section class="banner-section full-width" id="key-metrics-section">
          <key-metrics-banner id="key-metrics-banner"></key-metrics-banner>
        </section>

        <section class="param-section full-width" id="param-summary-section">
          <param-summary id="param-summary"></param-summary>
        </section>

        <section class="chart-section full-width">
          <h3>Portfolio Projection</h3>
          <div class="chart-container">
            <probability-cone-chart id="cone-chart"></probability-cone-chart>
          </div>
        </section>

        <section class="chart-section full-width">
          <h3>Terminal Value Distribution</h3>
          <div class="chart-container">
            <histogram-chart id="histogram-chart"></histogram-chart>
          </div>
        </section>

        <section class="stats-section full-width">
          <h3>Summary Statistics</h3>
          <div class="stats-grid" id="stats-grid">
            \x3C!-- Row 1: Core stats -->
            <div class="stat-item">
              <span class="stat-label">Median Value</span>
              <span class="stat-value" id="stat-median">-</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Success Rate</span>
              <span class="stat-value" id="stat-success">-</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Median CAGR</span>
              <span class="stat-value" id="stat-cagr">-</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">TWRR (Median)</span>
              <span class="stat-value" id="stat-twrr">-</span>
            </div>
            \x3C!-- Row 2: Additional stats -->
            <div class="stat-item">
              <span class="stat-label">Mean Value</span>
              <span class="stat-value" id="stat-mean">-</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Volatility</span>
              <span class="stat-value" id="stat-volatility">-</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Std Deviation</span>
              <span class="stat-value" id="stat-stddev">-</span>
            </div>
            <div class="stat-item">
              <span class="stat-label">Salary Equiv.</span>
              <span class="stat-value" id="stat-salary">-</span>
            </div>
          </div>
        </section>

        <section class="spectrum-section full-width" id="net-worth-spectrum-section">
          <percentile-spectrum
            id="net-worth-spectrum"
            title="TERMINAL NET WORTH DISTRIBUTION">
          </percentile-spectrum>
        </section>

        \x3C!-- Portfolio visualization now integrated into param-summary above -->
        \x3C!-- <section class="portfolio-viz-section full-width">
          <portfolio-viz-card id="portfolio-viz-card"></portfolio-viz-card>
        </section> -->

        <section class="chart-section full-width">
          <h3>Asset Correlations</h3>
          <div class="correlation-container">
            <correlation-heatmap id="heatmap-chart"></correlation-heatmap>
          </div>
        </section>

        <section class="salary-section full-width" id="salary-equivalent-section">
          <salary-equivalent-section id="salary-equivalent"></salary-equivalent-section>
        </section>

        <section class="spectrum-section full-width sbloc-section" id="debt-spectrum-section">
          <div class="debt-spectrum-wrapper">
            <p class="debt-intro">Understanding your debt accumulation from two perspectives:</p>
            <div class="debt-box">
              <div class="debt-box-header">
                <span class="debt-icon">&#x1F3E6;</span>
                <div>
                  <h4>Actual LOC Balance (By Scenario) after <span id="debt-years">30</span> years</h4>
                  <p class="debt-subtitle">After margin call liquidations and portfolio dynamics</p>
                </div>
              </div>
              <percentile-spectrum
                id="debt-spectrum"
                title="">
              </percentile-spectrum>
              <div class="debt-explanation">
                <p><strong>What this shows:</strong> The actual LOC balance at the end of each simulation path. This varies by percentile because:</p>
                <ul>
                  <li><strong>Margin calls trigger asset sales</strong> that pay down debt (reducing the balance)</li>
                  <li><strong>Failed simulations</strong> (worst cases) may end early, accumulating less total debt</li>
                  <li><strong>Successful simulations</strong> run the full period without forced liquidations</li>
                </ul>
              </div>
            </div>
          </div>
        </section>

        <section class="chart-section sbloc-section" id="margin-call-section">
          <h3>Margin Call Risk by Year</h3>
          <div class="chart-container">
            <margin-call-chart id="margin-call-chart"></margin-call-chart>
          </div>
        </section>

        <section class="chart-section sbloc-section" id="sbloc-balance-section">
          <h3>SBLOC Balance Over Time</h3>
          <div class="chart-container">
            <sbloc-balance-chart id="sbloc-balance-chart"></sbloc-balance-chart>
          </div>
        </section>

        <section class="chart-section full-width sbloc-section" id="bbd-comparison-section">
          <h3>BBD Strategy vs Sell Assets Comparison</h3>
          <div class="chart-container bbd-container">
            <bbd-comparison-chart id="bbd-comparison-chart"></bbd-comparison-chart>
          </div>
        </section>

        <section class="strategy-section full-width sbloc-section" id="strategy-analysis-section">
          <strategy-analysis id="strategy-analysis"></strategy-analysis>
        </section>

        \x3C!-- Visual Comparison Section -->
        <section class="visual-comparison-section full-width sbloc-section" id="visual-comparison-section">
          <div class="comparison-wrapper">
            <h3>Visual Strategy Comparison</h3>
            <p class="comparison-intro">Compare BBD vs Sell strategies across multiple dimensions</p>

            <div class="comparison-grid">
              \x3C!-- Net Worth Over Time -->
              <div class="comparison-chart-card">
                <h4>Net Worth Over Time (Median)</h4>
                <div class="comparison-chart-container">
                  <comparison-line-chart id="comparison-line-chart"></comparison-line-chart>
                </div>
              </div>

              \x3C!-- Cumulative Costs -->
              <div class="comparison-chart-card">
                <h4>Cumulative Costs: Taxes vs Interest</h4>
                <div class="comparison-chart-container">
                  <cumulative-costs-chart id="cumulative-costs-chart"></cumulative-costs-chart>
                </div>
              </div>

              \x3C!-- Terminal Distribution -->
              <div class="comparison-chart-card full-width">
                <h4>Terminal Value Distribution (All Percentiles)</h4>
                <div class="comparison-chart-container short">
                  <terminal-comparison-chart id="terminal-comparison-chart"></terminal-comparison-chart>
                </div>
              </div>

              \x3C!-- SBLOC Utilization -->
              <div class="comparison-chart-card full-width">
                <h4>SBLOC Utilization Over Time (%)</h4>
                <div class="comparison-chart-container">
                  <sbloc-utilization-chart id="sbloc-utilization-chart"></sbloc-utilization-chart>
                </div>
              </div>
            </div>
          </div>
        </section>

        <section class="recommendations-section full-width" id="recommendations-section">
          <recommendations-section id="recommendations"></recommendations-section>
        </section>

        <section class="table-section full-width" id="performance-table-section">
          <performance-table id="performance-table"></performance-table>
        </section>

        <section class="table-section full-width" id="return-probability-section">
          <return-probability-table id="return-probability-table"></return-probability-table>
        </section>

        <section class="table-section full-width" id="yearly-analysis-section">
          <yearly-analysis-table id="yearly-analysis-table"></yearly-analysis-table>
        </section>

        <section class="table-section full-width sbloc-section" id="sell-yearly-analysis-section">
          <sell-yearly-analysis-table id="sell-yearly-analysis-table"></sell-yearly-analysis-table>
        </section>
      </div>

      \x3C!-- Debug Panel (development only) -->
      <section class="debug-section" id="debug-section">
        <div class="debug-header">
          <button class="debug-toggle" id="debug-toggle">
            <span class="debug-toggle-icon">â¶</span>
            Debug Panel
          </button>
          <button class="debug-copy hidden" id="debug-copy" title="Copy to clipboard">
            ð Copy
          </button>
        </div>
        <div class="debug-content hidden" id="debug-content">
          <pre id="debug-output"></pre>
        </div>
      </section>

      \x3C!-- FAB Navigation for quick section access -->
      <fab-navigation id="fab-nav"></fab-navigation>
    `}styles(){return`
      :host {
        display: block;
        max-width: 100%;
        overflow-x: hidden;
        /* Critical: allows flex child to shrink below content size (fixes zoom issues) */
        min-width: 0;
      }

      /* Shadow DOM reset - global box-sizing doesn't penetrate */
      *, *::before, *::after {
        box-sizing: border-box;
      }

      .dashboard-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--spacing-lg, 24px);
        max-width: 100%;
        overflow-x: hidden;
      }

      .full-width {
        grid-column: 1 / -1;
      }

      .chart-section,
      .stats-section {
        background: var(--surface-primary, #ffffff);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--radius-lg, 8px);
        padding: var(--spacing-lg, 24px);
        transition: transform 0.3s cubic-bezier(0.23, 1, 0.32, 1),
                    box-shadow 0.3s cubic-bezier(0.23, 1, 0.32, 1),
                    border-color 0.3s ease;
      }

      .chart-section:hover,
      .stats-section:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-lg, 0 8px 32px rgba(26, 36, 36, 0.12));
        border-color: var(--color-primary, #0d9488);
      }

      /* Add container query context for child components */
      .chart-section {
        container-type: inline-size;
        container-name: chart-section;
      }

      .chart-section h3,
      .stats-section h3 {
        margin: 0 0 var(--spacing-md, 16px) 0;
        font-size: var(--font-size-lg, 1.125rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .chart-container {
        height: 400px;
        position: relative;
        min-width: 0;  /* Prevents flex child overflow */
        max-width: 100%;
      }

      .chart-container.square {
        aspect-ratio: 1;
        height: auto;
        min-height: 300px;
      }

      .correlation-container {
        /* No fixed height - let table determine size */
      }

      .chart-container probability-cone-chart,
      .chart-container histogram-chart,
      .chart-container donut-chart,
      .chart-container correlation-heatmap,
      .chart-container bbd-comparison-chart,
      .chart-container margin-call-chart,
      .chart-container sbloc-balance-chart {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
      }

      .stats-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: var(--spacing-md, 16px);
      }

      .stat-item {
        background: var(--surface-secondary, #f8fafc);
        border-radius: var(--radius-md, 6px);
        padding: var(--spacing-md, 16px);
        text-align: center;
        transition: transform 0.3s cubic-bezier(0.23, 1, 0.32, 1),
                    box-shadow 0.3s cubic-bezier(0.23, 1, 0.32, 1),
                    border-color 0.3s ease;
      }

      .stat-item:hover {
        transform: translateY(-2px);
        box-shadow: var(--shadow-md, 0 4px 12px rgba(26, 36, 36, 0.08));
      }

      .stat-label {
        display: block;
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #475569);
        margin-bottom: var(--spacing-xs, 4px);
      }

      .stat-value {
        display: block;
        font-size: var(--font-size-xl, 1.25rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .no-data {
        background: var(--surface-secondary, #f8fafc);
        border: 2px dashed var(--border-color, #e2e8f0);
        border-radius: var(--radius-lg, 8px);
        padding: var(--spacing-2xl, 48px);
        text-align: center;
        color: var(--text-secondary, #475569);
      }

      .no-data p {
        margin: 0;
        font-size: var(--font-size-base, 1rem);
      }

      /* Hide dashboard grid when no data */
      .dashboard-grid.hidden {
        display: none;
      }

      .no-data.hidden {
        display: none;
      }

      /* Executive summary sections - components provide their own styling */
      .banner-section,
      .param-section {
        /* Component provides its own styling */
      }

      /* Portfolio visualization section - component provides its own styling */
      .portfolio-viz-section {
        /* Component provides its own styling */
      }

      /* Spectrum sections styling */
      .spectrum-section {
        /* Component provides its own styling */
      }

      /* SBLOC sections hidden by default (show when SBLOC data available) */
      .sbloc-section {
        display: none;
      }

      .sbloc-section.visible {
        display: block;
      }

      /* Salary equivalent section hidden by default (show when withdrawal > 0) */
      .salary-section {
        display: none;
      }

      .salary-section.visible {
        display: block;
      }

      /* Strategy analysis section styling */
      .strategy-section {
        /* Component provides its own styling */
      }

      /* Yearly analysis table section styling */
      .table-section {
        /* Component provides its own styling */
      }

      /* Recommendations section styling */
      .recommendations-section {
        /* Component provides its own styling */
      }

      /* BBD comparison chart container (shorter height for bar chart) */
      .bbd-container {
        height: 300px;
        max-width: 100%;
      }

      /* Debt spectrum section styling */
      .debt-spectrum-wrapper {
        background: var(--surface-primary, #ffffff);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--radius-lg, 8px);
        padding: var(--spacing-lg, 24px);
        transition: transform 0.3s cubic-bezier(0.23, 1, 0.32, 1),
                    box-shadow 0.3s cubic-bezier(0.23, 1, 0.32, 1),
                    border-color 0.3s ease;
      }

      .debt-spectrum-wrapper:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-lg, 0 8px 32px rgba(26, 36, 36, 0.12));
        border-color: var(--color-primary, #0d9488);
      }

      .debt-intro {
        color: var(--text-secondary, #475569);
        font-size: var(--font-size-sm, 0.875rem);
        margin: 0 0 var(--spacing-md, 16px) 0;
      }

      .debt-box {
        background: var(--surface-secondary, #f8fafc);
        border: 1px solid var(--border-color, #e2e8f0);
        border-left: 4px solid var(--color-primary, #0d9488);
        border-radius: var(--radius-md, 6px);
        padding: var(--spacing-md, 16px);
      }

      .debt-box-header {
        display: flex;
        align-items: flex-start;
        gap: var(--spacing-md, 16px);
        margin-bottom: var(--spacing-md, 16px);
      }

      .debt-icon {
        font-size: 1.5rem;
        line-height: 1;
      }

      .debt-box-header h4 {
        margin: 0;
        font-size: var(--font-size-base, 1rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .debt-subtitle {
        margin: var(--spacing-xs, 4px) 0 0 0;
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #475569);
      }

      .debt-explanation {
        margin-top: var(--spacing-lg, 24px);
        padding-top: var(--spacing-md, 16px);
        border-top: 1px solid var(--border-color, #e2e8f0);
      }

      .debt-explanation p {
        margin: 0 0 var(--spacing-sm, 8px) 0;
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #475569);
      }

      .debt-explanation ul {
        margin: 0;
        padding-left: var(--spacing-lg, 24px);
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #475569);
      }

      .debt-explanation li {
        margin-bottom: var(--spacing-xs, 4px);
      }

      .debt-explanation li:last-child {
        margin-bottom: 0;
      }

      /* Visual comparison section styling */
      .visual-comparison-section {
        /* Inherits sbloc-section visibility rules */
      }

      .comparison-wrapper {
        background: var(--surface-primary, #ffffff);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--radius-lg, 8px);
        padding: var(--spacing-lg, 24px);
        max-width: 100%;
        transition: transform 0.3s cubic-bezier(0.23, 1, 0.32, 1),
                    box-shadow 0.3s cubic-bezier(0.23, 1, 0.32, 1),
                    border-color 0.3s ease;
      }

      .comparison-wrapper:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-lg, 0 8px 32px rgba(26, 36, 36, 0.12));
        border-color: var(--color-primary, #0d9488);
      }

      .comparison-wrapper h3 {
        margin: 0 0 var(--spacing-xs, 4px) 0;
        font-size: var(--font-size-xl, 1.25rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .comparison-intro {
        margin: 0 0 var(--spacing-lg, 24px) 0;
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #475569);
      }

      .comparison-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--spacing-lg, 24px);
      }

      .comparison-chart-card {
        background: var(--surface-secondary, #f8fafc);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--radius-md, 6px);
        padding: var(--spacing-md, 16px);
        transition: transform 0.3s cubic-bezier(0.23, 1, 0.32, 1),
                    box-shadow 0.3s cubic-bezier(0.23, 1, 0.32, 1),
                    border-color 0.3s ease;
      }

      .comparison-chart-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-lg, 0 8px 32px rgba(26, 36, 36, 0.12));
        border-color: var(--color-primary, #0d9488);
      }

      .comparison-chart-card.full-width {
        grid-column: 1 / -1;
      }

      .comparison-chart-card h4 {
        margin: 0 0 var(--spacing-md, 16px) 0;
        font-size: var(--font-size-base, 1rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .comparison-chart-container {
        position: relative;
        height: 350px;
        min-width: 0;  /* Flex child overflow prevention */
        max-width: 100%;
      }

      .comparison-chart-container.short {
        height: 280px;
      }

      .comparison-chart-container comparison-line-chart,
      .comparison-chart-container cumulative-costs-chart,
      .comparison-chart-container terminal-comparison-chart,
      .comparison-chart-container sbloc-utilization-chart {
        position: absolute;
        inset: 0;
        width: 100%;
        height: 100%;
      }

      /* Reduced motion support - disable animations for users who prefer reduced motion */
      @media (prefers-reduced-motion: reduce) {
        .chart-section,
        .stats-section,
        .stat-item,
        .comparison-chart-card,
        .debt-spectrum-wrapper,
        .comparison-wrapper {
          transition: none;
        }

        .chart-section:hover,
        .stats-section:hover,
        .stat-item:hover,
        .comparison-chart-card:hover,
        .debt-spectrum-wrapper:hover,
        .comparison-wrapper:hover {
          transform: none;
        }
      }

      /* Mobile responsive: single column on small screens */
      @media (max-width: 768px) {
        .dashboard-grid {
          grid-template-columns: 1fr;
          gap: var(--spacing-md, 16px);
        }

        .chart-section,
        .stats-section,
        .banner-section,
        .param-section,
        .spectrum-section,
        .strategy-section,
        .visual-comparison-section,
        .recommendations-section,
        .table-section,
        .salary-section {
          max-width: 100%;
          overflow-x: hidden;
        }

        .chart-section,
        .stats-section {
          padding: var(--spacing-md, 16px);
        }

        .full-width {
          max-width: 100%;
        }

        .comparison-wrapper {
          max-width: 100%;
          overflow-x: hidden;
        }

        .comparison-chart-card {
          max-width: 100%;
          overflow-x: hidden;
        }

        .comparison-chart-container comparison-line-chart,
        .comparison-chart-container cumulative-costs-chart,
        .comparison-chart-container terminal-comparison-chart,
        .comparison-chart-container sbloc-utilization-chart {
          position: absolute;
          inset: 0;
          width: 100%;
          height: 100%;
          max-width: 100%;
        }

        .chart-section h3,
        .stats-section h3 {
          font-size: var(--font-size-base, 1rem);
          margin-bottom: var(--spacing-sm, 8px);
        }

        .chart-container {
          height: 280px;
        }

        .stats-grid {
          grid-template-columns: repeat(2, 1fr);
          gap: var(--spacing-sm, 8px);
        }

        .stat-item {
          padding: var(--spacing-sm, 8px);
        }

        .stat-label {
          font-size: 0.75rem;
        }

        .stat-value {
          font-size: var(--font-size-base, 1rem);
        }

        .correlation-container {
          /* Allow table to scroll horizontally */
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
        }

        .comparison-grid {
          grid-template-columns: 1fr;
          gap: var(--spacing-md, 16px);
        }

        .comparison-wrapper {
          padding: var(--spacing-md, 16px);
        }

        .comparison-wrapper h3 {
          font-size: var(--font-size-base, 1rem);
        }

        .comparison-chart-card {
          padding: var(--spacing-sm, 8px);
        }

        .comparison-chart-card h4 {
          font-size: var(--font-size-sm, 0.875rem);
          margin-bottom: var(--spacing-sm, 8px);
        }

        .comparison-chart-container {
          height: 250px;
        }

        .comparison-chart-container.short {
          height: 220px;
        }

        .bbd-container {
          height: 250px;
        }

        /* Debt spectrum section mobile adjustments */
        .debt-spectrum-wrapper {
          padding: var(--spacing-md, 16px);
        }

        .debt-box {
          padding: var(--spacing-sm, 8px);
        }

        .debt-box-header {
          gap: var(--spacing-sm, 8px);
        }

        .debt-box-header h4 {
          font-size: var(--font-size-sm, 0.875rem);
        }

        .debt-explanation {
          margin-top: var(--spacing-md, 16px);
          padding-top: var(--spacing-sm, 8px);
        }

        .debt-explanation p,
        .debt-explanation ul {
          font-size: 0.75rem;
        }
      }

      /* Extra small mobile devices */
      @media (max-width: 480px) {
        .comparison-chart-container {
          height: 200px;
        }

        .comparison-chart-container.short {
          height: 180px;
        }
      }

      /* Debug section styling */
      .debug-section {
        margin-top: var(--spacing-xl, 32px);
        background: var(--surface-primary, #ffffff);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--radius-lg, 8px);
        overflow: hidden;
      }

      .debug-header {
        display: flex;
        align-items: center;
        background: var(--surface-secondary, #f8fafc);
      }

      .debug-toggle {
        flex: 1;
        padding: var(--spacing-md, 16px);
        background: transparent;
        border: none;
        cursor: pointer;
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 600;
        color: var(--text-secondary, #475569);
        text-align: left;
      }

      .debug-toggle:hover {
        background: var(--surface-tertiary, #f1f5f9);
      }

      .debug-toggle-icon {
        transition: transform 0.2s ease;
      }

      .debug-toggle.expanded .debug-toggle-icon {
        transform: rotate(90deg);
      }

      .debug-copy {
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        margin-right: var(--spacing-sm, 8px);
        background: var(--color-primary, #0d9488);
        color: white;
        border: none;
        border-radius: var(--radius-md, 6px);
        cursor: pointer;
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 500;
        transition: background 0.2s ease;
      }

      .debug-copy:hover {
        background: var(--color-primary-dark, #0f766e);
      }

      .debug-copy.copied {
        background: #22c55e;
      }

      .debug-copy.hidden {
        display: none;
      }

      .debug-content {
        padding: var(--spacing-md, 16px);
        max-height: 600px;
        overflow: auto;
        background: #1e293b;
      }

      .debug-content.hidden {
        display: none;
      }

      #debug-output {
        margin: 0;
        font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
        font-size: 11px;
        line-height: 1.5;
        color: #e2e8f0;
        white-space: pre-wrap;
        word-break: break-word;
      }

      /* Extra small screens */
      @media (max-width: 480px) {
        .chart-container {
          height: 240px;
        }

        .stats-grid {
          grid-template-columns: 1fr 1fr;
          gap: var(--spacing-xs, 4px);
        }

        .stat-item {
          padding: var(--spacing-xs, 4px);
        }

        .stat-label {
          font-size: 0.65rem;
        }

        .stat-value {
          font-size: var(--font-size-sm, 0.875rem);
        }

        .comparison-chart-container {
          height: 220px;
        }

        .comparison-chart-container.short {
          height: 200px;
        }

        .bbd-container {
          height: 220px;
        }
      }

      /* Large desktop (1280px+) - enhanced spacing and content width */
      /* Lowered from 1440px to account for ~400px sidebar */
      @media (min-width: 1280px) {
        .dashboard-grid {
          gap: var(--spacing-fluid-lg, clamp(24px, 3vw, 40px));
          padding: var(--spacing-fluid-md, clamp(16px, 2vw, 24px));
        }

        .chart-section,
        .stats-section {
          padding: var(--spacing-fluid-lg, clamp(24px, 3vw, 40px));
        }

        .chart-container {
          height: 450px;
        }

        .comparison-chart-container {
          height: 400px;
        }

        .comparison-chart-container.short {
          height: 320px;
        }
      }

      /* Widescreen (1400px+) - expanded grids and larger charts */
      /* Lowered to account for ~400px sidebar (1400px viewport = ~1000px content) */
      @media (min-width: 1400px) {
        .stats-grid {
          grid-template-columns: repeat(6, 1fr);
        }

        .chart-container {
          height: 480px;
        }

        .comparison-chart-container {
          height: 420px;
        }

        /* Optimize comparison section for widescreen */
        .comparison-wrapper {
          padding: var(--spacing-xl, 32px);
        }

        .comparison-grid {
          gap: var(--spacing-xl, 32px);
        }

        .comparison-chart-card {
          padding: var(--spacing-lg, 24px);
        }
      }

      /* Extra-wide (1600px+) - even larger comparison charts */
      @media (min-width: 1600px) {
        .comparison-chart-container {
          height: 480px;
        }

        .comparison-chart-container.short {
          height: 380px;
        }
      }

      /* Full HD+ widescreen (1920px+) - larger charts */
      @media (min-width: 1920px) {
        .chart-container {
          height: 520px;
        }

        .comparison-chart-container {
          height: 450px;
        }
      }

      /* Ultrawide/4K (2200px+) - content constraints to prevent over-stretching */
      /* Lowered from 2560px to account for ~400px sidebar */
      @media (min-width: 2200px) {
        .dashboard-grid {
          max-width: var(--content-max-width-2xl, 2600px);
          margin-left: auto;
          margin-right: auto;
        }
      }

      /* True ultrawide (2560px+) - stricter constraints */
      @media (min-width: 2560px) {
        .dashboard-grid {
          max-width: 2860px;
        }

        .chart-section.full-width,
        .stats-section.full-width {
          max-width: 2340px;
          margin-left: auto;
          margin-right: auto;
        }
      }

      /* Container queries for chart responsiveness based on container (not viewport) */
      @container chart-section (width >= 600px) {
        .chart-container {
          min-height: 380px;
        }
      }

      @container chart-section (width >= 900px) {
        .chart-container {
          min-height: 450px;
        }
      }
    `}afterRender(){this.updateCharts();const t=this.$("#debug-toggle"),e=this.$("#debug-content"),r=this.$("#debug-copy");t&&e&&r&&(t.addEventListener("click",()=>{const i=t.classList.toggle("expanded");e.classList.toggle("hidden"),i?r.classList.remove("hidden"):r.classList.add("hidden")}),r.addEventListener("click",async()=>{const i=this.$("#debug-output");if(i)try{await navigator.clipboard.writeText(i.textContent||""),r.textContent="â Copied!",r.classList.add("copied"),setTimeout(()=>{r.textContent="ð Copy",r.classList.remove("copied")},2e3)}catch(n){console.error("Failed to copy:",n),r.textContent="â Failed",setTimeout(()=>{r.textContent="ð Copy"},2e3)}}))}updateCharts(){const t=this.$("#no-data"),e=this.$(".dashboard-grid");if(!this._data){t?.classList.remove("hidden"),e?.classList.add("hidden");return}t?.classList.add("hidden"),e?.classList.remove("hidden"),this.updateKeyMetricsBanner(),this.updateParamSummary();const r=this.$("#cone-chart");r&&(r.data=this.transformToConeData(this._data.yearlyPercentiles));const i=this.$("#histogram-chart");i&&i.setData(this.transformToHistogramData(this._data.terminalValues)),this.updateStats(this._data.statistics);const n=this.$("#heatmap-chart");if(n&&this._correlationMatrix){const v=this.calculateAssetStatistics(this._correlationMatrix.labels);n.data={labels:this._correlationMatrix.labels,matrix:this._correlationMatrix.matrix,expectedReturns:v.expectedReturns,volatilities:v.volatilities,isEstimate:v.isEstimate}}this.updateNetWorthSpectrum(),this.updateDebtSpectrum(),this.updateSalaryEquivalentSection();const s=this.$("#margin-call-section"),o=this.$("#margin-call-chart");if(this._data?.marginCallStats&&s&&o){s.classList.add("visible");const v=this._data.marginCallStats;o.setData({labels:v.map(g=>`Year ${g.year}`),values:v.map(g=>g.probability)},v.map(g=>g.cumulativeProbability))}else s?.classList.remove("visible");const l=this.$("#sbloc-balance-section"),d=this.$("#sbloc-balance-chart");if(this._data?.sblocTrajectory&&l&&d){l.classList.add("visible");const v=this._data.sblocTrajectory;d.data={labels:v.years.map(g=>`Year ${g}`),datasets:[{label:"Loan Balance (Median)",data:v.loanBalance.p50},{label:"Cumulative Withdrawals",data:v.cumulativeWithdrawals},{label:"Cumulative Interest",data:v.cumulativeInterest.p50}]}}else l?.classList.remove("visible");const h=this.$("#bbd-comparison-section"),p=this.$("#bbd-comparison-chart");if(this._data?.estateAnalysis&&this._data?.sblocTrajectory&&h&&p){h.classList.add("visible");const v=this.getEffectiveTimeHorizon(),g=this.getEffectiveInitialValue(),k=[{year:0,p10:g,p25:g,p50:g,p75:g,p90:g},...this._data.yearlyPercentiles],S=Ra({initialValue:g,annualWithdrawal:this.getEffectiveAnnualWithdrawal(),withdrawalGrowth:this._simulationConfig?.sbloc?.annualWithdrawalRaise??.03,timeHorizon:v,capitalGainsRate:this._simulationConfig?.taxModeling?.ltcgTaxRate??.238,costBasisRatio:this.getEffectiveCostBasisRatio(),dividendYield:this.getEffectiveSellDividendYield()},k),D=this._data.estateAnalysis.bbdNetEstate,M=S.terminalNetWorth,I=D-M;p.setData({bbdNetEstate:D,sellNetEstate:M,bbdAdvantage:I})}else h?.classList.remove("visible");this.updateStrategyAnalysis(),this.updateVisualComparisonCharts(),this.updateRecommendationsSection(),this.updatePerformanceTable(),this.updateReturnProbabilityTable(),this.updateYearlyAnalysisTable(),this.updateSellYearlyAnalysisTable(),this.updateDebugPanel();const m=this.$("#fab-nav");this._data?m?.show():m?.hide()}transformToConeData(t){return{years:t.map(e=>e.year),bands:{p10:t.map(e=>e.p10),p25:t.map(e=>e.p25),p50:t.map(e=>e.p50),p75:t.map(e=>e.p75),p90:t.map(e=>e.p90)}}}transformToHistogramData(t){const e=Array.from(t);if(e.length===0)return{bins:[],binWidth:0};const r=Math.min(...e),i=Math.max(...e);if(r===i)return{bins:[{min:r,max:i+1,count:e.length}],binWidth:1};const n=20,s=(i-r)/n,o=[];for(let l=0;l<n;l++)o.push({min:r+l*s,max:r+(l+1)*s,count:0});for(const l of e){const d=Math.min(Math.floor((l-r)/s),n-1);o[d].count++}return{bins:o,binWidth:s}}computeExtendedStats(){if(!this._data)return null;const t=this._simulationConfig?.initialValue??this._initialValue,e=this._simulationConfig?.timeHorizon??this._timeHorizon,r=Array.from(this._data.terminalValues),{median:i}=this._data.statistics,n=bv(t,i,e),s=xv(r,t,e),o=vv(s),d=Cv(this._data.yearlyPercentiles).twrr,h=bc(this._annualWithdrawal,this._effectiveTaxRate);return{cagr:n,twrr:d,volatility:o,salaryEquivalent:{equivalent:h.salaryEquivalent,taxSavings:h.taxSavings}}}updateStats(t){const e=m=>new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(m),r=this.$("#stat-median"),i=this.$("#stat-success"),n=this.$("#stat-mean"),s=this.$("#stat-stddev");r&&(r.textContent=e(t.median)),i&&(i.textContent=`${t.successRate.toFixed(1)}%`),n&&(n.textContent=e(t.mean)),s&&(s.textContent=e(t.stddev));const o=this.computeExtendedStats(),l=this.$("#stat-cagr"),d=this.$("#stat-twrr"),h=this.$("#stat-volatility"),p=this.$("#stat-salary");o&&(l&&(l.textContent=`${(o.cagr*100).toFixed(1)}%`),d&&(d.textContent=`${(o.twrr*100).toFixed(1)}%`),h&&(h.textContent=`${(o.volatility*100).toFixed(1)}%`),p&&(p.textContent=e(o.salaryEquivalent.equivalent)))}updateNetWorthSpectrum(){const t=this.$("#net-worth-spectrum");if(!t||!this._data)return;const e=Array.from(this._data.terminalValues),r=ee(e,10),i=ee(e,50),n=ee(e,90);t.p10=r,t.p50=i,t.p90=n,t.formatter="currency"}updateDebtSpectrum(){const t=this.$("#debt-spectrum-section"),e=this.$("#debt-spectrum"),r=this.$("#debt-years");if(!this._data?.sblocTrajectory||!t||!e){t?.classList.remove("visible");return}t.classList.add("visible");const i=this._data.sblocTrajectory,n=i.years.length-1;r&&(r.textContent=String(i.years[n]||this._timeHorizon));const s=i.loanBalance.p10[n]||0,o=i.loanBalance.p50[n]||0,l=i.loanBalance.p90[n]||0;e.p10=s,e.p50=o,e.p90=l,e.formatter="currency"}updateSalaryEquivalentSection(){const t=this.$("#salary-equivalent-section"),e=this.$("#salary-equivalent");if(!t||!e)return;const r=this._simulationConfig?.sbloc?.annualWithdrawal??this._annualWithdrawal;if(r<=0){t.classList.remove("visible");return}t.classList.add("visible");const i=bc(r,this._effectiveTaxRate);e.data={withdrawal:r,taxableEquivalent:i.salaryEquivalent,taxSavings:i.taxSavings,taxRate:this._effectiveTaxRate}}getEffectiveTimeHorizon(){return this._simulationConfig?.timeHorizon??this._timeHorizon}getEffectiveInitialValue(){return this._simulationConfig?.initialValue??this._initialValue}getEffectiveAnnualWithdrawal(){return this._simulationConfig?.sbloc?.annualWithdrawal??this._annualWithdrawal}getEffectiveCostBasisRatio(){return this._simulationConfig?.sellStrategy?.costBasisRatio??.4}getEffectiveSellDividendYield(){return this._simulationConfig?.sellStrategy?.dividendYield??.02}updateKeyMetricsBanner(){const t=this.$("#key-metrics-banner");if(!t||!this._data)return;const e=this.computeExtendedStats(),r=Array.from(this._data.terminalValues),i=ee(r,10),n=this.getEffectiveTimeHorizon(),s=this.getEffectiveInitialValue();let o=100,l=this._data.statistics.median*.85;if(this._data.sblocTrajectory&&this._data.yearlyPercentiles.length>0){const D=[{year:0,p10:s,p25:s,p50:s,p75:s,p90:s},...this._data.yearlyPercentiles],M=Ra({initialValue:s,annualWithdrawal:this.getEffectiveAnnualWithdrawal(),withdrawalGrowth:this._simulationConfig?.sbloc?.annualWithdrawalRaise??.03,timeHorizon:n,capitalGainsRate:this._simulationConfig?.taxModeling?.ltcgTaxRate??.238,costBasisRatio:this.getEffectiveCostBasisRatio(),dividendYield:this.getEffectiveSellDividendYield()},D);o=M.successRate,l=M.terminalNetWorth}else this._data.estateAnalysis&&(l=this._data.estateAnalysis.sellNetEstate,o=Math.min(100,this._data.statistics.successRate+5));let d=0,h=0,p=0,m=100,v=1;if(this._data.sblocTrajectory){const D=this._data.sblocTrajectory,M=D.years.length-1,I=D.loanBalance.p50[M],H=this._data.statistics.median+I;d=H>0?I/H*100:0,p=Math.min(100,d*1.5),m=Math.max(0,100-p),h=d>70?n*.3:0,v=Math.min(5,n)}const g=this._data.marginCallStats&&this._data.marginCallStats.length>0?this._data.marginCallStats[this._data.marginCallStats.length-1].cumulativeProbability:0,k=this._data.statistics.median,S=i;t.data={bbdSuccessRate:this._data.statistics.successRate,sellSuccessRate:o,medianUtilization:d,yearsAbove70Pct:h,cagr:e?.cagr||0,startingValue:s,medianTerminal:k,sellTerminal:l,p10Outcome:S,marginCallProbability:g,peakUtilizationP90:p,safetyBufferP10:m,mostDangerousYear:v,timeHorizon:n}}updateParamSummary(){const t=this.$("#param-summary");if(!t)return;const e=this._simulationConfig;t.data={startingPortfolio:e?.initialValue||this._initialValue,timeHorizon:e?.timeHorizon||this._timeHorizon,annualWithdrawal:e?.sbloc?.annualWithdrawal||this._annualWithdrawal,withdrawalGrowth:(e?.sbloc?.annualWithdrawalRaise??.03)*100,sblocInterestRate:(e?.sbloc?.interestRate||.07)*100,maxBorrowing:(e?.sbloc?.targetLTV||.65)*100,maintenanceMargin:(e?.sbloc?.maintenanceMargin||.5)*100,simulationsRun:e?.iterations||this._simulationsRun},this._portfolioWeights&&(t.portfolioAssets=this._portfolioWeights.map((r,i)=>{const n=da(r.symbol);return{symbol:r.symbol,name:n?.name||r.symbol,weight:r.weight,color:Sc[i%Sc.length]}}))}updateStrategyAnalysis(){const t=this.$("#strategy-analysis-section"),e=this.$("#strategy-analysis");if(!t||!e)return;if(!this._data?.sblocTrajectory||!this._data?.estateAnalysis){t.classList.remove("visible");return}t.classList.add("visible");const r=this.getEffectiveTimeHorizon(),i=this.getEffectiveInitialValue(),n=[{year:0,p10:i,p25:i,p50:i,p75:i,p90:i},...this._data.yearlyPercentiles],s=Ra({initialValue:i,annualWithdrawal:this.getEffectiveAnnualWithdrawal(),withdrawalGrowth:this._simulationConfig?.sbloc?.annualWithdrawalRaise??.03,timeHorizon:r,capitalGainsRate:this._simulationConfig?.taxModeling?.ltcgTaxRate??.238,costBasisRatio:this.getEffectiveCostBasisRatio(),dividendYield:this.getEffectiveSellDividendYield()},n),o=this._data.sblocTrajectory,l=o.years.length-1;o.loanBalance.p50[l];const d=o.cumulativeInterest.p50[l]||0,h=this._data.statistics.median,p=this._data.marginCallStats&&this._data.marginCallStats.length>0?this._data.marginCallStats[this._data.marginCallStats.length-1].cumulativeProbability:0,m=h>s.terminalNetWorth,v=h-s.terminalNetWorth,g=s.lifetimeTaxes,k=this.getEffectiveSellDividendYield(),S=this._simulationConfig?.taxModeling?.ltcgTaxRate??.238;let D=0;if(k>0)for(let q=0;q<this._data.yearlyPercentiles.length;q++){const w=this._data.yearlyPercentiles[q],C=o.loanBalance.p50[q]||0,Y=(w.p50+C)*k;D+=Y*S}const M={terminalNetWorth:h,successRate:this._data.statistics.successRate,lifetimeCost:d+D,dividendTaxes:D,primaryRisk:p>0?`Margin Call (${p.toFixed(1)}%)`:"Low (0% margin call)",marginCallProbability:p},I={terminalNetWorth:s.terminalNetWorth,successRate:s.successRate,lifetimeCost:s.totalLifetimeTaxes,primaryRisk:s.primaryRisk,depletionProbability:s.depletionProbability},W={recommendation:m?"bbd":"sell",headline:m?"BBD Recommended":"Consider Sell Assets",rationale:m?`Based on ${this._simulationsRun.toLocaleString()} simulations, BBD produces ${(v/s.terminalNetWorth*100).toFixed(0)}% higher terminal wealth despite margin call risk.`:`Sell Assets provides ${(Math.abs(v)/h*100).toFixed(0)}% higher terminal wealth with lower complexity.`,confidence:this._data.statistics.successRate},H={bbdVsSell:v,taxSavings:Math.max(0,g),estateValue:this._data.estateAnalysis.bbdNetEstate},X={quote:m?"BBD leverages tax deferral and continued compounding to build greater terminal wealth despite interest costs.":"Sell Assets provides simpler execution with guaranteed tax treatment and no margin call risk.",explanation:m?"By borrowing against assets instead of selling, you avoid realizing capital gains taxes. The portfolio continues to compound on the full value while interest costs are typically lower than the tax drag from selling.":"The Sell Assets strategy provides peace of mind through simplicity. You pay taxes as you go, eliminating the risk of margin calls and the complexity of managing a line of credit.",taxDeferralBenefit:Math.max(0,s.lifetimeTaxes),compoundingAdvantage:Math.max(0,v-g)};e.data={bbdData:M,sellData:I,verdict:W,differential:H,insights:X,simulationsRun:this._simulationConfig?.iterations??this._simulationsRun,timeHorizon:r}}updateVisualComparisonCharts(){const t=this.$("#visual-comparison-section");if(!t)return;if(!this._data?.sblocTrajectory||!this._data?.estateAnalysis){t.classList.remove("visible");return}t.classList.add("visible");const e=this.getEffectiveTimeHorizon(),r=this.getEffectiveInitialValue(),i=[{year:0,p10:r,p25:r,p50:r,p75:r,p90:r},...this._data.yearlyPercentiles],n=Ra({initialValue:r,annualWithdrawal:this.getEffectiveAnnualWithdrawal(),withdrawalGrowth:this._simulationConfig?.sbloc?.annualWithdrawalRaise??.03,timeHorizon:e,capitalGainsRate:this._simulationConfig?.taxModeling?.ltcgTaxRate??.238,costBasisRatio:this.getEffectiveCostBasisRatio(),dividendYield:this.getEffectiveSellDividendYield()},i);this.updateComparisonLineChart(n),this.updateCumulativeCostsChart(n),this.updateTerminalComparisonChart(n),this.updateSBLOCUtilizationChart()}updateComparisonLineChart(t){const e=this.$("#comparison-line-chart");if(!e||!this._data?.sblocTrajectory)return;const i=this._data.sblocTrajectory.years,n=i.map((o,l)=>this._data.yearlyPercentiles[l]?.p50||0),s=t.yearlyValues.slice(0,i.length);for(;s.length<i.length;)s.push(s[s.length-1]||0);e.setData({labels:i.map(o=>`Year ${o}`),bbdValues:n,sellValues:s})}updateCumulativeCostsChart(t){const e=this.$("#cumulative-costs-chart");if(!e||!this._data?.sblocTrajectory)return;const r=this._data.sblocTrajectory,i=r.years,n=r.cumulativeInterest.p50,s=t.lifetimeTaxes,o=i.map((l,d)=>{const h=(d+1)/i.length;return s*Math.pow(h,1.3)});e.setData({labels:i.map(l=>`Year ${l}`),taxes:o,interest:n})}updateTerminalComparisonChart(t){const e=this.$("#terminal-comparison-chart");if(!e||!this._data?.sblocTrajectory)return;const r=Array.from(this._data.terminalValues),i=ee(r,10),n=ee(r,25),s=ee(r,50),o=ee(r,75),l=ee(r,90),d=t.terminalP10,h=t.terminalP90,p=t.terminalNetWorth,m=d+(p-d)*.375,v=p+(h-p)*.5;e.setData({percentiles:["10th","25th","50th","75th","90th"],bbdValues:[i,n,s,o,l].map(g=>Math.max(0,g)),sellValues:[d,m,p,v,h].map(g=>Math.max(0,g))})}updateSBLOCUtilizationChart(){const t=this.$("#sbloc-utilization-chart");if(!t||!this._data?.sblocTrajectory)return;const e=this._data.sblocTrajectory,r=e.years,i=[],n=[],s=[],o=[],l=[];for(let h=0;h<r.length;h++){const p=this._data.yearlyPercentiles[h];if(!p){i.push(0),n.push(0),s.push(0),o.push(0),l.push(0);continue}const m=p.p10,v=p.p25,g=p.p50,k=p.p75,S=p.p90,D=e.loanBalance.p10[h]||0,M=e.loanBalance.p25?.[h]||(D+(e.loanBalance.p50[h]||0))/2,I=e.loanBalance.p50[h]||0,W=e.loanBalance.p75?.[h]||(I+(e.loanBalance.p90[h]||0))/2,H=e.loanBalance.p90[h]||0,X=S+D,q=k+M,w=g+I,C=v+W,L=m+H,Y=200;i.push(Math.min(X>0?D/X*100:0,Y)),n.push(Math.min(q>0?M/q*100:0,Y)),s.push(Math.min(w>0?I/w*100:0,Y)),o.push(Math.min(C>0?W/C*100:0,Y)),l.push(Math.min(L>0?H/L*100:Y,Y))}const d=(this._simulationConfig?.sbloc?.targetLTV||.65)*100;t.setData({labels:r.map(h=>`Year ${h}`),p10:i,p25:n,p50:s,p75:o,p90:l,maxBorrowing:d})}updateYearlyAnalysisTable(){const t=this.$("#yearly-analysis-table");if(!t||!this._data)return;const e=new Date().getFullYear(),r=this._simulationConfig?.sbloc?.annualWithdrawalRaise??0,i=vc(this.getEffectiveAnnualWithdrawal(),r,this._timeHorizon),n=!!this._data.sblocTrajectory;if(n){const o=this._data.sblocTrajectory.loanBalance.p50;i.cumulative=o.slice(0,this._timeHorizon)}const s=this._data.yearlyPercentiles.map((o,l)=>({year:e+l,p10:o.p10,p25:o.p25,p50:o.p50,p75:o.p75,p90:o.p90}));t.data={startYear:e,withdrawals:i,percentiles:s,isSBLOCLoanBalance:n}}updateSellYearlyAnalysisTable(){const t=this.$("#sell-yearly-analysis-section"),e=this.$("#sell-yearly-analysis-table");if(!t||!e)return;if(!this._data?.sblocTrajectory){t.classList.remove("visible");return}t.classList.add("visible");const r=this.getEffectiveTimeHorizon(),i=this.getEffectiveInitialValue(),n=[{year:0,p10:i,p25:i,p50:i,p75:i,p90:i},...this._data.yearlyPercentiles],s=this.getEffectiveAnnualWithdrawal(),o=Ra({initialValue:i,annualWithdrawal:s,withdrawalGrowth:this._simulationConfig?.sbloc?.annualWithdrawalRaise??.03,timeHorizon:r,capitalGainsRate:this._simulationConfig?.taxModeling?.ltcgTaxRate??.238,costBasisRatio:this.getEffectiveCostBasisRatio(),dividendYield:this.getEffectiveSellDividendYield()},n),l=new Date().getFullYear(),d=this._simulationConfig?.sbloc?.annualWithdrawalRaise??.03,h=vc(s,d,r),p=o.yearlyPercentiles.slice(1).map((v,g)=>({year:l+g,p10:v.p10,p25:v.p25,p50:v.p50,p75:v.p75,p90:v.p90})),m=o.cumulativeTaxes.slice(1);e.data={startYear:l,withdrawals:h,cumulativeTaxes:m,percentiles:p}}updatePerformanceTable(){const t=this.$("#performance-table");if(!t||!this._data)return;const e=Iv(this._data.terminalValues,this._initialValue,this._timeHorizon);t.data=e}updateReturnProbabilityTable(){const t=this.$("#return-probability-table");if(!t||!this._data)return;const e=Bv(this._data.terminalValues,this._initialValue,this._timeHorizon),r=Ov(this._data.terminalValues,this._initialValue,this._timeHorizon);t.expectedReturns=e,t.probabilities=r}updateRecommendationsSection(){const t=this.$("#recommendations");if(!t||!this._data||!this._simulationConfig)return;const r=this.computeExtendedStats()?.cagr,i=jv({statistics:this._data.statistics,marginCallStats:this._data.marginCallStats,config:this._simulationConfig,sblocTrajectory:this._data.sblocTrajectory,cagr:r}),n=this._data.marginCallStats&&this._data.marginCallStats.length>0?this._data.marginCallStats[this._data.marginCallStats.length-1].cumulativeProbability:0,s=this._simulationConfig.sbloc?.interestRate||.07,o=Nv(n,s);t.data={insights:i,considerations:o}}calculateAssetStatistics(t){const e=[],r=[],i=[];for(const n of t){const s=da(n);if(s&&s.returns.length>0){const o=s.returns.map(h=>h.return),l=hv(o),d=ln(o);e.push(l),r.push(d),i.push(!1)}else e.push(.08),r.push(.16),i.push(!0)}return{expectedReturns:e,volatilities:r,isEstimate:i}}updateDebugPanel(){const t=this.$("#debug-output");if(!t)return;if(!this._data){t.textContent="No simulation data available.";return}const e=this._data,r=this._simulationConfig,i=e.sblocTrajectory,n=e.estateAnalysis,s=e.statistics,o=this.computeExtendedStats(),l=Array.from(e.terminalValues),d=l.slice(0,20),h=l.filter(w=>w<0).length,p=l.filter(w=>w===0).length,m=Math.min(...l),v=Math.max(...l),g=[];g.push("âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ"),g.push("                    SIMULATION DEBUG DATA"),g.push("âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ"),g.push(""),g.push("â¸ CONFIGURATION"),g.push(`  Initial Value:      $${(r?.initialValue??this._initialValue).toLocaleString()}`),g.push(`  Time Horizon:       ${r?.timeHorizon??this._timeHorizon} years`),g.push(`  Annual Withdrawal:  $${(r?.sbloc?.annualWithdrawal??this._annualWithdrawal).toLocaleString()}`),g.push(`  Withdrawal Growth:  ${((r?.sbloc?.annualWithdrawalRaise??.03)*100).toFixed(1)}%`),g.push(`  SBLOC Interest:     ${((r?.sbloc?.interestRate??.07)*100).toFixed(2)}%`),g.push(`  Target LTV:         ${((r?.sbloc?.targetLTV??.65)*100).toFixed(0)}%`),g.push(`  Maint. Margin:      ${((r?.sbloc?.maintenanceMargin??.5)*100).toFixed(0)}%`),g.push(`  Iterations:         ${r?.iterations?.toLocaleString()??"N/A"}`),g.push(""),g.push("â¸ METHODOLOGY (Phase 23 Alignment)");const k=r?.resamplingMethod??"simple",S={simple:"Simple Bootstrap (correlated year sampling)",block:"Block Bootstrap (correlated, preserves autocorrelation)",regime:"4-Regime Switching (bull/bear/crash/recovery)","fat-tail":"Fat-Tail Model (Student's t-distribution)"};if(g.push(`  Return Model:       ${S[k]||k}`),k==="regime"){const w=r?.regimeCalibration??"historical",C=w==="conservative"?"2.0%":"1.5%";g.push(`  Calibration Mode:   ${w} (survivorship bias: ${C})`)}if(r?.withdrawalChapters?.enabled){const w=r.withdrawalChapters;g.push("  Withdrawal Chapters: ENABLED"),w.chapter2&&g.push(`    Chapter 2: -${w.chapter2.reductionPercent}% at year ${w.chapter2.yearsAfterStart} after withdrawals start`),w.chapter3&&g.push(`    Chapter 3: -${w.chapter3.reductionPercent}% at year ${w.chapter3.yearsAfterStart} after withdrawals start`);let C=1;w.chapter2&&(C*=1-w.chapter2.reductionPercent/100),w.chapter3&&(C*=1-w.chapter3.reductionPercent/100),g.push(`    Cumulative:  Final withdrawal = ${(C*100).toFixed(1)}% of base`)}else g.push("  Withdrawal Chapters: disabled");r?.taxModeling?.enabled&&!r.taxModeling.taxAdvantaged?(g.push("  BBD Dividend Tax:   BORROWING enabled"),g.push(`    Yield: ${(r.taxModeling.dividendYield*100).toFixed(1)}%, Rate: ${(r.taxModeling.ordinaryTaxRate*100).toFixed(0)}%`)):g.push("  BBD Dividend Tax:   disabled (tax-advantaged or off)"),g.push(""),g.push("â¸ RAW STATISTICS (from simulation)"),g.push(`  stats.median:       $${s.median.toLocaleString(void 0,{maximumFractionDigits:0})}`),g.push(`  stats.mean:         $${s.mean.toLocaleString(void 0,{maximumFractionDigits:0})}`),g.push(`  stats.stddev:       $${s.stddev.toLocaleString(void 0,{maximumFractionDigits:0})}`),g.push(`  stats.successRate:  ${s.successRate.toFixed(2)}%`),g.push(""),g.push("â¸ COMPUTED EXTENDED STATS"),g.push(`  CAGR (median):      ${o?(o.cagr*100).toFixed(2)+"%":"N/A"}`),g.push(`  TWRR (median):      ${o?(o.twrr*100).toFixed(2)+"%":"N/A"}`),g.push(`  Volatility:         ${o?(o.volatility*100).toFixed(2)+"%":"N/A"}`),g.push("");const D=!!i;g.push(`â¸ TERMINAL VALUES ANALYSIS ${D?"(NET WORTH = portfolio - loan)":"(GROSS PORTFOLIO)"}`),g.push(`  Count:              ${l.length.toLocaleString()}`),g.push(`  Min:                $${m.toLocaleString(void 0,{maximumFractionDigits:0})}`),g.push(`  Max:                $${v.toLocaleString(void 0,{maximumFractionDigits:0})}`),g.push(`  Negative count:     ${h} (${(h/l.length*100).toFixed(2)}%)`),g.push(`  Zero count:         ${p} (${(p/l.length*100).toFixed(2)}%)`),g.push(`  Sample (first 20):  [${d.map(w=>w.toFixed(0)).join(", ")}]`),g.push(""),g.push(`â¸ YEARLY PERCENTILES ${D?"(NET WORTH = portfolio - loan)":"(GROSS PORTFOLIO)"}`);const M=e.yearlyPercentiles.length;if([...e.yearlyPercentiles.slice(0,3),...e.yearlyPercentiles.slice(-3)].forEach((w,C)=>{const L=`Year ${w.year}`;g.push(`  ${L}: P10=$${w.p10.toFixed(0)} | P50=$${w.p50.toFixed(0)} | P90=$${w.p90.toFixed(0)}`)}),M>6&&g.push(`  ... (${M-6} more years)`),g.push(""),i){g.push("â¸ SBLOC TRAJECTORY");const w=i.years.length-1;g.push(`  Years tracked:      ${i.years.length} (Year ${i.years[0]} to Year ${i.years[w]})`),g.push(""),g.push("  LOAN BALANCE (by percentile):"),g.push(`    Year 1  - P10: $${(i.loanBalance.p10[0]||0).toFixed(0)} | P50: $${(i.loanBalance.p50[0]||0).toFixed(0)} | P90: $${(i.loanBalance.p90[0]||0).toFixed(0)}`),g.push(`    Year ${i.years[w]} - P10: $${(i.loanBalance.p10[w]||0).toFixed(0)} | P50: $${(i.loanBalance.p50[w]||0).toFixed(0)} | P90: $${(i.loanBalance.p90[w]||0).toFixed(0)}`),g.push(""),g.push("  CUMULATIVE WITHDRAWALS:"),g.push(`    Year 1:  $${(i.cumulativeWithdrawals[0]||0).toFixed(0)}`),g.push(`    Year ${i.years[w]}: $${(i.cumulativeWithdrawals[w]||0).toFixed(0)}`),g.push(""),g.push("  CUMULATIVE INTEREST (P50):"),g.push(`    Year 1:  $${(i.cumulativeInterest.p50[0]||0).toFixed(0)}`),g.push(`    Year ${i.years[w]}: $${(i.cumulativeInterest.p50[w]||0).toFixed(0)}`),g.push("");const C=e.yearlyPercentiles[w];if(C){g.push("  GROSS PORTFOLIO (Net Worth + Loan) at Year 15:");const L=C.p10+(i.loanBalance.p90[w]||0),Y=C.p50+(i.loanBalance.p50[w]||0),K=C.p90+(i.loanBalance.p10[w]||0);g.push(`    P10 Gross: $${L.toFixed(0)} = $${C.p10.toFixed(0)} (NW P10) + $${(i.loanBalance.p90[w]||0).toFixed(0)} (loan P90)`),g.push(`    P50 Gross: $${Y.toFixed(0)} = $${C.p50.toFixed(0)} (NW P50) + $${(i.loanBalance.p50[w]||0).toFixed(0)} (loan P50)`),g.push(`    P90 Gross: $${K.toFixed(0)} = $${C.p90.toFixed(0)} (NW P90) + $${(i.loanBalance.p10[w]||0).toFixed(0)} (loan P10)`),g.push("")}g.push("  UTILIZATION % (Loan / Gross Portfolio):");for(const L of[0,Math.floor(w/2),w]){const Y=e.yearlyPercentiles[L];if(Y){const K=i.loanBalance.p50[L]||0,tt=Y.p50+K,ht=tt>0?K/tt*100:0;g.push(`    Year ${i.years[L]}: ${ht.toFixed(1)}% = $${K.toFixed(0)} / $${tt.toFixed(0)} (gross)`)}}g.push("")}else g.push("â¸ SBLOC TRAJECTORY: Not available"),g.push("");if(e.marginCallStats&&e.marginCallStats.length>0){g.push("â¸ MARGIN CALL STATISTICS");const w=e.marginCallStats;g.push(`  Years tracked:      ${w.length}`),g.push(""),g.push("  PROBABILITY BY YEAR:"),[...w.slice(0,5),...w.slice(-3)].forEach((L,Y)=>{g.push(`    Year ${L.year}: ${L.probability.toFixed(2)}% (cumulative: ${L.cumulativeProbability.toFixed(2)}%)`)}),w.length>8&&g.push(`    ... (${w.length-8} more years)`),g.push("")}else g.push("â¸ MARGIN CALL STATISTICS: Not available"),g.push("");n?(g.push("â¸ ESTATE ANALYSIS (from simulation)"),g.push(`  bbdNetEstate:       $${n.bbdNetEstate.toLocaleString(void 0,{maximumFractionDigits:0})}`),g.push(`  sellNetEstate:      $${n.sellNetEstate.toLocaleString(void 0,{maximumFractionDigits:0})}`),g.push(`  bbdAdvantage:       $${n.bbdAdvantage.toLocaleString(void 0,{maximumFractionDigits:0})}`),g.push("")):(g.push("â¸ ESTATE ANALYSIS: Not available"),g.push("")),g.push("â¸ KEY METRICS CALCULATION CHECK");const W=r?.initialValue??this._initialValue,H=r?.timeHorizon??this._timeHorizon,X=s.median,q=X>0?Math.pow(X/W,1/H)-1:-1;if(g.push(`  CAGR Check (using ${D?"NET WORTH":"GROSS PORTFOLIO"}):`),g.push("    Formula: (terminal/initial)^(1/years) - 1"),g.push(`    = ($${X.toFixed(0)} / $${W.toFixed(0)})^(1/${H}) - 1`),g.push(`    = ${X>0?(q*100).toFixed(2)+"%":"NaN (negative terminal value)"}`),i){const w=i.years.length-1,C=i.loanBalance.p50[w]||0,L=X+C;g.push(""),g.push("  SBLOC Breakdown:"),g.push(`    Median NET WORTH (from stats.median): $${X.toFixed(0)}`),g.push(`    Loan Balance (P50): $${C.toFixed(0)}`),g.push(`    Reconstructed GROSS Portfolio: $${L.toFixed(0)} = $${X.toFixed(0)} + $${C.toFixed(0)}`)}if(g.push(""),e.debugStats){const w=e.debugStats;if(g.push("â¸ SBLOC DIAGNOSTIC DETAILS"),g.push(""),g.push("  MARGIN CALL DISTRIBUTION:"),g.push(`    0 margin calls:  ${w.marginCallDistribution.noMarginCalls.toLocaleString()} iterations`),g.push(`    1 margin call:   ${w.marginCallDistribution.oneMarginCall.toLocaleString()} iterations`),g.push(`    2 margin calls:  ${w.marginCallDistribution.twoMarginCalls.toLocaleString()} iterations`),g.push(`    3+ margin calls: ${w.marginCallDistribution.threeOrMore.toLocaleString()} iterations`),g.push(`    Max in any iter: ${w.marginCallDistribution.maxMarginCalls}`),g.push(""),g.push("  HAIRCUT LOSSES (from forced liquidations):"),g.push(`    Median:          $${w.haircutLosses.median.toLocaleString(void 0,{maximumFractionDigits:0})}`),g.push(`    Mean:            $${w.haircutLosses.mean.toLocaleString(void 0,{maximumFractionDigits:0})}`),g.push(`    Max:             $${w.haircutLosses.max.toLocaleString(void 0,{maximumFractionDigits:0})}`),g.push(""),g.push("  TOTAL INTEREST CHARGED (over 15 years):"),g.push(`    Median:          $${w.interestCharged.median.toLocaleString(void 0,{maximumFractionDigits:0})}`),g.push(`    Mean:            $${w.interestCharged.mean.toLocaleString(void 0,{maximumFractionDigits:0})}`),g.push(""),g.push("  FINAL GROSS PORTFOLIO (before loan subtraction):"),g.push(`    Median:          $${w.finalGrossPortfolio.median.toLocaleString(void 0,{maximumFractionDigits:0})}`),g.push(`    Mean:            $${w.finalGrossPortfolio.mean.toLocaleString(void 0,{maximumFractionDigits:0})}`),g.push(""),w.portfolioReturns&&(g.push("  PORTFOLIO RETURNS (cumulative over 15 years):"),g.push(`    P10:             ${(w.portfolioReturns.p10*100).toFixed(1)}%`),g.push(`    Median:          ${(w.portfolioReturns.median*100).toFixed(1)}%`),g.push(`    Mean:            ${(w.portfolioReturns.mean*100).toFixed(1)}%`),g.push(`    P90:             ${(w.portfolioReturns.p90*100).toFixed(1)}%`),g.push("")),w.failureAnalysis){const C=w.failureAnalysis,L=C.totalFailed+C.totalSucceeded;g.push("  FAILURE ANALYSIS:"),g.push(`    Failed iterations:    ${C.totalFailed.toLocaleString()} (${(C.totalFailed/L*100).toFixed(1)}%)`),g.push(`    Succeeded iterations: ${C.totalSucceeded.toLocaleString()} (${(C.totalSucceeded/L*100).toFixed(1)}%)`),g.push(`    Median failure year:  ${C.medianFailureYear.toFixed(1)}`),g.push(`    Avg failure year:     ${C.avgFailureYear.toFixed(1)}`),g.push(""),g.push("  RETURNS BY OUTCOME:"),g.push(`    Successful avg return: ${(C.successfulAvgReturn*100).toFixed(1)}%`),g.push(`    Failed avg return:     ${(C.failedAvgReturn*100).toFixed(1)}%`),g.push("")}if(w.regimeParameters&&w.regimeParameters.length>0){g.push(`  REGIME PARAMETERS (4-regime, multiplier-based, mode: ${w.calibrationMode||"unknown"}):`);for(const C of w.regimeParameters){const L=C.assetClass||"unknown",Y=C.historicalMean!==void 0?`${(C.historicalMean*100).toFixed(1)}%`:"N/A",K=C.historicalStddev!==void 0?`${(C.historicalStddev*100).toFixed(1)}%`:"N/A";g.push(`    ${C.assetId} (${L}):`),g.push(`      Historical: mean=${Y}, stddev=${K}`),g.push(`      Bull:     mean=${(C.bull.mean*100).toFixed(1)}%, stddev=${(C.bull.stddev*100).toFixed(1)}%`),g.push(`      Bear:     mean=${(C.bear.mean*100).toFixed(1)}%, stddev=${(C.bear.stddev*100).toFixed(1)}%`),g.push(`      Crash:    mean=${(C.crash.mean*100).toFixed(1)}%, stddev=${(C.crash.stddev*100).toFixed(1)}%`),C.recovery&&g.push(`      Recovery: mean=${(C.recovery.mean*100).toFixed(1)}%, stddev=${(C.recovery.stddev*100).toFixed(1)}%`)}g.push("")}if(w.fatTailParameters&&w.fatTailParameters.length>0){g.push("  FAT-TAIL PARAMETERS (Student's t-distribution):");for(const C of w.fatTailParameters)g.push(`    ${C.assetId} (${C.assetClass}):`),g.push(`      Degrees of Freedom: ${C.degreesOfFreedom} (lower = fatter tails)`),g.push(`      Skew Multiplier:    ${C.skewMultiplier}`),g.push(`      Survivorship Bias:  ${(C.survivorshipBias*100).toFixed(1)}%`),g.push(`      Volatility Scaling: ${C.volatilityScaling}`);g.push("")}if(w.pathCoherentPercentiles){const C=w.pathCoherentPercentiles;g.push("  PATH-COHERENT PERCENTILES (simulation indices):"),g.push("    Each percentile line = ONE complete simulation journey"),g.push(`    P10 (poor):   Simulation #${C.p10SimIndex.toLocaleString()} â $${C.p10TerminalValue.toLocaleString(void 0,{maximumFractionDigits:0})}`),g.push(`    P50 (median): Simulation #${C.p50SimIndex.toLocaleString()} â $${C.p50TerminalValue.toLocaleString(void 0,{maximumFractionDigits:0})}`),g.push(`    P90 (good):   Simulation #${C.p90SimIndex.toLocaleString()} â $${C.p90TerminalValue.toLocaleString(void 0,{maximumFractionDigits:0})}`),g.push("")}w.dividendTaxesBorrowed&&w.dividendTaxesBorrowed.median>0&&(g.push("  BBD DIVIDEND TAX BORROWING:"),g.push(`    Median Borrowed:  $${w.dividendTaxesBorrowed.median.toLocaleString(void 0,{maximumFractionDigits:0})} (these taxes are "in the loan")`),g.push(`    Max Borrowed:     $${w.dividendTaxesBorrowed.max.toLocaleString(void 0,{maximumFractionDigits:0})}`),g.push("    â³ BBD borrows via SBLOC, portfolio stays whole"),g.push("    â³ Sell liquidates same amount, reduces compound growth"),g.push(""))}if(e.sellStrategy){const w=e.sellStrategy;g.push("â¸ INTEGRATED SELL STRATEGY (1-per-iteration, same returns as BBD)"),g.push(`  Iterations:         ${w.terminalValues.length.toLocaleString()} (same as BBD)`),g.push(`  Success Rate:       ${w.successRate.toFixed(1)}%`),g.push(`  Depletion Prob:     ${w.depletionProbability.toFixed(1)}%`),g.push("  Terminal Values:"),g.push(`    P10: $${w.percentiles.p10.toLocaleString(void 0,{maximumFractionDigits:0})}`),g.push(`    P50: $${w.percentiles.p50.toLocaleString(void 0,{maximumFractionDigits:0})}`),g.push(`    P90: $${w.percentiles.p90.toLocaleString(void 0,{maximumFractionDigits:0})}`),g.push("  Taxes (lifetime):"),g.push(`    Capital Gains:    $${w.taxes.medianCapitalGains.toLocaleString(void 0,{maximumFractionDigits:0})}`),g.push(`    Dividend:         $${w.taxes.medianDividend.toLocaleString(void 0,{maximumFractionDigits:0})}`),g.push(`    Total:            $${w.taxes.medianTotal.toLocaleString(void 0,{maximumFractionDigits:0})}`),g.push("")}g.push("âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ"),g.push("                      END DEBUG DATA"),g.push("âââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââââ"),t.textContent=g.join(`
`)}}customElements.define("results-dashboard",Ax);const Ac=.001;function Ia(a,t){const e=t-a;let r;a!==0?r=e/Math.abs(a)*100:r=t!==0?100:0;let i;return e>Ac?i="up":e<-Ac?i="down":i="neutral",{absolute:e,percentChange:r,direction:i}}function Mc(a,t){const e={finalValue:Ia(a.statistics.median,t.statistics.median),successRate:Ia(a.statistics.successRate,t.statistics.successRate)};if(a.statistics.cagr!==void 0&&t.statistics.cagr!==void 0&&(e.cagr=Ia(a.statistics.cagr,t.statistics.cagr)),a.marginCallStats&&t.marginCallStats){const r=a.marginCallStats[a.marginCallStats.length-1]?.cumulativeProbability??0,i=t.marginCallStats[t.marginCallStats.length-1]?.cumulativeProbability??0;e.marginCallProbability=Ia(r,i)}return e}class Mx extends Ct{static get observedAttributes(){return["value","previous-value","format","label"]}template(){const t=parseFloat(this.getAttribute("value")||"0"),e=parseFloat(this.getAttribute("previous-value")||"0"),r=this.getAttribute("format")||"number",i=this.getAttribute("label")||"",n=Ia(e,t),s=this.formatValue(Math.abs(n.absolute),r),o=n.percentChange.toFixed(1),l=n.direction==="up"?"+":n.direction==="down"?"-":"",d=n.direction==="up"?"â":n.direction==="down"?"â":"â";return`
      <div class="delta-indicator ${n.direction==="up"?"positive":n.direction==="down"?"negative":"neutral"}">
        ${i?`<span class="delta-label">${i}</span>`:""}
        <div class="delta-values">
          <span class="delta-change">${l}${s}</span>
          <span class="delta-percent">(${l}${o}%)</span>
        </div>
        <div class="delta-arrow">${d}</div>
      </div>
    `}styles(){return`
      :host {
        display: inline-block;
      }

      .delta-indicator {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        border-radius: var(--radius-md, 6px);
        font-size: var(--font-size-sm, 0.875rem);
      }

      .delta-indicator.positive {
        background: rgba(34, 197, 94, 0.1);
        color: #22c55e;
      }

      .delta-indicator.negative {
        background: rgba(239, 68, 68, 0.1);
        color: #ef4444;
      }

      .delta-indicator.neutral {
        background: rgba(148, 163, 184, 0.1);
        color: #94a3b8;
      }

      .delta-label {
        font-weight: 500;
        margin-right: var(--spacing-xs, 4px);
      }

      .delta-values {
        display: flex;
        align-items: baseline;
        gap: var(--spacing-xs, 4px);
      }

      .delta-change {
        font-weight: 600;
        font-size: var(--font-size-base, 1rem);
      }

      .delta-percent {
        font-size: var(--font-size-sm, 0.875rem);
        opacity: 0.9;
      }

      .delta-arrow {
        font-size: 1.25rem;
        line-height: 1;
        margin-left: auto;
      }
    `}formatValue(t,e){switch(e){case"currency":return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(t);case"percent":return`${t.toFixed(1)}%`;case"number":default:return new Intl.NumberFormat("en-US",{notation:"compact",maximumFractionDigits:1}).format(t)}}}customElements.define("delta-indicator",Mx);class Dx extends Ct{_metrics=null;_previousName="Previous";_currentName="Current";set metrics(t){this._metrics=t,this.render()}set previousName(t){this._previousName=t,this.render()}set currentName(t){this._currentName=t,this.render()}generateSummary(){if(!this._metrics)return{headline:"No comparison data available",assessment:"similar",keyDifferences:[],recommendation:"Generate both simulations to see comparison."};let t=0,e=0;this._metrics.finalValue.direction==="up"?e+=2:this._metrics.finalValue.direction==="down"&&(t+=2),this._metrics.successRate.direction==="up"?e+=1:this._metrics.successRate.direction==="down"&&(t+=1),this._metrics.marginCallProbability&&(this._metrics.marginCallProbability.direction==="down"?e+=1:this._metrics.marginCallProbability.direction==="up"&&(t+=1)),this._metrics.cagr&&(this._metrics.cagr.direction==="up"?e+=1:this._metrics.cagr.direction==="down"&&(t+=1));let r;e>t?r="current-better":t>e?r="previous-better":r="similar";const i=[],n=Math.abs(this._metrics.finalValue.absolute);if(this._metrics.finalValue.direction!=="neutral"){const h=this._metrics.finalValue.direction==="up"?this._currentName:this._previousName;i.push({text:`${h} produces ${this.formatCurrency(n)} higher median terminal value`,magnitude:n})}const s=Math.abs(this._metrics.successRate.percentChange);if(this._metrics.successRate.direction!=="neutral"){const h=this._metrics.successRate.direction==="up"?this._currentName:this._previousName;i.push({text:`${h} has ${s.toFixed(1)}% higher success rate`,magnitude:s})}if(this._metrics.marginCallProbability&&this._metrics.marginCallProbability.direction!=="neutral"){const h=this._metrics.marginCallProbability.direction==="down"?this._currentName:this._previousName,p=Math.abs(this._metrics.marginCallProbability.absolute);i.push({text:`${h} has ${p.toFixed(1)}% lower margin call risk`,magnitude:p*100})}if(this._metrics.cagr&&this._metrics.cagr.direction!=="neutral"){const h=this._metrics.cagr.direction==="up"?this._currentName:this._previousName,p=Math.abs(this._metrics.cagr.percentChange);i.push({text:`${h} achieves ${p.toFixed(1)}% higher CAGR`,magnitude:p})}i.sort((h,p)=>p.magnitude-h.magnitude);const o=i.slice(0,4).map(h=>h.text);let l;r==="current-better"?l=`${this._currentName} strategy outperforms`:r==="previous-better"?l=`${this._previousName} strategy outperforms`:l="Strategies produce similar outcomes";let d;return r==="current-better"?d=`The ${this._currentName} strategy offers better risk-adjusted returns. Consider adopting these parameters.`:r==="previous-better"?d=`The ${this._previousName} strategy appears more favorable. Review what changed before switching to ${this._currentName}.`:d="Both strategies produce comparable results. Your choice may depend on personal risk tolerance.",{headline:l,assessment:r,keyDifferences:o,recommendation:d}}formatCurrency(t){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(t)}template(){const t=this.generateSummary(),e=t.keyDifferences.length>0?t.keyDifferences.map(r=>`<li>${r}</li>`).join(""):'<li class="no-data">Strategies are nearly identical</li>';return`
      <div class="trade-off-summary">
        <div class="summary-headline ${t.assessment}">
          ${t.headline}
        </div>
        ${t.keyDifferences.length>0?`
          <ul class="key-differences">
            ${e}
          </ul>
        `:""}
        <p class="recommendation">${t.recommendation}</p>
      </div>
    `}styles(){return`
      :host {
        display: block;
      }

      .trade-off-summary {
        padding: 1.5rem;
        background: var(--bg-secondary, #f9fafb);
        border-radius: 8px;
        border: 1px solid var(--border-color, #e5e7eb);
      }

      .summary-headline {
        font-size: 1.25rem;
        font-weight: 700;
        margin-bottom: 1rem;
      }

      .summary-headline.previous-better {
        color: #8b5cf6;
      }

      .summary-headline.current-better {
        color: #0d9488;
      }

      .summary-headline.similar {
        color: var(--text-secondary, #6b7280);
      }

      .key-differences {
        list-style: disc;
        padding-left: 1.5rem;
        margin: 0 0 1rem 0;
      }

      .key-differences li {
        margin-bottom: 0.5rem;
        color: var(--text-primary, #111827);
        line-height: 1.5;
      }

      .key-differences li.no-data {
        color: var(--text-secondary, #6b7280);
        font-style: italic;
      }

      .recommendation {
        margin: 0;
        padding-top: 1rem;
        border-top: 1px solid var(--border-color, #e5e7eb);
        font-style: italic;
        color: var(--text-secondary, #6b7280);
        line-height: 1.6;
      }
    `}}customElements.define("trade-off-summary",Dx);class Ex extends Ct{_isComparisonMode=!1;_previousData=null;_currentData=null;_previousConfig=null;_currentConfig=null;_previousPresetName="";_currentPresetName="";_activeTab="previous";_portfolioWeights=null;_correlationMatrix=null;_initialValue=1e6;_simulationConfig=null;connectedCallback(){super.connectedCallback(),window.addEventListener("comparison-state-change",this.handleStateChange)}disconnectedCallback(){super.disconnectedCallback(),window.removeEventListener("comparison-state-change",this.handleStateChange)}handleStateChange=t=>{const r=t.detail;r.isComparisonMode&&r.previousResult&&r.currentResult?this.enterComparisonMode(r.previousResult,r.currentResult,r.previousConfig,r.currentConfig,r.previousPresetName,r.currentPresetName):!r.isComparisonMode&&r.currentResult&&(this._isComparisonMode&&this.exitComparisonMode(),this.data=r.currentResult)};enterComparisonMode(t,e,r,i,n,s){this._isComparisonMode=!0,this._previousData=t,this._currentData=e,this._previousConfig=r,this._currentConfig=i,this._previousPresetName=n,this._currentPresetName=s,this.render()}exitComparisonMode(){this._isComparisonMode=!1,this._previousData=null,this._previousConfig=null,this._previousPresetName="",this.dispatchEvent(new CustomEvent("exit-comparison-mode",{bubbles:!0,composed:!0})),this.render()}set data(t){this._isComparisonMode||(this._currentData=t,this.render())}get data(){return this._currentData}set portfolioWeights(t){this._portfolioWeights=t,this.updateChildDashboardPortfolioData()}get portfolioWeights(){return this._portfolioWeights}set correlationMatrix(t){this._correlationMatrix=t,this.updateChildDashboardPortfolioData()}get correlationMatrix(){return this._correlationMatrix}set initialValue(t){this._initialValue=t,this.updateChildDashboardConfigData()}get initialValue(){return this._initialValue}set simulationConfig(t){this._simulationConfig=t,this.updateChildDashboardConfigData()}get simulationConfig(){return this._simulationConfig}set timeHorizon(t){const e=this.$("#single-dashboard");e&&(e.timeHorizon=t)}set annualWithdrawal(t){const e=this.$("#single-dashboard");e&&(e.annualWithdrawal=t)}set effectiveTaxRate(t){const e=this.$("#single-dashboard");e&&(e.effectiveTaxRate=t)}updateChildDashboardConfigData(){const t=this.$("#single-dashboard");t&&(t.initialValue=this._initialValue,this._simulationConfig&&(t.simulationConfig=this._simulationConfig))}updateChildDashboardPortfolioData(){const t=this.$("#single-dashboard");t&&(this._portfolioWeights&&(t.portfolioWeights=this._portfolioWeights),this._correlationMatrix&&(t.correlationMatrix=this._correlationMatrix));const e=this.$("#previous-dashboard"),r=this.$("#current-dashboard");e&&(this._portfolioWeights&&(e.portfolioWeights=this._portfolioWeights),this._correlationMatrix&&(e.correlationMatrix=this._correlationMatrix)),r&&(this._portfolioWeights&&(r.portfolioWeights=this._portfolioWeights),this._correlationMatrix&&(r.correlationMatrix=this._correlationMatrix));const i=this.$("#mobile-previous-dashboard"),n=this.$("#mobile-current-dashboard");i&&(this._portfolioWeights&&(i.portfolioWeights=this._portfolioWeights),this._correlationMatrix&&(i.correlationMatrix=this._correlationMatrix)),n&&(this._portfolioWeights&&(n.portfolioWeights=this._portfolioWeights),this._correlationMatrix&&(n.correlationMatrix=this._correlationMatrix))}template(){return this._isComparisonMode&&this._previousData&&this._currentData?this.comparisonTemplate():this.singleTemplate()}comparisonTemplate(){const t=this._previousData&&this._currentData?Mc(this._previousData,this._currentData):null;return`
      <div class="comparison-container">
        <div class="comparison-header">
          <h2>Comparing Strategies</h2>
          <button class="exit-btn" id="exit-btn">Exit Comparison</button>
        </div>

        \x3C!-- Desktop: Side-by-side grid -->
        <div class="comparison-grid">
          <div class="comparison-panel previous-panel">
            <div class="panel-header">
              <span class="panel-label">Previous</span>
              <span class="panel-name">${this.escapeHtml(this._previousPresetName)}</span>
            </div>
            <results-dashboard id="previous-dashboard"></results-dashboard>
          </div>
          <div class="comparison-panel current-panel">
            <div class="panel-header">
              <span class="panel-label">Current</span>
              <span class="panel-name">${this.escapeHtml(this._currentPresetName)}</span>
            </div>
            <results-dashboard id="current-dashboard"></results-dashboard>
          </div>
        </div>

        \x3C!-- Mobile: Tabbed interface -->
        <div class="comparison-tabs" role="tablist" aria-label="Comparison view">
          <button
            role="tab"
            id="tab-previous"
            aria-selected="${this._activeTab==="previous"}"
            aria-controls="panel-previous"
            tabindex="${this._activeTab==="previous"?"0":"-1"}"
            class="tab-button">
            Previous
            <span class="tab-badge">${this.escapeHtml(this._previousPresetName)}</span>
          </button>
          <button
            role="tab"
            id="tab-current"
            aria-selected="${this._activeTab==="current"}"
            aria-controls="panel-current"
            tabindex="${this._activeTab==="current"?"0":"-1"}"
            class="tab-button">
            Current
            <span class="tab-badge">${this.escapeHtml(this._currentPresetName)}</span>
          </button>
          <button
            role="tab"
            id="tab-delta"
            aria-selected="${this._activeTab==="delta"}"
            aria-controls="panel-delta"
            tabindex="${this._activeTab==="delta"?"0":"-1"}"
            class="tab-button">
            Delta
          </button>
        </div>

        <div id="panel-previous" role="tabpanel" aria-labelledby="tab-previous" class="tab-panel" ${this._activeTab!=="previous"?"hidden":""}>
          <results-dashboard id="mobile-previous-dashboard"></results-dashboard>
        </div>

        <div id="panel-current" role="tabpanel" aria-labelledby="tab-current" class="tab-panel" ${this._activeTab!=="current"?"hidden":""}>
          <results-dashboard id="mobile-current-dashboard"></results-dashboard>
        </div>

        <div id="panel-delta" role="tabpanel" aria-labelledby="tab-delta" class="tab-panel" ${this._activeTab!=="delta"?"hidden":""}>
          ${this.deltaTableTemplate(t)}
          <trade-off-summary id="trade-off-summary"></trade-off-summary>
        </div>
      </div>
    `}deltaTableTemplate(t){return t?`
      <div class="delta-table">
        <h3>Key Metric Changes</h3>
        <div class="delta-grid">
          <delta-indicator
            value="${this._currentData.statistics.median}"
            previous-value="${this._previousData.statistics.median}"
            format="currency"
            label="Final Value">
          </delta-indicator>

          <delta-indicator
            value="${this._currentData.statistics.successRate}"
            previous-value="${this._previousData.statistics.successRate}"
            format="percent"
            label="Success Rate">
          </delta-indicator>

          ${t.cagr?`
            <delta-indicator
              value="${this._currentData.statistics.cagr||0}"
              previous-value="${this._previousData.statistics.cagr||0}"
              format="percent"
              label="CAGR">
            </delta-indicator>
          `:""}

          ${t.marginCallProbability?`
            <delta-indicator
              value="${this._currentData.marginCallStats?.[this._currentData.marginCallStats.length-1]?.cumulativeProbability||0}"
              previous-value="${this._previousData.marginCallStats?.[this._previousData.marginCallStats.length-1]?.cumulativeProbability||0}"
              format="percent"
              label="Margin Call Risk">
            </delta-indicator>
          `:""}
        </div>
      </div>
    `:'<p class="no-metrics">No comparison metrics available</p>'}singleTemplate(){return`
      <results-dashboard id="single-dashboard"></results-dashboard>
    `}styles(){return`
      :host {
        display: block;
        max-width: 100%;
      }

      /* Shadow DOM reset - global box-sizing doesn't penetrate */
      *, *::before, *::after {
        box-sizing: border-box;
      }

      /* Comparison mode styles */
      .comparison-container {
        display: block;
      }

      .comparison-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        margin-bottom: var(--spacing-lg, 24px);
        padding-bottom: var(--spacing-md, 16px);
        border-bottom: 2px solid var(--color-primary, #0d9488);
      }

      .comparison-header h2 {
        margin: 0;
        font-size: var(--font-size-xl, 1.25rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .exit-btn {
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        background: transparent;
        border: 2px solid var(--color-primary, #0d9488);
        border-radius: var(--radius-md, 6px);
        color: var(--color-primary, #0d9488);
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
      }

      .exit-btn:hover {
        background: var(--color-primary, #0d9488);
        color: white;
      }

      .comparison-grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--spacing-lg, 24px);
      }

      .comparison-panel {
        background: var(--surface-primary, #ffffff);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--radius-lg, 8px);
        padding: var(--spacing-md, 16px);
      }

      .previous-panel {
        border-left: 3px solid #8b5cf6;
      }

      .current-panel {
        border-left: 3px solid #0d9488;
      }

      .panel-header {
        display: flex;
        align-items: baseline;
        gap: var(--spacing-sm, 8px);
        padding-bottom: var(--spacing-md, 16px);
        margin-bottom: var(--spacing-md, 16px);
        border-bottom: 2px solid var(--color-primary, #0d9488);
      }

      .panel-label {
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 500;
        color: var(--text-secondary, #475569);
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      .panel-name {
        font-size: var(--font-size-base, 1rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .delta-summary {
        margin-top: var(--spacing-lg, 24px);
        padding: var(--spacing-md, 16px);
        background: var(--surface-secondary, #f8fafc);
        border-radius: var(--radius-md, 6px);
      }

      /* Mobile tabs - hidden on desktop */
      .comparison-tabs {
        display: none;
      }

      .tab-panel {
        display: block;
      }

      .tab-panel[hidden] {
        display: none;
      }

      /* Mobile responsive styles */
      @media (max-width: 768px) {
        /* Hide desktop grid on mobile */
        .comparison-grid {
          display: none;
        }

        /* Show tabs on mobile */
        .comparison-tabs {
          display: flex;
          border-bottom: 2px solid var(--border-color, #e5e7eb);
          margin-bottom: var(--spacing-md, 16px);
        }

        .tab-button {
          flex: 1;
          padding: 12px 8px;
          background: transparent;
          border: none;
          border-bottom: 2px solid transparent;
          cursor: pointer;
          font-size: var(--font-size-sm, 0.875rem);
          color: var(--text-secondary, #64748b);
          transition: all 0.2s ease;
          display: flex;
          flex-direction: column;
          align-items: center;
          gap: 4px;
        }

        .tab-button[aria-selected="true"] {
          border-bottom-color: var(--color-primary, #0d9488);
          color: var(--color-primary, #0d9488);
          font-weight: 600;
        }

        .tab-button:hover {
          background: var(--surface-secondary, #f8fafc);
        }

        .tab-badge {
          font-size: 0.75rem;
          font-weight: 400;
          color: var(--text-tertiary, #94a3b8);
          white-space: nowrap;
          overflow: hidden;
          text-overflow: ellipsis;
          max-width: 100%;
        }

        .tab-button[aria-selected="true"] .tab-badge {
          color: var(--color-primary, #0d9488);
          font-weight: 500;
        }

        /* Tab panels */
        .tab-panel {
          padding-top: var(--spacing-sm, 8px);
        }
      }

      /* Delta table styles */
      .delta-table {
        margin-bottom: var(--spacing-lg, 24px);
        padding: var(--spacing-md, 16px);
        background: var(--surface-primary, #ffffff);
        border: 1px solid var(--border-color, #e5e7eb);
        border-radius: var(--radius-md, 6px);
      }

      .delta-table h3 {
        margin: 0 0 var(--spacing-md, 16px) 0;
        font-size: var(--font-size-lg, 1.125rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .delta-grid {
        display: grid;
        gap: var(--spacing-sm, 8px);
      }

      .no-metrics {
        color: var(--text-secondary, #64748b);
        font-style: italic;
        text-align: center;
        padding: var(--spacing-lg, 24px);
      }

      /* Single mode styles */
      #single-dashboard {
        display: block;
      }
    `}afterRender(){if(this._isComparisonMode&&this._previousData&&this._currentData){const t=this.$("#exit-btn");t&&t.addEventListener("click",()=>this.exitComparisonMode());const e=this.$("#previous-dashboard"),r=this.$("#current-dashboard");e&&this._previousData&&(e.data=this._previousData,this._previousConfig&&(e.simulationConfig=this._previousConfig,e.initialValue=this._previousConfig.initialValue,e.timeHorizon=this._previousConfig.timeHorizon,this._previousConfig.sbloc&&(e.annualWithdrawal=this._previousConfig.sbloc.annualWithdrawal)),this._portfolioWeights&&(e.portfolioWeights=this._portfolioWeights),this._correlationMatrix&&(e.correlationMatrix=this._correlationMatrix)),r&&this._currentData&&(r.data=this._currentData,this._currentConfig&&(r.simulationConfig=this._currentConfig,r.initialValue=this._currentConfig.initialValue,r.timeHorizon=this._currentConfig.timeHorizon,this._currentConfig.sbloc&&(r.annualWithdrawal=this._currentConfig.sbloc.annualWithdrawal)),this._portfolioWeights&&(r.portfolioWeights=this._portfolioWeights),this._correlationMatrix&&(r.correlationMatrix=this._correlationMatrix));const i=this.$("#mobile-previous-dashboard"),n=this.$("#mobile-current-dashboard");i&&this._previousData&&(i.data=this._previousData,this._previousConfig&&(i.simulationConfig=this._previousConfig,i.initialValue=this._previousConfig.initialValue,i.timeHorizon=this._previousConfig.timeHorizon,this._previousConfig.sbloc&&(i.annualWithdrawal=this._previousConfig.sbloc.annualWithdrawal)),this._portfolioWeights&&(i.portfolioWeights=this._portfolioWeights),this._correlationMatrix&&(i.correlationMatrix=this._correlationMatrix)),n&&this._currentData&&(n.data=this._currentData,this._currentConfig&&(n.simulationConfig=this._currentConfig,n.initialValue=this._currentConfig.initialValue,n.timeHorizon=this._currentConfig.timeHorizon,this._currentConfig.sbloc&&(n.annualWithdrawal=this._currentConfig.sbloc.annualWithdrawal)),this._portfolioWeights&&(n.portfolioWeights=this._portfolioWeights),this._correlationMatrix&&(n.correlationMatrix=this._correlationMatrix)),this.setupTabNavigation();const s=this.$("#trade-off-summary");if(s&&this._previousData&&this._currentData){const o=Mc(this._previousData,this._currentData);s.metrics=o,s.previousName=this._previousPresetName,s.currentName=this._currentPresetName}}else{const t=this.$("#single-dashboard");t&&this._currentData&&(t.data=this._currentData,this._portfolioWeights&&(t.portfolioWeights=this._portfolioWeights),this._correlationMatrix&&(t.correlationMatrix=this._correlationMatrix),t.initialValue=this._initialValue,this._simulationConfig&&(t.simulationConfig=this._simulationConfig))}}setupTabNavigation(){const t=this.$$('[role="tab"]');t.length!==0&&(t.forEach(e=>{e.addEventListener("click",()=>{const r=e.id.replace("tab-","");this.activateTab(r)})}),t.forEach((e,r)=>{e.addEventListener("keydown",i=>{let n=null;if(i.key==="ArrowRight"?(i.preventDefault(),n=(r+1)%t.length):i.key==="ArrowLeft"&&(i.preventDefault(),n=(r-1+t.length)%t.length),n!==null){const s=t[n],o=s.id.replace("tab-","");this.activateTab(o),s.focus()}})}))}activateTab(t){this._activeTab=t,this.$$('[role="tab"]').forEach(i=>{const n=i.id===`tab-${t}`;i.setAttribute("aria-selected",n.toString()),i.setAttribute("tabindex",n?"0":"-1")}),this.$$('[role="tabpanel"]').forEach(i=>{i.id===`panel-${t}`?i.removeAttribute("hidden"):i.setAttribute("hidden","")})}escapeHtml(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}}customElements.define("comparison-dashboard",Ex);class Px extends Ct{template(){return`
      <div class="welcome-container">
        \x3C!-- Hero Section -->
        <header class="hero-section">
          <img src="${ca}" alt="eVelo logo" class="hero-logo" />
          <h1 class="hero-title">Welcome to eVelo Portfolio Simulator</h1>
          <p class="hero-subtitle">
            Explore the Buy-Borrow-Die wealth strategy through Monte Carlo simulation.
            Understand the potential benefits and risks before making financial decisions.
          </p>
        </header>

        \x3C!-- BBD Explanation Section -->
        <section class="bbd-section">
          <h2 class="section-title">The Buy-Borrow-Die Strategy</h2>
          <p class="section-description">
            A three-step wealth preservation approach used by high-net-worth individuals
            to minimize taxes while maintaining access to funds.
          </p>

          <div class="step-cards">
            \x3C!-- Step 1: Buy -->
            <div class="step-card">
              <div class="step-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <rect x="3" y="12" width="4" height="9" rx="1"/>
                  <rect x="10" y="8" width="4" height="13" rx="1"/>
                  <rect x="17" y="3" width="4" height="18" rx="1"/>
                </svg>
              </div>
              <h3 class="step-title">Buy</h3>
              <p class="step-description">
                Purchase appreciating assets (stocks, real estate).
                Hold long-term to maximize growth and defer capital gains taxes.
              </p>
            </div>

            \x3C!-- Step 2: Borrow -->
            <div class="step-card">
              <div class="step-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M3 21V5a2 2 0 012-2h14a2 2 0 012 2v16"/>
                  <path d="M3 10h18"/>
                  <path d="M9 3v7"/>
                  <path d="M15 3v7"/>
                  <path d="M9 21v-4a2 2 0 012-2h2a2 2 0 012 2v4"/>
                </svg>
              </div>
              <h3 class="step-title">Borrow</h3>
              <p class="step-description">
                Access cash via securities-backed lines of credit (SBLOC).
                Loan proceeds are not taxable income.
              </p>
            </div>

            \x3C!-- Step 3: Die -->
            <div class="step-card">
              <div class="step-icon">
                <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                  <path d="M12 3v3"/>
                  <path d="M12 21v-3"/>
                  <path d="M3 12h3"/>
                  <path d="M21 12h-3"/>
                  <path d="M18.5 5.5L12 12"/>
                  <path d="M5.5 5.5L12 12"/>
                  <circle cx="6" cy="18" r="2"/>
                  <circle cx="18" cy="18" r="2"/>
                  <path d="M6 16V8"/>
                  <path d="M18 16V8"/>
                </svg>
              </div>
              <h3 class="step-title">Die</h3>
              <p class="step-description">
                Heirs inherit assets with stepped-up cost basis under current tax law,
                potentially avoiding capital gains tax on appreciation.
              </p>
            </div>
          </div>
        </section>

        \x3C!-- Video Section -->
        <section class="video-section">
          <div class="video-card">
            <div class="video-icon">
              <svg viewBox="0 0 24 24" fill="currentColor">
                <path d="M8 5v14l11-7z"/>
              </svg>
            </div>
            <div class="video-content">
              <h3 class="video-title">Learn More About Buy-Borrow-Die</h3>
              <p class="video-description">
                Watch this comprehensive explanation of the BBD strategy and how it works in practice.
              </p>
              <a href="https://youtu.be/-hqEIseS_e0?si=rC-GDoL3Tvc8cyQI"
                 target="_blank"
                 rel="noopener noreferrer"
                 class="video-link">
                <span class="video-link-icon">
                  <svg viewBox="0 0 24 24" fill="currentColor">
                    <path d="M19.615 3.184c-3.604-.246-11.631-.245-15.23 0-3.897.266-4.356 2.62-4.385 8.816.029 6.185.484 8.549 4.385 8.816 3.6.245 11.626.246 15.23 0 3.897-.266 4.356-2.62 4.385-8.816-.029-6.185-.484-8.549-4.385-8.816zm-10.615 12.816v-8l8 3.993-8 4.007z"/>
                  </svg>
                </span>
                Watch on YouTube
                <span class="external-icon">â</span>
              </a>
            </div>
          </div>
        </section>

        \x3C!-- Benefits & Risks Section -->
        <section class="benefits-risks-section">
          <div class="benefits-column">
            <h3 class="column-title benefits-title">Potential Benefits</h3>
            <ul class="feature-list">
              <li class="feature-item">
                <span class="feature-icon">&#x2714;</span>
                <span class="feature-text">No capital gains tax on borrowed funds</span>
              </li>
              <li class="feature-item">
                <span class="feature-icon">&#x2714;</span>
                <span class="feature-text">Portfolio continues compounding uninterrupted</span>
              </li>
              <li class="feature-item">
                <span class="feature-icon">&#x2714;</span>
                <span class="feature-text">Stepped-up basis at death eliminates embedded gains</span>
              </li>
              <li class="feature-item">
                <span class="feature-icon">&#x2714;</span>
                <span class="feature-text">Maintain control over investment decisions</span>
              </li>
            </ul>
          </div>

          <div class="risks-column">
            <h3 class="column-title risks-title">Key Risks</h3>
            <ul class="feature-list">
              <li class="feature-item">
                <span class="feature-icon warning">&#x26A0;</span>
                <span class="feature-text">Margin calls if portfolio drops significantly</span>
              </li>
              <li class="feature-item">
                <span class="feature-icon warning">&#x26A0;</span>
                <span class="feature-text">Interest accrues on borrowed funds over time</span>
              </li>
              <li class="feature-item">
                <span class="feature-icon warning">&#x26A0;</span>
                <span class="feature-text">Forced liquidation in severe market downturns</span>
              </li>
              <li class="feature-item">
                <span class="feature-icon warning">&#x26A0;</span>
                <span class="feature-text">Tax law changes could reduce or eliminate benefits</span>
              </li>
            </ul>
          </div>
        </section>

        \x3C!-- CTA Section -->
        <section class="cta-section">
          <button class="cta-button primary" id="quick-start-btn">
            Run Your First Simulation
          </button>
          <button class="cta-button secondary" id="show-guide-btn">
            View User Guide
          </button>
        </section>

        \x3C!-- Disclaimer Section -->
        <aside class="disclaimer-section">
          <div class="disclaimer-icon">&#x26A0;</div>
          <div class="disclaimer-content">
            <strong>Educational Purposes Only</strong>
            <p>
              This simulator is for educational purposes only. It does not constitute
              financial, tax, or legal advice. Consult qualified tax and financial
              advisors before implementing any tax strategy.
            </p>
          </div>
        </aside>
      </div>
    `}styles(){return`
      :host {
        display: block;
      }

      .welcome-container {
        max-width: 900px;
        margin: 0 auto;
        padding: var(--spacing-xl, 32px);
      }

      /* Hero Section */
      .hero-section {
        text-align: center;
        margin-bottom: var(--spacing-xl, 32px);
      }

      .hero-logo {
        width: 120px;
        height: 120px;
        margin-bottom: var(--spacing-lg, 24px);
        animation: logoEntrance 0.8s ease-out;
        transition: transform 0.3s ease, filter 0.3s ease;
        cursor: pointer;
      }

      .hero-logo:hover {
        transform: scale(1.1) rotate(5deg);
        filter: drop-shadow(0 8px 24px rgba(13, 148, 136, 0.4));
      }

      @keyframes logoEntrance {
        0% {
          opacity: 0;
          transform: scale(0.5) rotate(-180deg);
        }
        60% {
          opacity: 1;
          transform: scale(1.1) rotate(10deg);
        }
        100% {
          opacity: 1;
          transform: scale(1) rotate(0deg);
        }
      }

      .hero-title {
        margin: 0 0 var(--spacing-md, 16px) 0;
        font-size: 2rem;
        font-weight: 700;
        color: var(--text-primary, #1e293b);
        line-height: 1.2;
      }

      .hero-subtitle {
        margin: 0;
        font-size: var(--font-size-lg, 1.25rem);
        color: var(--text-secondary, #64748b);
        line-height: 1.6;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
      }

      /* BBD Section */
      .bbd-section {
        margin-bottom: var(--spacing-xl, 32px);
      }

      .section-title {
        margin: 0 0 var(--spacing-sm, 8px) 0;
        font-size: var(--font-size-lg, 1.25rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
        text-align: center;
      }

      .section-description {
        margin: 0 0 var(--spacing-lg, 24px) 0;
        font-size: var(--font-size-md, 1rem);
        color: var(--text-secondary, #64748b);
        text-align: center;
        max-width: 600px;
        margin-left: auto;
        margin-right: auto;
      }

      /* Step Cards */
      .step-cards {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: var(--spacing-lg, 24px);
      }

      .step-card {
        background: #f0fdfa;
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--border-radius-lg, 12px);
        padding: var(--spacing-lg, 24px);
        text-align: center;
        transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
      }

      .step-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-hover, 0 8px 32px rgba(26, 36, 36, 0.12));
        border-color: var(--color-primary, #0d9488);
      }

      .step-icon {
        margin-bottom: var(--spacing-md, 16px);
        color: var(--color-primary, #0d9488);
        display: flex;
        justify-content: center;
        align-items: center;
      }

      .step-icon svg {
        width: 48px;
        height: 48px;
      }

      .step-title {
        margin: 0 0 var(--spacing-sm, 8px) 0;
        font-size: var(--font-size-lg, 1.25rem);
        font-weight: 600;
        color: var(--color-primary, #0d9488);
      }

      .step-description {
        margin: 0;
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #64748b);
        line-height: 1.6;
      }

      /* Video Section */
      .video-section {
        margin-bottom: var(--spacing-xl, 32px);
      }

      .video-card {
        background: linear-gradient(135deg, #0d9488 0%, #14b8a6 100%);
        border-radius: var(--border-radius-lg, 12px);
        padding: var(--spacing-lg, 24px);
        display: flex;
        align-items: center;
        gap: var(--spacing-lg, 24px);
        box-shadow: var(--shadow-sm, 0 1px 3px rgba(0, 0, 0, 0.1));
        transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
      }

      .video-card:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-hover, 0 8px 32px rgba(13, 148, 136, 0.3));
      }

      .video-icon {
        flex-shrink: 0;
        width: 64px;
        height: 64px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        transition: all 0.3s ease;
      }

      .video-card:hover .video-icon {
        background: rgba(255, 255, 255, 0.3);
        transform: scale(1.1);
      }

      .video-icon svg {
        width: 32px;
        height: 32px;
        margin-left: 4px;
      }

      .video-content {
        flex: 1;
        min-width: 0;
      }

      .video-title {
        margin: 0 0 var(--spacing-xs, 4px) 0;
        font-size: var(--font-size-lg, 1.25rem);
        font-weight: 600;
        color: white;
      }

      .video-description {
        margin: 0 0 var(--spacing-md, 16px) 0;
        font-size: var(--font-size-sm, 0.875rem);
        color: rgba(255, 255, 255, 0.9);
        line-height: 1.5;
      }

      .video-link {
        display: inline-flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        background: white;
        color: var(--color-primary, #0d9488);
        text-decoration: none;
        border-radius: var(--border-radius-md, 8px);
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 600;
        transition: all 0.2s ease;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.15);
      }

      .video-link:hover {
        background: #f0fdfa;
        transform: translateX(4px);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
      }

      .video-link:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(255, 255, 255, 0.5);
      }

      .video-link-icon {
        display: flex;
        align-items: center;
        justify-content: center;
      }

      .video-link-icon svg {
        width: 20px;
        height: 20px;
      }

      .external-icon {
        font-size: 1rem;
        opacity: 0.7;
        transition: opacity 0.2s ease;
      }

      .video-link:hover .external-icon {
        opacity: 1;
      }

      /* Benefits & Risks Section */
      .benefits-risks-section {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: var(--spacing-lg, 24px);
        margin-bottom: var(--spacing-xl, 32px);
      }

      .benefits-column,
      .risks-column {
        background: var(--surface-secondary, #f8fafc);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--border-radius-lg, 12px);
        padding: var(--spacing-lg, 24px);
        transition: all 0.3s cubic-bezier(0.23, 1, 0.32, 1);
      }

      .benefits-column:hover,
      .risks-column:hover {
        transform: translateY(-4px);
        box-shadow: var(--shadow-hover, 0 8px 32px rgba(26, 36, 36, 0.12));
        border-color: var(--color-primary, #0d9488);
      }

      .column-title {
        margin: 0 0 var(--spacing-md, 16px) 0;
        font-size: var(--font-size-md, 1rem);
        font-weight: 600;
      }

      .benefits-title {
        color: #059669;
      }

      .risks-title {
        color: #f59e0b;
      }

      .feature-list {
        list-style: none;
        margin: 0;
        padding: 0;
        display: flex;
        flex-direction: column;
        gap: var(--spacing-sm, 8px);
      }

      .feature-item {
        display: flex;
        align-items: flex-start;
        gap: var(--spacing-sm, 8px);
      }

      .feature-icon {
        flex-shrink: 0;
        width: 20px;
        height: 20px;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 0.875rem;
        color: #059669;
      }

      .feature-icon.warning {
        color: #f59e0b;
      }

      .feature-text {
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-primary, #1e293b);
        line-height: 1.5;
      }

      /* CTA Section */
      .cta-section {
        display: flex;
        justify-content: center;
        gap: var(--spacing-md, 16px);
        margin-bottom: var(--spacing-xl, 32px);
      }

      .cta-button {
        padding: var(--spacing-md, 16px) var(--spacing-xl, 32px);
        font-size: var(--font-size-md, 1rem);
        font-weight: 600;
        border-radius: var(--border-radius-md, 8px);
        cursor: pointer;
        transition: all 0.2s ease;
        border: 2px solid transparent;
      }

      .cta-button.primary {
        background: var(--color-primary, #0d9488);
        color: var(--text-inverse, #ffffff);
        border-color: var(--color-primary, #0d9488);
      }

      .cta-button.primary:hover {
        background: var(--color-primary-hover, #0f766e);
        border-color: var(--color-primary-hover, #0f766e);
      }

      .cta-button.secondary {
        background: transparent;
        color: var(--color-primary, #0d9488);
        border-color: var(--color-primary, #0d9488);
      }

      .cta-button.secondary:hover {
        background: #f0fdfa;
      }

      .cta-button:focus {
        outline: none;
        box-shadow: 0 0 0 3px rgba(13, 148, 136, 0.3);
      }

      /* Disclaimer Section */
      .disclaimer-section {
        display: flex;
        gap: var(--spacing-md, 16px);
        padding: var(--spacing-md, 16px);
        background: #fffbeb;
        border-left: 4px solid #f59e0b;
        border-radius: 0 var(--border-radius-md, 8px) var(--border-radius-md, 8px) 0;
      }

      .disclaimer-icon {
        flex-shrink: 0;
        font-size: 1.5rem;
        color: #f59e0b;
      }

      .disclaimer-content {
        flex: 1;
      }

      .disclaimer-content strong {
        display: block;
        margin-bottom: var(--spacing-xs, 4px);
        font-size: var(--font-size-sm, 0.875rem);
        color: #92400e;
      }

      .disclaimer-content p {
        margin: 0;
        font-size: var(--font-size-sm, 0.875rem);
        color: #78350f;
        line-height: 1.5;
      }

      /* Responsive: Mobile */
      @media (max-width: 768px) {
        .welcome-container {
          padding: var(--spacing-lg, 24px);
        }

        .hero-logo {
          width: 80px;
          height: 80px;
        }

        .hero-title {
          font-size: 1.5rem;
        }

        .hero-subtitle {
          font-size: var(--font-size-md, 1rem);
        }

        .step-cards {
          grid-template-columns: 1fr;
        }

        .video-card {
          flex-direction: column;
          text-align: center;
          padding: var(--spacing-md, 16px);
        }

        .video-icon {
          width: 56px;
          height: 56px;
        }

        .video-icon svg {
          width: 28px;
          height: 28px;
        }

        .video-title {
          font-size: var(--font-size-md, 1rem);
        }

        .benefits-risks-section {
          grid-template-columns: 1fr;
        }

        .cta-section {
          flex-direction: column;
          align-items: stretch;
        }

        .cta-button {
          text-align: center;
        }
      }

      /* Dark theme adjustments */
      :host-context([data-theme="dark"]) .step-card {
        background: #132f2f;
        border-color: #1f4a4a;
      }

      :host-context([data-theme="dark"]) .step-card:hover {
        border-color: var(--color-primary, #14b8a6);
      }

      :host-context([data-theme="dark"]) .step-description {
        color: var(--text-secondary, #94a3b8);
      }

      :host-context([data-theme="dark"]) .benefits-column,
      :host-context([data-theme="dark"]) .risks-column {
        background: #1a2e38;
        border-color: #2a4555;
      }

      :host-context([data-theme="dark"]) .benefits-column:hover,
      :host-context([data-theme="dark"]) .risks-column:hover {
        border-color: var(--color-primary, #14b8a6);
      }

      :host-context([data-theme="dark"]) .benefits-title {
        color: #34d399;
      }

      :host-context([data-theme="dark"]) .risks-title {
        color: #fbbf24;
      }

      :host-context([data-theme="dark"]) .feature-icon {
        color: #34d399;
      }

      :host-context([data-theme="dark"]) .feature-icon.warning {
        color: #fbbf24;
      }

      :host-context([data-theme="dark"]) .disclaimer-section {
        background: #2d2a1a;
        border-left-color: #fbbf24;
      }

      :host-context([data-theme="dark"]) .disclaimer-content strong {
        color: #fcd34d;
      }

      :host-context([data-theme="dark"]) .disclaimer-content p {
        color: #d4a853;
      }

      :host-context([data-theme="dark"]) .cta-button.secondary:hover {
        background: rgba(20, 184, 166, 0.15);
      }

      :host-context([data-theme="dark"]) .video-card {
        background: linear-gradient(135deg, #0d7c72 0%, #0f9b8e 100%);
      }

      :host-context([data-theme="dark"]) .video-link {
        background: rgba(255, 255, 255, 0.95);
      }

      :host-context([data-theme="dark"]) .video-link:hover {
        background: white;
      }
    `}afterRender(){const t=this.$("#quick-start-btn");t&&t.addEventListener("click",()=>{this.dispatchEvent(new CustomEvent("quick-start",{bubbles:!0,composed:!0}))});const e=this.$("#show-guide-btn");e&&e.addEventListener("click",()=>{this.dispatchEvent(new CustomEvent("show-guide",{bubbles:!0,composed:!0}))})}show(){this.style.display="block"}hide(){this.style.display="none"}}customElements.define("welcome-screen",Px);class Rx extends Ct{keydownHandler=null;template(){return`
      <div class="overlay" role="dialog" aria-modal="true" aria-labelledby="guide-title">
        <div class="modal">
          <header class="modal-header">
            <h2 id="guide-title">User Guide</h2>
            <button class="close-btn" aria-label="Close user guide">&times;</button>
          </header>

          <div class="modal-body">
            \x3C!-- Section 1: Getting Started -->
            <help-section title="Getting Started" icon="ð" open>
              <p>
                <strong>eVelo</strong> is a Monte Carlo simulator for the <strong>Buy-Borrow-Die (BBD)</strong>
                wealth strategy. BBD allows you to access portfolio value without selling assets, avoiding
                capital gains taxes while your investments continue to grow.
              </p>
              <p><strong>Quick Start:</strong></p>
              <ol>
                <li><strong>Set Initial Investment</strong> - Enter your starting portfolio value</li>
                <li><strong>Choose Asset Allocation</strong> - Select assets and their weights</li>
                <li><strong>Configure SBLOC Terms</strong> - Set interest rate, LTV limits, and withdrawal amount</li>
                <li><strong>Click Run Simulation</strong> - View probability-weighted outcomes across thousands of scenarios</li>
              </ol>
            </help-section>

            \x3C!-- Section 2: Portfolio Parameters -->
            <help-section title="Portfolio Parameters" icon="ð¼">
              <dl>
                <dt>Initial Investment</dt>
                <dd>
                  Your starting portfolio value. This is the total amount invested at day one.
                  Typical range: $1M - $100M. The simulator models how this grows (or shrinks)
                  over your time horizon.
                </dd>

                <dt>Asset Allocation</dt>
                <dd>
                  How your portfolio is distributed across asset classes. Select from available
                  assets (stocks, bonds, alternatives) and assign percentage weights. Weights
                  must sum to 100%. Different allocations produce different risk/return profiles.
                </dd>

                <dt>Initial LOC Balance</dt>
                <dd>
                  Any pre-existing loan balance on your SBLOC. If you've already borrowed against
                  your portfolio, enter that amount here. Set to $0 for a fresh start.
                </dd>
              </dl>
            </help-section>

            \x3C!-- Section 3: Spending Parameters -->
            <help-section title="Spending Parameters" icon="ð°">
              <dl>
                <dt>Annual Cash Need</dt>
                <dd>
                  The yearly amount you borrow from your SBLOC for living expenses. This is
                  <strong>tax-free income</strong> since it's a loan, not a sale. The simulator
                  adds this to your loan balance each year while your portfolio continues growing.
                </dd>

                <dt>Annual Increase (%)</dt>
                <dd>
                  How much your annual cash need grows each year, typically to keep pace with
                  inflation. A 2-4% annual increase is common. For example, a 3% increase on
                  $100K means year 2 withdrawals of $103K, year 3 of $106K, and so on.
                </dd>

                <dt>Withdraw Monthly</dt>
                <dd>
                  When enabled, withdrawals are spread across 12 monthly draws instead of a
                  single annual withdrawal. This provides more realistic cash flow modeling
                  and more accurate interest compounding calculations.
                </dd>
              </dl>
            </help-section>

            \x3C!-- Section 4: SBLOC Terms -->
            <help-section title="SBLOC Terms" icon="ð¦">
              <dl>
                <dt>Annual Interest Rate</dt>
                <dd>
                  The rate charged on your SBLOC balance. Typically SOFR + 1-3%, currently
                  around 5-7%. Interest accrues on the outstanding balance and compounds
                  (monthly or annually based on your settings).
                </dd>

                <dt>Max LTV / Hard Margin</dt>
                <dd>
                  The maximum Loan-to-Value ratio before forced liquidation. If your loan
                  balance exceeds this percentage of your portfolio value, assets are sold
                  to pay down the loan. Typical range: 50-70%.
                </dd>

                <dt>Warning Zone LTV</dt>
                <dd>
                  The LTV threshold that triggers a margin call warning. You'd receive notice
                  to add collateral or pay down the loan. Set below Max LTV to provide a
                  buffer. Typical range: 40-60%.
                </dd>

                <dt>Liquidation Haircut</dt>
                <dd>
                  Transaction costs incurred when assets are force-sold during a margin call.
                  Includes bid-ask spreads, commissions, and potential market impact.
                  Typical range: 2-5%.
                </dd>
              </dl>
            </help-section>

            \x3C!-- Section 5: Simulation Settings -->
            <help-section title="Simulation Settings" icon="âï¸">
              <dl>
                <dt>Iterations</dt>
                <dd>
                  The number of random scenarios to simulate. More iterations provide more
                  statistically robust results but take longer to compute. 10,000 iterations
                  is typically sufficient for reliable percentile estimates.
                </dd>

                <dt>Return Distribution Model</dt>
                <dd>
                  <strong>Bootstrap:</strong> Randomly samples from historical returns,
                  preserving actual market behavior including fat tails and clustering.
                  <br><br>
                  <strong>Regime-Switching:</strong> Models distinct market states (bull,
                  bear, crash) with different return characteristics and transition
                  probabilities. Better captures market regime changes.
                </dd>

                <dt>Expected Inflation</dt>
                <dd>
                  The assumed annual inflation rate for calculating real (inflation-adjusted)
                  returns. Used to show purchasing power outcomes alongside nominal values.
                  Historical average is around 3%.
                </dd>
              </dl>
            </help-section>

            \x3C!-- Section 6: Understanding Charts -->
            <help-section title="Understanding Charts" icon="ð">
              <dl>
                <dt>Probability Cone</dt>
                <dd>
                  Shows the range of possible portfolio values over time. The bands represent
                  different percentile outcomes: P90 (optimistic, only 10% do better), P50
                  (median, typical outcome), and P10 (pessimistic, only 10% do worse). Wider
                  bands indicate more uncertainty.
                </dd>

                <dt>Terminal Value Distribution</dt>
                <dd>
                  A histogram showing the distribution of final portfolio values across all
                  simulations. Helps visualize the range of possible outcomes and their
                  relative likelihood. A right-skewed distribution indicates positive
                  expected returns with asymmetric upside.
                </dd>

                <dt>Margin Call Risk</dt>
                <dd>
                  Shows the probability of experiencing a margin call by year. Higher
                  probabilities indicate greater risk that market downturns could force
                  liquidation. Rising probability over time reflects loan growth relative
                  to portfolio.
                </dd>

                <dt>SBLOC Balance Over Time</dt>
                <dd>
                  Tracks the growth of your loan balance with percentile bands. Shows how
                  withdrawals plus compounding interest grow the debt over time. Compare
                  against the maximum borrowing limit to gauge margin call risk.
                </dd>
              </dl>
            </help-section>

            \x3C!-- Section 7: Key Metrics Explained -->
            <help-section title="Key Metrics Explained" icon="ð">
              <dl>
                <dt>Success Rate</dt>
                <dd>
                  The percentage of simulations that end with a positive net worth
                  (portfolio value exceeds loan balance). A higher success rate indicates
                  a more robust strategy, though 100% success is rare with leverage.
                </dd>

                <dt>Median Final Value</dt>
                <dd>
                  The 50th percentile outcome - half of simulations end higher, half lower.
                  A better measure of "typical" outcome than average because it's not
                  skewed by extreme results.
                </dd>

                <dt>CAGR (Compound Annual Growth Rate)</dt>
                <dd>
                  The smoothed annual return that would produce the median final value
                  from your initial investment. Useful for comparing against benchmarks
                  and other investment strategies.
                </dd>

                <dt>Max Drawdown</dt>
                <dd>
                  The largest peak-to-trough decline experienced during the simulation.
                  Important for understanding worst-case scenarios and whether you could
                  emotionally and financially withstand such losses.
                </dd>

                <dt>Salary Equivalent</dt>
                <dd>
                  The pre-tax salary you'd need to earn to net the same amount as your
                  tax-free SBLOC withdrawals. Calculated using your effective tax rate.
                  Illustrates the tax advantage of borrowing vs. earning income.
                </dd>
              </dl>
            </help-section>

            \x3C!-- Section 8: Glossary -->
            <help-section title="Glossary" icon="ð">
              <dl>
                <dt>Buy-Borrow-Die (BBD)</dt>
                <dd>
                  A wealth strategy where you buy appreciating assets, borrow against them
                  for living expenses (avoiding capital gains taxes), and pass them to heirs
                  at death when the cost basis "steps up" to market value, potentially
                  eliminating the embedded capital gains.
                </dd>

                <dt>SBLOC (Securities-Backed Line of Credit)</dt>
                <dd>
                  A loan collateralized by your investment portfolio. You can borrow up to
                  a percentage (typically 50-70%) of your portfolio's value. Interest rates
                  are typically lower than unsecured loans because of the collateral.
                </dd>

                <dt>LTV (Loan-to-Value)</dt>
                <dd>
                  The ratio of your loan balance to your portfolio value, expressed as a
                  percentage. For example, a $300K loan against a $1M portfolio is 30% LTV.
                  Higher LTV means higher margin call risk.
                </dd>

                <dt>Margin Call</dt>
                <dd>
                  A demand from your lender to either deposit more collateral or pay down
                  your loan when your LTV exceeds the warning threshold. Failure to meet
                  a margin call can result in forced liquidation of assets.
                </dd>

                <dt>Stepped-Up Basis</dt>
                <dd>
                  A tax provision where inherited assets receive a new cost basis equal to
                  their market value at the time of the owner's death. This effectively
                  eliminates capital gains taxes on appreciation during the original
                  owner's lifetime.
                </dd>

                <dt>Monte Carlo Simulation</dt>
                <dd>
                  A computational technique that runs thousands of random scenarios to
                  estimate the probability distribution of outcomes. By simulating many
                  possible market paths, it provides a realistic range of potential results
                  rather than a single projection.
                </dd>
              </dl>
            </help-section>
          </div>

          <footer class="modal-footer">
            <p>
              This simulator provides educational projections only. Actual results will vary.
              Consult a qualified financial advisor before implementing any investment strategy.
            </p>
          </footer>
        </div>
      </div>
    `}styles(){return`
      :host {
        display: block;
      }

      .overlay {
        position: fixed;
        inset: 0;
        background: rgba(0, 0, 0, 0.5);
        backdrop-filter: blur(4px);
        -webkit-backdrop-filter: blur(4px);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.2s ease, visibility 0.2s ease;
      }

      .overlay.open {
        opacity: 1;
        visibility: visible;
      }

      .modal {
        background: var(--surface-primary, #ffffff);
        border-radius: var(--border-radius-lg, 12px);
        box-shadow: var(--shadow-xl, 0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04));
        max-width: 800px;
        max-height: 90vh;
        width: calc(100% - 32px);
        display: flex;
        flex-direction: column;
        overflow: hidden;
      }

      .modal-header {
        display: flex;
        align-items: center;
        justify-content: space-between;
        padding: var(--spacing-md, 16px) var(--spacing-lg, 24px);
        border-bottom: 1px solid var(--border-color, #e2e8f0);
        flex-shrink: 0;
      }

      .modal-header h2 {
        margin: 0;
        font-size: var(--font-size-xl, 1.25rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
      }

      .close-btn {
        background: none;
        border: none;
        font-size: 1.5rem;
        color: var(--text-secondary, #64748b);
        cursor: pointer;
        padding: 4px 8px;
        border-radius: var(--border-radius-sm, 4px);
        line-height: 1;
        transition: background-color 0.15s ease, color 0.15s ease;
      }

      .close-btn:hover {
        background: var(--surface-secondary, #f8fafc);
        color: var(--text-primary, #1e293b);
      }

      .close-btn:focus-visible {
        outline: 2px solid var(--color-primary, #0d9488);
        outline-offset: 2px;
      }

      .modal-body {
        flex: 1;
        overflow-y: auto;
        padding: var(--spacing-lg, 24px);
      }

      .modal-footer {
        padding: var(--spacing-md, 16px) var(--spacing-lg, 24px);
        border-top: 1px solid var(--border-color, #e2e8f0);
        flex-shrink: 0;
      }

      .modal-footer p {
        margin: 0;
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-tertiary, #94a3b8);
        font-style: italic;
        line-height: 1.5;
      }

      /* Definition list styling for parameter docs */
      dl {
        margin: 0;
      }

      dt {
        font-weight: 600;
        color: var(--text-primary, #1e293b);
        margin-top: var(--spacing-sm, 8px);
      }

      dt:first-child {
        margin-top: 0;
      }

      dd {
        margin: var(--spacing-xs, 4px) 0 0 0;
        color: var(--text-secondary, #64748b);
        line-height: 1.6;
      }

      /* Mobile: Full screen modal */
      @media (max-width: 640px) {
        .modal {
          width: 100%;
          height: 100%;
          max-height: 100%;
          border-radius: 0;
        }

        .modal-header {
          padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        }

        .modal-body {
          padding: var(--spacing-md, 16px);
        }

        .modal-footer {
          padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        }
      }
    `}afterRender(){const t=this.$(".close-btn");t&&t.addEventListener("click",()=>this.hide());const e=this.$(".overlay");e&&e.addEventListener("click",r=>{r.target===e&&this.hide()}),this.keydownHandler=r=>{r.key==="Escape"&&this.hide()},document.addEventListener("keydown",this.keydownHandler)}disconnectedCallback(){super.disconnectedCallback(),this.keydownHandler&&(document.removeEventListener("keydown",this.keydownHandler),this.keydownHandler=null)}show(){const t=this.$(".overlay");t&&t.classList.add("open")}hide(){const t=this.$(".overlay");t&&t.classList.remove("open")}}customElements.define("user-guide-modal",Rx);/**
 * @license
 * Copyright 2019 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Qd=Symbol("Comlink.proxy"),zx=Symbol("Comlink.endpoint"),Tx=Symbol("Comlink.releaseProxy"),vs=Symbol("Comlink.finalizer"),_i=Symbol("Comlink.thrown"),Jd=a=>typeof a=="object"&&a!==null||typeof a=="function",Lx={canHandle:a=>Jd(a)&&a[Qd],serialize(a){const{port1:t,port2:e}=new MessageChannel;return $d(a,t),[e,[e]]},deserialize(a){return a.start(),eu(a)}},Ox={canHandle:a=>Jd(a)&&_i in a,serialize({value:a}){let t;return a instanceof Error?t={isError:!0,value:{message:a.message,name:a.name,stack:a.stack}}:t={isError:!1,value:a},[t,[]]},deserialize(a){throw a.isError?Object.assign(new Error(a.value.message),a.value):a.value}},Zd=new Map([["proxy",Lx],["throw",Ox]]);function Bx(a,t){for(const e of a)if(t===e||e==="*"||e instanceof RegExp&&e.test(t))return!0;return!1}function $d(a,t=globalThis,e=["*"]){t.addEventListener("message",function r(i){if(!i||!i.data)return;if(!Bx(e,i.origin)){console.warn(`Invalid origin '${i.origin}' for comlink proxy`);return}const{id:n,type:s,path:o}=Object.assign({path:[]},i.data),l=(i.data.argumentList||[]).map(jr);let d;try{const h=o.slice(0,-1).reduce((m,v)=>m[v],a),p=o.reduce((m,v)=>m[v],a);switch(s){case"GET":d=p;break;case"SET":h[o.slice(-1)[0]]=jr(i.data.value),d=!0;break;case"APPLY":d=p.apply(h,l);break;case"CONSTRUCT":{const m=new p(...l);d=iu(m)}break;case"ENDPOINT":{const{port1:m,port2:v}=new MessageChannel;$d(a,v),d=Hx(m,[m])}break;case"RELEASE":d=void 0;break;default:return}}catch(h){d={value:h,[_i]:0}}Promise.resolve(d).catch(h=>({value:h,[_i]:0})).then(h=>{const[p,m]=hn(h);t.postMessage(Object.assign(Object.assign({},p),{id:n}),m),s==="RELEASE"&&(t.removeEventListener("message",r),tu(t),vs in a&&typeof a[vs]=="function"&&a[vs]())}).catch(h=>{const[p,m]=hn({value:new TypeError("Unserializable return value"),[_i]:0});t.postMessage(Object.assign(Object.assign({},p),{id:n}),m)})}),t.start&&t.start()}function Ix(a){return a.constructor.name==="MessagePort"}function tu(a){Ix(a)&&a.close()}function eu(a,t){const e=new Map;return a.addEventListener("message",function(i){const{data:n}=i;if(!n||!n.id)return;const s=e.get(n.id);if(s)try{s(n)}finally{e.delete(n.id)}}),Os(a,e,[],t)}function Wi(a){if(a)throw new Error("Proxy has been released and is not useable")}function ru(a){return na(a,new Map,{type:"RELEASE"}).then(()=>{tu(a)})}const dn=new WeakMap,un="FinalizationRegistry"in globalThis&&new FinalizationRegistry(a=>{const t=(dn.get(a)||0)-1;dn.set(a,t),t===0&&ru(a)});function Fx(a,t){const e=(dn.get(t)||0)+1;dn.set(t,e),un&&un.register(a,t,a)}function Vx(a){un&&un.unregister(a)}function Os(a,t,e=[],r=function(){}){let i=!1;const n=new Proxy(r,{get(s,o){if(Wi(i),o===Tx)return()=>{Vx(n),ru(a),t.clear(),i=!0};if(o==="then"){if(e.length===0)return{then:()=>n};const l=na(a,t,{type:"GET",path:e.map(d=>d.toString())}).then(jr);return l.then.bind(l)}return Os(a,t,[...e,o])},set(s,o,l){Wi(i);const[d,h]=hn(l);return na(a,t,{type:"SET",path:[...e,o].map(p=>p.toString()),value:d},h).then(jr)},apply(s,o,l){Wi(i);const d=e[e.length-1];if(d===zx)return na(a,t,{type:"ENDPOINT"}).then(jr);if(d==="bind")return Os(a,t,e.slice(0,-1));const[h,p]=Dc(l);return na(a,t,{type:"APPLY",path:e.map(m=>m.toString()),argumentList:h},p).then(jr)},construct(s,o){Wi(i);const[l,d]=Dc(o);return na(a,t,{type:"CONSTRUCT",path:e.map(h=>h.toString()),argumentList:l},d).then(jr)}});return Fx(n,a),n}function jx(a){return Array.prototype.concat.apply([],a)}function Dc(a){const t=a.map(hn);return[t.map(e=>e[0]),jx(t.map(e=>e[1]))]}const au=new WeakMap;function Hx(a,t){return au.set(a,t),a}function iu(a){return Object.assign(a,{[Qd]:!0})}function hn(a){for(const[t,e]of Zd)if(e.canHandle(a)){const[r,i]=e.serialize(a);return[{type:"HANDLER",name:t,value:r},i]}return[{type:"RAW",value:a},au.get(a)||[]]}function jr(a){switch(a.type){case"HANDLER":return Zd.get(a.name).deserialize(a.value);case"RAW":return a.value}}function na(a,t,e,r){return new Promise(i=>{const n=Nx();t.set(n,i),a.start&&a.start(),a.postMessage(Object.assign({id:n},e),r)})}function Nx(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}let Yi=null;async function qx(){if(Yi)return Yi;{const a=await Rc(()=>Promise.resolve().then(()=>Zx),void 0,import.meta.url),t=new a.default;Yi=eu(t)}return Yi}async function Wx(a,t,e){const r=await qx();await r.healthCheck();const i=e?iu(e):void 0;return r.simulate(a,t,i)}function yt(a,t){return a&&a.querySelector(t)?.textContent?.trim()||""}function Ec(a,t,e){return a&&a.querySelector(t)?.classList.contains(e)||!1}function ke(a){return Math.abs(a)>=1e6?new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",notation:"compact",maximumFractionDigits:1}).format(a):new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:0}).format(a)}function Yx(a,t){if(!a)return null;const e=a.querySelector(t);if(!e)return null;const r=e.chart;if(!r)return null;try{return r.toBase64Image("image/png",1)}catch(i){return console.warn(`Failed to extract chart image for ${t}:`,i),null}}function Ux(a){if(!a)return console.warn("extractAllChartImages: shadowRoot is null"),{};const t={probabilityCone:"#cone-chart",histogram:"#histogram-chart",sblocBalance:"#sbloc-balance-chart",marginCall:"#margin-call-chart",bbdComparison:"#bbd-comparison-chart",comparisonLine:"#comparison-line-chart",cumulativeCosts:"#cumulative-costs-chart",terminalComparison:"#terminal-comparison-chart",sblocUtilization:"#sbloc-utilization-chart"},e={};for(const[r,i]of Object.entries(t))e[r]=Yx(a,i);return e}function Gx(a,t){const r=a.querySelector("#key-metrics-banner")?.shadowRoot||null,i=yt(r,"#hero-title"),n=i.toLowerCase().includes("unlocked")||i.toLowerCase().includes("escape velocity"),s={title:i,isSuccess:n,alertTitle:yt(r,"#alert-title"),alertDescription:yt(r,"#alert-description"),logoBase64:ca},o={bbdSuccessRate:yt(r,"#bbd-success"),vsSellSuccess:yt(r,"#vs-sell-success"),sellSuccessRate:yt(r,"#sell-success-rate"),medianUtilization:yt(r,"#median-utilization"),yearsAbove70:yt(r,"#years-above-70"),footerText:yt(r,"#strategy-footer-text"),isGood:Ec(r,"#strategy-accent","accent-green")},l={cagr:yt(r,"#cagr"),startingValue:yt(r,"#starting-value"),medianTerminal:yt(r,"#median-terminal"),vsSellTerminal:yt(r,"#vs-sell-terminal"),sellTerminal:yt(r,"#sell-terminal"),p10Outcome:yt(r,"#p10-outcome")},d={marginCallProbability:yt(r,"#margin-call-prob"),peakUtilization:yt(r,"#peak-utilization"),safetyBuffer:yt(r,"#safety-buffer"),mostDangerousYear:yt(r,"#dangerous-year"),footerText:yt(r,"#safety-footer-text"),isGood:Ec(r,"#safety-accent","accent-green")},h={median:yt(a,"#stat-median"),successRate:yt(a,"#stat-success"),cagr:yt(a,"#stat-cagr"),twrr:yt(a,"#stat-twrr"),mean:yt(a,"#stat-mean"),volatility:yt(a,"#stat-volatility"),stddev:yt(a,"#stat-stddev"),salaryEquiv:yt(a,"#stat-salary")},m=a.querySelector("#net-worth-spectrum")?.shadowRoot||null,v=m?{title:"Terminal Net Worth Distribution",p10:yt(m,"#p10-value"),p50:yt(m,"#p50-value"),p90:yt(m,"#p90-value")}:null,k=a.querySelector("#debt-spectrum")?.shadowRoot||null,S=k?{title:"LOC Balance Distribution",p10:yt(k,"#p10-value"),p50:yt(k,"#p50-value"),p90:yt(k,"#p90-value")}:null,M=a.querySelector("#strategy-analysis")?.shadowRoot||null,I=M?{verdict:yt(M,"#verdict-headline"),verdictDescription:yt(M,"#verdict-rationale"),bbdTerminal:yt(M,"#bbd-terminal"),sellTerminal:yt(M,"#sell-terminal"),taxSavings:yt(M,"#diff-tax-savings"),wealthAdvantage:yt(M,"#diff-advantage")}:null,H=a.querySelector(".sbloc-section.visible")!==null,X=Ux(a),q=a.querySelector("#param-summary"),w=q?.shadowRoot||null;let C=null;if(w){const ht=w.querySelectorAll(".asset-bar-row"),pt=[];ht.forEach(Z=>{const J=Z.querySelector(".asset-bar-name")?.textContent?.trim()||"",bt=Z.querySelector(".asset-bar-percent")?.textContent?.trim()||"",gt=Z.querySelector(".asset-bar-swatch")?.style.backgroundColor||"#0d9488";J&&pt.push({name:J,weight:bt,color:gt})});let lt=null;const G=q;if(G?.donutChart)try{lt=G.donutChart.toBase64Image("image/png",1)}catch{lt=null}C={assetCount:yt(w,"#asset-count"),assets:pt,donutChartImage:lt,startingPortfolio:yt(w,"#starting-portfolio"),timeHorizon:yt(w,"#time-horizon"),annualWithdrawal:yt(w,"#annual-withdrawal"),withdrawalGrowth:yt(w,"#withdrawal-growth"),sblocInterestRate:yt(w,"#sbloc-interest"),maxBorrowing:yt(w,"#max-borrowing"),maintenanceMargin:yt(w,"#maintenance-margin"),simulationsRun:yt(w,"#simulations-run")}}const L=a.querySelector("#yearly-analysis-table");let Y=null;if(L?.data){const ht=L.data;Y={rows:ht.percentiles.map((lt,G)=>({year:lt.year,annualWithdrawal:ke(ht.withdrawals.annual[G]||0),cumulativeOrLoanBalance:ke(ht.withdrawals.cumulative[G]||0),p10:ke(lt.p10),p25:ke(lt.p25),p50:ke(lt.p50),p75:ke(lt.p75),p90:ke(lt.p90)})),isSBLOCLoanBalance:ht.isSBLOCLoanBalance||!1}}const K=a.querySelector("#sell-yearly-analysis-table");let tt=null;if(K?.data&&H){const ht=K.data;tt={rows:ht.percentiles.map((lt,G)=>({year:lt.year,annualWithdrawal:ke(ht.withdrawals.annual[G]||0),cumulativeWithdrawal:ke(ht.withdrawals.cumulative[G]||0),cumulativeTax:ke(ht.cumulativeTaxes[G]||0),p10:ke(lt.p10),p25:ke(lt.p25),p50:ke(lt.p50),p75:ke(lt.p75),p90:ke(lt.p90)}))}}return{heroBanner:s,strategyCard:o,growthCard:l,safetyCard:d,summaryStats:h,netWorthSpectrum:v,debtSpectrum:S,strategyAnalysis:I,portfolioComposition:C,bbdYearlyAnalysis:Y,sellYearlyAnalysis:tt,chartImages:X,paramSummary:{timeHorizon:t.timeHorizon,iterations:t.iterations,inflationRate:t.inflationRate,sblocRate:t.sbloc?.interestRate||0,maxLtv:t.sbloc?.targetLTV||0},timestamp:new Date().toLocaleString(),hasSblocData:H}}function Xx(a){const t=[];a.chartImages.probabilityCone&&t.push(`
      <section class="chart-section">
        <h3>Portfolio Projection</h3>
        <div class="chart-wrapper">
          <img class="chart-image" src="${a.chartImages.probabilityCone}" alt="Portfolio value projection over time">
        </div>
      </section>
    `),a.chartImages.histogram&&t.push(`
      <section class="chart-section">
        <h3>Terminal Value Distribution</h3>
        <div class="chart-wrapper">
          <img class="chart-image" src="${a.chartImages.histogram}" alt="Distribution of terminal portfolio values">
        </div>
      </section>
    `),a.hasSblocData&&(a.chartImages.marginCall&&t.push(`
        <section class="chart-section">
          <h3>Margin Call Risk by Year</h3>
          <div class="chart-wrapper">
            <img class="chart-image" src="${a.chartImages.marginCall}" alt="Margin call probability by year">
          </div>
        </section>
      `),a.chartImages.sblocBalance&&t.push(`
        <section class="chart-section">
          <h3>SBLOC Balance Over Time</h3>
          <div class="chart-wrapper">
            <img class="chart-image" src="${a.chartImages.sblocBalance}" alt="SBLOC balance trajectory">
          </div>
        </section>
      `),a.chartImages.bbdComparison&&t.push(`
        <section class="chart-section">
          <h3>BBD vs Sell Strategy Comparison</h3>
          <div class="chart-wrapper">
            <img class="chart-image" src="${a.chartImages.bbdComparison}" alt="BBD vs Sell strategy comparison">
          </div>
        </section>
      `),a.chartImages.comparisonLine&&t.push(`
        <section class="chart-section half-width">
          <h3>Net Worth Over Time (Median)</h3>
          <div class="chart-wrapper">
            <img class="chart-image" src="${a.chartImages.comparisonLine}" alt="Net worth comparison over time">
          </div>
        </section>
      `),a.chartImages.cumulativeCosts&&t.push(`
        <section class="chart-section half-width">
          <h3>Cumulative Costs: Taxes vs Interest</h3>
          <div class="chart-wrapper">
            <img class="chart-image" src="${a.chartImages.cumulativeCosts}" alt="Cumulative costs comparison">
          </div>
        </section>
      `),a.chartImages.terminalComparison&&t.push(`
        <section class="chart-section">
          <h3>Terminal Value Distribution (All Percentiles)</h3>
          <div class="chart-wrapper short">
            <img class="chart-image" src="${a.chartImages.terminalComparison}" alt="Terminal value comparison across percentiles">
          </div>
        </section>
      `),a.chartImages.sblocUtilization&&t.push(`
        <section class="chart-section">
          <h3>SBLOC Utilization Over Time</h3>
          <div class="chart-wrapper">
            <img class="chart-image" src="${a.chartImages.sblocUtilization}" alt="SBLOC utilization over time">
          </div>
        </section>
      `));const e=a.strategyAnalysis?`
    <section class="strategy-section">
      <h3>Strategy Analysis</h3>
      <div class="verdict-banner ${a.strategyAnalysis.verdict.toLowerCase().includes("bbd")?"verdict-bbd":"verdict-sell"}">
        <div class="verdict-title">${a.strategyAnalysis.verdict}</div>
        <div class="verdict-description">${a.strategyAnalysis.verdictDescription}</div>
      </div>
      <div class="strategy-metrics">
        <div class="strategy-metric">
          <span class="metric-label">BBD Terminal Value</span>
          <span class="metric-value">${a.strategyAnalysis.bbdTerminal}</span>
        </div>
        <div class="strategy-metric">
          <span class="metric-label">Sell Terminal Value</span>
          <span class="metric-value">${a.strategyAnalysis.sellTerminal}</span>
        </div>
        <div class="strategy-metric">
          <span class="metric-label">Tax Savings</span>
          <span class="metric-value positive">${a.strategyAnalysis.taxSavings}</span>
        </div>
        <div class="strategy-metric">
          <span class="metric-label">Wealth Advantage</span>
          <span class="metric-value ${a.strategyAnalysis.wealthAdvantage.startsWith("+")?"positive":"negative"}">${a.strategyAnalysis.wealthAdvantage}</span>
        </div>
      </div>
    </section>
  `:"",r=a.netWorthSpectrum?`
    <section class="spectrum-section">
      <h3>${a.netWorthSpectrum.title}</h3>
      <div class="spectrum-bar">
        <div class="spectrum-gradient"></div>
        <div class="spectrum-labels">
          <div class="spectrum-item pessimistic">
            <span class="label">P10 (Pessimistic)</span>
            <span class="value">${a.netWorthSpectrum.p10}</span>
          </div>
          <div class="spectrum-item median">
            <span class="label">P50 (Median)</span>
            <span class="value">${a.netWorthSpectrum.p50}</span>
          </div>
          <div class="spectrum-item optimistic">
            <span class="label">P90 (Optimistic)</span>
            <span class="value">${a.netWorthSpectrum.p90}</span>
          </div>
        </div>
      </div>
    </section>
  `:"",i=a.hasSblocData&&a.debtSpectrum?`
    <section class="spectrum-section">
      <h3>${a.debtSpectrum.title}</h3>
      <div class="spectrum-bar debt">
        <div class="spectrum-gradient debt"></div>
        <div class="spectrum-labels">
          <div class="spectrum-item pessimistic">
            <span class="label">P10 (Best Case)</span>
            <span class="value">${a.debtSpectrum.p10}</span>
          </div>
          <div class="spectrum-item median">
            <span class="label">P50 (Median)</span>
            <span class="value">${a.debtSpectrum.p50}</span>
          </div>
          <div class="spectrum-item optimistic">
            <span class="label">P90 (Worst Case)</span>
            <span class="value">${a.debtSpectrum.p90}</span>
          </div>
        </div>
      </div>
    </section>
  `:"",n=a.portfolioComposition?(()=>{const l=a.portfolioComposition,d=l.assets.length>0?Math.max(...l.assets.map(p=>parseFloat(p.weight)||0)):100,h=l.assets.map(p=>`
        <div class="asset-bar" style="--bar-width: ${(parseFloat(p.weight)||0)/d*100}%; --bar-color: ${p.color};">
          <div class="asset-swatch" style="background-color: ${p.color}"></div>
          <span class="asset-name">${p.name}</span>
          <span class="asset-weight">${p.weight}</span>
        </div>
      `).join("");return`
    <div class="portfolio-section">
      <div class="portfolio-header">
        <div class="portfolio-icon">
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <circle cx="12" cy="12" r="10"></circle>
            <path d="M12 2a10 10 0 0 1 10 10"></path>
          </svg>
        </div>
        <div>
          <div class="portfolio-title">Portfolio Composition</div>
          <div class="portfolio-subtitle">${l.assetCount}</div>
        </div>
      </div>
      <div class="portfolio-content">
        ${l.donutChartImage?`
          <div class="portfolio-donut">
            <img src="${l.donutChartImage}" alt="Portfolio allocation donut chart" />
          </div>
        `:""}
        <div class="asset-bars">
          ${h}
        </div>
      </div>
      <div class="portfolio-params">
        <div class="portfolio-param">
          <span class="label">STARTING PORTFOLIO</span>
          <span class="value">${l.startingPortfolio}</span>
        </div>
        <div class="portfolio-param">
          <span class="label">TIME HORIZON</span>
          <span class="value">${l.timeHorizon}</span>
        </div>
        <div class="portfolio-param">
          <span class="label">ANNUAL WITHDRAWAL</span>
          <span class="value">${l.annualWithdrawal}</span>
        </div>
        <div class="portfolio-param">
          <span class="label">WITHDRAWAL GROWTH</span>
          <span class="value">${l.withdrawalGrowth}</span>
        </div>
        <div class="portfolio-param">
          <span class="label">SBLOC INTEREST RATE</span>
          <span class="value">${l.sblocInterestRate}</span>
        </div>
        <div class="portfolio-param">
          <span class="label">MAX BORROWING</span>
          <span class="value">${l.maxBorrowing}</span>
        </div>
        <div class="portfolio-param">
          <span class="label">MAINTENANCE MARGIN</span>
          <span class="value">${l.maintenanceMargin}</span>
        </div>
        <div class="portfolio-param">
          <span class="label">SIMULATIONS RUN</span>
          <span class="value">${l.simulationsRun}</span>
        </div>
      </div>
    </div>
    `})():"",s=a.bbdYearlyAnalysis?(()=>{const{rows:l,isSBLOCLoanBalance:d}=a.bbdYearlyAnalysis,h=d?"Loan Balance":"Cumulative",p=l.map(m=>`
      <tr>
        <td class="year-col">${m.year}</td>
        <td class="withdrawal-col">${m.annualWithdrawal}</td>
        <td class="withdrawal-col">${m.cumulativeOrLoanBalance}</td>
        <td class="p10-col">${m.p10}</td>
        <td class="p25-col">${m.p25}</td>
        <td class="p50-col">${m.p50}</td>
        <td class="p75-col">${m.p75}</td>
        <td class="p90-col">${m.p90}</td>
      </tr>
    `).join("");return`
    <section class="yearly-table-section">
      <div class="table-header-row">
        <span class="table-icon">ð</span>
        <h3>Year-by-Year Percentile Analysis</h3>
      </div>
      <table class="yearly-analysis-table">
        <thead>
          <tr>
            <th rowspan="2" class="year-header">Year</th>
            <th colspan="2" class="withdrawal-group-header">Withdrawals</th>
            <th colspan="5" class="percentile-group-header">Net Worth by Percentile</th>
          </tr>
          <tr>
            <th class="withdrawal-header">Annual</th>
            <th class="withdrawal-header">${h}</th>
            <th class="p10-header">10th %ile</th>
            <th class="p25-header">25th %ile</th>
            <th class="p50-header">50th %ile</th>
            <th class="p75-header">75th %ile</th>
            <th class="p90-header">90th %ile</th>
          </tr>
        </thead>
        <tbody>
          ${p}
        </tbody>
      </table>
    </section>
    `})():"",o=a.sellYearlyAnalysis?(()=>{const{rows:l}=a.sellYearlyAnalysis;return`
    <section class="yearly-table-section sell-strategy">
      <div class="table-header-row">
        <span class="table-icon">ð°</span>
        <h3>Sell Strategy Year-by-Year Analysis</h3>
      </div>
      <table class="yearly-analysis-table sell-table">
        <thead>
          <tr>
            <th rowspan="2" class="year-header">Year</th>
            <th colspan="2" class="withdrawal-group-header">Withdrawals</th>
            <th class="tax-group-header">Taxes</th>
            <th colspan="5" class="percentile-group-header">Portfolio Value by Percentile</th>
          </tr>
          <tr>
            <th class="withdrawal-header">Annual</th>
            <th class="withdrawal-header">Cumulative</th>
            <th class="tax-header">Cumulative</th>
            <th class="p10-header">10th %ile</th>
            <th class="p25-header">25th %ile</th>
            <th class="p50-header">50th %ile</th>
            <th class="p75-header">75th %ile</th>
            <th class="p90-header">90th %ile</th>
          </tr>
        </thead>
        <tbody>
          ${l.map(h=>`
      <tr>
        <td class="year-col">${h.year}</td>
        <td class="withdrawal-col">${h.annualWithdrawal}</td>
        <td class="withdrawal-col">${h.cumulativeWithdrawal}</td>
        <td class="tax-col">${h.cumulativeTax}</td>
        <td class="p10-col">${h.p10}</td>
        <td class="p25-col">${h.p25}</td>
        <td class="p50-col">${h.p50}</td>
        <td class="p75-col">${h.p75}</td>
        <td class="p90-col">${h.p90}</td>
      </tr>
    `).join("")}
        </tbody>
      </table>
    </section>
    `})():"";return`<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>eVelo Simulation Report</title>
  <style>
    /* Reset */
    * { box-sizing: border-box; margin: 0; padding: 0; }

    /* Base */
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      font-size: 10pt;
      line-height: 1.5;
      color: #1e293b;
      background: #ffffff;
      padding: 0.5in;
    }

    /* Print buttons */
    .print-actions {
      position: fixed;
      top: 16px;
      right: 16px;
      display: flex;
      gap: 8px;
      z-index: 1000;
    }
    .print-btn {
      background: #0d9488;
      color: white;
      border: none;
      padding: 12px 24px;
      font-size: 14px;
      font-weight: 600;
      border-radius: 8px;
      cursor: pointer;
    }
    .print-btn:hover { background: #0f766e; }
    .print-btn.secondary { background: #64748b; }
    .print-btn.secondary:hover { background: #475569; }

    @media print {
      .print-actions { display: none; }
      body { padding: 0; }
      section { page-break-inside: avoid; }
    }

    @page {
      size: letter portrait;
      margin: 0.5in;
    }

    /* Header */
    .report-header {
      text-align: center;
      margin-bottom: 20px;
      padding-bottom: 16px;
      border-bottom: 3px solid #0d9488;
    }
    .report-header h1 {
      font-size: 22pt;
      color: #0d9488;
      margin-bottom: 4px;
      font-weight: 700;
    }
    .report-header .timestamp {
      font-size: 9pt;
      color: #64748b;
    }

    /* Hero Banner */
    .hero-banner {
      position: relative;
      background: linear-gradient(135deg, #0d9488 0%, #0f766e 100%);
      color: white;
      padding: 28px 40px;
      border-radius: 12px;
      margin-bottom: 16px;
      overflow: hidden;
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 20px;
    }
    .hero-banner.warning {
      background: linear-gradient(135deg, #f59e0b 0%, #d97706 100%);
    }
    .hero-watermark {
      position: absolute;
      right: 20px;
      top: 50%;
      transform: translateY(-50%);
      width: 140px;
      height: 140px;
      opacity: 0.15;
      pointer-events: none;
      filter: brightness(0) invert(1);
    }
    .hero-icon {
      display: flex;
      align-items: center;
      justify-content: center;
      width: 64px;
      height: 64px;
      border: 3px solid rgba(255, 255, 255, 0.9);
      border-radius: 50%;
      flex-shrink: 0;
    }
    .hero-icon img {
      width: 40px;
      height: 40px;
      filter: brightness(0) invert(1);
    }
    .hero-icon .emoji {
      font-size: 36px;
    }
    .hero-banner .hero-title {
      font-size: 26pt;
      font-weight: 700;
      font-style: italic;
      text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
    }
    .hero-banner .hero-title .brand {
      font-weight: 400;
      font-style: italic;
    }

    /* Alert Card */
    .alert-card {
      display: flex;
      gap: 12px;
      padding: 12px 16px;
      background: #f0fdfa;
      border: 1px solid #99f6e4;
      border-left: 4px solid #0d9488;
      border-radius: 8px;
      margin-bottom: 16px;
    }
    .alert-card.warning {
      background: #fffbeb;
      border-color: #fde68a;
      border-left-color: #f59e0b;
    }
    .alert-icon { font-size: 20px; }
    .alert-title { font-weight: 600; font-size: 11pt; }
    .alert-description { font-size: 9pt; color: #475569; }

    /* Metric Cards Grid */
    .cards-grid {
      display: grid;
      grid-template-columns: repeat(3, 1fr);
      gap: 12px;
      margin-bottom: 20px;
    }

    .metric-card {
      background: #ffffff;
      border: 1px solid #e2e8f0;
      border-radius: 10px;
      overflow: hidden;
    }
    .card-accent {
      height: 4px;
      background: #0d9488;
    }
    .card-accent.accent-blue { background: #3b82f6; }
    .card-accent.accent-red { background: #ef4444; }
    .card-accent.accent-green { background: #10b981; }
    .card-accent.accent-amber { background: #f59e0b; }
    .card-body { padding: 12px; }
    .card-header {
      display: flex;
      justify-content: space-between;
      align-items: flex-start;
      margin-bottom: 8px;
    }
    .card-title .title-text {
      font-size: 10pt;
      font-weight: 600;
      color: #1e293b;
    }
    .card-title .subtitle {
      display: block;
      font-size: 7pt;
      color: #64748b;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    .hero-metric {
      display: flex;
      align-items: baseline;
      gap: 2px;
      margin-bottom: 2px;
    }
    .hero-value {
      font-size: 26pt;
      font-weight: 700;
      color: #0d9488;
    }
    .hero-value.value-blue { color: #3b82f6; }
    .hero-value.value-red { color: #ef4444; }
    .hero-unit {
      font-size: 14pt;
      font-weight: 600;
      color: #0d9488;
    }
    .hero-unit.unit-blue { color: #3b82f6; }
    .hero-label {
      font-size: 7pt;
      color: #64748b;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      margin-bottom: 10px;
    }
    .metrics-grid {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 6px;
    }
    .metric-item {
      background: #f8fafc;
      padding: 6px 8px;
      border-radius: 4px;
    }
    .metric-item .metric-value {
      font-size: 10pt;
      font-weight: 600;
      color: #1e293b;
      display: block;
    }
    .metric-item .metric-label {
      font-size: 7pt;
      color: #64748b;
    }
    .metric-item.highlight-positive .metric-value { color: #10b981; }
    .metric-item.highlight-negative .metric-value { color: #ef4444; }
    .card-footer {
      margin-top: 10px;
      padding-top: 8px;
      border-top: 1px solid #e2e8f0;
      font-size: 8pt;
      color: #64748b;
    }

    /* Section Styling */
    section {
      margin-bottom: 16px;
    }
    section h3 {
      font-size: 12pt;
      font-weight: 600;
      color: #1e293b;
      margin-bottom: 10px;
      padding-bottom: 6px;
      border-bottom: 1px solid #e2e8f0;
    }

    /* Stats Grid */
    .stats-section {
      background: #ffffff;
      border: 1px solid #e2e8f0;
      border-radius: 10px;
      padding: 16px;
      margin-bottom: 16px;
    }
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
    }
    .stat-item {
      background: #f8fafc;
      border-radius: 6px;
      padding: 10px;
      text-align: center;
    }
    .stat-label {
      display: block;
      font-size: 8pt;
      color: #64748b;
      margin-bottom: 2px;
    }
    .stat-value {
      display: block;
      font-size: 12pt;
      font-weight: 600;
      color: #1e293b;
    }

    /* Parameters Table */
    .params-section {
      background: #f8fafc;
      border: 1px solid #e2e8f0;
      border-left: 4px solid #0d9488;
      border-radius: 8px;
      padding: 12px 16px;
      margin-bottom: 16px;
    }
    .params-grid {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 12px;
    }
    .param-item .param-label {
      font-size: 8pt;
      color: #64748b;
      display: block;
    }
    .param-item .param-value {
      font-size: 11pt;
      font-weight: 600;
      color: #1e293b;
    }

    /* Portfolio Composition Section */
    .portfolio-section {
      background: #ffffff;
      border: 1px solid #99f6e4;
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 16px;
    }
    .portfolio-header {
      background: #f0fdfa;
      padding: 12px 16px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .portfolio-icon {
      width: 32px;
      height: 32px;
      background: #0d9488;
      border-radius: 8px;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
    }
    .portfolio-title {
      font-size: 12pt;
      font-weight: 600;
      color: #1e293b;
    }
    .portfolio-subtitle {
      font-size: 9pt;
      color: #64748b;
    }
    .portfolio-content {
      background: #f0fdfa;
      padding: 16px;
      display: flex;
      gap: 24px;
      align-items: flex-start;
    }
    .portfolio-donut {
      width: 100px;
      height: 100px;
      flex-shrink: 0;
    }
    .portfolio-donut img {
      width: 100%;
      height: 100%;
      object-fit: contain;
    }
    .asset-bars {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .asset-bar {
      display: flex;
      align-items: center;
      gap: 8px;
      background: white;
      padding: 6px 12px;
      border-radius: 4px;
      position: relative;
      overflow: hidden;
    }
    .asset-bar::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      bottom: 0;
      width: var(--bar-width, 0%);
      background: var(--bar-color, #0d9488);
      opacity: 0.2;
      border-radius: 4px;
    }
    .asset-swatch {
      width: 12px;
      height: 12px;
      border-radius: 2px;
      flex-shrink: 0;
      z-index: 1;
    }
    .asset-name {
      flex: 1;
      font-size: 9pt;
      font-weight: 500;
      color: #1e293b;
      z-index: 1;
    }
    .asset-weight {
      font-size: 9pt;
      font-weight: 600;
      color: #0d9488;
      z-index: 1;
    }
    .portfolio-params {
      background: white;
      padding: 16px;
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 10px 24px;
    }
    .portfolio-param {
      display: flex;
      justify-content: space-between;
      align-items: center;
      padding-left: 8px;
      border-left: 3px solid #0d9488;
    }
    .portfolio-param .label {
      font-size: 7pt;
      color: #64748b;
      text-transform: uppercase;
      letter-spacing: 0.05em;
    }
    .portfolio-param .value {
      font-size: 11pt;
      font-weight: 600;
      color: #0d9488;
    }

    /* Spectrum Sections */
    .spectrum-section {
      margin-bottom: 16px;
    }
    .spectrum-bar {
      background: #f8fafc;
      border: 1px solid #e2e8f0;
      border-radius: 8px;
      padding: 16px;
    }
    .spectrum-gradient {
      height: 12px;
      border-radius: 6px;
      background: linear-gradient(90deg, #ef4444 0%, #f59e0b 25%, #10b981 50%, #3b82f6 75%, #8b5cf6 100%);
      margin-bottom: 12px;
    }
    .spectrum-gradient.debt {
      background: linear-gradient(90deg, #10b981 0%, #f59e0b 50%, #ef4444 100%);
    }
    .spectrum-labels {
      display: flex;
      justify-content: space-between;
    }
    .spectrum-item {
      text-align: center;
    }
    .spectrum-item .label {
      display: block;
      font-size: 8pt;
      color: #64748b;
    }
    .spectrum-item .value {
      display: block;
      font-size: 12pt;
      font-weight: 600;
    }
    .spectrum-item.pessimistic .value { color: #ef4444; }
    .spectrum-item.median .value { color: #3b82f6; }
    .spectrum-item.optimistic .value { color: #10b981; }

    /* Strategy Section */
    .strategy-section {
      margin-bottom: 16px;
    }
    .verdict-banner {
      padding: 16px;
      border-radius: 8px;
      margin-bottom: 12px;
    }
    .verdict-banner.verdict-bbd {
      background: linear-gradient(135deg, #ecfdf5 0%, #d1fae5 100%);
      border: 1px solid #10b981;
    }
    .verdict-banner.verdict-sell {
      background: linear-gradient(135deg, #fef3c7 0%, #fde68a 100%);
      border: 1px solid #f59e0b;
    }
    .verdict-title {
      font-size: 14pt;
      font-weight: 700;
      margin-bottom: 4px;
    }
    .verdict-description {
      font-size: 9pt;
      color: #475569;
    }
    .strategy-metrics {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 10px;
    }
    .strategy-metric {
      background: #f8fafc;
      padding: 10px;
      border-radius: 6px;
      text-align: center;
    }
    .strategy-metric .metric-label {
      display: block;
      font-size: 8pt;
      color: #64748b;
      margin-bottom: 2px;
    }
    .strategy-metric .metric-value {
      font-size: 12pt;
      font-weight: 600;
      color: #1e293b;
    }
    .strategy-metric .metric-value.positive { color: #10b981; }
    .strategy-metric .metric-value.negative { color: #ef4444; }

    /* Chart Sections */
    .chart-section {
      background: #ffffff;
      border: 1px solid #e2e8f0;
      border-radius: 10px;
      padding: 16px;
      margin-bottom: 16px;
    }
    .chart-section.half-width {
      display: inline-block;
      width: calc(50% - 8px);
      vertical-align: top;
    }
    .chart-section.half-width:nth-of-type(odd) {
      margin-right: 12px;
    }
    .chart-wrapper {
      width: 100%;
    }
    .chart-wrapper.short {
      max-height: 250px;
    }
    .chart-image {
      width: 100%;
      height: auto;
      max-height: 350px;
      object-fit: contain;
    }

    /* Yearly Analysis Tables */
    .yearly-table-section {
      background: #ffffff;
      border: 1px solid #e2e8f0;
      border-radius: 10px;
      overflow: hidden;
      margin-bottom: 16px;
      page-break-inside: avoid;
    }
    .table-header-row {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 12px 16px;
      background: #f8fafc;
      border-bottom: 1px solid #e2e8f0;
    }
    .table-header-row .table-icon {
      font-size: 14pt;
    }
    .table-header-row h3 {
      margin: 0;
      font-size: 11pt;
      font-weight: 600;
      color: #1e293b;
    }
    .yearly-analysis-table {
      width: 100%;
      border-collapse: collapse;
      font-size: 8pt;
    }
    .yearly-analysis-table th {
      padding: 6px 8px;
      text-align: right;
      font-weight: 600;
      color: #475569;
      border-bottom: 2px solid #e2e8f0;
      white-space: nowrap;
    }
    .yearly-analysis-table th:first-child {
      text-align: left;
    }
    .yearly-analysis-table .year-header {
      text-align: left;
      background: #f8fafc;
    }
    .yearly-analysis-table .withdrawal-group-header {
      background: #f8fafc;
      text-align: center;
    }
    .yearly-analysis-table .withdrawal-header {
      background: #f8fafc;
    }
    .yearly-analysis-table .tax-group-header {
      background: rgba(245, 158, 11, 0.15);
      color: #d97706;
      text-align: center;
    }
    .yearly-analysis-table .tax-header {
      background: rgba(245, 158, 11, 0.1);
      color: #d97706;
    }
    .yearly-analysis-table .percentile-group-header {
      background: rgba(13, 148, 136, 0.1);
      color: #0d9488;
      text-align: center;
    }
    .yearly-analysis-table .p10-header { color: #dc2626; }
    .yearly-analysis-table .p25-header { color: #ea580c; }
    .yearly-analysis-table .p50-header {
      color: #0d9488;
      background: rgba(13, 148, 136, 0.15);
    }
    .yearly-analysis-table .p75-header { color: #16a34a; }
    .yearly-analysis-table .p90-header { color: #15803d; }
    .yearly-analysis-table td {
      padding: 5px 8px;
      text-align: right;
      color: #1e293b;
      border-bottom: 1px solid #e2e8f0;
      white-space: nowrap;
    }
    .yearly-analysis-table td:first-child {
      text-align: left;
      font-weight: 500;
    }
    .yearly-analysis-table tbody tr:nth-child(odd) {
      background: #ffffff;
    }
    .yearly-analysis-table tbody tr:nth-child(even) {
      background: #f8fafc;
    }
    .yearly-analysis-table .year-col {
      font-weight: 500;
    }
    .yearly-analysis-table .withdrawal-col {
      color: #475569;
    }
    .yearly-analysis-table .tax-col {
      color: #d97706;
      font-weight: 500;
      background: rgba(245, 158, 11, 0.05);
    }
    .yearly-analysis-table .p50-col {
      background: rgba(13, 148, 136, 0.08);
      font-weight: 600;
      color: #0d9488;
    }

    /* Footer */
    .report-footer {
      margin-top: 24px;
      padding-top: 12px;
      border-top: 1px solid #e2e8f0;
      text-align: center;
      font-size: 8pt;
      color: #94a3b8;
    }
  </style>
</head>
<body>
  <div class="print-actions">
    <button class="print-btn" onclick="window.print()">Print Report</button>
    <button class="print-btn secondary" onclick="window.close()">Close</button>
  </div>

  <header class="report-header">
    <h1>eVelo Simulation Report</h1>
    <p class="timestamp">Generated: ${a.timestamp}</p>
  </header>

  \x3C!-- Hero Banner -->
  <div class="hero-banner ${a.heroBanner.isSuccess?"":"warning"}">
    ${a.heroBanner.logoBase64?`<img src="${a.heroBanner.logoBase64}" alt="" class="hero-watermark" />`:""}
    <div class="hero-icon">
      ${a.heroBanner.isSuccess&&a.heroBanner.logoBase64?`<img src="${a.heroBanner.logoBase64}" alt="eVelo" />`:'<span class="emoji">ðª</span>'}
    </div>
    <div class="hero-title">${a.heroBanner.isSuccess?'<span class="brand">eVelo</span>city Unlocked!':a.heroBanner.title||"Not ready yet, but keep it going!"}</div>
  </div>

  \x3C!-- Alert Card -->
  ${a.heroBanner.alertTitle?`
  <div class="alert-card ${a.heroBanner.isSuccess?"":"warning"}">
    <div class="alert-icon">${a.heroBanner.isSuccess?"â":"â "}</div>
    <div class="alert-content">
      <div class="alert-title">${a.heroBanner.alertTitle}</div>
      <div class="alert-description">${a.heroBanner.alertDescription}</div>
    </div>
  </div>
  `:""}

  \x3C!-- Metric Cards -->
  <div class="cards-grid">
    \x3C!-- Strategy Success Card -->
    <div class="metric-card">
      <div class="card-accent ${a.strategyCard.isGood?"accent-green":"accent-amber"}"></div>
      <div class="card-body">
        <div class="card-header">
          <div class="card-title">
            <span class="title-text">Strategy Success</span>
            <span class="subtitle">BBD SUCCESS RATE</span>
          </div>
        </div>
        <div class="hero-metric">
          <span class="hero-value">${a.strategyCard.bbdSuccessRate}</span>
          <span class="hero-unit">%</span>
        </div>
        <div class="hero-label">PROBABILITY OF SUCCESS</div>
        <div class="metrics-grid">
          <div class="metric-item highlight-negative">
            <span class="metric-value">${a.strategyCard.vsSellSuccess}</span>
            <span class="metric-label">vs Sell Assets</span>
          </div>
          <div class="metric-item">
            <span class="metric-value">${a.strategyCard.sellSuccessRate}</span>
            <span class="metric-label">Sell Success Rate</span>
          </div>
          <div class="metric-item">
            <span class="metric-value">${a.strategyCard.medianUtilization}</span>
            <span class="metric-label">Median Utilization</span>
          </div>
          <div class="metric-item">
            <span class="metric-value">${a.strategyCard.yearsAbove70}</span>
            <span class="metric-label">Years Above 70%</span>
          </div>
        </div>
        <div class="card-footer">${a.strategyCard.footerText||"Target: 80%"}</div>
      </div>
    </div>

    \x3C!-- Portfolio Growth Card -->
    <div class="metric-card">
      <div class="card-accent accent-blue"></div>
      <div class="card-body">
        <div class="card-header">
          <div class="card-title">
            <span class="title-text">Portfolio Growth</span>
            <span class="subtitle">IMPLIED CAGR (MEDIAN)</span>
          </div>
        </div>
        <div class="hero-metric">
          <span class="hero-value value-blue">${a.growthCard.cagr}</span>
          <span class="hero-unit unit-blue">%</span>
        </div>
        <div class="hero-label">COMPOUND ANNUAL GROWTH RATE</div>
        <div class="metrics-grid">
          <div class="metric-item">
            <span class="metric-value">${a.growthCard.startingValue}</span>
            <span class="metric-label">Starting Value</span>
          </div>
          <div class="metric-item">
            <span class="metric-value">${a.growthCard.medianTerminal}</span>
            <span class="metric-label">Median Terminal</span>
          </div>
          <div class="metric-item highlight-positive">
            <span class="metric-value">${a.growthCard.vsSellTerminal}</span>
            <span class="metric-label">vs Sell Assets</span>
          </div>
          <div class="metric-item">
            <span class="metric-value">${a.growthCard.sellTerminal}</span>
            <span class="metric-label">Sell Terminal</span>
          </div>
        </div>
        <div class="card-footer">P10 outcome: ${a.growthCard.p10Outcome}</div>
      </div>
    </div>

    \x3C!-- Leverage Safety Card -->
    <div class="metric-card">
      <div class="card-accent ${a.safetyCard.isGood?"accent-green":"accent-red"}"></div>
      <div class="card-body">
        <div class="card-header">
          <div class="card-title">
            <span class="title-text">Leverage Safety</span>
            <span class="subtitle">MARGIN CALL RISK</span>
          </div>
        </div>
        <div class="hero-metric">
          <span class="hero-value ${a.safetyCard.isGood?"":"value-red"}">${a.safetyCard.marginCallProbability}</span>
          <span class="hero-unit ${a.safetyCard.isGood?"":"unit-red"}">%</span>
        </div>
        <div class="hero-label">MARGIN CALL PROBABILITY</div>
        <div class="metrics-grid">
          <div class="metric-item">
            <span class="metric-value">${a.safetyCard.peakUtilization}</span>
            <span class="metric-label">Peak Utilization (P90)</span>
          </div>
          <div class="metric-item">
            <span class="metric-value">${a.safetyCard.safetyBuffer}</span>
            <span class="metric-label">Safety Buffer (P10)</span>
          </div>
          <div class="metric-item">
            <span class="metric-value">${a.safetyCard.mostDangerousYear}</span>
            <span class="metric-label">Most Dangerous Year</span>
          </div>
          <div class="metric-item">
            <span class="metric-value">70%</span>
            <span class="metric-label">Margin Call Threshold</span>
          </div>
        </div>
        <div class="card-footer">${a.safetyCard.footerText||"Target: <20%"}</div>
      </div>
    </div>
  </div>

  \x3C!-- Portfolio Composition (replaces old Parameters Summary) -->
  ${n}

  \x3C!-- Summary Statistics -->
  <section class="stats-section">
    <h3>Summary Statistics</h3>
    <div class="stats-grid">
      <div class="stat-item">
        <span class="stat-label">Median Value</span>
        <span class="stat-value">${a.summaryStats.median}</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">Success Rate</span>
        <span class="stat-value">${a.summaryStats.successRate}</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">Median CAGR</span>
        <span class="stat-value">${a.summaryStats.cagr}</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">TWRR (Median)</span>
        <span class="stat-value">${a.summaryStats.twrr}</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">Mean Value</span>
        <span class="stat-value">${a.summaryStats.mean}</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">Volatility</span>
        <span class="stat-value">${a.summaryStats.volatility}</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">Std Deviation</span>
        <span class="stat-value">${a.summaryStats.stddev}</span>
      </div>
      <div class="stat-item">
        <span class="stat-label">Salary Equiv.</span>
        <span class="stat-value">${a.summaryStats.salaryEquiv}</span>
      </div>
    </div>
  </section>

  ${r}

  ${i}

  ${e}

  ${t.join(`
`)}

  ${s}

  ${o}

  <footer class="report-footer">
    <p>Generated by eVelo Portfolio Strategy Simulator</p>
    <p>This report is for informational purposes only and does not constitute financial advice.</p>
  </footer>
</body>
</html>`}function Kx(a){const t=window.open("","_blank","width=900,height=700");return t?(t.document.write(a),t.document.close(),t.focus(),t):(alert("Unable to open print window. Please allow popups for this site."),null)}function _x(a){return new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",minimumFractionDigits:0,maximumFractionDigits:0}).format(a)}class nu extends Ct{_simulationResult=null;_simulationConfig=null;_isRunning=!1;_regimeCalibration="conservative";template(){const t=new Date().getFullYear();return`
      <main-layout>
        <sidebar-panel slot="sidebar" title="Strategy Parameters">
          <param-section title="Your Portfolio" icon="<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M21 12V7H5a2 2 0 0 1 0-4h14v4'/><path d='M3 5v14a2 2 0 0 0 2 2h16v-5'/><path d='M18 12a2 2 0 0 0 0 4h4v-4Z'/></svg>" open>
            <div class="param-group">
              <label>Initial Investment</label>
              <number-input
                id="initial-investment"
                value="5000000"
                min="10000"
                max="100000000"
                step="10000"
                suffix="$"
              ></number-input>
            </div>
            <portfolio-composition id="portfolio-composition"></portfolio-composition>
          </param-section>

          <param-section title="Your Spending Needs" icon="<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><rect x='2' y='6' width='20' height='12' rx='2'/><circle cx='12' cy='12' r='2'/><path d='M6 12h.01M18 12h.01'/></svg>" open>
            <div class="param-group">
              <label>
                Annual Cash Need ($)
                <help-tooltip content="Tax-free income via SBLOC borrowing. Unlike selling, no capital gains taxes triggered." position="bottom"></help-tooltip>
              </label>
              <number-input
                id="annual-withdrawal"
                value="200000"
                min="0"
                max="10000000"
                step="5000"
                suffix="$"
              ></number-input>
            </div>
            <div class="param-group">
              <label>Annual Increase (%)</label>
              <range-slider
                id="annual-raise"
                value="3"
                min="0"
                max="10"
                step="0.5"
                suffix="%"
              ></range-slider>
            </div>
            <div class="param-group">
              <checkbox-input
                id="monthly-withdrawal"
                label="Withdraw Monthly (Equal Amounts)"
                checked
              ></checkbox-input>
            </div>
          </param-section>

          <param-section title="Time Horizon" icon="<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><rect x='3' y='4' width='18' height='18' rx='2'/><path d='M16 2v4M8 2v4M3 10h18'/></svg>" open>
            <div class="param-group">
              <label>Strategy Start Year</label>
              <number-input
                id="start-year"
                value="${t}"
                min="2000"
                max="2100"
                step="1"
              ></number-input>
            </div>
            <div class="param-group">
              <label>First Withdrawal Year</label>
              <number-input
                id="withdrawal-start-year"
                value="${t}"
                min="2000"
                max="2100"
                step="1"
              ></number-input>
            </div>
            <div class="param-group">
              <label>
                Period (Years)
                <help-tooltip content="Simulation timeframe. Longer periods typically favor Buy-Borrow-Die." position="bottom"></help-tooltip>
              </label>
              <range-slider
                id="time-horizon"
                value="15"
                min="5"
                max="50"
                step="1"
                suffix=" years"
              ></range-slider>
            </div>
          </param-section>

          <param-section title="Line of Credit Terms" icon="<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10'/><path d='m9 12 2 2 4-4'/></svg>" open>
            <div class="param-group">
              <label>Initial LOC Balance</label>
              <number-input
                id="initial-loc-balance"
                value="0"
                min="0"
                max="50000000"
                step="1000"
                suffix="$"
              ></number-input>
              <span class="help-text">Leave at 0 if starting fresh</span>
            </div>
            <div class="param-group">
              <label>
                Annual Interest Rate (%)
                <help-tooltip content="Interest rate on your SBLOC. Typically SOFR + 1-3% spread." position="bottom"></help-tooltip>
              </label>
              <range-slider
                id="sbloc-rate"
                value="7"
                min="3"
                max="15"
                step="0.25"
                suffix="%"
              ></range-slider>
            </div>
            <div class="param-group">
              <label>
                Max LTV / Hard Margin (%)
                <help-tooltip content="Maximum loan-to-value ratio. Portfolio liquidated if exceeded. Lower = safer." position="bottom"></help-tooltip>
              </label>
              <range-slider
                id="max-borrowing"
                value="65"
                min="30"
                max="80"
                step="5"
                suffix="%"
              ></range-slider>
              <span class="help-text">Portfolio liquidated if LTV exceeds this threshold</span>
            </div>
            <div class="param-group">
              <label>
                Warning Zone LTV (%)
                <help-tooltip content="Margin call trigger. Exceeding this ratio requires action to avoid forced liquidation." position="bottom"></help-tooltip>
              </label>
              <range-slider
                id="maintenance-margin"
                value="50"
                min="20"
                max="70"
                step="5"
                suffix="%"
              ></range-slider>
              <span class="help-text">Warning zone - between this and max borrowing</span>
            </div>
            <div class="param-group">
              <label>Forced Liquidation Haircut (%)</label>
              <range-slider
                id="liquidation-haircut"
                value="5"
                min="0"
                max="20"
                step="1"
                suffix="%"
              ></range-slider>
              <span class="help-text">Market impact + transaction costs on forced sale</span>
            </div>
          </param-section>

          <div class="section-divider">
            <span>Advanced Options</span>
          </div>

          <param-section title="Simulation Settings" icon="<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><circle cx='12' cy='12' r='3'/><path d='M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z'/></svg>">
            <div class="param-group">
              <label>
                Simulation Iterations
                <help-tooltip content="Number of Monte Carlo scenarios. More = accurate but slower." position="bottom"></help-tooltip>
              </label>
              <select-input
                id="num-simulations"
                value="10000"
                options='[{"value":"1000","label":"1,000 (Fast)"},{"value":"5000","label":"5,000 (Quick)"},{"value":"10000","label":"10,000 (Precise)"},{"value":"50000","label":"50,000 (Accurate)"},{"value":"100000","label":"100,000 (High Precision)"}]'
              ></select-input>
            </div>
            <div class="param-group">
              <label>Expected Annual Inflation (%)</label>
              <range-slider
                id="inflation-rate"
                value="2.5"
                min="0"
                max="8"
                step="0.5"
                suffix="%"
              ></range-slider>
              <span class="help-text">Used to calculate real (inflation-adjusted) returns</span>
            </div>
            <div class="param-group">
              <label>Return Distribution Model</label>
              <select-input
                id="return-model"
                value="regime"
                options='[{"value":"bootstrap","label":"Bootstrap Resampling"},{"value":"regime","label":"Regime-Switching (Bull/Bear)"}]'
              ></select-input>
              <span class="help-text">How to model market returns and volatility</span>
            </div>
            <div class="param-group regime-calibration-group visible" id="regime-calibration-group">
              <label>Regime Calibration</label>
              <div class="toggle-group">
                <button type="button" class="toggle-btn" id="regime-historical">Historical</button>
                <button type="button" class="toggle-btn active" id="regime-conservative">Conservative</button>
              </div>
              <span class="help-text" id="regime-help-text">Stress-testing with extended crash durations</span>
            </div>
          </param-section>

          <param-section title="Withdrawal Chapters (Optional)" icon="<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><rect x='8' y='2' width='8' height='4' rx='1' ry='1'/><path d='M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2'/><path d='M12 11h4'/><path d='M12 16h4'/><path d='M8 11h.01'/><path d='M8 16h.01'/></svg>">
            <div class="param-group">
              <checkbox-input
                id="enable-chapters"
                label="Enable Multi-Phase Withdrawal Strategy"
              ></checkbox-input>
            </div>
            <div class="chapters-config" id="chapters-config">
              <div class="chapter-group">
                <span class="chapter-label">Chapter 2</span>
                <div class="param-group">
                  <label>Years After Start</label>
                  <number-input
                    id="chapter2-years"
                    value="10"
                    min="1"
                    max="40"
                    step="1"
                  ></number-input>
                </div>
                <div class="param-group">
                  <label>Reduction %</label>
                  <range-slider
                    id="chapter2-reduction"
                    value="20"
                    min="-50"
                    max="80"
                    step="5"
                    suffix="%"
                  ></range-slider>
                  <span class="help-text">Positive = reduce spending, negative = increase</span>
                </div>
              </div>
              <div class="chapter-group">
                <span class="chapter-label">Chapter 3</span>
                <div class="param-group">
                  <label>Years After Chapter 2</label>
                  <number-input
                    id="chapter3-years"
                    value="10"
                    min="1"
                    max="40"
                    step="1"
                  ></number-input>
                </div>
                <div class="param-group">
                  <label>Reduction %</label>
                  <range-slider
                    id="chapter3-reduction"
                    value="30"
                    min="-50"
                    max="80"
                    step="5"
                    suffix="%"
                  ></range-slider>
                </div>
              </div>
            </div>
          </param-section>

          <param-section title="Tax Modeling (Optional)" icon="<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M4 2v20l2-1 2 1 2-1 2 1 2-1 2 1 2-1 2 1V2l-2 1-2-1-2 1-2-1-2 1-2-1-2 1Z'/><path d='M14 8H8'/><path d='M16 12H8'/><path d='M13 16H8'/></svg>">
            <div class="param-group">
              <checkbox-input
                id="enable-tax-modeling"
                label="Enable Dividend Tax & Capital Gains Tax Modeling"
              ></checkbox-input>
            </div>
            <div class="tax-config" id="tax-config">
              <div class="param-group">
                <checkbox-input
                  id="tax-advantaged"
                  label="Portfolio in Tax-Advantaged Account (No Taxes)"
                ></checkbox-input>
              </div>
              <div class="tax-rates-group" id="tax-rates-group">
                <div class="param-group">
                  <label>Average Dividend Yield (%)</label>
                  <range-slider
                    id="dividend-yield"
                    value="0.5"
                    min="0"
                    max="5"
                    step="0.1"
                    suffix="%"
                  ></range-slider>
                  <span class="help-text">Approximate dividend yield of portfolio</span>
                </div>
                <div class="param-group">
                  <label>Ordinary Income Tax Rate (%)</label>
                  <range-slider
                    id="ordinary-tax-rate"
                    value="37"
                    min="0"
                    max="50"
                    step="1"
                    suffix="%"
                  ></range-slider>
                  <span class="help-text">Top federal + state tax rate on dividends</span>
                </div>
                <div class="param-group">
                  <label>Long-Term Capital Gains Tax Rate (%)</label>
                  <range-slider
                    id="ltcg-tax-rate"
                    value="23.8"
                    min="0"
                    max="40"
                    step="0.1"
                    suffix="%"
                  ></range-slider>
                  <span class="help-text">Federal LTCG (20%) + NIIT (3.8%)</span>
                </div>
              </div>
            </div>
          </param-section>

          <param-section title="Sell Strategy Comparison" icon="<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 24 24' fill='none' stroke='currentColor' stroke-width='2' stroke-linecap='round' stroke-linejoin='round'><path d='M3 3v18h18'/><path d='M18 17V9'/><path d='M13 17V5'/><path d='M8 17v-3'/></svg>" open>
            <div class="param-group">
              <label>
                Cost Basis Ratio (%)
                <help-tooltip content="Portion of portfolio that is original cost. 40% basis = 60% unrealized gains subject to tax." position="bottom"></help-tooltip>
              </label>
              <range-slider
                id="sell-cost-basis-ratio"
                value="40"
                min="5"
                max="95"
                step="5"
                suffix="%"
              ></range-slider>
              <span class="help-text">Lower ratio = more embedded gains = higher taxes on sale</span>
            </div>
            <div class="param-group">
              <label>
                Dividend Yield (%)
                <help-tooltip content="Portfolio dividend yield for Sell strategy comparison. S&P 500: ~1.5-2%." position="bottom"></help-tooltip>
              </label>
              <range-slider
                id="sell-dividend-yield"
                value="2"
                min="0"
                max="10"
                step="0.5"
                suffix="%"
              ></range-slider>
              <span class="help-text">Higher yield = more dividend taxes in Sell strategy</span>
            </div>
          </param-section>

          <details class="debug-panel" id="debug-panel">
            <summary class="debug-toggle">Debug Log</summary>
            <div class="debug-controls">
              <button class="debug-btn debug-enable-btn" type="button">Enable Logging</button>
              <button class="debug-btn debug-refresh-btn" type="button">Refresh</button>
              <button class="debug-btn debug-clear-btn" type="button">Clear</button>
            </div>
            <pre class="debug-output"></pre>
          </details>

          <div slot="footer" class="simulation-controls">
            <button class="btn-primary" id="run-sim">
              <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="btn-icon">
                <polygon points="5 3 19 12 5 21 5 3"></polygon>
              </svg>
              Run Monte Carlo Simulation
            </button>
            <progress-indicator
              id="sim-progress"
              value="0"
              label="Running simulation..."
              class="hidden"
            ></progress-indicator>
          </div>
        </sidebar-panel>

        <app-header slot="header">
          <div slot="actions" class="header-buttons">
            <button id="btn-print" class="header-btn hidden" aria-label="Print report" title="Print report">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <polyline points="6 9 6 2 18 2 18 9"></polyline>
                <path d="M6 18H4a2 2 0 0 1-2-2v-5a2 2 0 0 1 2-2h16a2 2 0 0 1 2 2v5a2 2 0 0 1-2 2h-2"></path>
                <rect x="6" y="14" width="12" height="8"></rect>
              </svg>
            </button>
            <button id="btn-guide" class="header-btn" aria-label="User Guide" title="User Guide">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="10"></circle>
                <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
                <line x1="12" y1="17" x2="12.01" y2="17"></line>
              </svg>
            </button>
            <button id="btn-theme" class="header-btn" aria-label="Toggle theme" title="Toggle theme">
              \x3C!-- Sun icon (shown in dark mode, click to go light) -->
              <svg class="icon-sun" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <circle cx="12" cy="12" r="5"></circle>
                <line x1="12" y1="1" x2="12" y2="3"></line>
                <line x1="12" y1="21" x2="12" y2="23"></line>
                <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
                <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
                <line x1="1" y1="12" x2="3" y2="12"></line>
                <line x1="21" y1="12" x2="23" y2="12"></line>
                <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
                <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
              </svg>
              \x3C!-- Moon icon (shown in light mode, click to go dark) -->
              <svg class="icon-moon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
              </svg>
            </button>
            <button id="btn-settings" class="header-btn" aria-label="Settings" title="Settings">
              <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="currentColor" stroke="none">
                \x3C!-- Center circle -->
                <circle cx="12" cy="12" r="3"></circle>
                \x3C!-- 8 radial dots -->
                <circle cx="12" cy="3" r="1.5"></circle>
                <circle cx="18.36" cy="5.64" r="1.5"></circle>
                <circle cx="21" cy="12" r="1.5"></circle>
                <circle cx="18.36" cy="18.36" r="1.5"></circle>
                <circle cx="12" cy="21" r="1.5"></circle>
                <circle cx="5.64" cy="18.36" r="1.5"></circle>
                <circle cx="3" cy="12" r="1.5"></circle>
                <circle cx="5.64" cy="5.64" r="1.5"></circle>
              </svg>
            </button>
          </div>
        </app-header>

        <div class="dashboard">
          <welcome-screen id="welcome"></welcome-screen>
\x3C!-- Hide inline BBD help when welcome screen is visible 
          <help-section class="bbd-inline-help" title="What is Buy-Borrow-Die?">
            The Buy-Borrow-Die strategy is a wealth preservation technique where you:
            <ol>
              <li><strong>Buy</strong> appreciating assets (stocks, real estate)</li>
              <li><strong>Borrow</strong> against them via securities-backed lines of credit (SBLOC)</li>
              <li><strong>Die</strong> with stepped-up basis, eliminating capital gains tax</li>
            </ol>
            This simulator models the risks and outcomes of this strategy.
          </help-section>
-->
          <comparison-dashboard id="results"></comparison-dashboard>
        </div>
      </main-layout>
      <toast-container position="bottom-right"></toast-container>
      <settings-panel id="settings-panel"></settings-panel>
      <user-guide-modal id="user-guide"></user-guide-modal>
      <modal-dialog id="app-modal"></modal-dialog>
    `}styles(){return`
      :host {
        display: block;
      }

      .param-group {
        margin-bottom: var(--spacing-lg, 24px);
      }

      .param-group:last-child {
        margin-bottom: 0;
      }

      .param-group label {
        display: inline-flex;
        align-items: center;
        gap: 4px;
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 600;
        color: var(--text-primary, #1e293b);
        margin-bottom: var(--spacing-sm, 8px);
      }

      .param-group .help-text {
        display: block;
        font-size: var(--font-size-sm, 0.875rem);
        color: var(--text-secondary, #64748b);
        margin-top: var(--spacing-sm, 8px);
        font-style: italic;
        line-height: 1.4;
      }

      .dashboard {
        max-width: 1200px;
        margin: 0 auto;
      }

      /* Section Divider for Advanced Options */
      .section-divider {
        display: flex;
        align-items: center;
        gap: var(--spacing-md, 16px);
        padding: var(--spacing-lg, 24px) var(--spacing-md, 16px);
        color: var(--text-secondary, #64748b);
        font-size: var(--font-size-xs, 0.75rem);
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 0.1em;
      }

      .section-divider::before,
      .section-divider::after {
        content: '';
        flex: 1;
        height: 1px;
        background: var(--border-color, #e2e8f0);
      }

      .simulation-controls {
        display: flex;
        flex-direction: column;
        gap: var(--spacing-sm, 8px);
      }

      .btn-primary {
        display: flex;
        align-items: center;
        justify-content: center;
        gap: var(--spacing-sm, 8px);
        background: var(--color-primary, #0d9488);
        color: white;
        border: none;
        padding: var(--spacing-md, 16px) var(--spacing-lg, 24px);
        border-radius: var(--radius-md, 6px);
        font-size: var(--font-size-base, 1rem);
        font-weight: 600;
        cursor: pointer;
        transition: background 0.2s, transform 0.1s;
        width: 100%;
        /* Touch optimization */
        min-height: 48px;
        touch-action: manipulation;
        -webkit-tap-highlight-color: rgba(13, 148, 136, 0.2);
      }

      /* Mobile touch target enhancement */
      @media (max-width: 768px) {
        .btn-primary {
          min-height: 52px;
          font-size: var(--font-size-base, 1rem);
        }
      }

      .btn-primary:hover {
        background: var(--color-primary-dark, #0f766e);
      }

      .btn-primary:active {
        transform: scale(0.98);
      }

      .btn-primary:focus-visible {
        outline: 2px solid var(--color-primary, #0d9488);
        outline-offset: 2px;
      }

      .btn-primary .btn-icon {
        flex-shrink: 0;
      }

      progress-indicator {
        width: 100%;
      }

      progress-indicator.hidden {
        display: none;
      }

      .header-btn {
        background: rgba(255, 255, 255, 0.1);
        border: 2px solid rgba(255, 255, 255, 0.3);
        font-size: 1.5rem;
        cursor: pointer;
        width: 40px;
        height: 40px;
        padding: 0;
        border-radius: 50%;
        color: var(--text-inverse, #ffffff);
        display: flex;
        align-items: center;
        justify-content: center;
        transition: background 0.2s, border-color 0.2s;
      }

      .header-btn:hover {
        background: rgba(255, 255, 255, 0.2);
        border-color: rgba(255, 255, 255, 0.5);
      }

      .header-btn:focus-visible {
        outline: 2px solid var(--text-inverse, #ffffff);
        outline-offset: 2px;
      }

      .header-btn.hidden {
        display: none;
      }

      /* Dark theme: match header icons to teal branding */
      :host-context([data-theme="dark"]) .header-btn {
        background: rgba(20, 184, 166, 0.1);
        border-color: rgba(20, 184, 166, 0.3);
        color: #14b8a6;
      }

      :host-context([data-theme="dark"]) .header-btn:hover {
        background: rgba(20, 184, 166, 0.2);
        border-color: rgba(20, 184, 166, 0.4);
      }

      /* Header buttons container */
      .header-buttons {
        display: flex;
        align-items: center;
        gap: var(--spacing-sm, 8px);
      }

      /* Theme toggle button icons */
      #btn-theme .icon-sun {
        display: none;
      }
      #btn-theme .icon-moon {
        display: block;
      }
      #btn-theme.dark-mode .icon-sun {
        display: block;
      }
      #btn-theme.dark-mode .icon-moon {
        display: none;
      }

      /* Welcome screen visibility */
      welcome-screen {
        display: block;
      }

      welcome-screen.hidden {
        display: none;
      }

      /* Hide inline BBD help when welcome is visible */
      .bbd-inline-help {
        display: none;
      }

      /* Show inline help only when welcome is hidden */
      welcome-screen.hidden ~ .bbd-inline-help {
        display: block;
      }

      /* Toggle Group for Regime Calibration */
      .toggle-group {
        display: flex;
        gap: 0;
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--radius-md, 6px);
        overflow: hidden;
        background: var(--surface-secondary, #f8fafc);
      }

      .toggle-btn {
        flex: 1;
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        border: none;
        background: transparent;
        font-size: var(--font-size-sm, 0.875rem);
        font-weight: 500;
        color: var(--text-secondary, #64748b);
        cursor: pointer;
        transition: all 0.2s;
      }

      .toggle-btn:not(:last-child) {
        border-right: 1px solid var(--border-color, #e2e8f0);
      }

      .toggle-btn.active {
        background: var(--color-primary, #0d9488);
        color: white;
      }

      .toggle-btn:hover:not(.active) {
        background: var(--surface-tertiary, #e2e8f0);
      }

      /* Regime Calibration Group - conditionally shown */
      .regime-calibration-group {
        display: none;
      }

      .regime-calibration-group.visible {
        display: block;
      }

      /* Chapters Configuration */
      .chapters-config {
        display: none;
        margin-top: var(--spacing-lg, 24px);
        padding: var(--spacing-lg, 24px);
        background: var(--surface-primary, #ffffff);
        border-radius: var(--border-radius-md, 8px);
        border: 1px solid var(--border-color, #e2e8f0);
      }

      .chapters-config.visible {
        display: block;
      }

      .chapter-group {
        margin-bottom: var(--spacing-xl, 32px);
        padding-bottom: var(--spacing-lg, 24px);
        border-bottom: 1px solid var(--border-color, #e2e8f0);
      }

      .chapter-group:last-child {
        margin-bottom: 0;
        padding-bottom: 0;
        border-bottom: none;
      }

      .chapter-label {
        display: block;
        font-weight: 700;
        color: var(--color-primary, #0d9488);
        margin-bottom: var(--spacing-md, 16px);
        font-size: var(--font-size-sm, 0.875rem);
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }

      /* Tax Configuration */
      .tax-config {
        display: none;
        margin-top: var(--spacing-lg, 24px);
      }

      .tax-config.visible {
        display: block;
      }

      .tax-rates-group {
        padding: var(--spacing-lg, 24px);
        background: var(--surface-primary, #ffffff);
        border-radius: var(--border-radius-md, 8px);
        border: 1px solid var(--border-color, #e2e8f0);
        margin-top: var(--spacing-md, 16px);
      }

      .tax-rates-group.hidden {
        display: none;
      }

      /* Debug Panel Styles */
      .debug-panel {
        margin: var(--spacing-lg, 24px) var(--spacing-md, 16px);
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--border-radius-md, 8px);
        background: var(--surface-secondary, #f8fafc);
        font-size: var(--font-size-sm, 0.875rem);
      }

      .debug-toggle {
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        cursor: pointer;
        font-weight: 600;
        color: var(--text-secondary, #64748b);
        user-select: none;
      }

      .debug-toggle:hover {
        color: var(--text-primary, #1e293b);
      }

      .debug-controls {
        display: flex;
        gap: var(--spacing-xs, 4px);
        padding: var(--spacing-sm, 8px) var(--spacing-md, 16px);
        border-bottom: 1px solid var(--border-color, #e2e8f0);
      }

      .debug-btn {
        padding: 4px 12px;
        border: 1px solid var(--border-color, #e2e8f0);
        border-radius: var(--border-radius-sm, 4px);
        background: var(--surface-primary, #ffffff);
        color: var(--text-secondary, #64748b);
        font-size: var(--font-size-xs, 0.75rem);
        font-family: inherit;
        cursor: pointer;
        transition: all 0.15s ease;
      }

      .debug-btn:hover {
        background: var(--color-primary, #0d9488);
        border-color: var(--color-primary, #0d9488);
        color: white;
      }

      .debug-btn.active {
        background: var(--color-success, #059669);
        border-color: var(--color-success, #059669);
        color: white;
      }

      .debug-output {
        margin: 0;
        padding: var(--spacing-md, 16px);
        max-height: 300px;
        overflow-y: auto;
        font-family: monospace;
        font-size: 11px;
        line-height: 1.4;
        white-space: pre-wrap;
        word-break: break-all;
        color: var(--text-primary, #1e293b);
        background: var(--surface-primary, #ffffff);
        border-radius: 0 0 var(--border-radius-md, 8px) var(--border-radius-md, 8px);
      }

      :host([data-theme="dark"]) .debug-panel {
        background: var(--surface-secondary, #1e293b);
      }

      :host([data-theme="dark"]) .debug-output {
        background: var(--surface-tertiary, #0f172a);
      }

      /* Highlight pulse animation for portfolio section guidance */
      @keyframes highlight-pulse {
        0%, 100% {
          box-shadow: none;
        }
        50% {
          box-shadow: 0 0 0 4px rgba(13, 148, 136, 0.4);
        }
      }

      portfolio-composition.highlight-pulse {
        animation: highlight-pulse 1s ease-in-out 2;
        border-radius: var(--border-radius-md, 8px);
      }

      /* Respect reduced motion preference */
      @media (prefers-reduced-motion: reduce) {
        portfolio-composition.highlight-pulse {
          animation: none;
          box-shadow: 0 0 0 4px rgba(13, 148, 136, 0.4);
        }
      }
    `}get simulationResult(){return this._simulationResult}get isRunning(){return this._isRunning}getNumberInputValue(t,e){return this.$(`#${t}`)?.value??e}getRangeSliderValue(t,e){return this.$(`#${t}`)?.value??e}getSelectInputValue(t,e){return this.$(`#${t}`)?.value??e}getCheckboxValue(t,e){return this.$(`#${t}`)?.checked??e}calculateCAGRFromResult(){if(!this._simulationResult||!this._simulationConfig)return 0;const t=this._simulationConfig,e=t.initialValue,r=this._simulationResult.statistics.median,i=t.timeHorizon;return e<=0||r<=0||i<=0?0:Math.pow(r/e,1/i)-1}refreshDebugOutput(){const t=this.$(".debug-output");if(!t)return;const e=Kh(),r=Qh();let i="";r&&(i=`*** Using localStorage fallback (IndexedDB unavailable) ***

`),e.length===0?t.textContent=i+"No logs yet. Enable logging and perform save/load operations.":t.textContent=i+e.join(`
`)}getSimulationParams(){const t=this.getNumberInputValue("initial-investment",5e6),e=this.getNumberInputValue("initial-loc-balance",0),r=new Date().getFullYear(),i=this.getNumberInputValue("start-year",r),n=this.getNumberInputValue("withdrawal-start-year",r),s=this.getRangeSliderValue("time-horizon",15),o=this.getNumberInputValue("annual-withdrawal",2e5),l=this.getRangeSliderValue("annual-raise",3)/100,d=this.getCheckboxValue("monthly-withdrawal",!0),h=this.getRangeSliderValue("sbloc-rate",7)/100,p=this.getRangeSliderValue("max-borrowing",65)/100,m=this.getRangeSliderValue("maintenance-margin",50)/100,v=this.getRangeSliderValue("liquidation-haircut",5)/100,g=parseInt(this.getSelectInputValue("num-simulations","10000"),10),k=this.getRangeSliderValue("inflation-rate",2.5)/100,S=this.getSelectInputValue("return-model","bootstrap"),D=this._regimeCalibration,I=this.getCheckboxValue("enable-chapters",!1)?{enabled:!0,chapter2:{yearsAfterStart:this.getNumberInputValue("chapter2-years",10),reductionPercent:this.getRangeSliderValue("chapter2-reduction",20)},chapter3:{yearsAfterStart:this.getNumberInputValue("chapter3-years",10),reductionPercent:this.getRangeSliderValue("chapter3-reduction",30)}}:{enabled:!1},W=this.getCheckboxValue("enable-tax-modeling",!1),H=this.getCheckboxValue("tax-advantaged",!1),X={enabled:W,taxAdvantaged:H,dividendYield:W&&!H?this.getRangeSliderValue("dividend-yield",.5)/100:0,ordinaryTaxRate:W&&!H?this.getRangeSliderValue("ordinary-tax-rate",37)/100:0,ltcgTaxRate:W&&!H?this.getRangeSliderValue("ltcg-tax-rate",23.8)/100:0};return{initialValue:t,initialLocBalance:e,startYear:i,withdrawalStartYear:n,timeHorizon:s,annualWithdrawal:o,annualRaise:l,monthlyWithdrawal:d,sblocRate:h,maxBorrowing:p,maintenanceMargin:m,liquidationHaircut:v,iterations:g,inflationRate:k,returnModel:S,regimeCalibration:D,withdrawalChapters:I,taxModeling:X}}setSimulationParams(t){if(t.initialValue!==void 0){const e=this.$("#initial-investment");e&&(e.value=t.initialValue)}if(t.initialLocBalance!==void 0){const e=this.$("#initial-loc-balance");e&&(e.value=t.initialLocBalance)}if(t.startYear!==void 0){const e=this.$("#start-year");e&&(e.value=t.startYear)}if(t.withdrawalStartYear!==void 0){const e=this.$("#withdrawal-start-year");e&&(e.value=t.withdrawalStartYear)}if(t.timeHorizon!==void 0){const e=this.$("#time-horizon");e&&(e.value=t.timeHorizon)}if(t.annualWithdrawal!==void 0){const e=this.$("#annual-withdrawal");e&&(e.value=t.annualWithdrawal)}if(t.annualRaise!==void 0){const e=this.$("#annual-raise");e&&(e.value=t.annualRaise*100)}if(t.monthlyWithdrawal!==void 0){const e=this.$("#monthly-withdrawal");e&&(e.checked=t.monthlyWithdrawal)}if(t.sblocRate!==void 0){const e=this.$("#sbloc-rate");e&&(e.value=t.sblocRate*100)}if(t.maxBorrowing!==void 0){const e=this.$("#max-borrowing");e&&(e.value=t.maxBorrowing*100)}if(t.maintenanceMargin!==void 0){const e=this.$("#maintenance-margin");e&&(e.value=t.maintenanceMargin*100)}if(t.liquidationHaircut!==void 0){const e=this.$("#liquidation-haircut");e&&(e.value=t.liquidationHaircut*100)}if(t.iterations!==void 0){const e=this.$("#num-simulations");e&&(e.value=t.iterations.toString())}if(t.inflationRate!==void 0){const e=this.$("#inflation-rate");e&&(e.value=t.inflationRate*100)}if(t.returnModel!==void 0){const e=this.$("#return-model");e&&(e.value=t.returnModel),e?.dispatchEvent(new Event("change"))}if(t.regimeCalibration!==void 0){this._regimeCalibration=t.regimeCalibration;const e=this.$("#regime-historical"),r=this.$("#regime-conservative"),i=this.$("#regime-help-text");e?.classList.toggle("active",t.regimeCalibration==="historical"),r?.classList.toggle("active",t.regimeCalibration==="conservative"),i&&(i.textContent=t.regimeCalibration==="historical"?"Calibrated to historical S&P 500 data (1950-2024)":"Stress-testing with extended crash durations")}if(t.withdrawalChapters!==void 0){const e=this.$("#enable-chapters");if(e&&(e.checked=t.withdrawalChapters.enabled,e.dispatchEvent(new Event("change"))),t.withdrawalChapters.enabled&&t.withdrawalChapters.chapter2){const r=this.$("#chapter2-years"),i=this.$("#chapter2-reduction");r&&(r.value=t.withdrawalChapters.chapter2.yearsAfterStart),i&&(i.value=t.withdrawalChapters.chapter2.reductionPercent)}if(t.withdrawalChapters.enabled&&t.withdrawalChapters.chapter3){const r=this.$("#chapter3-years"),i=this.$("#chapter3-reduction");r&&(r.value=t.withdrawalChapters.chapter3.yearsAfterStart),i&&(i.value=t.withdrawalChapters.chapter3.reductionPercent)}}if(t.taxModeling!==void 0){const e=this.$("#enable-tax-modeling");e&&(e.checked=t.taxModeling.enabled,e.dispatchEvent(new Event("change")));const r=this.$("#tax-advantaged");if(r&&(r.checked=t.taxModeling.taxAdvantaged,r.dispatchEvent(new Event("change"))),t.taxModeling.enabled&&!t.taxModeling.taxAdvantaged){const i=this.$("#dividend-yield"),n=this.$("#ordinary-tax-rate"),s=this.$("#ltcg-tax-rate");i&&(i.value=t.taxModeling.dividendYield*100),n&&(n.value=t.taxModeling.ordinaryTaxRate*100),s&&(s.value=t.taxModeling.ltcgTaxRate*100)}}}loadDemoPortfolio(){const t=this.$("#portfolio-composition");t&&t.setWeights({SPY:60,AGG:40}),this.$("toast-container")?.show("Running demo with 60/40 portfolio (S&P 500 / US Bonds)","info")}highlightPortfolioSection(){setTimeout(()=>{const t=this.$("#portfolio-composition");t&&(t.scrollIntoView({behavior:"smooth",block:"start"}),t.classList.add("highlight-pulse"),setTimeout(()=>{t.classList.remove("highlight-pulse")},2e3)),this.$("toast-container")?.show("Add assets to build your portfolio, then run simulation","info")},100)}async collectSimulationParams(){const t=this.getNumberInputValue("initial-investment",5e6),e=this.getNumberInputValue("initial-loc-balance",0),r=parseInt(this.getSelectInputValue("num-simulations","10000"),10),i=this.getRangeSliderValue("inflation-rate",2.5)/100,n=new Date().getFullYear(),s=this.getNumberInputValue("start-year",n),o=this.getNumberInputValue("withdrawal-start-year",n),l=this.getRangeSliderValue("time-horizon",15),d=Math.max(0,o-s),h=this.getNumberInputValue("annual-withdrawal",2e5),p=this.getRangeSliderValue("annual-raise",3)/100,m=this.getCheckboxValue("monthly-withdrawal",!0),v=this.getRangeSliderValue("sbloc-rate",7)/100,g=this.getRangeSliderValue("max-borrowing",65)/100,k=this.getRangeSliderValue("maintenance-margin",50)/100,S=this.getRangeSliderValue("liquidation-haircut",5)/100,D=this.getSelectInputValue("return-model","bootstrap"),M=this._regimeCalibration,I=this.getCheckboxValue("enable-chapters",!1),W={enabled:I};I&&(W.chapter2={yearsAfterStart:this.getNumberInputValue("chapter2-years",10),reductionPercent:this.getRangeSliderValue("chapter2-reduction",20)},W.chapter3={yearsAfterStart:this.getNumberInputValue("chapter3-years",10),reductionPercent:this.getRangeSliderValue("chapter3-reduction",30)});const H=this.getCheckboxValue("enable-tax-modeling",!1),X=this.getCheckboxValue("tax-advantaged",!1),q={enabled:H,taxAdvantaged:X,dividendYield:H&&!X?this.getRangeSliderValue("dividend-yield",.5)/100:0,ordinaryTaxRate:H&&!X?this.getRangeSliderValue("ordinary-tax-rate",37)/100:0,ltcgTaxRate:H&&!X?this.getRangeSliderValue("ltcg-tax-rate",23.8)/100:0},w=this.getRangeSliderValue("sell-cost-basis-ratio",40)/100,C=this.getRangeSliderValue("sell-dividend-yield",2)/100,tt={iterations:r,timeHorizon:l,initialValue:t,inflationRate:i,inflationAdjusted:!1,resamplingMethod:D==="regime"?"regime":"simple",regimeCalibration:D==="regime"?M:void 0,seed:void 0,timeline:{startYear:s,withdrawalStartYear:d},sbloc:{targetLTV:g,interestRate:v,annualWithdrawal:h,annualWithdrawalRaise:p,monthlyWithdrawal:m,maintenanceMargin:k,liquidationHaircut:S,initialLocBalance:e},withdrawalChapters:W,taxModeling:q,sellStrategy:{costBasisRatio:w,dividendYield:C}},pt=this.$("#portfolio-composition")?.getWeights()??{SPY:60,BND:30,GLD:10},lt=[],G=new Map;for(const[dt,gt]of Object.entries(pt)){const at=await Wa(dt);let ft;const wt=new Map;if(at){ft=at.returns.map(kt=>kt.return);for(const kt of at.returns)wt.set(kt.date,kt.return)}else{console.warn(`No preset data for ${dt}, using placeholder returns`),ft=Array.from({length:20},()=>.08+(Math.random()-.5)*.3);for(let kt=0;kt<ft.length;kt++)wt.set(String(2005+kt),ft[kt])}G.set(dt,wt),lt.push({id:dt,weight:gt/100,historicalReturns:ft})}const Z=lt.length;let J;if(Z>1){const dt=new Set;for(const at of G.values())for(const ft of at.keys())dt.add(ft);const gt=Array.from(dt).filter(at=>Array.from(G.values()).every(ft=>ft.has(at))).sort();if(gt.length>=2){const ft=Object.keys(pt).map(wt=>{const kt=G.get(wt);return gt.map(se=>kt.get(se))});J=mv(ft)}else console.warn("Insufficient common years for correlation calculation, using identity matrix"),J=Array.from({length:Z},(at,ft)=>Array.from({length:Z},(wt,kt)=>ft===kt?1:0))}else J=[[1]];return{config:tt,portfolio:{assets:lt,correlationMatrix:J}}}afterRender(){const t=this.$("#run-sim"),e=this.$("#sim-progress"),r=this.$("toast-container");this.shadowRoot?.addEventListener("show-toast",(G=>{if(r&&typeof r.show=="function"){const{message:Z,type:J}=G.detail;r.show(Z,J)}}));const i=this.$("#app-modal");this.shadowRoot?.addEventListener("show-modal",(G=>{const Z=G;if(i&&typeof i.show=="function"){const{options:J,callback:bt}=Z.detail;i.show(J).then(dt=>{typeof bt=="function"&&bt(dt)})}}));const n=this.$("#portfolio-composition"),s=async()=>{n&&typeof n.refreshAvailableAssets=="function"&&await n.refreshAvailableAssets(),r?.show("Historical data updated - simulation will use new values","info")};this.shadowRoot?.addEventListener("data-imported",(async()=>{await s()})),this.shadowRoot?.addEventListener("bulk-data-imported",(async()=>{await s()})),this.shadowRoot?.addEventListener("data-reset",(async()=>{await s()})),this.shadowRoot?.addEventListener("all-data-reset",(async()=>{await s()}));const o=this.$("#btn-settings"),l=this.$("#settings-panel");o?.addEventListener("click",()=>{l?.toggle()});const d=this.$("#btn-theme"),h=()=>{const G=No()==="dark";d?.classList.toggle("dark-mode",G)};h(),d?.addEventListener("click",()=>{const Z=No()==="dark"?"light":"dark";Oc(Z)}),Bc(()=>{h()}),this.$(".debug-enable-btn")?.addEventListener("click",()=>{const G=!jc();Xh(G);const Z=this.$(".debug-enable-btn");Z&&(Z.textContent=G?"Disable Logging":"Enable Logging",Z.classList.toggle("active",G)),this.refreshDebugOutput(),r?.show(G?"Debug logging enabled":"Debug logging disabled","info")}),this.$(".debug-refresh-btn")?.addEventListener("click",()=>{this.refreshDebugOutput()}),this.$(".debug-clear-btn")?.addEventListener("click",()=>{_h(),this.refreshDebugOutput()}),this.refreshDebugOutput();const p=this.$("#btn-guide"),m=this.$("#user-guide");p?.addEventListener("click",()=>{m?.show()});const v=this.$("#btn-print");document.addEventListener("simulation-complete",()=>{v?.classList.remove("hidden")}),v?.addEventListener("click",async()=>{const G=this.$("#results");if(!G||!this._simulationResult){r?.show("No simulation results to print","warning");return}const J=G.shadowRoot?.querySelector("results-dashboard")?.shadowRoot;if(!J){console.error("Could not access results dashboard shadow root"),r?.show("Could not access dashboard for printing","error");return}const bt=this._simulationConfig||(await this.collectSimulationParams()).config,dt=Gx(J,bt),gt=Xx(dt);Kx(gt)&&r?.show("Print preview opened in new window","info")});const g=this.$("#welcome");this._simulationResult!==null?g?.classList.add("hidden"):g?.classList.remove("hidden"),this.addEventListener("quick-start",async()=>{const Z=await this.$("#app-modal").show({title:"Run Your First Simulation",subtitle:"Choose how to get started with the Buy-Borrow-Die strategy simulator:",type:"choice",confirmText:"Create My Portfolio",alternateText:"Run Demo (60/40)",cancelText:"Cancel"});Z==="alternate"?(this.loadDemoPortfolio(),g?.classList.add("hidden"),t?.click()):Z==="confirm"&&(g?.classList.add("hidden"),this.highlightPortfolioSection())}),this.addEventListener("show-guide",()=>{m?.show()});const S=()=>{const G=this.$("#portfolio-composition");G&&G.dispatchEvent(new CustomEvent("params-changed",{bubbles:!1,composed:!1}))},D=this.$("#return-model"),M=this.$("#regime-calibration-group"),I=this.$("#regime-historical"),W=this.$("#regime-conservative"),H=this.$("#regime-help-text"),X=()=>{const G=D?.value==="regime";M&&M.classList.toggle("visible",G)};D?.addEventListener("change",X),X();const q=G=>{this._regimeCalibration=G,I?.classList.toggle("active",G==="historical"),W?.classList.toggle("active",G==="conservative"),H&&(H.textContent=G==="historical"?"Calibrated to historical S&P 500 data (1950-2024)":"Stress-testing with extended crash durations")};I?.addEventListener("click",()=>{q("historical"),S()}),W?.addEventListener("click",()=>{q("conservative"),S()});const w=this.$("#enable-chapters"),C=this.$("#chapters-config"),L=()=>{const G=w?.checked??!1;C&&C.classList.toggle("visible",G)};w?.addEventListener("change",L),L();const Y=this.$("#enable-tax-modeling"),K=this.$("#tax-config"),tt=this.$("#tax-advantaged"),ht=this.$("#tax-rates-group"),pt=()=>{const G=Y?.checked??!1,Z=tt?.checked??!1;K&&K.classList.toggle("visible",G),ht&&ht.classList.toggle("hidden",Z)};Y?.addEventListener("change",pt),tt?.addEventListener("change",pt),pt();const lt=()=>{this._isRunning||t?.click()};this.shadowRoot?.addEventListener("commit",G=>{const Z=G.target;window.matchMedia("(max-width: 768px)").matches&&Z.tagName==="RANGE-SLIDER"||lt()}),this.shadowRoot?.addEventListener("input",G=>{const Z=G.target;(Z.tagName==="RANGE-SLIDER"||Z.tagName==="NUMBER-INPUT"||Z.tagName==="SELECT-INPUT"||Z.tagName==="CHECKBOX-INPUT")&&S()}),this.shadowRoot?.addEventListener("change",G=>{const Z=G.target;(Z.tagName==="SELECT-INPUT"||Z.tagName==="CHECKBOX-INPUT")&&S()}),t?.addEventListener("click",async()=>{if(!this._isRunning){this.dispatchEvent(new CustomEvent("simulation-start",{bubbles:!0,composed:!0}));try{this._isRunning=!0,t.disabled=!0,e&&(e.classList.remove("hidden"),e.setAttribute("value","0"));const{config:G,portfolio:Z}=await this.collectSimulationParams(),J=await Wx(G,Z,dt=>{e&&e.setAttribute("value",String(dt))});this._simulationResult=J,this._simulationConfig=G,g?.classList.add("hidden");const bt=this.$("#results");if(bt){bt.initialValue=G.initialValue,bt.timeHorizon=G.timeHorizon,bt.annualWithdrawal=G.sbloc?.annualWithdrawal??5e4,bt.effectiveTaxRate=.37,bt.simulationConfig=G,bt.data=this._simulationResult;const gt=this.$("#portfolio-composition")?.getWeights()??{},at=Object.entries(gt).map(([ft,wt])=>({symbol:ft,weight:wt}));bt.portfolioWeights=at,bt.correlationMatrix={labels:at.map(ft=>ft.symbol),matrix:Z.correlationMatrix}}e&&e.classList.add("hidden"),r&&typeof r.show=="function"&&r.show(`Simulation complete: ${G.iterations.toLocaleString()} iterations, median ${_x(J.statistics.median)}`,"success"),this.dispatchEvent(new CustomEvent("simulation-complete",{detail:{result:this._simulationResult,config:G},bubbles:!0,composed:!0}))}catch(G){console.error("Simulation failed:",G),e&&e.classList.add("hidden"),r&&typeof r.show=="function"&&r.show(`Simulation failed: ${G instanceof Error?G.message:"Unknown error"}`,"error")}finally{this._isRunning=!1,t.disabled=!1}}}),this.addEventListener("request-portfolio-state",G=>{const J=this.$("#portfolio-composition")?.getWeights()||{},bt=Object.entries(J).map(([dt,gt])=>({id:dt,symbol:dt,name:dt,assetClass:"equity",weight:gt/100}));G.detail.assets=bt}),this.addEventListener("get-simulation-params",G=>{const Z=this.getSimulationParams(),J=G;J.detail&&typeof J.detail.callback=="function"&&J.detail.callback(Z)}),this.addEventListener("set-simulation-params",G=>{const Z=G;Z.detail&&this.setSimulationParams(Z.detail)})}}customElements.define("app-root",nu);const Qx=Object.freeze(Object.defineProperty({__proto__:null,AppRoot:nu},Symbol.toStringTag,{value:"Module"})),su='(function(){"use strict";/**\n * @license\n * Copyright 2019 Google LLC\n * SPDX-License-Identifier: Apache-2.0\n */const Fe=Symbol("Comlink.proxy"),lt=Symbol("Comlink.endpoint"),st=Symbol("Comlink.releaseProxy"),be=Symbol("Comlink.finalizer"),oe=Symbol("Comlink.thrown"),Le=e=>typeof e=="object"&&e!==null||typeof e=="function",ct={canHandle:e=>Le(e)&&e[Fe],serialize(e){const{port1:n,port2:r}=new MessageChannel;return Ce(e,n),[r,[r]]},deserialize(e){return e.start(),ht(e)}},ut={canHandle:e=>Le(e)&&oe in e,serialize({value:e}){let n;return e instanceof Error?n={isError:!0,value:{message:e.message,name:e.name,stack:e.stack}}:n={isError:!1,value:e},[n,[]]},deserialize(e){throw e.isError?Object.assign(new Error(e.value.message),e.value):e.value}},$e=new Map([["proxy",ct],["throw",ut]]);function dt(e,n){for(const r of e)if(n===r||r==="*"||r instanceof RegExp&&r.test(n))return!0;return!1}function Ce(e,n=globalThis,r=["*"]){n.addEventListener("message",function o(a){if(!a||!a.data)return;if(!dt(r,a.origin)){console.warn(`Invalid origin \'${a.origin}\' for comlink proxy`);return}const{id:u,type:f,path:c}=Object.assign({path:[]},a.data),t=(a.data.argumentList||[]).map(Q);let i;try{const l=c.slice(0,-1).reduce((d,h)=>d[h],e),s=c.reduce((d,h)=>d[h],e);switch(f){case"GET":i=s;break;case"SET":l[c.slice(-1)[0]]=Q(a.data.value),i=!0;break;case"APPLY":i=s.apply(l,t);break;case"CONSTRUCT":{const d=new s(...t);i=xt(d)}break;case"ENDPOINT":{const{port1:d,port2:h}=new MessageChannel;Ce(e,h),i=Pe(d,[d])}break;case"RELEASE":i=void 0;break;default:return}}catch(l){i={value:l,[oe]:0}}Promise.resolve(i).catch(l=>({value:l,[oe]:0})).then(l=>{const[s,d]=ue(l);n.postMessage(Object.assign(Object.assign({},s),{id:u}),d),f==="RELEASE"&&(n.removeEventListener("message",o),De(n),be in e&&typeof e[be]=="function"&&e[be]())}).catch(l=>{const[s,d]=ue({value:new TypeError("Unserializable return value"),[oe]:0});n.postMessage(Object.assign(Object.assign({},s),{id:u}),d)})}),n.start&&n.start()}function ft(e){return e.constructor.name==="MessagePort"}function De(e){ft(e)&&e.close()}function ht(e,n){const r=new Map;return e.addEventListener("message",function(a){const{data:u}=a;if(!u||!u.id)return;const f=r.get(u.id);if(f)try{f(u)}finally{r.delete(u.id)}}),Se(e,r,[],n)}function le(e){if(e)throw new Error("Proxy has been released and is not useable")}function Ve(e){return te(e,new Map,{type:"RELEASE"}).then(()=>{De(e)})}const se=new WeakMap,ce="FinalizationRegistry"in globalThis&&new FinalizationRegistry(e=>{const n=(se.get(e)||0)-1;se.set(e,n),n===0&&Ve(e)});function mt(e,n){const r=(se.get(n)||0)+1;se.set(n,r),ce&&ce.register(e,n,e)}function pt(e){ce&&ce.unregister(e)}function Se(e,n,r=[],o=function(){}){let a=!1;const u=new Proxy(o,{get(f,c){if(le(a),c===st)return()=>{pt(u),Ve(e),n.clear(),a=!0};if(c==="then"){if(r.length===0)return{then:()=>u};const t=te(e,n,{type:"GET",path:r.map(i=>i.toString())}).then(Q);return t.then.bind(t)}return Se(e,n,[...r,c])},set(f,c,t){le(a);const[i,l]=ue(t);return te(e,n,{type:"SET",path:[...r,c].map(s=>s.toString()),value:i},l).then(Q)},apply(f,c,t){le(a);const i=r[r.length-1];if(i===lt)return te(e,n,{type:"ENDPOINT"}).then(Q);if(i==="bind")return Se(e,n,r.slice(0,-1));const[l,s]=ke(t);return te(e,n,{type:"APPLY",path:r.map(d=>d.toString()),argumentList:l},s).then(Q)},construct(f,c){le(a);const[t,i]=ke(c);return te(e,n,{type:"CONSTRUCT",path:r.map(l=>l.toString()),argumentList:t},i).then(Q)}});return mt(u,e),u}function gt(e){return Array.prototype.concat.apply([],e)}function ke(e){const n=e.map(ue);return[n.map(r=>r[0]),gt(n.map(r=>r[1]))]}const Ie=new WeakMap;function Pe(e,n){return Ie.set(e,n),e}function xt(e){return Object.assign(e,{[Fe]:!0})}function ue(e){for(const[n,r]of $e)if(r.canHandle(e)){const[o,a]=r.serialize(e);return[{type:"HANDLER",name:n,value:o},a]}return[{type:"RAW",value:e},Ie.get(e)||[]]}function Q(e){switch(e.type){case"HANDLER":return $e.get(e.name).deserialize(e.value);case"RAW":return e.value}}function te(e,n,r,o){return new Promise(a=>{const u=vt();n.set(u,a),e.start&&e.start(),e.postMessage(Object.assign({id:u},r),o)})}function vt(){return new Array(4).fill(0).map(()=>Math.floor(Math.random()*Number.MAX_SAFE_INTEGER).toString(16)).join("-")}function wt(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function Mt(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var n=e.default;if(typeof n=="function"){var r=function o(){return this instanceof o?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};r.prototype=n.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var a=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(r,o,a.get?a:{enumerable:!0,get:function(){return e[o]}})}),r}var de={exports:{}},yt=de.exports,qe;function bt(){return qe||(qe=1,(function(e){(function(n,r,o){function a(t){var i=this,l=c();i.next=function(){var s=2091639*i.s0+i.c*23283064365386963e-26;return i.s0=i.s1,i.s1=i.s2,i.s2=s-(i.c=s|0)},i.c=1,i.s0=l(" "),i.s1=l(" "),i.s2=l(" "),i.s0-=l(t),i.s0<0&&(i.s0+=1),i.s1-=l(t),i.s1<0&&(i.s1+=1),i.s2-=l(t),i.s2<0&&(i.s2+=1),l=null}function u(t,i){return i.c=t.c,i.s0=t.s0,i.s1=t.s1,i.s2=t.s2,i}function f(t,i){var l=new a(t),s=i&&i.state,d=l.next;return d.int32=function(){return l.next()*4294967296|0},d.double=function(){return d()+(d()*2097152|0)*11102230246251565e-32},d.quick=d,s&&(typeof s=="object"&&u(s,l),d.state=function(){return u(l,{})}),d}function c(){var t=4022871197,i=function(l){l=String(l);for(var s=0;s<l.length;s++){t+=l.charCodeAt(s);var d=.02519603282416938*t;t=d>>>0,d-=t,d*=t,t=d>>>0,d-=t,t+=d*4294967296}return(t>>>0)*23283064365386963e-26};return i}r&&r.exports?r.exports=f:this.alea=f})(yt,e)})(de)),de.exports}var fe={exports:{}},Ct=fe.exports,Oe;function St(){return Oe||(Oe=1,(function(e){(function(n,r,o){function a(c){var t=this,i="";t.x=0,t.y=0,t.z=0,t.w=0,t.next=function(){var s=t.x^t.x<<11;return t.x=t.y,t.y=t.z,t.z=t.w,t.w^=t.w>>>19^s^s>>>8},c===(c|0)?t.x=c:i+=c;for(var l=0;l<i.length+64;l++)t.x^=i.charCodeAt(l)|0,t.next()}function u(c,t){return t.x=c.x,t.y=c.y,t.z=c.z,t.w=c.w,t}function f(c,t){var i=new a(c),l=t&&t.state,s=function(){return(i.next()>>>0)/4294967296};return s.double=function(){do var d=i.next()>>>11,h=(i.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},s.int32=i.next,s.quick=s,l&&(typeof l=="object"&&u(l,i),s.state=function(){return u(i,{})}),s}r&&r.exports?r.exports=f:this.xor128=f})(Ct,e)})(fe)),fe.exports}var he={exports:{}},Tt=he.exports,Ne;function Rt(){return Ne||(Ne=1,(function(e){(function(n,r,o){function a(c){var t=this,i="";t.next=function(){var s=t.x^t.x>>>2;return t.x=t.y,t.y=t.z,t.z=t.w,t.w=t.v,(t.d=t.d+362437|0)+(t.v=t.v^t.v<<4^(s^s<<1))|0},t.x=0,t.y=0,t.z=0,t.w=0,t.v=0,c===(c|0)?t.x=c:i+=c;for(var l=0;l<i.length+64;l++)t.x^=i.charCodeAt(l)|0,l==i.length&&(t.d=t.x<<10^t.x>>>4),t.next()}function u(c,t){return t.x=c.x,t.y=c.y,t.z=c.z,t.w=c.w,t.v=c.v,t.d=c.d,t}function f(c,t){var i=new a(c),l=t&&t.state,s=function(){return(i.next()>>>0)/4294967296};return s.double=function(){do var d=i.next()>>>11,h=(i.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},s.int32=i.next,s.quick=s,l&&(typeof l=="object"&&u(l,i),s.state=function(){return u(i,{})}),s}r&&r.exports?r.exports=f:this.xorwow=f})(Tt,e)})(he)),he.exports}var me={exports:{}},At=me.exports,je;function Bt(){return je||(je=1,(function(e){(function(n,r,o){function a(c){var t=this;t.next=function(){var l=t.x,s=t.i,d,h;return d=l[s],d^=d>>>7,h=d^d<<24,d=l[s+1&7],h^=d^d>>>10,d=l[s+3&7],h^=d^d>>>3,d=l[s+4&7],h^=d^d<<7,d=l[s+7&7],d=d^d<<13,h^=d^d<<9,l[s]=h,t.i=s+1&7,h};function i(l,s){var d,h=[];if(s===(s|0))h[0]=s;else for(s=""+s,d=0;d<s.length;++d)h[d&7]=h[d&7]<<15^s.charCodeAt(d)+h[d+1&7]<<13;for(;h.length<8;)h.push(0);for(d=0;d<8&&h[d]===0;++d);for(d==8?h[7]=-1:h[d],l.x=h,l.i=0,d=256;d>0;--d)l.next()}i(t,c)}function u(c,t){return t.x=c.x.slice(),t.i=c.i,t}function f(c,t){c==null&&(c=+new Date);var i=new a(c),l=t&&t.state,s=function(){return(i.next()>>>0)/4294967296};return s.double=function(){do var d=i.next()>>>11,h=(i.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},s.int32=i.next,s.quick=s,l&&(l.x&&u(l,i),s.state=function(){return u(i,{})}),s}r&&r.exports?r.exports=f:this.xorshift7=f})(At,e)})(me)),me.exports}var pe={exports:{}},Et=pe.exports,_e;function Ft(){return _e||(_e=1,(function(e){(function(n,r,o){function a(c){var t=this;t.next=function(){var l=t.w,s=t.X,d=t.i,h,m;return t.w=l=l+1640531527|0,m=s[d+34&127],h=s[d=d+1&127],m^=m<<13,h^=h<<17,m^=m>>>15,h^=h>>>12,m=s[d]=m^h,t.i=d,m+(l^l>>>16)|0};function i(l,s){var d,h,m,A,D,x=[],b=128;for(s===(s|0)?(h=s,s=null):(s=s+"\\0",h=0,b=Math.max(b,s.length)),m=0,A=-32;A<b;++A)s&&(h^=s.charCodeAt((A+32)%s.length)),A===0&&(D=h),h^=h<<10,h^=h>>>15,h^=h<<4,h^=h>>>13,A>=0&&(D=D+1640531527|0,d=x[A&127]^=h+D,m=d==0?m+1:0);for(m>=128&&(x[(s&&s.length||0)&127]=-1),m=127,A=512;A>0;--A)h=x[m+34&127],d=x[m=m+1&127],h^=h<<13,d^=d<<17,h^=h>>>15,d^=d>>>12,x[m]=h^d;l.w=D,l.X=x,l.i=m}i(t,c)}function u(c,t){return t.i=c.i,t.w=c.w,t.X=c.X.slice(),t}function f(c,t){c==null&&(c=+new Date);var i=new a(c),l=t&&t.state,s=function(){return(i.next()>>>0)/4294967296};return s.double=function(){do var d=i.next()>>>11,h=(i.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},s.int32=i.next,s.quick=s,l&&(l.X&&u(l,i),s.state=function(){return u(i,{})}),s}r&&r.exports?r.exports=f:this.xor4096=f})(Et,e)})(pe)),pe.exports}var ge={exports:{}},Lt=ge.exports,We;function $t(){return We||(We=1,(function(e){(function(n,r,o){function a(c){var t=this,i="";t.next=function(){var s=t.b,d=t.c,h=t.d,m=t.a;return s=s<<25^s>>>7^d,d=d-h|0,h=h<<24^h>>>8^m,m=m-s|0,t.b=s=s<<20^s>>>12^d,t.c=d=d-h|0,t.d=h<<16^d>>>16^m,t.a=m-s|0},t.a=0,t.b=0,t.c=-1640531527,t.d=1367130551,c===Math.floor(c)?(t.a=c/4294967296|0,t.b=c|0):i+=c;for(var l=0;l<i.length+20;l++)t.b^=i.charCodeAt(l)|0,t.next()}function u(c,t){return t.a=c.a,t.b=c.b,t.c=c.c,t.d=c.d,t}function f(c,t){var i=new a(c),l=t&&t.state,s=function(){return(i.next()>>>0)/4294967296};return s.double=function(){do var d=i.next()>>>11,h=(i.next()>>>0)/4294967296,m=(d+h)/(1<<21);while(m===0);return m},s.int32=i.next,s.quick=s,l&&(typeof l=="object"&&u(l,i),s.state=function(){return u(i,{})}),s}r&&r.exports?r.exports=f:this.tychei=f})(Lt,e)})(ge)),ge.exports}var xe={exports:{}},Dt={},Vt=Object.freeze({__proto__:null,default:Dt}),kt=Mt(Vt),It=xe.exports,ze;function Pt(){return ze||(ze=1,(function(e){(function(n,r,o){var a=256,u=6,f=52,c="random",t=o.pow(a,u),i=o.pow(2,f),l=i*2,s=a-1,d;function h(v,w,R){var M=[];w=w==!0?{entropy:!0}:w||{};var B=x(D(w.entropy?[v,F(r)]:v??b(),3),M),I=new m(M),O=function(){for(var V=I.g(u),P=t,k=0;V<i;)V=(V+k)*a,P*=a,k=I.g(1);for(;V>=l;)V/=2,P/=2,k>>>=1;return(V+k)/P};return O.int32=function(){return I.g(4)|0},O.quick=function(){return I.g(4)/4294967296},O.double=O,x(F(I.S),r),(w.pass||R||function(V,P,k,H){return H&&(H.S&&A(H,I),V.state=function(){return A(I,{})}),k?(o[c]=V,P):V})(O,B,"global"in w?w.global:this==o,w.state)}function m(v){var w,R=v.length,M=this,B=0,I=M.i=M.j=0,O=M.S=[];for(R||(v=[R++]);B<a;)O[B]=B++;for(B=0;B<a;B++)O[B]=O[I=s&I+v[B%R]+(w=O[B])],O[I]=w;(M.g=function(V){for(var P,k=0,H=M.i,Z=M.j,J=M.S;V--;)P=J[H=s&H+1],k=k*a+J[s&(J[H]=J[Z=s&Z+P])+(J[Z]=P)];return M.i=H,M.j=Z,k})(a)}function A(v,w){return w.i=v.i,w.j=v.j,w.S=v.S.slice(),w}function D(v,w){var R=[],M=typeof v,B;if(w&&M=="object")for(B in v)try{R.push(D(v[B],w-1))}catch{}return R.length?R:M=="string"?v:v+"\\0"}function x(v,w){for(var R=v+"",M,B=0;B<R.length;)w[s&B]=s&(M^=w[s&B]*19)+R.charCodeAt(B++);return F(w)}function b(){try{var v;return d&&(v=d.randomBytes)?v=v(a):(v=new Uint8Array(a),(n.crypto||n.msCrypto).getRandomValues(v)),F(v)}catch{var w=n.navigator,R=w&&w.plugins;return[+new Date,n,R,n.screen,F(r)]}}function F(v){return String.fromCharCode.apply(0,v)}if(x(o.random(),r),e.exports){e.exports=h;try{d=kt}catch{}}else o["seed"+c]=h})(typeof self<"u"?self:It,[],Math)})(xe)),xe.exports}var Te,Ge;function qt(){if(Ge)return Te;Ge=1;var e=bt(),n=St(),r=Rt(),o=Bt(),a=Ft(),u=$t(),f=Pt();return f.alea=e,f.xor128=n,f.xorwow=r,f.xorshift7=o,f.xor4096=a,f.tychei=u,Te=f,Te}var Ot=qt(),Nt=wt(Ot);const jt=1e-10;function ee(e,n){const r=Math.pow(10,n);return Math.round(e*r)/r}function Re(e){if(e.length===0)return 0;let n=0,r=0;for(let o=0;o<e.length;o++){const a=e[o]-r,u=n+a;r=u-n-a,n=u}return n}const ve=6;function Y(e){return e.length===0?0:ee(Re(e)/e.length,ve)}function _t(e,n=!1){const r=e.length;if(r===0||!n&&r<2)return 0;const o=Re(e)/r,a=[];for(let c=0;c<r;c++){const t=e[c]-o;a.push(t*t)}const u=Re(a),f=n?r:r-1;return ee(u/f,ve)}function Ye(e,n=!1){return ee(Math.sqrt(_t(e,n)),ve)}function S(e,n){const r=e.length;if(r===0)return 0;if(r===1)return e[0];const o=[...e].sort((l,s)=>l-s),u=Math.max(0,Math.min(100,n))/100*(r-1),f=Math.floor(u),c=Math.ceil(u);if(f===c)return o[f];const t=u-f,i=o[f]+t*(o[c]-o[f]);return ee(i,ve)}const He=6,Xe=.9999,Wt=1e-6;function Ue(e,n=!1){const r=e.length;if(r===0)return[];const o=e.map(a=>[...a]);for(let a=0;a<r;a++)for(let u=0;u<r;u++)a!==u&&(o[a][u]=Math.max(-Xe,Math.min(Xe,o[a][u])));if(n)for(let a=0;a<r;a++)o[a][a]=1+Wt;return o}function zt(e){if(e.length===0)return[];let r=Ae(e);if(r!==null)return r;const o=Ue(e,!1);if(r=Ae(o),r!==null)return console.warn("Correlation matrix required regularization (capped correlations at Â±0.9999)"),r;const a=Ue(e,!0);return r=Ae(a),r!==null?(console.warn("Correlation matrix required diagonal regularization"),r):null}function Ae(e){const n=e.length,r=Array(n).fill(null).map(()=>Array(n).fill(0));for(let o=0;o<n;o++)for(let a=o;a<n;a++){let u=e[a][o];for(let f=0;f<o;f++)u-=r[a][f]*r[o][f];if(a===o){if(u<=jt)return null;r[a][o]=ee(Math.sqrt(u),He)}else r[a][o]=ee(u/r[o][o],He)}return r}const Gt=6;function Yt(e=0,n=1,r=Math.random){const o=1-r(),a=r(),u=Math.sqrt(-2*Math.log(o))*Math.cos(2*Math.PI*a);return e+u*n}function Ze(e,n,r=Math.random,o=0,a=1){const u=zt(n);if(u===null)throw new Error("Invalid correlation matrix: not positive-definite");const f=n.length;if(e!==f)throw new Error(`Number of assets (${e}) must match correlation matrix size (${f})`);const c=[];for(let i=0;i<f;i++)c.push(Yt(0,1,r));const t=[];for(let i=0;i<f;i++){let l=0;for(let s=0;s<=i;s++)l+=u[i][s]*c[s];t.push(ee(o+l*a,Gt))}return t}function Ht(e){const n=e.length;if(n<12)return Math.max(3,Math.floor(n/2));const r=Y(e);let o=0,a=0;for(let l=1;l<n;l++)o+=(e[l]-r)*(e[l-1]-r);for(let l=0;l<n;l++)a+=(e[l]-r)**2;if(a===0)return 3;const u=o/a,f=Math.abs(u),c=u**2;if(c>=1)return Math.floor(n/4);const t=2*f/(1-c),i=Math.ceil(Math.pow(3*n/2,1/3)*Math.pow(Math.max(t,.01),1/3));return Math.max(3,Math.min(Math.floor(n/4),i))}function Xt(e,n,r){if(e.length===0)throw new Error("Cannot bootstrap from empty asset array");const o=Math.min(...e.map(u=>u.length));if(o===0)throw new Error("All assets must have at least one historical return");const a=e.map(()=>[]);for(let u=0;u<n;u++){const f=Math.floor(r()*o);e.forEach((c,t)=>{a[t].push(c[f])})}return a}function Ut(e,n,r,o){if(e.length===0)throw new Error("Cannot bootstrap from empty asset array");const a=Math.min(...e.map(i=>i.length));if(a===0)throw new Error("All assets must have at least one historical return");const u=o??Ht(e[0]),f=Math.min(u,a);if(f<1)throw new Error("Block size must be at least 1");const c=e.map(()=>[]),t=a-f;for(;c[0].length<n;){const i=t>0?Math.floor(r()*(t+1)):0;for(let l=0;l<f&&c[0].length<n;l++)e.forEach((s,d)=>{c[d].push(s[i+l])})}return c}const we={equity_stock:{survivorshipBias:.005,volatilityScaling:1,degreesOfFreedom:5,skewMultiplier:-.3},equity_index:{survivorshipBias:.002,volatilityScaling:1,degreesOfFreedom:7,skewMultiplier:-.2},commodity:{survivorshipBias:0,volatilityScaling:1.2,degreesOfFreedom:4,skewMultiplier:0},bond:{survivorshipBias:0,volatilityScaling:.8,degreesOfFreedom:10,skewMultiplier:0}},Zt={bull:{mean:.12,stddev:.12},bear:{mean:-.08,stddev:.2},crash:{mean:-.3,stddev:.35},recovery:{mean:.2,stddev:.25}},Me={historical:{transitions:{bull:{bull:.89,bear:.06,crash:.02,recovery:.03},bear:{bull:.05,bear:.45,crash:.2,recovery:.3},crash:{bull:0,bear:.2,crash:.1,recovery:.7},recovery:{bull:.5,bear:.05,crash:.02,recovery:.43}},survivorshipBias:.015,baseParams:{bull:{meanMultiplier:1,meanAdjustment:0,volMultiplier:.8,correlationSpike:0},bear:{meanMultiplier:.3,meanAdjustment:-.1,volMultiplier:1.6,correlationSpike:.35},crash:{meanMultiplier:0,meanAdjustment:-.3,volMultiplier:2.5,correlationSpike:.65},recovery:{meanMultiplier:.75,meanAdjustment:.1,volMultiplier:1.3,correlationSpike:.2}},bearMarketOverrides:{commodity:{meanMultiplier:.9,meanAdjustment:.04,volMultiplier:1.3,correlationSpike:.08},bond:{meanMultiplier:1,meanAdjustment:.05,volMultiplier:1.2,correlationSpike:-.12},equity_index:{meanMultiplier:.3,meanAdjustment:-.1,volMultiplier:1.6,correlationSpike:.35},equity_stock:{meanMultiplier:.25,meanAdjustment:-.12,volMultiplier:1.8,correlationSpike:.45}},crashMarketOverrides:{commodity:{meanMultiplier:.75,meanAdjustment:.08,volMultiplier:1.8,correlationSpike:.05},bond:{meanMultiplier:1,meanAdjustment:.06,volMultiplier:1.6,correlationSpike:-.25},equity_index:{meanMultiplier:0,meanAdjustment:-.3,volMultiplier:2.5,correlationSpike:.65},equity_stock:{meanMultiplier:0,meanAdjustment:-.36,volMultiplier:3,correlationSpike:.75}}},conservative:{transitions:{bull:{bull:.89,bear:.06,crash:.02,recovery:.03},bear:{bull:.05,bear:.45,crash:.2,recovery:.3},crash:{bull:0,bear:.15,crash:.35,recovery:.5},recovery:{bull:.45,bear:.08,crash:.02,recovery:.45}},survivorshipBias:.02,baseParams:{bull:{meanMultiplier:1,meanAdjustment:0,volMultiplier:.75,correlationSpike:0},bear:{meanMultiplier:.25,meanAdjustment:-.12,volMultiplier:1.8,correlationSpike:.4},crash:{meanMultiplier:0,meanAdjustment:-.35,volMultiplier:3,correlationSpike:.7},recovery:{meanMultiplier:.7,meanAdjustment:.08,volMultiplier:1.4,correlationSpike:.25}},bearMarketOverrides:{commodity:{meanMultiplier:.85,meanAdjustment:.03,volMultiplier:1.4,correlationSpike:.1},bond:{meanMultiplier:1,meanAdjustment:.04,volMultiplier:1.3,correlationSpike:-.15},equity_index:{meanMultiplier:.25,meanAdjustment:-.12,volMultiplier:1.8,correlationSpike:.4},equity_stock:{meanMultiplier:.2,meanAdjustment:-.14,volMultiplier:2,correlationSpike:.5}},crashMarketOverrides:{commodity:{meanMultiplier:.7,meanAdjustment:.1,volMultiplier:2,correlationSpike:.05},bond:{meanMultiplier:1,meanAdjustment:.08,volMultiplier:1.8,correlationSpike:-.3},equity_index:{meanMultiplier:0,meanAdjustment:-.35,volMultiplier:3,correlationSpike:.7},equity_stock:{meanMultiplier:0,meanAdjustment:-.42,volMultiplier:3.5,correlationSpike:.8}}}};function Jt(e,n,r){const o=Me[r];return e==="bear"&&o.bearMarketOverrides[n]?o.bearMarketOverrides[n]:e==="crash"&&o.crashMarketOverrides[n]?o.crashMarketOverrides[n]:o.baseParams[e]}function Kt(e,n,r){const o=n[e],a=r();return a<o.bull?"bull":a<o.bull+o.bear?"bear":a<o.bull+o.bear+o.crash?"crash":"recovery"}const Je=-.99,Ke=5;function Qt(e,n,r,o,a="bull",u,f,c,t="historical",i){const l=Me[t],s=l.transitions,d=Zt,h=l.survivorshipBias,m=[];let A=a;for(let x=0;x<e;x++)m.push(A),A=Kt(A,s,o);const D=Array.from({length:n},()=>new Array(e));for(let x=0;x<e;x++){const b=m[x];if(i&&i.length===n){const F=Ze(n,r,o,0,1);for(let v=0;v<n;v++){const w=i[v],R=Jt(b,w.assetClass,t),M=w.mean*R.meanMultiplier+R.meanAdjustment-h,B=w.stddev*R.volMultiplier,I=M+B*F[v];D[v][x]=Math.max(Je,Math.min(Ke,I))}}else{const{mean:F,stddev:v}=d[b],w=F-h,R=Ze(n,r,o,w,v);for(let M=0;M<n;M++)D[M][x]=Math.max(Je,Math.min(Ke,R[M]))}}return{returns:D,regimes:m}}function en(e){let n=0;for(let o=0;o<e;o++){const a=Qe();n+=a*a}return Qe()/Math.sqrt(n/e)}function Qe(){const e=Math.random(),n=Math.random();return Math.sqrt(-2*Math.log(e))*Math.cos(2*Math.PI*n)}function tn(e){const n=e.length,r=Array(n).fill(0).map(()=>Array(n).fill(0));for(let o=0;o<n;o++)for(let a=0;a<=o;a++){let u=0;for(let f=0;f<a;f++)u+=r[o][f]*r[a][f];o===a?r[o][a]=Math.sqrt(Math.max(0,e[o][o]-u)):r[o][a]=(e[o][a]-u)/Math.max(1e-10,r[a][a])}return r}function nn(e,n,r){const o=e.length;if(n.length!==o)throw new Error("assetClasses length must match historicalReturnsArray length");if(r.length!==o||r[0].length!==o)throw new Error("correlationMatrix must be NxN where N is number of assets");const a=e.map(i=>{if(i.length===0)throw new Error("generateCorrelatedFatTailReturns: historicalReturns cannot be empty");const l=i.reduce((h,m)=>h+m,0)/i.length,s=i.reduce((h,m)=>h+(m-l)**2,0)/i.length,d=Math.sqrt(s);return{mean:l,stddev:d}}),u=tn(r),f=n.map(i=>{const l=we[i],s=en(l.degreesOfFreedom);return s+l.skewMultiplier*(s*s-1)}),c=Array(o).fill(0);for(let i=0;i<o;i++)for(let l=0;l<=i;l++)c[i]+=u[i][l]*f[l];return c.map((i,l)=>{const s=we[n[l]],h=a[l].mean+i*a[l].stddev*s.volatilityScaling+s.survivorshipBias;return Math.max(-.99,Math.min(10,h))})}function ne(e,n){return e===0?0:n<=0?1/0:e/n}function rn(e,n){const r=ne(e.loanBalance,e.portfolioValue);return r>=n.maxLTV?{year:e.yearsSinceStart,ltvAtTrigger:r,loanBalance:e.loanBalance,portfolioValue:e.portfolioValue}:null}function et(e,n){const r=ne(e.loanBalance,e.portfolioValue);return r>=n.maintenanceMargin&&r<n.maxLTV}function an(e,n){let r=n.liquidationTargetMultiplier??.8;(r<=0||r>1)&&(console.warn(`Invalid liquidationTargetMultiplier ${r}, using default 0.8. Multiplier must be > 0 and <= 1.`),r=.8);const o=n.maxLTV*r,a=e.portfolioValue*o,u=e.loanBalance-a;if(u<=0)return{assetsToSell:0,loanToRepay:0,targetLTV:o};const f=u/(1-n.liquidationHaircut),c=f*(1-n.liquidationHaircut);return{assetsToSell:f,loanToRepay:c,targetLTV:o}}function tt(e,n){return e<=0||n<=0?0:e*n}function on(e,n,r){const{assetsToSell:o,loanToRepay:a,targetLTV:u}=an(e,n);if(o<=0)return ne(e.loanBalance,e.portfolioValue),{newState:{...e},event:{year:r??e.yearsSinceStart,assetsLiquidated:0,haircut:0,loanRepaid:0,newLoanBalance:e.loanBalance,newPortfolioValue:e.portfolioValue},portfolioFailed:e.portfolioValue-e.loanBalance<=0};tt(o,n.liquidationHaircut);const f=Math.min(o,e.portfolioValue),c=f*(1-n.liquidationHaircut),t=Math.max(0,e.portfolioValue-f),i=Math.max(0,e.loanBalance-c),l=ne(i,t),s=l>=n.maintenanceMargin&&l<n.maxLTV,h=t-i<=0,m={...e,portfolioValue:t,loanBalance:i,currentLTV:l,inWarningZone:s},A={year:r??e.yearsSinceStart,assetsLiquidated:f,haircut:tt(f,n.liquidationHaircut),loanRepaid:c,newLoanBalance:i,newPortfolioValue:t};return{newState:m,event:A,portfolioFailed:h}}class U extends Error{constructor(n,r,o){super(`SBLOC State Validation Failed: ${n}`),this.state=r,this.field=o,this.name="SBLOCStateValidationError"}}function ln(e,n,r){if(Number.isNaN(e))throw new U("LTV is NaN",{currentLTV:e,portfolioValue:n,loanBalance:r},"currentLTV");if(e===1/0&&n===0&&r>0)return!0;if(e===-1/0)throw new U("LTV cannot be negative infinity",{currentLTV:e,portfolioValue:n,loanBalance:r},"currentLTV");if(e===1/0)throw new U("Unexpected Infinity LTV (portfolio > 0 or loan = 0)",{currentLTV:e,portfolioValue:n,loanBalance:r},"currentLTV");if(e<0)throw new U("LTV cannot be negative",{currentLTV:e,portfolioValue:n,loanBalance:r},"currentLTV");return!0}function sn(e,n){if(Number.isNaN(e.portfolioValue))throw new U("Portfolio value is NaN",e,"portfolioValue");if(e.portfolioValue<0)throw new U("Portfolio value cannot be negative",e,"portfolioValue");if(Number.isNaN(e.loanBalance))throw new U("Loan balance is NaN",e,"loanBalance");if(e.loanBalance<0)throw new U("Loan balance cannot be negative",e,"loanBalance");if(ln(e.currentLTV,e.portfolioValue,e.loanBalance),Number.isNaN(e.yearsSinceStart))throw new U("yearsSinceStart is NaN",e,"yearsSinceStart");if(e.yearsSinceStart<0||!Number.isInteger(e.yearsSinceStart))throw new U("yearsSinceStart must be non-negative integer",e,"yearsSinceStart")}function cn(e,n,r=0){const o=r,a=n,u=ne(o,a),f={loanBalance:o,portfolioValue:a,currentLTV:u,inWarningZone:!1,yearsSinceStart:0};f.inWarningZone=et(f,e);try{sn(f,e)}catch(c){throw c instanceof U&&console.warn("Initial SBLOC state validation warning:",c.message),c}return f}function nt(e,n,r,o){let a=e.portfolioValue,u=e.loanBalance,f=0,c=0,t=0;a=Math.max(0,a*(1+r));const i=n.dividendYield??0,l=n.dividendTaxRate??0;if(i>0&&l>0&&(t=a*i*l,u+=t),o>=n.startYear){const x=o-n.startYear,b=n.withdrawalGrowthRate??0;c=n.annualWithdrawal*Math.pow(1+b,x),u+=c}if(u>0&&n.annualInterestRate>0){const x=u;if(n.compoundingFrequency==="annual")f=u*n.annualInterestRate,u=u*(1+n.annualInterestRate);else{const b=n.annualInterestRate/12,F=Math.pow(1+b,12);f=u*(F-1),u=u*F}if(typeof window<"u"&&window.DEBUG_SBLOC_INTEREST&&o===0){const b=n.annualInterestRate,F=f/x;console.log("[SBLOC Interest Debug]",{year:o,compoundingFrequency:n.compoundingFrequency,nominalRate:`${(b*100).toFixed(2)}%`,effectiveRate:`${(F*100).toFixed(4)}%`,balanceBeforeInterest:x.toFixed(2),interestCharged:f.toFixed(2),balanceAfterInterest:u.toFixed(2),expectedDifference:n.compoundingFrequency==="monthly"?`EAR should be ~${((Math.pow(1+b/12,12)-1)*100).toFixed(2)}%`:"EAR equals nominal rate"})}}let s=ne(u,a),d={loanBalance:u,portfolioValue:a,currentLTV:s,inWarningZone:!1,yearsSinceStart:e.yearsSinceStart+1};const m=rn(d,n)!==null;let A=null,D=!1;if(m){const x=on(d,n,o);d=x.newState,A=x.event,D=x.portfolioFailed,a=d.portfolioValue,u=d.loanBalance,s=d.currentLTV}return d.inWarningZone=et(d,n),d.yearsSinceStart=e.yearsSinceStart+1,D||(D=d.portfolioValue-d.loanBalance<=0),{newState:d,marginCallTriggered:m,liquidationEvent:A,portfolioFailed:D,interestCharged:f,withdrawalMade:c,dividendTaxBorrowed:t}}function un(e){return Math.pow(1+e,1/12)-1}function dn(e,n,r,o,a){const u={...n,annualWithdrawal:n.annualWithdrawal/12,annualInterestRate:n.annualInterestRate/12,compoundingFrequency:"annual",dividendYield:a===0?n.dividendYield:0,dividendTaxRate:a===0?n.dividendTaxRate:0},f={...e,yearsSinceStart:e.yearsSinceStart},c=nt(f,u,r,o);return a<11&&(c.newState.yearsSinceStart=e.yearsSinceStart),c}function fn(e,n,r,o,a){if(!a)return nt(e,n,r,o);const u=un(r);let f={...e},c=0,t=0,i=0,l=!1,s=null,d=!1;for(let h=0;h<12;h++){const m=dn(f,n,u,o,h);if(f=m.newState,c+=m.interestCharged,t+=m.withdrawalMade,i+=m.dividendTaxBorrowed,m.marginCallTriggered&&!l&&(l=!0),m.liquidationEvent&&!s&&(s=m.liquidationEvent),m.portfolioFailed){d=!0;break}}return{newState:f,marginCallTriggered:l,liquidationEvent:s,portfolioFailed:d,interestCharged:c,withdrawalMade:t,dividendTaxBorrowed:i}}const ye={costBasisRatio:.4,dividendYield:.02,dividendTaxRate:.238,capitalGainsRate:.238};function hn(e,n,r){const o=e-n;return o>0?o*r:0}function mn(e,n){const{initialValue:r,annualWithdrawal:o,withdrawalGrowth:a,timeHorizon:u,capitalGainsRate:f=ye.capitalGainsRate,costBasisRatio:c=ye.costBasisRatio,dividendYield:t=ye.dividendYield,dividendTaxRate:i=ye.dividendTaxRate}=e;let l=r,s=r*c,d=o,h=0,m=0,A=!1;const D=[r],x=[0];for(let b=0;b<u;b++){if(l<=0){A=!0,D.push(0),x.push(x[x.length-1]);continue}let F=0;if(t>0){const k=l*t*i;if(m+=k,F+=k,l-=k,l<=0){A=!0,D.push(0),x.push(x[x.length-1]+F);continue}}const v=d;if(d*=1+a,v>=l){const P=hn(l,l*(s/l),f);h+=P,F+=P,l=0,A=!0,D.push(0),x.push(x[x.length-1]+F);continue}const w=v,R=s*(w/l),M=w-R,B=M>0?M*f:0;h+=B,F+=B;const I=w+B;if(I>=l){l=0,A=!0,D.push(0),x.push(x[x.length-1]+F);continue}const O=I/l;l-=I,s*=1-O;const V=n[b]??0;l*=1+V,D.push(l),x.push(x[x.length-1]+F)}return{terminalValue:l,totalCapitalGainsTaxes:h,totalDividendTaxes:m,depleted:A,yearlyValues:D,yearlyTaxes:x}}const rt=500,pn=.03;async function gn(e,n,r,o){const{iterations:a,timeHorizon:u,initialValue:f,inflationAdjusted:c,inflationRate:t=pn,resamplingMethod:i,blockSize:l,seed:s}=e,d=Nt(s??Date.now().toString()),h=new Float64Array(a),m=Array.from({length:u},()=>new Array(a)),A=n.assets.length,D=n.assets.map(p=>p.weight);let x;if(i==="regime"){const p=e.regimeCalibration??"historical",L=Me[p];console.log(`Regime model: Multiplier-based approach (${p} mode)`),console.log(`  Survivorship bias: ${(L.survivorshipBias*100).toFixed(1)}%`),x=n.assets.map(g=>{const j=g.historicalReturns,q=j.length>0?Y(j):.1,z=j.length>1?Ye(j):.2,T=g.assetClass??"equity_stock";return console.log(`Asset ${g.id} (${T}):`,{historicalMean:(q*100).toFixed(1)+"%",historicalStddev:(z*100).toFixed(1)+"%",dataPoints:j.length}),{id:g.id,mean:q,stddev:z,assetClass:T}})}let b=null,F=null,v=null,w=null,R=null,M=null;const B=e.sbloc?.annualWithdrawal??0,I=e.sbloc?.annualWithdrawalRaise??0,O=e.timeline?.withdrawalStartYear??0;let V=null,P=null,k=null,H=null;if(e.sbloc){if(b=Array.from({length:a},()=>[]),F=new Array(a).fill(-1),v=new Array(a).fill(0),w=new Array(a).fill(0),R=new Array(a).fill(0),M=new Array(a).fill(0),V=new Array(a).fill(0),P=new Array(a).fill(-1),e.taxModeling?.enabled&&!e.taxModeling?.taxAdvantaged){const L=(e.taxModeling.dividendYield*100).toFixed(2),g=(e.taxModeling.ordinaryTaxRate*100).toFixed(1);console.log(`[MC] BBD dividend tax borrowing enabled: ${L}% yield Ã ${g}% tax rate`),console.log("[MC] BBD borrows to pay dividend taxes (portfolio stays whole)"),console.log("[MC] Sell strategy liquidates to pay same taxes (reduces compound growth)")}else console.log("[MC] Dividend tax modeling disabled (tax-advantaged account or taxes disabled)");if(e.withdrawalChapters?.enabled){if(console.log("[MC] Withdrawal chapters enabled (multi-phase strategy)"),e.withdrawalChapters.chapter2){const L=e.withdrawalChapters.chapter2.yearsAfterStart,g=e.withdrawalChapters.chapter2.reductionPercent;console.log(`[MC]   Chapter 2: Reduce by ${g}% at year ${O+L} (${L} years after withdrawal start)`)}if(e.withdrawalChapters.chapter3){const L=e.withdrawalChapters.chapter3.yearsAfterStart,g=e.withdrawalChapters.chapter3.reductionPercent;console.log(`[MC]   Chapter 3: Reduce by ${g}% at year ${O+L} (${L} years after withdrawal start)`)}if(e.withdrawalChapters.chapter2&&e.withdrawalChapters.chapter3){const L=1-e.withdrawalChapters.chapter2.reductionPercent/100,g=1-e.withdrawalChapters.chapter3.reductionPercent/100,j=L*g;console.log(`[MC]   Cumulative reduction: ${((1-j)*100).toFixed(1)}% (final withdrawal = ${(j*100).toFixed(1)}% of base)`)}}else console.log("[MC] Withdrawal chapters disabled (constant withdrawal pattern)")}e.sellStrategy&&(k=[],H=Array.from({length:a},()=>[]));for(let p=0;p<a;p+=rt){if(o?.aborted)throw new DOMException("Simulation cancelled","AbortError");const L=Math.min(p+rt,a);for(let g=p;g<L;g++){const j=xn(i,u,n,d,l,e.regimeCalibration,x);let q=f,z=1;const T=[];for(let E=0;E<u;E++){let $=0;for(let _=0;_<A;_++)$+=D[_]*j[_][E];if(T.push($),z*=1+$,q*=1+$,c&&(q/=1+t),e.sbloc&&b&&F){const _=Math.max(0,E-O);let C=E>=O?B*Math.pow(1+I,_):0;const y=Be(e.withdrawalChapters,E,O);C*=y;const N=e.taxModeling?.enabled&&!e.taxModeling?.taxAdvantaged?e.taxModeling.dividendYield??0:0,W=e.taxModeling?.enabled&&!e.taxModeling?.taxAdvantaged?e.taxModeling.ordinaryTaxRate??0:0,G={annualInterestRate:e.sbloc.interestRate,maxLTV:e.sbloc.targetLTV,maintenanceMargin:e.sbloc.maintenanceMargin,liquidationHaircut:e.sbloc.liquidationHaircut,annualWithdrawal:C,compoundingFrequency:"annual",startYear:O,dividendYield:N,dividendTaxRate:W},Fn=E===0?cn(G,f,e.sbloc.initialLocBalance):b[g][E-1],K=fn(Fn,G,$,E,e.sbloc.monthlyWithdrawal??!1);b[g].push(K.newState),K.marginCallTriggered&&F[g]===-1&&(F[g]=E+1),K.marginCallTriggered&&v&&v[g]++,K.liquidationEvent&&w&&(w[g]+=K.liquidationEvent.haircut),R&&(R[g]+=K.interestCharged),M&&(M[g]+=K.dividendTaxBorrowed),K.portfolioFailed&&P&&P[g]===-1&&(P[g]=E+1),q=K.newState.portfolioValue}if(e.sbloc&&b){const C=b[g][E]?.loanBalance??0;m[E][g]=q-C}else m[E][g]=q}if(e.sellStrategy&&k&&H){const E={initialValue:f,annualWithdrawal:B,withdrawalGrowth:I,timeHorizon:u,costBasisRatio:e.sellStrategy.costBasisRatio,dividendYield:e.sellStrategy.dividendYield},$=mn(E,T);k.push($),H[g]=$.yearlyValues}h[g]=q,V&&(V[g]=z-1)}r&&r(L/a*100),await new Promise(g=>setTimeout(g,0))}if(r&&r(100),await new Promise(p=>setTimeout(p,0)),e.sbloc&&b){for(let p=0;p<a;p++){const g=b[p][u-1]?.loanBalance??0,q=h[p]-g;h[p]=q}console.log("[MC Debug] BBD Strategy: Converted terminalValues to NET WORTH (portfolio - loan)")}else console.log("[MC Debug] No SBLOC: terminalValues already correct (portfolio values, no loan)");const Z=Array.from(h),J=Z.filter(p=>p<0).length,Rn=Z.filter(p=>p===0).length,An=Math.min(...Z),Bn=Math.max(...Z);if(console.log(`[MC Debug] Terminal values: min=${An.toFixed(0)}, max=${Bn.toFixed(0)}, negative=${J}, zero=${Rn}, total=${a}`),J>0){console.warn(`[MC Debug] WARNING: ${J} negative terminal values found!`);const p=Z.filter(L=>L<0).slice(0,5);console.warn("[MC Debug] Sample negative values:",p)}const ie=vn(Z,f);if(console.log(`[MC Debug] Statistics: median=${ie.median.toFixed(0)}, mean=${ie.mean.toFixed(0)}, successRate=${ie.successRate.toFixed(1)}%`),e.sbloc&&v&&w&&R){const p=v,L=p.filter(G=>G===0).length,g=p.filter(G=>G===1).length,j=p.filter(G=>G===2).length,q=p.filter(G=>G>=3).length,z=Math.max(...p),T=S(w,50),E=Y(w),$=Math.max(...w),_=S(R,50),C=Y(R),y=b.map(G=>G[u-1]?.portfolioValue??0),N=S(y,50),W=Y(y);console.log("[MC Debug] âââââââââââââââââââââââââââââââââââââââââââââââââââ"),console.log("[MC Debug] SBLOC DIAGNOSTIC SUMMARY"),console.log("[MC Debug] âââââââââââââââââââââââââââââââââââââââââââââââââââ"),console.log("[MC Debug] Margin Call Distribution:"),console.log(`[MC Debug]   0 margin calls: ${L} (${(L/a*100).toFixed(1)}%)`),console.log(`[MC Debug]   1 margin call:  ${g} (${(g/a*100).toFixed(1)}%)`),console.log(`[MC Debug]   2 margin calls: ${j} (${(j/a*100).toFixed(1)}%)`),console.log(`[MC Debug]   3+ margin calls: ${q} (${(q/a*100).toFixed(1)}%)`),console.log(`[MC Debug]   Max margin calls in any iteration: ${z}`),console.log("[MC Debug] Haircut Losses (from forced liquidations):"),console.log(`[MC Debug]   Median: $${T.toFixed(0)}`),console.log(`[MC Debug]   Mean: $${E.toFixed(0)}`),console.log(`[MC Debug]   Max: $${$.toFixed(0)}`),console.log("[MC Debug] Interest Charged:"),console.log(`[MC Debug]   Median: $${_.toFixed(0)}`),console.log(`[MC Debug]   Mean: $${C.toFixed(0)}`),console.log("[MC Debug] Final Gross Portfolio:"),console.log(`[MC Debug]   Median: $${N.toFixed(0)}`),console.log(`[MC Debug]   Mean: $${W.toFixed(0)}`),console.log("[MC Debug] âââââââââââââââââââââââââââââââââââââââââââââââââââ")}const{percentiles:En,simulationIndices:X}=wn(m,h);let at,it,re;if(e.sbloc&&b&&F){const p=b[0].map((C,y)=>b.map(N=>N[y]?.loanBalance??0));at={years:Array.from({length:u},(C,y)=>y+1),loanBalance:{p10:p.map(C=>S(C,10)),p25:p.map(C=>S(C,25)),p50:p.map(C=>S(C,50)),p75:p.map(C=>S(C,75)),p90:p.map(C=>S(C,90))},cumulativeWithdrawals:yn(u,B,I,O,e.withdrawalChapters),cumulativeInterest:{p50:p.map((C,y)=>{const N=bn(y+1,B,I,O,e.withdrawalChapters),W=S(C,50);return Math.max(0,W-N)})}},it=Mn(F,u,a);const L=b.map(C=>C[u-1]),g=S(L.map(C=>C?.loanBalance??0),50),j=ie.median,q=j,z=M?S(M,50):0,T=j+g,$=Math.max(0,T-f)*.238,_=T-$;re={bbdNetEstate:q,sellNetEstate:_,bbdAdvantage:q-_,medianDividendTaxesBorrowed:z}}let Ee;if(e.sbloc&&v&&w&&R&&M&&b&&V&&P){const p=v,L=b.map(T=>T[u-1]?.portfolioValue??0),g=P.filter(T=>T>0),j=P.filter(T=>T===-1),q=V.filter((T,E)=>P[E]===-1),z=V.filter((T,E)=>P[E]>0);Ee={marginCallDistribution:{noMarginCalls:p.filter(T=>T===0).length,oneMarginCall:p.filter(T=>T===1).length,twoMarginCalls:p.filter(T=>T===2).length,threeOrMore:p.filter(T=>T>=3).length,maxMarginCalls:Math.max(...p)},haircutLosses:{median:S(w,50),mean:Y(w),max:Math.max(...w)},interestCharged:{median:S(R,50),mean:Y(R)},dividendTaxesBorrowed:{median:S(M,50),mean:Y(M),max:Math.max(...M)},finalGrossPortfolio:{median:S(L,50),mean:Y(L)},portfolioReturns:{median:S(V,50),mean:Y(V),p10:S(V,10),p90:S(V,90)},failureAnalysis:{totalFailed:g.length,totalSucceeded:j.length,medianFailureYear:g.length>0?S(g,50):0,avgFailureYear:g.length>0?Y(g):0,successfulAvgReturn:q.length>0?Y(q):0,failedAvgReturn:z.length>0?Y(z):0},regimeParameters:x?n.assets.map((T,E)=>{const $=x[E],_=e.regimeCalibration??"historical",C=Me[_],y=N=>{let W=C.baseParams[N];return N==="bear"&&C.bearMarketOverrides[$.assetClass]?W=C.bearMarketOverrides[$.assetClass]:N==="crash"&&C.crashMarketOverrides[$.assetClass]&&(W=C.crashMarketOverrides[$.assetClass]),{mean:$.mean*W.meanMultiplier+W.meanAdjustment-C.survivorshipBias,stddev:$.stddev*W.volMultiplier}};return{assetId:T.id,assetClass:$.assetClass,historicalMean:$.mean,historicalStddev:$.stddev,bull:y("bull"),bear:y("bear"),crash:y("crash"),recovery:y("recovery"),usedFallback:!1,validationIssues:[]}}):void 0,calibrationMode:i==="regime"?e.regimeCalibration??"historical":void 0,fatTailParameters:i==="fat-tail"?n.assets.map(T=>{const E=T.assetClass??"equity_index",$=we[E];return{assetId:T.id,assetClass:E,degreesOfFreedom:$.degreesOfFreedom,skewMultiplier:$.skewMultiplier,survivorshipBias:$.survivorshipBias,volatilityScaling:$.volatilityScaling}}):void 0,pathCoherentPercentiles:{p10SimIndex:X.p10,p10TerminalValue:h[X.p10],p50SimIndex:X.p50,p50TerminalValue:h[X.p50],p90SimIndex:X.p90,p90TerminalValue:h[X.p90]}}}else i==="fat-tail"&&(Ee={marginCallDistribution:{noMarginCalls:0,oneMarginCall:0,twoMarginCalls:0,threeOrMore:0,maxMarginCalls:0},haircutLosses:{median:0,mean:0,max:0},interestCharged:{median:0,mean:0},dividendTaxesBorrowed:{median:0,mean:0,max:0},finalGrossPortfolio:{median:0,mean:0},fatTailParameters:n.assets.map(p=>{const L=p.assetClass??"equity_index",g=we[L];return{assetId:p.id,assetClass:L,degreesOfFreedom:g.degreesOfFreedom,skewMultiplier:g.skewMultiplier,survivorshipBias:g.survivorshipBias,volatilityScaling:g.volatilityScaling}}),pathCoherentPercentiles:{p10SimIndex:X.p10,p10TerminalValue:h[X.p10],p50SimIndex:X.p50,p50TerminalValue:h[X.p50],p90SimIndex:X.p90,p90TerminalValue:h[X.p90]}});let ot;if(e.sellStrategy&&k&&H){console.log("[MC Debug] Computing sell strategy statistics from",k.length,"iterations");const p=k.map(y=>y.terminalValue),g=p.filter(y=>y>f).length/a*100,q=k.filter(y=>y.depleted).length/a*100,z={p10:S(p,10),p25:S(p,25),p50:S(p,50),p75:S(p,75),p90:S(p,90)},T=k.map(y=>y.totalCapitalGainsTaxes),E=k.map(y=>y.totalDividendTaxes),$=k.map(y=>y.totalCapitalGainsTaxes+y.totalDividendTaxes),_={medianCapitalGains:S(T,50),medianDividend:S(E,50),medianTotal:S($,50)},C=[];for(let y=0;y<=u;y++){const N=H.map(W=>W[y]).filter(W=>W!==void 0);C.push({year:y,p10:S(N,10),p25:S(N,25),p50:S(N,50),p75:S(N,75),p90:S(N,90)})}if(ot={terminalValues:p,successRate:g,percentiles:z,taxes:_,depletionProbability:q,yearlyPercentiles:C},console.log("[MC Debug] Sell strategy results:",{successRate:g.toFixed(1)+"%",depletionProbability:q.toFixed(1)+"%",medianTerminal:z.p50.toFixed(0),medianTaxes:_.medianTotal.toFixed(0)}),re){const y=re.bbdNetEstate,N=z.p50,W=y-N,G=re.medianDividendTaxesBorrowed??0;re={bbdNetEstate:y,sellNetEstate:N,bbdAdvantage:W,medianDividendTaxesBorrowed:G},console.log("[MC Debug] âââââââââââââââââââââââââââââââââââââââââââââââââââ"),console.log("[MC Debug] ESTATE ANALYSIS (BBD vs Sell)"),console.log("[MC Debug] âââââââââââââââââââââââââââââââââââââââââââââââââââ"),console.log(`[MC Debug] BBD median net estate: $${y.toFixed(0)}`),console.log(`[MC Debug] Sell median net estate: $${N.toFixed(0)}`),console.log(`[MC Debug] BBD advantage: $${W.toFixed(0)} (${(W/N*100).toFixed(1)}%)`),G>0&&(console.log(`[MC Debug] Median dividend taxes borrowed (BBD): $${G.toFixed(0)}`),console.log(\'[MC Debug]   (These taxes are "in the loan" at death, forgiven by step-up)\'),console.log("[MC Debug]   (Sell strategy paid same taxes by liquidating portfolio)")),console.log(`[MC Debug] Sell median taxes paid (lifetime): $${_.medianTotal.toFixed(0)}`),console.log(`[MC Debug]   - Capital gains: $${_.medianCapitalGains.toFixed(0)}`),console.log(`[MC Debug]   - Dividend taxes: $${_.medianDividend.toFixed(0)}`),console.log("[MC Debug] âââââââââââââââââââââââââââââââââââââââââââââââââââ")}}return{terminalValues:h,yearlyPercentiles:En,statistics:ie,sblocTrajectory:at,marginCallStats:it,estateAnalysis:re,debugStats:Ee,sellStrategy:ot}}function xn(e,n,r,o,a,u,f){const c=r.assets.length;if(e==="regime"){const i=u??"historical",{returns:l}=Qt(n,c,r.correlationMatrix,o,"bull",void 0,void 0,void 0,i,f);return l}if(e==="fat-tail"){const i=r.assets.map(d=>d.historicalReturns),l=r.assets.map(d=>d.assetClass??"equity_index"),s=Array(c).fill(0).map(()=>[]);for(let d=0;d<n;d++){const h=nn(i,l,r.correlationMatrix);for(let m=0;m<c;m++)s[m].push(h[m])}return s}const t=r.assets.map(i=>i.historicalReturns);return e==="block"?Ut(t,n,o,a):Xt(t,n,o)}function vn(e,n){const r=e.filter(o=>o>n).length;return{mean:Y(e),median:S(e,50),stddev:Ye(e),successRate:r/e.length*100}}function wn(e,n){n.length;const r=e.length,o=Array.from(n).map((t,i)=>({index:i,terminalValue:t})).filter(t=>isFinite(t.terminalValue)).sort((t,i)=>t.terminalValue-i.terminalValue),a=o.length,u=t=>{const i=Math.min(Math.floor(t/100*a),a-1);return o[i].index},f={p10:u(10),p25:u(25),p50:u(50),p75:u(75),p90:u(90)},c=[];for(let t=0;t<r;t++)c.push({year:t+1,p10:e[t][f.p10],p25:e[t][f.p25],p50:e[t][f.p50],p75:e[t][f.p75],p90:e[t][f.p90]});return console.log("[MC] Path-coherent percentiles extracted"),console.log(`[MC]   P10 from simulation #${f.p10} (terminal: $${o.find(t=>t.index===f.p10)?.terminalValue.toFixed(0)})`),console.log(`[MC]   P50 from simulation #${f.p50} (terminal: $${o.find(t=>t.index===f.p50)?.terminalValue.toFixed(0)})`),console.log(`[MC]   P90 from simulation #${f.p90} (terminal: $${o.find(t=>t.index===f.p90)?.terminalValue.toFixed(0)})`),{percentiles:c,simulationIndices:f}}function Mn(e,n,r){const o=[];for(let a=1;a<=n;a++){const u=e.filter(c=>c===a).length,f=e.filter(c=>c>0&&c<=a).length;o.push({year:a,probability:u/r*100,cumulativeProbability:f/r*100})}return o}function yn(e,n,r,o,a){const u=[];let f=0;for(let c=1;c<=e;c++){const t=c-1;if(t>=o){const i=t-o;let l=n*Math.pow(1+r,i);const s=Be(a,t,o);l*=s,f+=l}u.push(f)}return u}function bn(e,n,r,o,a){let u=0;for(let f=1;f<=e;f++){const c=f-1;if(c>=o){const t=c-o;let i=n*Math.pow(1+r,t);const l=Be(a,c,o);i*=l,u+=i}}return u}function Be(e,n,r){if(!e||!e.enabled)return 1;const o=Math.max(0,n-r);let a=1;if(e.chapter2&&o>=e.chapter2.yearsAfterStart){const u=1-e.chapter2.reductionPercent/100;a*=u}if(e.chapter3&&o>=e.chapter3.yearsAfterStart){const u=1-e.chapter3.reductionPercent/100;a*=u}return a}let ae=null;async function Cn(e,n,r){ae=new AbortController;try{const o=await gn(e,n,r,ae.signal);return Pe(o,[o.terminalValues.buffer])}finally{ae=null}}function Sn(){ae&&ae.abort()}function Tn(){return"Worker ready"}Ce({simulate:Cn,cancel:Sn,healthCheck:Tn})})();\n',Pc=typeof self<"u"&&self.Blob&&new Blob([su],{type:"text/javascript;charset=utf-8"});function Jx(a){let t;try{if(t=Pc&&(self.URL||self.webkitURL).createObjectURL(Pc),!t)throw"";const e=new Worker(t,{name:a?.name});return e.addEventListener("error",()=>{(self.URL||self.webkitURL).revokeObjectURL(t)}),e}catch{return new Worker("data:text/javascript;charset=utf-8,"+encodeURIComponent(su),{name:a?.name})}finally{t&&(self.URL||self.webkitURL).revokeObjectURL(t)}}const Zx=Object.freeze(Object.defineProperty({__proto__:null,default:Jx},Symbol.toStringTag,{value:"Module"}));</script>
    <style rel="stylesheet" crossorigin>:root{--color-primary: #0d9488;--color-primary-hover: #0f766e;--section-icon-color: #0d9488;--color-success: #047857;--color-warning: #b45309;--color-error: #dc2626;--surface-primary: #ffffff;--surface-secondary: #f8fafc;--surface-tertiary: #e2e8f0;--text-primary: #1e293b;--text-secondary: #64748b;--text-inverse: #ffffff;--border-color: #e2e8f0;--border-radius-sm: 4px;--text-disabled: #9ca3af;--surface-disabled: #f3f4f6;--border-disabled: #d1d5db;--border-radius-md: 8px;--border-radius-lg: 12px;--spacing-xs: 4px;--spacing-sm: 8px;--spacing-md: 16px;--spacing-lg: 24px;--spacing-xl: 32px;--spacing-fluid-sm: clamp(8px, 1vw, 12px);--spacing-fluid-md: clamp(16px, 2vw, 24px);--spacing-fluid-lg: clamp(24px, 3vw, 40px);--spacing-fluid-xl: clamp(32px, 4vw, 56px);--font-family: system-ui, -apple-system, sans-serif;--font-size-sm: .875rem;--font-size-md: 1rem;--font-size-lg: 1.25rem;--font-size-fluid-base: clamp(1rem, .95rem + .25vw, 1.125rem);--font-size-fluid-lg: clamp(1.125rem, 1rem + .5vw, 1.375rem);--font-size-fluid-xl: clamp(1.25rem, 1rem + 1vw, 2rem);--font-size-fluid-2xl: clamp(1.5rem, 1.25rem + 1.25vw, 2.5rem);--font-size-fluid-hero: clamp(2rem, 1.5rem + 2vw, 3.5rem);--sidebar-width: 400px;--sidebar-collapsed-width: 48px;--content-max-width-lg: 1820px;--content-max-width-xl: 2340px;--content-max-width-2xl: 2860px;--chart-max-width: 1200px;--shadow-sm: 0 1px 3px rgba(26, 36, 36, .06);--shadow-md: 0 4px 12px rgba(26, 36, 36, .08);--shadow-lg: 0 8px 32px rgba(26, 36, 36, .12);--shadow-hover: 0 12px 40px rgba(26, 36, 36, .15);--modal-backdrop: rgba(0, 0, 0, .3);--modal-backdrop-blur: 4px;--modal-shadow: 0 10px 25px rgba(0, 0, 0, .15);--modal-max-width: 360px}[data-theme=dark]{--color-primary: #14b8a6;--color-primary-hover: #2dd4bf;--section-icon-color: #14b8a6;--color-success: #10b981;--color-warning: #f59e0b;--color-error: #ef4444;--surface-primary: #0f172a;--surface-secondary: #1e293b;--surface-tertiary: #334155;--surface-hover: rgba(255, 255, 255, .1);--text-primary: #f1f5f9;--text-secondary: #94a3b8;--text-inverse: #0f172a;--border-color: #334155;--text-disabled: #6b7280;--surface-disabled: #1f2937;--border-disabled: #4b5563;--spacing-fluid-sm: clamp(8px, 1vw, 12px);--spacing-fluid-md: clamp(16px, 2vw, 24px);--spacing-fluid-lg: clamp(24px, 3vw, 40px);--spacing-fluid-xl: clamp(32px, 4vw, 56px);--font-size-fluid-base: clamp(1rem, .95rem + .25vw, 1.125rem);--font-size-fluid-lg: clamp(1.125rem, 1rem + .5vw, 1.375rem);--font-size-fluid-xl: clamp(1.25rem, 1rem + 1vw, 2rem);--font-size-fluid-2xl: clamp(1.5rem, 1.25rem + 1.25vw, 2.5rem);--font-size-fluid-hero: clamp(2rem, 1.5rem + 2vw, 3.5rem);--content-max-width-lg: 1820px;--content-max-width-xl: 2340px;--content-max-width-2xl: 2860px;--chart-max-width: 1200px;--shadow-sm: 0 1px 3px rgba(0, 0, 0, .3);--shadow-md: 0 4px 12px rgba(0, 0, 0, .4);--shadow-lg: 0 8px 32px rgba(0, 0, 0, .5);--shadow-hover: 0 12px 40px rgba(0, 0, 0, .6);--shadow-glow: 0 0 16px rgba(77, 184, 160, .15);--modal-backdrop: rgba(0, 0, 0, .5);--modal-shadow: 0 10px 25px rgba(0, 0, 0, .3)}@media print{sidebar-panel,settings-panel,theme-toggle,.no-print,button:not(.print-visible),[role=navigation],header nav,footer{display:none!important}body{font-size:11pt;line-height:1.4;color:#000!important;background:#fff!important;margin:0;padding:0}main-layout{display:block!important}results-dashboard,comparison-dashboard{width:100%!important;max-width:none!important;padding:0!important;margin:0!important}.chart-container,.metric-card,.key-metrics-banner,.param-summary,.strategy-analysis,.percentile-spectrum,table,[class*=section],[class*=card]{break-inside:avoid;page-break-inside:avoid}.section-break,.print-page-break{break-before:page;page-break-before:always}canvas{max-width:100%!important;height:auto!important;min-height:200px}table{width:100%;border-collapse:collapse;font-size:10pt}th,td{border:1px solid #ccc!important;padding:4px 8px!important}th{background:#f5f5f5!important;color:#000!important}a[href^=http]:after{content:" (" attr(href) ")";font-size:9pt;color:#666}*{box-shadow:none!important;text-shadow:none!important}h1,h2,h3,h4,h5,h6,p,span,div,li{color:#000!important}.text-secondary,[class*=secondary]{color:#444!important}}@page{size:letter portrait;margin:.75in}@page :first{margin-top:1in}*,*:before,*:after{box-sizing:border-box}html,body{margin:0;padding:0;font-family:var(--font-family);font-size:var(--font-size-md);color:var(--text-primary);background:var(--surface-primary);height:100%;line-height:1.5;-webkit-font-smoothing:antialiased}#app{height:100%}h1,h2,h3,h4,h5,h6{margin:0 0 var(--spacing-md);color:var(--text-primary)}h1{font-size:2rem}h2{font-size:1.5rem}h3{font-size:1.25rem}p{margin:0 0 var(--spacing-sm)}.sr-only{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0,0,0,0);white-space:nowrap;border:0}</style>
  </head>
  <body>
    <app-root></app-root>
  </body>
</html>
