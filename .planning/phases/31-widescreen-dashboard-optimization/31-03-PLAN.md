---
phase: 31-widescreen-dashboard-optimization
plan: 03
type: execute
wave: 2
depends_on: ["31-01"]
files_modified:
  - src/components/ui/key-metrics-banner.ts
autonomous: false

must_haves:
  truths:
    - "Key metrics cards scale appropriately at widescreen sizes"
    - "Hero metric values use fluid typography"
    - "Banner grid has max-width on ultrawide monitors"
    - "All changes verified at 1440px, 1920px, and 2560px viewports"
  artifacts:
    - path: "src/components/ui/key-metrics-banner.ts"
      provides: "Widescreen responsive hero cards"
      contains: "@media (min-width: 1440px)"
  key_links:
    - from: "key-metrics-banner.ts"
      to: "tokens.css"
      via: "CSS custom properties"
      pattern: "--spacing-fluid|--font-size-fluid-hero"
---

<objective>
Add widescreen media queries to key-metrics-banner.ts and perform visual verification at multiple viewport widths.

Purpose: Ensure the hero cards (Strategy Success, Portfolio Growth, Leverage Safety) scale elegantly on large monitors with appropriate spacing and typography, without becoming too wide or sparse.

Output: key-metrics-banner.ts with widescreen enhancements, verified at 1440px, 1920px, and 2560px.
</objective>

<execution_context>
@C:\Users\ungac\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\ungac\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/31-widescreen-dashboard-optimization/31-RESEARCH.md
@.planning/phases/31-widescreen-dashboard-optimization/31-01-SUMMARY.md
@src/components/ui/key-metrics-banner.ts
@src/styles/tokens.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add widescreen media queries to key-metrics-banner.ts</name>
  <files>src/components/ui/key-metrics-banner.ts</files>
  <action>
In the `styles` getter of key-metrics-banner.ts, add widescreen media queries AFTER the existing mobile breakpoints (after `@media (max-width: 480px)`). Add them in ascending min-width order:

**1. Large Desktop (1440px+):**
```css
/* Large desktop (1440px+) - enhanced spacing */
@media (min-width: 1440px) {
  .banner-grid {
    gap: var(--spacing-fluid-lg, clamp(24px, 3vw, 40px));
  }

  .metric-card {
    padding: var(--spacing-fluid-lg, clamp(24px, 3vw, 40px));
  }

  .hero-value {
    font-size: var(--font-size-fluid-hero, clamp(2rem, 1.5rem + 2vw, 3.5rem));
  }
}
```

**2. Full HD Widescreen (1920px+):**
```css
/* Full HD widescreen (1920px+) - max-width for content */
@media (min-width: 1920px) {
  .banner-grid {
    max-width: var(--content-max-width-xl, 1800px);
    margin-left: auto;
    margin-right: auto;
  }

  .metric-card {
    padding: var(--spacing-xl, 32px);
  }

  .hero-value {
    font-size: 3rem;
  }

  .metric-label {
    font-size: var(--font-size-lg, 1.25rem);
  }
}
```

**3. Ultrawide/4K (2560px+):**
```css
/* Ultrawide/4K (2560px+) - stricter constraints */
@media (min-width: 2560px) {
  .banner-grid {
    max-width: 1600px;
  }
}
```

**IMPORTANT:**
- Add these AFTER all existing mobile media queries
- Use min-width (additive, not overriding)
- Keep all existing styles intact
- Fallback values ensure graceful degradation

**WHY these values:**
- 1440px: Fluid spacing and larger hero text for better visual impact on bigger screens
- 1920px: Max-width prevents cards from stretching too wide; fixed padding and font for consistency
- 2560px: Even stricter max-width (1600px) keeps hero cards prominent but readable
  </action>
  <verify>
1. Run: `npm run build` - should complete without errors
2. Search for new media queries: `grep "min-width: 1440px\|min-width: 1920px\|min-width: 2560px" src/components/ui/key-metrics-banner.ts`
3. Verify mobile styles still present: `grep "max-width: 1024px\|max-width: 768px" src/components/ui/key-metrics-banner.ts`
  </verify>
  <done>
- key-metrics-banner.ts contains @media (min-width: 1440px) with fluid spacing and hero typography
- key-metrics-banner.ts contains @media (min-width: 1920px) with max-width constraint
- key-metrics-banner.ts contains @media (min-width: 2560px) with stricter max-width
- All existing mobile styles (1024px, 768px, 480px) remain intact
- Build passes without errors
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>Widescreen dashboard optimization across tokens.css, results-dashboard.ts, and key-metrics-banner.ts</what-built>
  <how-to-verify>
**Pre-requisites:**
1. Ensure dev server is running: `npm run dev`
2. Open browser to http://localhost:5173
3. Run a simulation to generate dashboard results (use any portfolio)

**Test at each viewport width using browser DevTools (Responsive Mode):**

**Test 1: 1440px viewport**
1. Set viewport width to 1440px
2. Verify:
   - Dashboard grid has enhanced spacing (larger gaps between sections)
   - Charts are slightly taller than at 1024px
   - Key metrics cards have larger padding and bigger hero numbers
   - No horizontal scrollbar appears

**Test 2: 1920px viewport**
1. Set viewport width to 1920px
2. Verify:
   - Stats grid shows 6 columns (instead of 4)
   - Comparison charts grid shows 3 columns (instead of 2)
   - Dashboard content is centered with max-width constraint
   - Key metrics banner is centered with max-width
   - Charts don't stretch to full width - they have max-width

**Test 3: 2560px viewport**
1. Set viewport width to 2560px
2. Verify:
   - Content is centered with max-width (NOT stretching to full 2560px)
   - Charts have strict max-width (around 1200px)
   - No excessive whitespace on sides (content should be ~2200px max)
   - Hero cards are centered and appropriately sized (not too wide)

**Test 4: Mobile regression test (768px)**
1. Set viewport width to 768px
2. Verify:
   - Dashboard grid is single column
   - Stats grid is 2 columns (not 6)
   - All content fits without horizontal scroll
   - No widescreen styles leaking to mobile

**Expected behavior summary:**
- 768px: 1 column, 2-column stats, compact
- 1024px: 2 columns, 4-column stats, standard
- 1440px: 2 columns, 4-column stats, enhanced spacing
- 1920px: 2 columns, 6-column stats, 3-column comparison, centered with max-width
- 2560px: Same as 1920px but with stricter max-width constraints
  </how-to-verify>
  <resume-signal>Type "approved" if all viewports render correctly, or describe any issues observed</resume-signal>
</task>

</tasks>

<verification>
1. `npm run build` completes successfully
2. All three widescreen media queries present in key-metrics-banner.ts
3. Visual verification at 1440px, 1920px, 2560px confirms proper scaling
4. Visual verification at 768px confirms no mobile regression
5. No horizontal scrollbars at any viewport width
</verification>

<success_criteria>
- key-metrics-banner.ts has widescreen breakpoints (1440px, 1920px, 2560px)
- Hero metric values scale with fluid typography on widescreen
- Banner has max-width constraints on ultrawide
- Human verification confirms proper rendering at all tested viewports
- No mobile regression
- Build passes
</success_criteria>

<output>
After completion, create `.planning/phases/31-widescreen-dashboard-optimization/31-03-SUMMARY.md`
</output>
