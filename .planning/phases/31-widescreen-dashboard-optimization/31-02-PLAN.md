---
phase: 31-widescreen-dashboard-optimization
plan: 02
type: execute
wave: 2
depends_on: ["31-01"]
files_modified:
  - src/components/ui/results-dashboard.ts
autonomous: true

must_haves:
  truths:
    - "Dashboard grid expands intelligently at 1440px+"
    - "Stats grid shows 6 columns at 1920px+"
    - "Charts have max-width constraints on ultrawide"
    - "Content centered with max-width at 2560px+"
    - "No regression at 768px mobile breakpoint"
  artifacts:
    - path: "src/components/ui/results-dashboard.ts"
      provides: "Widescreen responsive grid layouts"
      contains: "@media (min-width: 1440px)"
  key_links:
    - from: "results-dashboard.ts"
      to: "tokens.css"
      via: "CSS custom properties"
      pattern: "--content-max-width|--spacing-fluid"
---

<objective>
Add widescreen media queries to results-dashboard.ts for optimized layouts at 1440px, 1920px, and 2560px viewports.

Purpose: Transform the dashboard grid to better utilize horizontal space on large monitors while preventing content from stretching too wide on ultrawides.

Output: results-dashboard.ts with progressive widescreen enhancements.
</objective>

<execution_context>
@C:\Users\ungac\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\ungac\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/31-widescreen-dashboard-optimization/31-RESEARCH.md
@.planning/phases/31-widescreen-dashboard-optimization/31-01-SUMMARY.md
@src/components/ui/results-dashboard.ts
@src/styles/tokens.css
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add widescreen media queries to results-dashboard.ts styles</name>
  <files>src/components/ui/results-dashboard.ts</files>
  <action>
In the `styles` getter of results-dashboard.ts, add three new media query blocks AFTER the existing mobile `@media (max-width: 768px)` and `@media (max-width: 480px)` blocks. Add them in ascending min-width order for proper cascade:

**1. Large Desktop (1440px+):**
```css
/* Large desktop (1440px+) - enhanced spacing and content width */
@media (min-width: 1440px) {
  .dashboard-grid {
    gap: var(--spacing-fluid-lg, clamp(24px, 3vw, 40px));
    padding: var(--spacing-fluid-md, clamp(16px, 2vw, 24px));
  }

  .chart-section,
  .stats-section {
    padding: var(--spacing-fluid-lg, clamp(24px, 3vw, 40px));
  }

  .chart-container {
    height: 450px;
  }

  .comparison-chart-container {
    height: 400px;
  }

  .comparison-chart-container.short {
    height: 320px;
  }
}
```

**2. Full HD Widescreen (1920px+):**
```css
/* Full HD widescreen (1920px+) - expanded grids and content constraints */
@media (min-width: 1920px) {
  .dashboard-grid {
    max-width: var(--content-max-width-xl, 1800px);
    margin-left: auto;
    margin-right: auto;
  }

  .stats-grid {
    grid-template-columns: repeat(6, 1fr);
  }

  .comparison-grid {
    grid-template-columns: repeat(3, 1fr);
  }

  .chart-container {
    height: 500px;
    max-width: var(--chart-max-width, 1200px);
    margin-left: auto;
    margin-right: auto;
  }

  .comparison-chart-container {
    height: 420px;
  }
}
```

**3. Ultrawide/4K (2560px+):**
```css
/* Ultrawide/4K (2560px+) - content constraints to prevent over-stretching */
@media (min-width: 2560px) {
  .dashboard-grid {
    max-width: var(--content-max-width-2xl, 2200px);
  }

  .chart-section,
  .stats-section,
  .comparison-wrapper,
  .debt-spectrum-wrapper {
    max-width: 1400px;
  }

  /* Center sections that have max-width */
  .chart-section.full-width,
  .stats-section.full-width,
  .comparison-wrapper,
  .debt-spectrum-wrapper {
    margin-left: auto;
    margin-right: auto;
  }
}
```

**IMPORTANT placement rules:**
- Add these AFTER all existing mobile media queries (after `@media (max-width: 480px)`)
- Use min-width queries (additive, not overriding mobile styles)
- Keep all existing mobile styles intact - do NOT modify them
- Fallback values in var() ensure graceful degradation if tokens not loaded

**WHY these specific changes:**
- 1440px: Fluid spacing begins scaling, charts get slightly taller for better readability
- 1920px: Stats grid goes from 4 to 6 columns (more data at a glance), comparison grid goes to 3 columns, max-width prevents content sprawl
- 2560px: Stricter max-width on individual sections prevents charts from becoming too wide to read

**Test consideration:** The comparison-grid going to 3 columns at 1920px means the 4 comparison charts (Net Worth, Cumulative Costs, Terminal Wealth, SBLOC Utilization) will show 3 on first row, 1 on second - this is intentional as Terminal Wealth (bar chart) works well as a full-width anchor.
  </action>
  <verify>
1. Run: `npm run build` - should complete without errors
2. Search for new media queries: `grep "min-width: 1440px\|min-width: 1920px\|min-width: 2560px" src/components/ui/results-dashboard.ts`
3. Verify mobile styles still present: `grep "max-width: 768px" src/components/ui/results-dashboard.ts`
  </verify>
  <done>
- results-dashboard.ts contains @media (min-width: 1440px) with enhanced spacing
- results-dashboard.ts contains @media (min-width: 1920px) with 6-column stats grid and max-width
- results-dashboard.ts contains @media (min-width: 2560px) with stricter content constraints
- All existing mobile styles (768px, 480px) remain intact
- Build passes without errors
  </done>
</task>

<task type="auto">
  <name>Task 2: Add container query support for chart sections</name>
  <files>src/components/ui/results-dashboard.ts</files>
  <action>
Add container query support to enable chart components to respond to their container size. In the styles getter, add container-type to chart sections.

**Add to existing .chart-section rule (near line 470):**
```css
.chart-section {
  /* Add container query context for child components */
  container-type: inline-size;
  container-name: chart-section;
}
```

**Add new container query block after the ultrawide media query:**
```css
/* Container queries for chart responsiveness based on container (not viewport) */
@container chart-section (width >= 600px) {
  .chart-container {
    min-height: 380px;
  }
}

@container chart-section (width >= 900px) {
  .chart-container {
    min-height: 450px;
  }
}
```

**WHY container queries:**
- Charts appear in different layout contexts (full-width, half-width in comparison grid, etc.)
- Container queries let chart height adapt to actual available space, not viewport
- 97%+ browser support (Chrome 105+, Safari 16+, Firefox 110+) per research
- Using inline-size containment (not size) to avoid height containment issues
  </action>
  <verify>
1. Run: `npm run build` - should complete without errors
2. Search for container query: `grep "container-type\|@container" src/components/ui/results-dashboard.ts`
  </verify>
  <done>
- .chart-section has container-type: inline-size and container-name: chart-section
- Container query rules exist for 600px and 900px container widths
- Build passes without errors
  </done>
</task>

</tasks>

<verification>
1. `npm run build` completes successfully
2. All three widescreen media queries present (1440px, 1920px, 2560px)
3. Container queries present for chart sections
4. Mobile media queries (768px, 480px) unchanged
5. Dev server shows no console errors
</verification>

<success_criteria>
- @media (min-width: 1440px) adds fluid spacing and taller charts
- @media (min-width: 1920px) adds 6-column stats grid, 3-column comparison grid, max-width
- @media (min-width: 2560px) adds strict content constraints
- Container queries enable chart height adaptation
- All mobile styles preserved (no regression)
- Build passes
</success_criteria>

<output>
After completion, create `.planning/phases/31-widescreen-dashboard-optimization/31-02-SUMMARY.md`
</output>
