---
phase: 11-complete-results-dashboard
plan: 05
type: execute
wave: 1
depends_on: ["11-03"]
files_modified:
  - src/components/ui/key-metrics-banner.ts
  - src/components/ui/param-summary.ts
  - src/components/ui/results-dashboard.ts
  - src/components/ui/index.ts
autonomous: true

must_haves:
  truths:
    - "Key metrics banner displays 3 hero cards at top of results"
    - "Parameter summary shows simulation input values"
    - "Cards show Strategy Success, Portfolio Growth, Leverage Safety"
  artifacts:
    - path: "src/components/ui/key-metrics-banner.ts"
      provides: "KeyMetricsBanner web component"
      contains: "Strategy Success"
    - path: "src/components/ui/param-summary.ts"
      provides: "ParamSummary web component"
      contains: "Starting Portfolio"
---

<objective>
Add executive summary banner to results dashboard with key metrics cards and parameter summary.

Purpose: Provide at-a-glance view of simulation results matching reference application.
Output: Hero section with 3 metric cards and input parameter recap.
</objective>

<context>
@.planning/PROJECT.md
@.planning/phases/11-complete-results-dashboard/GAPS-PLAN.md
@references/screenshots-ui/MonteCarlo-result-panel-1.png

Reference shows 3 hero cards:
1. Strategy Success - BBD success rate, vs Sell comparison, probability of success
2. Portfolio Growth - CAGR, starting value, terminal value, vs Sell
3. Leverage Safety - Margin call probability, peak utilization, safety buffer

Plus parameter summary showing all simulation inputs.
</context>

<tasks>
- task: "Create KeyMetricsBanner component"
  file: "src/components/ui/key-metrics-banner.ts"
  action: "create"
  details: |
    Web component with 3 hero cards in a grid:

    Card 1 - Strategy Success:
    - Large BBD success rate percentage
    - "PROBABILITY OF SUCCESS" label
    - vs Sell Assets comparison
    - Sell Success Rate
    - Median Utilization
    - Years Above 70%

    Card 2 - Portfolio Growth:
    - Large CAGR percentage
    - "COMPOUND ANNUAL GROWTH RATE" label
    - Starting Value
    - Median Terminal
    - vs Sell Assets (+ difference %)
    - Sell Terminal
    - P10 outcome

    Card 3 - Leverage Safety:
    - Large margin call probability
    - "MARGIN CALL PROBABILITY" label
    - Peak Utilization (P90)
    - Safety Buffer (P10)
    - Median Utilization
    - Years Above 70%
    - Most dangerous year

    Props: data object with all metrics
    Style: Card grid with subtle shadows, teal accents

- task: "Create ParamSummary component"
  file: "src/components/ui/param-summary.ts"
  action: "create"
  details: |
    Web component showing simulation parameters:
    - Starting Portfolio (currency)
    - Time Horizon (years)
    - Annual Withdrawal (currency)
    - Withdrawal Growth (%)
    - SBLOC Interest Rate (%)
    - Max Borrowing (%)
    - Maintenance Margin (%)
    - Simulations Run (count)

    Layout: 2-column grid with label/value pairs
    Style: Subtle background, left border accent

- task: "Integrate into results-dashboard"
  file: "src/components/ui/results-dashboard.ts"
  action: "modify"
  details: |
    Add at top of dashboard grid (before charts):
    1. key-metrics-banner component
    2. param-summary component

    Pass data from simulation output and config.
    Show only when simulation data exists.

- task: "Export new components"
  file: "src/components/ui/index.ts"
  action: "modify"
  details: |
    Add exports for KeyMetricsBanner and ParamSummary
</tasks>

<verification>
After completion:
- [ ] `npm run build` succeeds
- [ ] Key metrics banner displays 3 cards
- [ ] Parameter summary shows all 8 input values
- [ ] Cards show correct data from simulation
- [ ] Mobile responsive (stacks on small screens)
</verification>
