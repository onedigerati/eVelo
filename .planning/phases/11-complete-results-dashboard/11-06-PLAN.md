---
phase: 11-complete-results-dashboard
plan: 06
type: execute
wave: 1
depends_on: ["11-03"]
files_modified:
  - src/components/ui/percentile-spectrum.ts
  - src/components/ui/results-dashboard.ts
  - src/components/ui/index.ts
autonomous: true

must_haves:
  truths:
    - "Terminal net worth spectrum shows P10/P50/P90 as visual bar"
    - "Total debt spectrum shows loan balance percentiles"
    - "Color coding: red (P10), teal (P50), green (P90)"
  artifacts:
    - path: "src/components/ui/percentile-spectrum.ts"
      provides: "PercentileSpectrum reusable component"
      contains: "percentile-spectrum"
---

<objective>
Add percentile spectrum visualizations showing P10/P50/P90 as horizontal bars.

Purpose: Visual representation of outcome ranges matching reference application.
Output: Reusable spectrum component used for net worth and debt displays.
</objective>

<context>
@.planning/PROJECT.md
@.planning/phases/11-complete-results-dashboard/GAPS-PLAN.md
@references/screenshots-ui/MonteCarlo-result-panel-2.png

Reference shows:
- "TERMINAL NET WORTH DISTRIBUTION" with P10/P50/P90 as colored boxes on gradient bar
- "TOTAL DEBT BY END OF PERIOD" with similar visualization
- Labels: "10TH PERCENTILE (WORST CASE)", "MEDIAN (50TH PERCENTILE)", "90TH PERCENTILE (BEST CASE)"
</context>

<tasks>
- task: "Create PercentileSpectrum component"
  file: "src/components/ui/percentile-spectrum.ts"
  action: "create"
  details: |
    Reusable web component for percentile visualization:

    Props:
    - title: string (e.g., "TERMINAL NET WORTH DISTRIBUTION")
    - p10: number
    - p50: number
    - p90: number
    - formatter: 'currency' | 'percent' (default currency)

    Layout:
    - Title at top
    - Horizontal bar with gradient (red -> yellow -> green)
    - Three value boxes positioned along the bar:
      - P10 on left with red/coral background
      - P50 in center with teal/blue outline (larger, emphasized)
      - P90 on right with green background
    - Labels below: "10TH PERCENTILE (WORST CASE)", etc.

    Styling:
    - Responsive width
    - Value boxes with rounded corners
    - Clear contrast between values and background

- task: "Add Terminal Net Worth Spectrum to dashboard"
  file: "src/components/ui/results-dashboard.ts"
  action: "modify"
  details: |
    Add section after key metrics:
    <percentile-spectrum
      title="TERMINAL NET WORTH DISTRIBUTION"
      .p10="${terminalP10}"
      .p50="${terminalP50}"
      .p90="${terminalP90}"
      formatter="currency">
    </percentile-spectrum>

    Calculate p10/p50/p90 from terminalValues or statistics.

- task: "Add Total Debt Spectrum to dashboard"
  file: "src/components/ui/results-dashboard.ts"
  action: "modify"
  details: |
    Add section (only when SBLOC data exists):
    <percentile-spectrum
      title="TOTAL DEBT BY END OF PERIOD"
      .p10="${debtP10}"
      .p50="${debtP50}"
      .p90="${debtP90}"
      formatter="currency">
    </percentile-spectrum>

    Add explanation text below:
    "Understanding your debt accumulation..."

    Get data from sblocTrajectory.loanBalance percentiles.

- task: "Export component"
  file: "src/components/ui/index.ts"
  action: "modify"
  details: |
    Add export for PercentileSpectrum
</tasks>

<verification>
After completion:
- [ ] `npm run build` succeeds
- [ ] Terminal net worth spectrum displays with correct values
- [ ] Total debt spectrum displays when SBLOC data present
- [ ] Colors match reference (red/teal/green)
- [ ] Responsive on mobile
</verification>
