---
phase: 21-header-redesign
plan: 02
type: execute
wave: 2
depends_on: ["21-01"]
files_modified:
  - src/components/app-root.ts
  - src/components/ui/main-layout.ts
autonomous: false

must_haves:
  truths:
    - "Header displays branded eVelo wordmark with tagline"
    - "User Guide and Settings buttons appear in header"
    - "Mobile hamburger menu functions correctly"
    - "Theme toggle affects header colors appropriately"
    - "Header is visually polished and professional"
  artifacts:
    - path: "src/components/app-root.ts"
      provides: "Updated app-root using app-header component"
      contains: "<app-header"
  key_links:
    - from: "src/components/app-root.ts"
      to: "src/components/ui/app-header.ts"
      via: "uses app-header element"
      pattern: "<app-header"
---

<objective>
Integrate the new app-header component into the application and refine main-layout styling for seamless header experience.

Purpose: Replace the current minimal header with the branded app-header component, ensuring buttons are properly slotted, mobile menu functions correctly, and the overall header presentation is polished.

Output: Updated app-root.ts using app-header, refined main-layout header area styling, working integration with theme toggle and mobile menu.
</objective>

<execution_context>
@C:\Users\ungac\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\ungac\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/21-header-redesign/21-RESEARCH.md
@.planning/phases/21-header-redesign/21-01-SUMMARY.md
@src/components/app-root.ts
@src/components/ui/main-layout.ts
@src/components/ui/app-header.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Update app-root.ts to use app-header</name>
  <files>src/components/app-root.ts</files>
  <action>
Replace the current header slot content with the new app-header component.

**Current code (lines 426-443):**
```html
<div slot="header" class="header-content">
  <h1>eVelo Portfolio Simulator</h1>
  <div class="header-buttons">
    <button id="btn-guide" ...>...</button>
    <button id="btn-settings" ...>...</button>
  </div>
</div>
```

**New code:**
```html
<app-header slot="header">
  <div slot="actions" class="header-buttons">
    <button id="btn-guide" class="header-btn" aria-label="User Guide" title="User Guide">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="10"></circle>
        <path d="M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"></path>
        <line x1="12" y1="17" x2="12.01" y2="17"></line>
      </svg>
    </button>
    <button id="btn-settings" class="header-btn" aria-label="Settings" title="Settings">
      <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
        <circle cx="12" cy="12" r="3"></circle>
        <path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path>
      </svg>
    </button>
  </div>
</app-header>
```

**Update styles section:**
Remove the `.header-content` and `.header-content h1` CSS rules (no longer needed).

Keep the `.header-buttons` and `.header-btn` styles but update `.header-btn` for light-on-dark:
```css
.header-btn {
  background: transparent;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
  padding: var(--spacing-xs, 4px);
  border-radius: var(--radius-sm, 4px);
  color: var(--text-inverse, #ffffff); /* Changed from text-secondary */
  display: flex;
  align-items: center;
  justify-content: center;
  transition: background 0.2s, color 0.2s;
}

.header-btn:hover {
  background: rgba(255, 255, 255, 0.15); /* Light hover on dark background */
}

.header-btn:focus-visible {
  outline: 2px solid var(--text-inverse, #ffffff);
  outline-offset: 2px;
}
```
  </action>
  <verify>
Run `npx tsc --noEmit` - no TypeScript errors
Visually: Branded header appears with teal background, wordmark, tagline, and action buttons
  </verify>
  <done>app-root.ts uses app-header component with slotted action buttons</done>
</task>

<task type="auto">
  <name>Task 2: Refine main-layout header styling</name>
  <files>src/components/ui/main-layout.ts</files>
  <action>
Update the `.main-header` styling in main-layout.ts to work seamlessly with the new branded header.

**Changes to `.main-header` CSS:**
1. Remove background color (app-header provides its own)
2. Remove bottom border (app-header is self-contained)
3. Keep the flex alignment and mobile menu button

**Updated CSS:**
```css
.main-header {
  display: flex;
  align-items: center;
  gap: var(--spacing-md, 16px);
  /* Remove: padding, border-bottom, background */
}
```

**Update mobile menu button for dark background:**
```css
.mobile-menu-btn {
  display: none;
  background: transparent;
  border: none;
  font-size: 1.5rem;
  cursor: pointer;
  padding: var(--spacing-sm, 8px); /* Slightly larger touch target */
  color: var(--text-inverse, #ffffff); /* White on teal */
  border-radius: var(--border-radius-sm, 4px);
}

.mobile-menu-btn:hover {
  background: rgba(255, 255, 255, 0.15);
}

.mobile-menu-btn:focus-visible {
  outline: 2px solid var(--text-inverse, #ffffff);
  outline-offset: 2px;
}
```

This allows app-header's background to extend edge-to-edge while mobile menu button integrates visually.
  </action>
  <verify>
Run `npx tsc --noEmit` - no TypeScript errors
Visually: Header spans full width with consistent teal background on mobile
  </verify>
  <done>main-layout header area styled to complement branded app-header</done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Branded header with:
- eVelo wordmark with lightning bolt icon
- Tagline "Tax-Efficient Portfolio Strategy Simulator"
- User Guide and Settings buttons (white on teal)
- Responsive design (tagline hidden on mobile)
- Dark theme support
- Mobile hamburger menu integration
  </what-built>
  <how-to-verify>
1. Open `npm run dev` and view the application at http://localhost:5173
2. Verify header shows:
   - Lightning bolt icon followed by "eVelo" wordmark
   - Tagline below the wordmark
   - Guide (?) and Settings (gear) buttons on the right
   - Teal background with white text
3. Test responsive:
   - Resize browser to < 768px width
   - Confirm tagline disappears on mobile
   - Confirm hamburger menu button appears and opens sidebar
4. Test dark theme:
   - Click Settings button, toggle to dark theme
   - Verify header colors adjust appropriately
5. Test accessibility:
   - Tab through header buttons
   - Confirm focus indicators are visible (white outline)
   - Hover over buttons and verify tooltips appear
  </how-to-verify>
  <resume-signal>Type "approved" if header looks professional and functions correctly, or describe issues to fix</resume-signal>
</task>

</tasks>

<verification>
1. `npx tsc --noEmit` passes without errors
2. `npm run build` completes successfully
3. Header displays branded wordmark, tagline, and action buttons
4. Responsive breakpoint hides tagline on mobile
5. Mobile hamburger menu functions correctly
6. Dark theme support works
7. Keyboard navigation and focus states work
</verification>

<success_criteria>
- app-header component integrated into app-root
- Header displays professional branding with wordmark and tagline
- Action buttons styled for light-on-dark appearance
- Mobile menu button functions correctly
- Responsive behavior verified (tagline hidden < 768px)
- Dark theme support verified
- User confirms visual approval
</success_criteria>

<output>
After completion, create `.planning/phases/21-header-redesign/21-02-SUMMARY.md`
</output>
