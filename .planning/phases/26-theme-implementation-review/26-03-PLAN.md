---
phase: 26-theme-implementation-review
plan: 03
type: execute
wave: 2
depends_on: [26-02]
files_modified:
  - src/components/ui/range-slider.ts
  - src/components/ui/number-input.ts
  - src/components/ui/select-input.ts
  - src/components/ui/checkbox-input.ts
  - src/styles/tokens.css
autonomous: true

must_haves:
  truths:
    - "Disabled form inputs are visually distinguishable in both themes"
    - "Disabled states use theme tokens, not hardcoded colors"
    - "Focus indicators are visible in both light and dark themes"
  artifacts:
    - path: "src/styles/tokens.css"
      provides: "Disabled state tokens"
      contains: "--text-disabled"
    - path: "src/components/ui/range-slider.ts"
      provides: "Themed disabled state"
      contains: ":disabled"
  key_links:
    - from: "src/components/ui/*.ts"
      to: "src/styles/tokens.css"
      via: "CSS custom properties"
      pattern: "var\\(--"
---

<objective>
Add theme-aware disabled state styling and verify focus indicator visibility across all themes

Purpose: Disabled states are often overlooked in theme implementations. Users need visual feedback that an element is disabled, and this feedback must work correctly in both light and dark themes. Additionally, focus indicators must be clearly visible for keyboard navigation accessibility.

Output: All form input components have properly themed disabled states and visible focus indicators in both themes.
</objective>

<execution_context>
@C:\Users\ungac\.claude/get-shit-done/workflows/execute-plan.md
@C:\Users\ungac\.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/26-theme-implementation-review/26-RESEARCH.md
@src/styles/tokens.css
@src/components/ui/range-slider.ts
@src/components/ui/number-input.ts
@src/components/ui/select-input.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add disabled state tokens to tokens.css</name>
  <files>src/styles/tokens.css</files>
  <action>
Add dedicated tokens for disabled states that work in both themes:

**Add to light theme (:root) section:**
```css
/* Disabled states */
--text-disabled: #9ca3af;          /* gray-400 - reduced contrast for disabled */
--surface-disabled: #f3f4f6;       /* gray-100 - slightly grayed background */
--border-disabled: #d1d5db;        /* gray-300 - muted border */
```

**Add to dark theme ([data-theme="dark"]) section:**
```css
/* Disabled states */
--text-disabled: #6b7280;          /* gray-500 - reduced contrast on dark */
--surface-disabled: #1f2937;       /* gray-800 - slightly lighter than surface-primary */
--border-disabled: #4b5563;        /* gray-600 - muted border on dark */
```

**Rationale:**
- Disabled text uses lower contrast intentionally (signals non-interactivity)
- Disabled surfaces are slightly different from primary (visual distinction)
- Colors chosen from gray scale for neutrality
  </action>
  <verify>
Run `npm run build` - tokens.css compiles without syntax errors.
  </verify>
  <done>
Disabled state tokens added to both light and dark theme sections in tokens.css.
  </done>
</task>

<task type="auto">
  <name>Task 2: Add disabled styling to form input components</name>
  <files>
    src/components/ui/range-slider.ts
    src/components/ui/number-input.ts
    src/components/ui/select-input.ts
    src/components/ui/checkbox-input.ts
  </files>
  <action>
Audit and update each form input component to use theme tokens for disabled states.

**For each component, check the styles() method and add/update disabled styling:**

**Pattern to apply:**
```css
/* Disabled state - must use theme tokens */
input:disabled,
select:disabled,
button:disabled {
  background: var(--surface-disabled, #f3f4f6);
  color: var(--text-disabled, #9ca3af);
  border-color: var(--border-disabled, #d1d5db);
  cursor: not-allowed;
  opacity: 0.7;
}
```

**For range-slider.ts:**
- Add disabled styling for the track and thumb
- Thumb should use disabled colors when input is disabled

**For number-input.ts:**
- Style input:disabled with disabled tokens
- Ensure increment/decrement buttons (if any) also show disabled state

**For select-input.ts:**
- Style select:disabled with disabled tokens
- Dropdown arrow should also appear disabled

**For checkbox-input.ts:**
- Style input[type="checkbox"]:disabled
- Associated label should also appear disabled (reduced opacity or disabled text color)

**Focus indicator audit:**
While editing these files, verify focus-visible styling exists and uses theme tokens:
```css
input:focus-visible,
select:focus-visible {
  outline: 2px solid var(--color-primary, #0d9488);
  outline-offset: 2px;
}
```

If any component is missing focus-visible styling, add it.
  </action>
  <verify>
1. Run `npm run build` - all components compile
2. In browser dev tools, temporarily add `disabled` attribute to form inputs
3. Verify disabled inputs have visible muted styling in both themes
4. Verify focus indicators are visible when tabbing through form elements
  </verify>
  <done>
All form input components have theme-aware disabled states using new tokens. Focus indicators verified visible in both themes.
  </done>
</task>

</tasks>

<verification>
1. `npm run build` completes without errors
2. tokens.css has --text-disabled, --surface-disabled, --border-disabled in both themes
3. Form inputs show appropriate disabled styling when disabled attribute is set
4. Disabled styling adapts correctly when theme is toggled
5. Focus rings are visible in both light and dark themes
</verification>

<success_criteria>
- [ ] Disabled state tokens added to tokens.css (light and dark)
- [ ] range-slider.ts has themed :disabled styling
- [ ] number-input.ts has themed :disabled styling
- [ ] select-input.ts has themed :disabled styling
- [ ] checkbox-input.ts has themed :disabled styling
- [ ] All components have visible focus-visible styling
- [ ] Build passes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/26-theme-implementation-review/26-03-SUMMARY.md`
</output>
