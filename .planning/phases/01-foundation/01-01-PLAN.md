---
phase: 01-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - package.json
  - tsconfig.json
  - vite.config.ts
  - index.html
  - src/main.ts
  - src/style.css
  - .gitignore
autonomous: true

must_haves:
  truths:
    - "npm run dev starts development server with hot reload"
    - "npm run build produces output without errors"
    - "Browser shows content from index.html at localhost"
  artifacts:
    - path: "package.json"
      provides: "Project dependencies and scripts"
      contains: "vite"
    - path: "tsconfig.json"
      provides: "TypeScript configuration"
      contains: "strict"
    - path: "vite.config.ts"
      provides: "Vite build configuration"
      contains: "vite-plugin-singlefile"
    - path: "index.html"
      provides: "Entry point HTML"
      contains: "src/main.ts"
    - path: "src/main.ts"
      provides: "Application entry point"
      min_lines: 5
  key_links:
    - from: "index.html"
      to: "src/main.ts"
      via: "script module import"
      pattern: "src/main.ts"
    - from: "vite.config.ts"
      to: "vite-plugin-singlefile"
      via: "plugin import"
      pattern: "viteSingleFile"
---

<objective>
Initialize Vite + TypeScript project with single-file export capability.

Purpose: Establish the build system foundation that all subsequent phases depend on.
Output: Working development environment with hot reload and production build.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md

Key decisions from STATE.md:
- Vite + vite-plugin-singlefile for build
- TypeScript strict mode
- Web Components architecture (no framework)
</context>

<tasks>

<task type="auto">
  <name>Task 1: Initialize Vite TypeScript project</name>
  <files>package.json, tsconfig.json, vite.config.ts, index.html, src/main.ts, src/style.css, .gitignore</files>
  <action>
  Create Vite project manually (not via create-vite to avoid unnecessary template files):

  1. Create package.json with:
     - name: "evelo"
     - type: "module"
     - scripts: dev, build, preview
     - devDependencies: vite, typescript, vite-plugin-singlefile

  2. Create tsconfig.json with:
     - target: "ES2022"
     - module: "ESNext"
     - moduleResolution: "bundler"
     - strict: true
     - noEmit: true (Vite handles emit)
     - lib: ["ES2022", "DOM", "DOM.Iterable"]
     - include: ["src"]

  3. Create vite.config.ts with:
     - viteSingleFile plugin imported and configured
     - build.target: "esnext"
     - build.minify: true

  4. Create index.html:
     - DOCTYPE html with lang="en"
     - Meta charset UTF-8, viewport for responsive
     - Title: "eVelo - Portfolio Strategy Simulator"
     - Link to /src/style.css
     - Script type="module" src="/src/main.ts"
     - Body with id="app" div

  5. Create src/main.ts:
     - Console log for startup
     - Import './style.css'
     - Basic DOM manipulation to show app running

  6. Create src/style.css:
     - CSS reset (box-sizing, margin, padding)
     - Root font-family (system fonts)
     - Basic body styling

  7. Create .gitignore:
     - node_modules
     - dist
     - *.local
  </action>
  <verify>Files exist: package.json, tsconfig.json, vite.config.ts, index.html, src/main.ts, src/style.css</verify>
  <done>Project structure created with all configuration files</done>
</task>

<task type="auto">
  <name>Task 2: Install dependencies and verify build</name>
  <files>package-lock.json, node_modules/</files>
  <action>
  1. Run `npm install` to install dependencies
  2. Run `npm run build` to verify production build works
  3. Check dist/ folder contains output files
  4. Run `npm run dev` briefly to verify dev server starts (can kill after confirming)

  If any errors, fix configuration before proceeding.
  </action>
  <verify>
  - npm install completes without errors
  - npm run build produces dist/index.html
  - npm run dev starts server on localhost
  </verify>
  <done>Dependencies installed, build and dev server both work</done>
</task>

</tasks>

<verification>
Before declaring plan complete:
- [ ] `npm run build` succeeds without TypeScript errors
- [ ] `npm run dev` starts server on localhost (default port 5173)
- [ ] Browser loads page and shows startup message
- [ ] dist/index.html exists after build
</verification>

<success_criteria>

- All tasks completed
- All verification checks pass
- Development server runs with hot reload
- Production build produces single-file output
</success_criteria>

<output>
After completion, create `.planning/phases/01-foundation/01-01-SUMMARY.md`
</output>
